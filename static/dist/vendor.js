require=function r(n,a,o){function s(e,t){if(!a[e]){if(!n[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(u)return u(e,!0);throw(i=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",i}i=a[e]={exports:{}},n[e][0].call(i.exports,function(t){return s(n[e][1][t]||t)},i,i.exports,r,n,a,o)}return a[e].exports}for(var u="function"==typeof require&&require,t=0;t<o.length;t++)s(o[t]);return s}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/display"),f=t("@pixi/utils"),n=t("@pixi/core"),t={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};r.DisplayObject.mixin(t);var a=100,n=(Object.defineProperty(o.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),o.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},o.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},o.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null!==(t=this.renderer.view.parentNode)&&void 0!==t&&t.appendChild(this.div))},o.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null!==(t=this.div.parentNode)&&void 0!==t&&t.removeChild(this.div))},o.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},o.prototype.update=function(){var t=performance.now();if(!(f.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,r=e.top,n=e.width,a=e.height,o=this.renderer,t=o.width,e=o.height,o=o.resolution,s=n/t*o,u=a/e*o;(l=this.div).style.left=i+"px",l.style.top=r+"px",l.style.width=t+"px",l.style.height=e+"px";for(var h=0;h<this.children.length;h++){var l,c,p,d=this.children[h];d.renderId!==this.renderId?(d._accessibleActive=!1,f.removeItems(this.children,h,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,h--):(l=d._accessibleDiv,c=d.hitArea,p=d.worldTransform,d.hitArea?(l.style.left=(p.tx+c.x*p.a)*s+"px",l.style.top=(p.ty+c.y*p.d)*u+"px",l.style.width=c.width*p.a*s+"px",l.style.height=c.height*p.d*u+"px"):(c=d.getBounds(),this.capHitArea(c),l.style.left=c.x*s+"px",l.style.top=c.y*u+"px",l.style.width=c.width*s+"px",l.style.height=c.height*u+"px",l.title!==d.accessibleTitle&&null!==d.accessibleTitle&&(l.title=d.accessibleTitle),l.getAttribute("aria-label")!==d.accessibleHint&&null!==d.accessibleHint&&l.setAttribute("aria-label",d.accessibleHint)),d.accessibleTitle===l.title&&d.tabIndex===l.tabIndex||(l.title=d.accessibleTitle,l.tabIndex=d.tabIndex,this.debug&&this.updateDebugHTML(l)))}this.renderId++}},o.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},o.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,e=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>e&&(t.height=e-t.y)},o.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=a+"px",e.style.height=a+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},o.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,t=e.eventData;e.dispatchEvent(i,"click",t),e.dispatchEvent(i,"pointertap",t),e.dispatchEvent(i,"tap",t)},o.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,t=e.eventData;e.dispatchEvent(i,"mouseover",t)},o.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,t=e.eventData;e.dispatchEvent(i,"mouseout",t)},o.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},o.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},o.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},o.extension={name:"accessibility",type:[n.ExtensionType.RendererPlugin,n.ExtensionType.CanvasRendererPlugin]},o);function o(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(f.isMobile.tablet||f.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=a+"px",e.style.height=a+"px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}i.AccessibilityManager=n,i.accessibleTarget=t},{"@pixi/core":5,"@pixi/display":6,"@pixi/utils":36}],2:[function(Et,t,St){!function(Tt){!function(){"use strict";function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(St,"__esModule",{value:!0});var t,e,i,r,n,a,o,s,u,h,l,c,p,d,f,m,v,g,_,y=Et("@pixi/core"),x=Et("@pixi/display"),b=(T.init=function(t){var i=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),(this._resizeTo=t)&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){i._resizeTo&&(i.cancelResize(),i._resizeId=requestAnimationFrame(function(){return i.resize()}))},this.cancelResize=function(){i._resizeId&&(cancelAnimationFrame(i._resizeId),i._resizeId=null)},this.resize=function(){var t,e;i._resizeTo&&(i.cancelResize(),e=i._resizeTo===globalThis.window?(t=globalThis.innerWidth,globalThis.innerHeight):(t=(e=i._resizeTo).clientWidth,e.clientHeight),i.renderer.resize(t,e))},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},T.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},T.extension=y.ExtensionType.Application,T);function T(){}(t=t=t||{})[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",(e=e=e||{})[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",(i=i=i||{})[i.COLOR=16384]="COLOR",i[i.DEPTH=256]="DEPTH",i[i.STENCIL=1024]="STENCIL",(r=r=r||{})[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",(n=n=n||{})[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",(a=a=a||{})[a.RGBA=6408]="RGBA",a[a.RGB=6407]="RGB",a[a.RG=33319]="RG",a[a.RED=6403]="RED",a[a.RGBA_INTEGER=36249]="RGBA_INTEGER",a[a.RGB_INTEGER=36248]="RGB_INTEGER",a[a.RG_INTEGER=33320]="RG_INTEGER",a[a.RED_INTEGER=36244]="RED_INTEGER",a[a.ALPHA=6406]="ALPHA",a[a.LUMINANCE=6409]="LUMINANCE",a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(o=o=o||{})[o.TEXTURE_2D=3553]="TEXTURE_2D",o[o.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",o[o.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",o[o.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",o[o.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",o[o.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",o[o.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",o[o.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(s=s=s||{})[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT",(c=c=c||{})[c.FLOAT=0]="FLOAT",c[c.INT=1]="INT",c[c.UINT=2]="UINT",(c=u=u||{})[c.NEAREST=0]="NEAREST",c[c.LINEAR=1]="LINEAR",(c=h=h||{})[c.CLAMP=33071]="CLAMP",c[c.REPEAT=10497]="REPEAT",c[c.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(c=l=l||{})[c.OFF=0]="OFF",c[c.POW2=1]="POW2",c[c.ON=2]="ON",c[c.ON_MANUAL=3]="ON_MANUAL",(p=p=p||{})[p.NPM=0]="NPM",p[p.UNPACK=1]="UNPACK",p[p.PMA=2]="PMA",p[p.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",p[p.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",p[p.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",p[p.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(m=m=m||{})[m.NO=0]="NO",m[m.YES=1]="YES",m[m.AUTO=2]="AUTO",m[m.BLEND=0]="BLEND",m[m.CLEAR=1]="CLEAR",m[m.BLIT=2]="BLIT",(m=d=d||{})[m.AUTO=0]="AUTO",m[m.MANUAL=1]="MANUAL",(m=f=f||{}).LOW="lowp",m.MEDIUM="mediump",m.HIGH="highp",(v=v=v||{})[v.NONE=0]="NONE",v[v.SCISSOR=1]="SCISSOR",v[v.STENCIL=2]="STENCIL",v[v.SPRITE=3]="SPRITE",v[v.COLOR=4]="COLOR",(_=_=_||{})[_.RED=1]="RED",_[_.GREEN=2]="GREEN",_[_.BLUE=4]="BLUE",_[_.ALPHA=8]="ALPHA",(_=g=g||{})[_.NONE=0]="NONE",_[_.LOW=2]="LOW",_[_.MEDIUM=4]="MEDIUM",_[_.HIGH=8]="HIGH",(S=S=S||{})[S.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",S[S.ARRAY_BUFFER=34962]="ARRAY_BUFFER",S[S.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";var E,S={createCanvas:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:(E=function(t,e){return fetch(t,e)},M.toString=function(){return E.toString()},M)};function M(t,e){return E.apply(this,arguments)}function A(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var w=/iPhone/i,D=/iPod/i,O=/iPad/i,P=/\biOS-universal(?:.+)Mac\b/i,C=/\bAndroid(?:.+)Mobile\b/i,I=/Android/i,L=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,N=/Silk/i,F=/Windows Phone/i,B=/\bWindows(?:.+)ARM\b/i,U=/BlackBerry/i,G=/BB10/i,k=/Opera Mini/i,z=/\b(CriOS|Chrome)(?:.+)Mobile/i,j=/Mobile(?:.+)Firefox\b/i;var H=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i,r=e.userAgent;return void 0!==(t=(r=void 0!==(t=r.split("[FBAN"))[1]?t[0]:r).split("Twitter"))[1]&&(r=t[0]),(r={apple:{phone:(r=(i=r,function(t){return t.test(i)}))(w)&&!r(F),ipod:r(D),tablet:!r(w)&&(r(O)||A(e))&&!r(F),universal:r(P),device:(r(w)||r(D)||r(O)||r(P)||A(e))&&!r(F)},amazon:{phone:r(L),tablet:!r(L)&&r(N),device:r(L)||r(N)},android:{phone:!r(F)&&r(L)||!r(F)&&r(C),tablet:!r(F)&&!r(L)&&!r(C)&&(r(N)||r(I)),device:!r(F)&&(r(L)||r(N)||r(C)||r(I))||r(/\bokhttp\b/i)},windows:{phone:r(F),tablet:r(B),device:r(F)||r(B)},other:{blackberry:r(U),blackberry10:r(G),opera:r(k),firefox:r(j),chrome:r(z),device:r(U)||r(G)||r(k)||r(j)||r(z)},any:!1,phone:!1,tablet:!1}).any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}(globalThis.navigator);var V,X,W,Y={ADAPTER:S,MIPMAP_TEXTURES:l.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:g.NONE,SPRITE_MAX_TEXTURES:(V=32,W=!0,(H.tablet||H.phone)&&(H.apple.device&&(X=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(X[1],10)<11&&(W=!1),H.android.device&&(X=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(X[1],10)<7&&(W=!1)),W?V:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:d.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:h.CLAMP,SCALE_MODE:u.LINEAR,PRECISION_VERTEX:f.HIGH,PRECISION_FRAGMENT:H.apple.device?f.HIGH:f.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!H.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==Tt?Tt:"undefined"!=typeof self?self:{};function Z(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}Z(function(t){var r=Object.prototype.hasOwnProperty,f="~";function i(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function n(t,e,i,r,n){if("function"!=typeof i)throw new TypeError("The listener must be a function");n=new a(i,r||t,n),e=f?f+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],n]:t._events[e].push(n):(t._events[e]=n,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function e(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(f=!1)),e.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},e.prototype.listeners=function(t){var t=f?f+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,r=e.length,n=new Array(r);i<r;i++)n[i]=e[i].fn;return n},e.prototype.listenerCount=function(t){t=f?f+t:t,t=this._events[t];return t?t.fn?1:t.length:0},e.prototype.emit=function(t,e,i,r,n,a){var o=arguments,s=f?f+t:t;if(!this._events[s])return!1;var u,h=this._events[s],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,r),!0;case 5:return h.fn.call(h.context,e,i,r,n),!0;case 6:return h.fn.call(h.context,e,i,r,n,a),!0}for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=o[d];h.fn.apply(h.context,u)}else for(var c,p=h.length,d=0;d<p;d++)switch(h[d].once&&this.removeListener(t,h[d].fn,void 0,!0),l){case 1:h[d].fn.call(h[d].context);break;case 2:h[d].fn.call(h[d].context,e);break;case 3:h[d].fn.call(h[d].context,e,i);break;case 4:h[d].fn.call(h[d].context,e,i,r);break;default:if(!u)for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=o[c];h[d].fn.apply(h[d].context,u)}return!0},e.prototype.on=function(t,e,i){return n(this,t,e,i,!1)},e.prototype.once=function(t,e,i){return n(this,t,e,i,!0)},e.prototype.removeListener=function(t,e,i,r){t=f?f+t:t;if(!this._events[t])return this;if(!e)return u(this,t),this;var n=this._events[t];if(n.fn)n.fn!==e||r&&!n.once||i&&n.context!==i||u(this,t);else{for(var a=0,o=[],s=n.length;a<s;a++)(n[a].fn!==e||r&&!n[a].once||i&&n[a].context!==i)&&o.push(n[a]);o.length?this._events[t]=1===o.length?o[0]:o:u(this,t)}return this},e.prototype.removeAllListeners=function(t){return t?(t=f?f+t:t,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},e.prototype.off=e.prototype.removeListener,e.prototype.addListener=e.prototype.on,e.prefixed=f,t.exports=e.EventEmitter=e}),Z(function(w,D){!function(t){var e=D&&!D.nodeType&&D,i=w&&!w.nodeType&&w,r="object"==R(q)&&q;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var n,a,v=2147483647,g=36,_=26,o=38,s=700,u=/^xn--/,h=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=g-1,y=Math.floor,x=String.fromCharCode;function b(t){throw RangeError(c[t])}function d(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function f(t,e){var i=t.split("@"),r="";return 1<i.length&&(r=i[0]+"@",t=i[1]),r+d((t=t.replace(l,".")).split("."),e).join(".")}function T(t){for(var e,i,r=[],n=0,a=t.length;n<a;)55296<=(e=t.charCodeAt(n++))&&e<=56319&&n<a?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function m(t){return d(t,function(t){var e="";return 65535<t&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,i){var r=0;for(t=i?y(t/s):t>>1,t+=y(t/e);p*_>>1<t;r+=g)t=y(t/p);return y(r+(p+1)*t/(t+o))}function M(t){var e,i,r,n,a,o,s,u=[],h=t.length,l=0,c=128,p=72,d=t.lastIndexOf("-");for(d<0&&(d=0),i=0;i<d;++i)128<=t.charCodeAt(i)&&b("not-basic"),u.push(t.charCodeAt(i));for(r=0<d?d+1:0;r<h;){for(n=l,a=1,o=g;h<=r&&b("invalid-input"),s=t.charCodeAt(r++),(g<=(s=s-48<10?s-22:s-65<26?s-65:s-97<26?s-97:g)||s>y((v-l)/a))&&b("overflow"),l+=s*a,!(s<(s=o<=p?1:p+_<=o?_:o-p));o+=g)a>y(v/(s=g-s))&&b("overflow"),a*=s;p=S(l-n,e=u.length+1,0==n),y(l/e)>v-c&&b("overflow"),c+=y(l/e),l%=e,u.splice(l++,0,c)}return m(u)}function A(t){for(var e,i,r,n,a,o,s,u,h,l,c=[],p=(t=T(t)).length,d=128,f=72,m=e=0;m<p;++m)(s=t[m])<128&&c.push(x(s));for(i=r=c.length,r&&c.push("-");i<p;){for(n=v,m=0;m<p;++m)d<=(s=t[m])&&s<n&&(n=s);for(n-d>y((v-e)/(u=i+1))&&b("overflow"),e+=(n-d)*u,d=n,m=0;m<p;++m)if((s=t[m])<d&&++e>v&&b("overflow"),s==d){for(a=e,o=g;!(a<(h=o<=f?1:f+_<=o?_:o-f));o+=g)c.push(x(E(h+(l=a-h)%(h=g-h),0))),a=y(l/h);c.push(x(E(a,0))),f=S(e,u,i==r),e=0,++i}++e,++d}return c.join("")}if(n={version:"1.3.2",ucs2:{decode:T,encode:m},decode:M,encode:A,toASCII:function(t){return f(t,function(t){return h.test(t)?"xn--"+A(t):t})},toUnicode:function(t){return f(t,function(t){return u.test(t)?M(t.slice(4).toLowerCase()):t})}},e&&i)if(w.exports==e)i.exports=n;else for(a in n)n.hasOwnProperty(a)&&(e[a]=n[a]);else t.punycode=n}(q)});function J(t,e,i,r){i=i||"=";var n={};if("string"!=typeof t||0===t.length)return n;var a=/\+/g;t=t.split(e=e||"&"),e=1e3,r&&"number"==typeof r.maxKeys&&(e=r.maxKeys);var o=t.length;0<e&&e<o&&(o=e);for(var s=0;s<o;++s){var u,h=t[s].replace(a,"%20"),l=h.indexOf(i),l=0<=l?(u=h.substr(0,l),h.substr(l+1)):(u=h,""),h=decodeURIComponent(u),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(n,h)?Array.isArray(n[h])?n[h].push(l):n[h]=[n[h],l]:n[h]=l}return n}function K(t){switch(R(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function Q(i,r,n,t){return r=r||"&",n=n||"=","object"===R(i=null===i?void 0:i)?Object.keys(i).map(function(t){var e=encodeURIComponent(K(t))+n;return Array.isArray(i[t])?i[t].map(function(t){return e+encodeURIComponent(K(t))}).join(r):e+encodeURIComponent(K(i[t]))}).join(r):t?encodeURIComponent(K(t))+n+encodeURIComponent(K(i)):""}var $,tt,et,it,rt,nt,at,ot,st,ut,ht,lt,ct,pt,dt,ft,mt,vt,gt;Z(function(t,e){e.decode=e.parse=J,e.encode=e.stringify=Q}),($=$=$||{})[$.WEBGL_LEGACY=0]="WEBGL_LEGACY",$[$.WEBGL=1]="WEBGL",$[$.WEBGL2=2]="WEBGL2",(tt=tt=tt||{})[tt.UNKNOWN=0]="UNKNOWN",tt[tt.WEBGL=1]="WEBGL",tt[tt.CANVAS=2]="CANVAS",(it=it=it||{})[it.COLOR=16384]="COLOR",it[it.DEPTH=256]="DEPTH",it[it.STENCIL=1024]="STENCIL",(it=et=et||{})[it.NORMAL=0]="NORMAL",it[it.ADD=1]="ADD",it[it.MULTIPLY=2]="MULTIPLY",it[it.SCREEN=3]="SCREEN",it[it.OVERLAY=4]="OVERLAY",it[it.DARKEN=5]="DARKEN",it[it.LIGHTEN=6]="LIGHTEN",it[it.COLOR_DODGE=7]="COLOR_DODGE",it[it.COLOR_BURN=8]="COLOR_BURN",it[it.HARD_LIGHT=9]="HARD_LIGHT",it[it.SOFT_LIGHT=10]="SOFT_LIGHT",it[it.DIFFERENCE=11]="DIFFERENCE",it[it.EXCLUSION=12]="EXCLUSION",it[it.HUE=13]="HUE",it[it.SATURATION=14]="SATURATION",it[it.COLOR=15]="COLOR",it[it.LUMINOSITY=16]="LUMINOSITY",it[it.NORMAL_NPM=17]="NORMAL_NPM",it[it.ADD_NPM=18]="ADD_NPM",it[it.SCREEN_NPM=19]="SCREEN_NPM",it[it.NONE=20]="NONE",it[it.SRC_OVER=0]="SRC_OVER",it[it.SRC_IN=21]="SRC_IN",it[it.SRC_OUT=22]="SRC_OUT",it[it.SRC_ATOP=23]="SRC_ATOP",it[it.DST_OVER=24]="DST_OVER",it[it.DST_IN=25]="DST_IN",it[it.DST_OUT=26]="DST_OUT",it[it.DST_ATOP=27]="DST_ATOP",it[it.ERASE=26]="ERASE",it[it.SUBTRACT=28]="SUBTRACT",it[it.XOR=29]="XOR",(rt=rt=rt||{})[rt.POINTS=0]="POINTS",rt[rt.LINES=1]="LINES",rt[rt.LINE_LOOP=2]="LINE_LOOP",rt[rt.LINE_STRIP=3]="LINE_STRIP",rt[rt.TRIANGLES=4]="TRIANGLES",rt[rt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",rt[rt.TRIANGLE_FAN=6]="TRIANGLE_FAN",(nt=nt=nt||{})[nt.RGBA=6408]="RGBA",nt[nt.RGB=6407]="RGB",nt[nt.RG=33319]="RG",nt[nt.RED=6403]="RED",nt[nt.RGBA_INTEGER=36249]="RGBA_INTEGER",nt[nt.RGB_INTEGER=36248]="RGB_INTEGER",nt[nt.RG_INTEGER=33320]="RG_INTEGER",nt[nt.RED_INTEGER=36244]="RED_INTEGER",nt[nt.ALPHA=6406]="ALPHA",nt[nt.LUMINANCE=6409]="LUMINANCE",nt[nt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",nt[nt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",nt[nt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(at=at=at||{})[at.TEXTURE_2D=3553]="TEXTURE_2D",at[at.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",at[at.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",at[at.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",at[at.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",at[at.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",at[at.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(ot=ot=ot||{})[ot.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",ot[ot.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",ot[ot.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",ot[ot.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",ot[ot.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",ot[ot.UNSIGNED_INT=5125]="UNSIGNED_INT",ot[ot.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",ot[ot.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",ot[ot.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",ot[ot.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",ot[ot.BYTE=5120]="BYTE",ot[ot.SHORT=5122]="SHORT",ot[ot.INT=5124]="INT",ot[ot.FLOAT=5126]="FLOAT",ot[ot.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",ot[ot.HALF_FLOAT=36193]="HALF_FLOAT",(st=st=st||{})[st.FLOAT=0]="FLOAT",st[st.INT=1]="INT",st[st.UINT=2]="UINT",(ut=ut=ut||{})[ut.NEAREST=0]="NEAREST",ut[ut.LINEAR=1]="LINEAR",(ht=ht=ht||{})[ht.CLAMP=33071]="CLAMP",ht[ht.REPEAT=10497]="REPEAT",ht[ht.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(lt=lt=lt||{})[lt.OFF=0]="OFF",lt[lt.POW2=1]="POW2",lt[lt.ON=2]="ON",lt[lt.ON_MANUAL=3]="ON_MANUAL",(ct=ct=ct||{})[ct.NPM=0]="NPM",ct[ct.UNPACK=1]="UNPACK",ct[ct.PMA=2]="PMA",ct[ct.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",ct[ct.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",ct[ct.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",ct[ct.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(pt=pt=pt||{})[pt.NO=0]="NO",pt[pt.YES=1]="YES",pt[pt.AUTO=2]="AUTO",pt[pt.BLEND=0]="BLEND",pt[pt.CLEAR=1]="CLEAR",pt[pt.BLIT=2]="BLIT",(dt=dt=dt||{})[dt.AUTO=0]="AUTO",dt[dt.MANUAL=1]="MANUAL",(ft=ft=ft||{}).LOW="lowp",ft.MEDIUM="mediump",ft.HIGH="highp",(mt=mt=mt||{})[mt.NONE=0]="NONE",mt[mt.SCISSOR=1]="SCISSOR",mt[mt.STENCIL=2]="STENCIL",mt[mt.SPRITE=3]="SPRITE",mt[mt.COLOR=4]="COLOR",(vt=vt=vt||{})[vt.RED=1]="RED",vt[vt.GREEN=2]="GREEN",vt[vt.BLUE=4]="BLUE",vt[vt.ALPHA=8]="ALPHA",(gt=gt=gt||{})[gt.NONE=0]="NONE",gt[gt.LOW=2]="LOW",gt[gt.MEDIUM=4]="MEDIUM",gt[gt.HIGH=8]="HIGH",(xt=xt=xt||{})[xt.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",xt[xt.ARRAY_BUFFER=34962]="ARRAY_BUFFER",xt[xt.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",Y.RETINA_PREFIX=/@([0-9\.]+)x/,Y.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1,function(){for(var t=[],e=[],i=0;i<32;i++)e[t[i]=i]=i;t[et.NORMAL_NPM]=et.NORMAL,t[et.ADD_NPM]=et.ADD,t[et.SCREEN_NPM]=et.SCREEN,e[et.NORMAL]=et.NORMAL_NPM,e[et.ADD]=et.ADD_NPM,e[et.SCREEN]=et.SCREEN_NPM;var r=[];r.push(e),r.push(t)}();var _t={};function yt(t,e,i){this.canvas=Y.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||Y.RESOLUTION,this.resize(t,e)}yt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},yt.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},yt.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(yt.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(yt.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0});var xt=(bt.registerPlugin=function(t){var e,i,r;void 0===i&&(i=3),_t[e="Application.registerPlugin() is deprecated, use extensions.add()"]||(void 0===(r=(new Error).stack)||(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed),_t[e]=!0),y.extensions.add({type:y.ExtensionType.Application,ref:t})},bt.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(bt.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(bt.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),bt.prototype.destroy=function(t,e){var i=this,r=bt._plugins.slice(0);r.reverse(),r.forEach(function(t){t.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null},bt._plugins=[],bt);function bt(e){var i=this;this.stage=new x.Container,e=Object.assign({forceCanvas:!1},e),this.renderer=y.autoDetectRenderer(e),bt._plugins.forEach(function(t){t.init.call(i,e)})}y.extensions.handleByList(y.ExtensionType.Application,xt._plugins),y.extensions.add(b),St.Application=xt,St.ResizePlugin=b}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@pixi/core":5,"@pixi/display":6}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var D=t("@pixi/core"),p=t("@pixi/loaders"),d=t("@pixi/utils"),r=t("@pixi/settings"),R=t("@pixi/constants");i.INTERNAL_FORMATS=void 0,(f=i.INTERNAL_FORMATS||(i.INTERNAL_FORMATS={}))[f.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",f[f.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",f[f.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",f[f.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",f[f.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",f[f.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",f[f.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",f[f.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",f[f.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",f[f.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",f[f.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",f[f.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",f[f.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",f[f.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",f[f.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",f[f.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",f[f.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",f[f.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",f[f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",f[f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",f[f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",f[f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",f[f.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",f[f.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",f[f.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",f[f.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL";var O=((K={})[i.INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,K[i.INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,K[i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,K[i.INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,K[i.INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,K[i.INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,K[i.INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,K[i.INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,K[i.INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,K[i.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,K),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function a(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,o,s,u){return new(s=s||Promise)(function(i,e){function r(t){try{a(u.next(t))}catch(t){e(t)}}function n(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,n)}a((u=u.apply(t,o||[])).next())})}function s(i,r){var n,a,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&e[0]?a.return:e[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,e[1])).done)return o;switch(a=0,(e=o?[2&e[0],o.value]:e)[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(i,s)}catch(t){e=[6,t],a=0}finally{n=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var u,t=(a(h,u=D.BufferResource),h.prototype.onBlobLoaded=function(t){},h.prototype.load=function(){return o(this,void 0,Promise,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,fetch(this.origin)];case 1:return[4,t.sent().blob()];case 2:return[4,t.sent().arrayBuffer()];case 3:return e=t.sent(),this.data=new Uint32Array(e),this.buffer=new D.ViewableBuffer(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),[2,this]}})})},h);function h(t,e){void 0===e&&(e={width:1,height:1,autoLoad:!0});var i,r=this,t="string"==typeof t?(i=t,new Uint8Array):(i=null,t);return(r=u.call(this,t,e)||this).origin=i,r.buffer=t?new D.ViewableBuffer(t):null,r.origin&&!1!==e.autoLoad&&r.load(),t&&t.length&&(r.loaded=!0,r.onBlobLoaded(r.buffer.rawBinaryData)),r}var l,P=(a(c,l=t),c.prototype.upload=function(t,e,i){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,a=this.levels;n<a;n++){var o=this._levelBuffers[n],s=o.levelID,u=o.levelWidth,h=o.levelHeight,o=o.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,u,h,0,o)}return!0},c.prototype.onBlobLoaded=function(){this._levelBuffers=c._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},c._formatToExtension=function(t){if(33776<=t&&t<=33779)return"s3tc";if(37488<=t&&t<=37497)return"etc";if(35840<=t&&t<=35843)return"pvrtc";if(36196<=t)return"etc1";if(35986<=t&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},c._createLevelBuffers=function(t,e,i,r,n,a,o){for(var s=new Array(i),u=t.byteOffset,h=a,l=o,c=h+r-1&~(r-1),p=l+n-1&~(n-1),d=c*p*O[e],f=0;f<i;f++)s[f]={levelID:f,levelWidth:1<i?h:c,levelHeight:1<i?l:p,levelBuffer:new Uint8Array(t.buffer,u,d)},u+=d,d=(c=(h=h>>1||1)+r-1&~(r-1))*(p=(l=l>>1||1)+n-1&~(n-1))*O[e];return s},c);function c(t,e){var i=l.call(this,t,e)||this;return i.format=e.format,i.levels=e.levels||1,i._width=e.width,i._height=e.height,i._extension=c._formatToExtension(i.format),(e.levelBuffers||i.buffer)&&(i._levelBuffers=e.levelBuffers||c._createLevelBuffers(t instanceof Uint8Array?t:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}var f=(m.use=function(i,r){var t=i.data;if(i.type===p.LoaderResource.TYPE.JSON&&t&&t.cacheID&&t.textures){for(var e,n,a=t.textures,o=void 0,s=void 0,u=0,h=a.length;u<h;u++){var l=a[u],c=l.src,l=l.format;if(l||(s=c),m.textureFormats[l]){o=c;break}}(o=o||s)?o!==i.url?(e={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},n=d.url.resolve(i.url.replace(this.baseUrl,""),o),t=t.cacheID,this.add(t,n,e,function(t){var e;t.error?r(t.error):(e=t.texture,t=t.textures,Object.assign(i,{texture:void 0===e?null:e,textures:void 0===t?{}:t}),r())})):r(new Error("URL of compressed texture cannot be the same as the manifest's URL")):r(new Error("Cannot load compressed-textures in "+i.url+", make sure you provide a fallback"))}else r()},Object.defineProperty(m,"textureExtensions",{get:function(){if(!m._textureExtensions){var t=r.settings.ADAPTER.createCanvas().getContext("webgl");if(!t)return{};t={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};m._textureExtensions=t}return m._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(m,"textureFormats",{get:function(){if(!m._textureFormats){var t,e=m.textureExtensions;for(t in m._textureFormats={},e){var i=e[t];i&&Object.assign(m._textureFormats,Object.getPrototypeOf(i))}}return m._textureFormats},enumerable:!1,configurable:!0}),m.extension=D.ExtensionType.Loader,m);function m(){}function v(n,t,e){var a={textures:{},texture:null};return t&&t.map(function(t){return new D.Texture(new D.BaseTexture(t,Object.assign({mipmap:R.MIPMAP_MODES.OFF,alphaMode:R.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA},e)))}).forEach(function(t,e){var i=t.baseTexture,r=n+"-"+(e+1);D.BaseTexture.addToCache(i,r),D.Texture.addToCache(t,r),0===e&&(D.BaseTexture.addToCache(i,n),D.Texture.addToCache(t,n),a.texture=t),a.textures[r]=t}),a}var _,y=3,x=4,b=7,T=19,E=2,S=0,M=1,A=2,w=3;(K=$=$||{})[K.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",K[K.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",K[K.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",K[K.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",K[K.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",K[K.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",K[K.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",K[K.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",K[K.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",K[K.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",K[K.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",K[K.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",K[K.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",K[K.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",K[K.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",K[K.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",K[K.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",K[K.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",K[K.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",K[K.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",K[K.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",K[K.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",K[K.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",K[K.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",K[K.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",K[K.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",K[K.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",K[K.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",K[K.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",K[K.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",K[K.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",K[K.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",K[K.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",K[K.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",K[K.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",K[K.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",K[K.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",K[K.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",K[K.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",K[K.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",K[K.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",K[K.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",K[K.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",K[K.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",K[K.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",K[K.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",K[K.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",K[K.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",K[K.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",K[K.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",K[K.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",K[K.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",K[K.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",K[K.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",K[K.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",K[K.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",K[K.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",K[K.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",K[K.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",K[K.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",K[K.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",K[K.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",K[K.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",K[K.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",K[K.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",K[K.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",K[K.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",K[K.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",K[K.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",K[K.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",K[K.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",K[K.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",K[K.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",K[K.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",K[K.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",K[K.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",K[K.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",K[K.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",K[K.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",K[K.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",K[K.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",K[K.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",K[K.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",K[K.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",K[K.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",K[K.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",K[K.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",K[K.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",K[K.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",K[K.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",K[K.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",K[K.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",K[K.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",K[K.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",K[K.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",K[K.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",K[K.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",K[K.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",K[K.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",K[K.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",K[K.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",K[K.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",K[K.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",K[K.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",K[K.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",K[K.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",K[K.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",K[K.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",K[K.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",K[K.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",K[K.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",K[K.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",K[K.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",K[K.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",K[K.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",K[K.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",K[K.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",K[K.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",K[K.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",K[K.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",K[K.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",K[K.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",(K=_=_||{})[K.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",K[K.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",K[K.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D";var C=((K={})[827611204]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,K[861165636]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,K[894720068]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,K),I=((K={})[$.DXGI_FORMAT_BC1_TYPELESS]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,K[$.DXGI_FORMAT_BC1_UNORM]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,K[$.DXGI_FORMAT_BC2_TYPELESS]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,K[$.DXGI_FORMAT_BC2_UNORM]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,K[$.DXGI_FORMAT_BC3_TYPELESS]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,K[$.DXGI_FORMAT_BC3_UNORM]=i.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,K[$.DXGI_FORMAT_BC1_UNORM_SRGB]=i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,K[$.DXGI_FORMAT_BC2_UNORM_SRGB]=i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,K[$.DXGI_FORMAT_BC3_UNORM_SRGB]=i.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,K);function g(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[y],n=i[x],a=i[b],o=new Uint32Array(t,T*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),i=o[1];if(4&i){o=o[E];if(808540228!==o){var s=C[o],u=new Uint8Array(t,128);return[new P(u,{format:s,width:n,height:r,levels:a})]}var o=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),u=o[S],s=o[M],e=o[A],h=o[w],l=I[u];if(void 0===l)throw new Error("DDSParser cannot parse texture data with DXGI format "+u);if(4===e)throw new Error("DDSParser does not support cubemap textures");if(s===_.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var c=new Array;if(1===h)c.push(new Uint8Array(t,148));else{for(var p=O[l],d=0,f=n,m=r,v=0;v<a;v++)d+=Math.max(1,f+3&-4)*Math.max(1,m+3&-4)*p,f>>>=1,m>>>=1;for(var g=148,v=0;v<h;v++)c.push(new Uint8Array(t,g,d)),g+=d}return c.map(function(t){return new P(t,{format:l,width:n,height:r,levels:a})})}if(64&i)throw new Error("DDSParser does not support uncompressed texture data.");if(512&i)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(131072&i)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(2&i)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}var L=[171,75,84,88,32,49,49,187,13,10,26,10],N=12,F=16,B=24,U=28,G=36,k=40,z=44,j=48,H=52,V=56,X=60,W=64,Y=(($={})[R.TYPES.UNSIGNED_BYTE]=1,$[R.TYPES.UNSIGNED_SHORT]=2,$[R.TYPES.INT]=4,$[R.TYPES.UNSIGNED_INT]=4,$[R.TYPES.FLOAT]=4,$[R.TYPES.HALF_FLOAT]=8,$),q=((K={})[R.FORMATS.RGBA]=4,K[R.FORMATS.RGB]=3,K[R.FORMATS.RG]=2,K[R.FORMATS.RED]=1,K[R.FORMATS.LUMINANCE]=1,K[R.FORMATS.LUMINANCE_ALPHA]=2,K[R.FORMATS.ALPHA]=1,K),Z=(($={})[R.TYPES.UNSIGNED_SHORT_4_4_4_4]=2,$[R.TYPES.UNSIGNED_SHORT_5_5_5_1]=2,$[R.TYPES.UNSIGNED_SHORT_5_6_5]=2,$);function J(t,e,i){void 0===i&&(i=!1);var r=new DataView(e);if(!function(t){for(var e=0;e<L.length;e++)if(t.getUint8(e)!==L[e])return!1;return!0}(r))return null;var n=67305985===r.getUint32(N,!0),a=r.getUint32(F,n),o=r.getUint32(B,n),s=r.getUint32(U,n),u=r.getUint32(G,n),h=r.getUint32(k,n)||1,l=r.getUint32(z,n)||1,c=r.getUint32(j,n)||1,p=r.getUint32(H,n),d=r.getUint32(V,n),f=r.getUint32(X,n);if(0===h||1!==l)throw new Error("Only 2D textures are supported");if(1!==p)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");var m=u+3&-4,l=h+3&-4,v=new Array(c),p=0===a?m*l:u*h,g=0!==a?Y[a]?Y[a]*q[o]:Z[a]:O[s];if(void 0===g)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var i=i?function(t,e,i){var r=new Map,n=0;for(;n<e;){var a=t.getUint32(W+n,i),o=W+n+4,s=3-(a+3)%4;if(0===a||e-n<a)break;for(var u=0;u<a&&0!==t.getUint8(o+u);u++);if(-1===u)break;var h=(new TextDecoder).decode(new Uint8Array(t.buffer,o,u)),l=new DataView(t.buffer,o+u+1,a-u-1);r.set(h,l),n+=4+a+s}return r}(r,f,n):null,_=p*g,y=u,x=h,b=m,T=l,E=W+f,S=0;S<d;S++){for(var M=r.getUint32(E,n),A=E+4,w=0;w<c;w++)(v[w]||(v[w]=new Array(d)))[S]={levelID:S,levelWidth:1<d||0!==a?y:b,levelHeight:1<d||0!==a?x:T,levelBuffer:new Uint8Array(e,A,_)},A+=_;E=(E+=M+4)%4!=0?E+4-E%4:E,_=(b=(y=y>>1||1)+4-1&-4)*(T=(x=x>>1||1)+4-1&-4)*g}return 0!==a?{uncompressed:v.map(function(t){var e=t[0].levelBuffer,i=!1;return a===R.TYPES.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):a===R.TYPES.UNSIGNED_INT?(i=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):a===R.TYPES.INT&&(i=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new D.BufferResource(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:a,format:i?function(t){switch(t){case R.FORMATS.RGBA:return R.FORMATS.RGBA_INTEGER;case R.FORMATS.RGB:return R.FORMATS.RGB_INTEGER;case R.FORMATS.RG:return R.FORMATS.RG_INTEGER;case R.FORMATS.RED:return R.FORMATS.RED_INTEGER;default:return t}}(o):o}}),kvData:i}:{compressed:v.map(function(t){return new P(null,{format:s,width:u,height:h,levels:d,levelBuffers:t})}),kvData:i}}p.LoaderResource.setExtensionXhrType("dds",p.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var K=(Q.use=function(t,e){if("dds"===t.extension&&t.data)try{Object.assign(t,v(t.name||t.url,g(t.data),t.metadata))}catch(t){return void e(t)}e()},Q.extension=D.ExtensionType.Loader,Q);function Q(){}p.LoaderResource.setExtensionXhrType("ktx",p.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var $=(tt.use=function(t,e){if("ktx"===t.extension&&t.data)try{var r,n=t.name||t.url,i=J(0,t.data,this.loadKeyValueData),a=i.compressed,o=i.uncompressed,s=i.kvData;if(a){var u=v(n,a,t.metadata);if(s&&u.textures)for(var h in u.textures)u.textures[h].baseTexture.ktxKeyValueData=s;Object.assign(t,u)}else o&&(r={},o.forEach(function(t,e){var i=new D.Texture(new D.BaseTexture(t.resource,{mipmap:R.MIPMAP_MODES.OFF,alphaMode:R.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),t=n+"-"+(e+1);s&&(i.baseTexture.ktxKeyValueData=s),D.BaseTexture.addToCache(i.baseTexture,t),D.Texture.addToCache(i,t),0===e&&(r[n]=i,D.BaseTexture.addToCache(i.baseTexture,n),D.Texture.addToCache(i,n)),r[t]=i}),Object.assign(t,{textures:r}))}catch(t){return void e(t)}e()},tt.extension=D.ExtensionType.Loader,tt.loadKeyValueData=!1,tt);function tt(){}i.BlobResource=t,i.CompressedTextureLoader=f,i.CompressedTextureResource=P,i.DDSLoader=K,i.FORMATS_TO_COMPONENTS=q,i.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=O,i.KTXLoader=$,i.TYPES_TO_BYTES_PER_COMPONENT=Y,i.TYPES_TO_BYTES_PER_PIXEL=Z,i.parseDDS=g,i.parseKTX=J},{"@pixi/constants":4,"@pixi/core":5,"@pixi/loaders":17,"@pixi/settings":28,"@pixi/utils":36}],4:[function(t,e,i){"use strict";var r;Object.defineProperty(i,"__esModule",{value:!0}),i.ENV=void 0,(r=i.ENV||(i.ENV={}))[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",i.RENDERER_TYPE=void 0,(r=i.RENDERER_TYPE||(i.RENDERER_TYPE={}))[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",i.BUFFER_BITS=void 0,(r=i.BUFFER_BITS||(i.BUFFER_BITS={}))[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",i.BLEND_MODES=void 0,(r=i.BLEND_MODES||(i.BLEND_MODES={}))[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",i.DRAW_MODES=void 0,(r=i.DRAW_MODES||(i.DRAW_MODES={}))[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",i.FORMATS=void 0,(r=i.FORMATS||(i.FORMATS={}))[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i.TARGETS=void 0,(r=i.TARGETS||(i.TARGETS={}))[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i.TYPES=void 0,(r=i.TYPES||(i.TYPES={}))[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",i.SAMPLER_TYPES=void 0,(r=i.SAMPLER_TYPES||(i.SAMPLER_TYPES={}))[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",i.SCALE_MODES=void 0,(r=i.SCALE_MODES||(i.SCALE_MODES={}))[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",i.WRAP_MODES=void 0,(r=i.WRAP_MODES||(i.WRAP_MODES={}))[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i.MIPMAP_MODES=void 0,(r=i.MIPMAP_MODES||(i.MIPMAP_MODES={}))[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",i.ALPHA_MODES=void 0,(r=i.ALPHA_MODES||(i.ALPHA_MODES={}))[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",i.CLEAR_MODES=void 0,(r=i.CLEAR_MODES||(i.CLEAR_MODES={}))[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",i.GC_MODES=void 0,(r=i.GC_MODES||(i.GC_MODES={}))[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",i.PRECISION=void 0,(r=i.PRECISION||(i.PRECISION={})).LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",i.MASK_TYPES=void 0,(r=i.MASK_TYPES||(i.MASK_TYPES={}))[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",i.COLOR_MASK_BITS=void 0,(r=i.COLOR_MASK_BITS||(i.COLOR_MASK_BITS={}))[r.RED=1]="RED",r[r.GREEN=2]="GREEN",r[r.BLUE=4]="BLUE",r[r.ALPHA=8]="ALPHA",i.MSAA_QUALITY=void 0,(r=i.MSAA_QUALITY||(i.MSAA_QUALITY={}))[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",i.BUFFER_TYPE=void 0,(i=i.BUFFER_TYPE||(i.BUFFER_TYPE={}))[i.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",i[i.ARRAY_BUFFER=34962]="ARRAY_BUFFER",i[i.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var f=t("@pixi/settings"),m=t("@pixi/constants"),v=t("@pixi/utils"),r=t("@pixi/extensions"),n=t("@pixi/runner"),a=t("@pixi/ticker"),u=t("@pixi/math");f.settings.PREFER_ENV=v.isMobile.any?m.ENV.WEBGL:m.ENV.WEBGL2,f.settings.STRICT_TEXTURE_CACHE=!1;var o=[];function g(t,e){if(!t)return null;var i,r="";"string"!=typeof t||(i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(r=i[1].toLowerCase());for(var n=o.length-1;0<=n;--n){var a=o[n];if(a.test&&a.test(t,r))return new a(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function h(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l=function(){return(l=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var a in e=i[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};var _=(c.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},c.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},c.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(c.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),c.prototype.update=function(){this.destroyed||this.onUpdate.emit()},c.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(c.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),c.prototype.style=function(t,e,i){return!1},c.prototype.dispose=function(){},c.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},c.test=function(t,e){return!1},c);function c(t,e){void 0===e&&(e=0),this._width=t=void 0===t?0:t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new n.Runner("setRealSize"),this.onUpdate=new n.Runner("update"),this.onError=new n.Runner("onError")}var p,d=(h(y,p=_),y.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===m.ALPHA_MODES.UNPACK);var n=e.realWidth,t=e.realHeight;return i.width===n&&i.height===t?r.texSubImage2D(e.target,0,0,0,n,t,e.format,i.type,this.data):(i.width=n,i.height=t,r.texImage2D(e.target,0,i.internalFormat,n,t,0,e.format,i.type,this.data)),!0},y.prototype.dispose=function(){this.data=null},y.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},y);function y(t,e){var i=this,r=e||{},e=r.width,r=r.height;if(!e||!r)throw new Error("BufferResource width or height invalid");return(i=p.call(this,e,r)||this).data=t,i}var x,b={scaleMode:m.SCALE_MODES.NEAREST,format:m.FORMATS.RGBA,alphaMode:m.ALPHA_MODES.NPM},T=(h(E,x=v.EventEmitter),Object.defineProperty(E.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),E.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},E.prototype.setSize=function(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)},E.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},E.prototype._refreshPOT=function(){this.isPowerOfTwo=v.isPow2(this.realWidth)&&v.isPow2(this.realHeight)},E.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},E.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},E.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},E.prototype.onError=function(t){this.emit("error",this,t)},E.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete v.BaseTextureCache[this.cacheId],delete v.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),E.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},E.prototype.dispose=function(){this.emit("dispose",this)},E.prototype.castToBaseTexture=function(){return this},E.from=function(t,e,i){void 0===i&&(i=f.settings.STRICT_TEXTURE_CACHE);var r="string"==typeof t,n=null,n=r?t:(t._pixiId||(a=e&&e.pixiIdPrefix||"pixiid",t._pixiId=a+"_"+v.uid()),t._pixiId),a=v.BaseTextureCache[n];if(r&&i&&!a)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return a||((a=new E(t,e)).cacheId=n,E.addToCache(a,n)),a},E.fromBuffer=function(t,e,i,r){t=t||new Float32Array(e*i*4);var n=new d(t,{width:e,height:i}),t=t instanceof Float32Array?m.TYPES.FLOAT:m.TYPES.UNSIGNED_BYTE;return new E(n,Object.assign(b,r||{width:e,height:i,type:t}))},E.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),v.BaseTextureCache[e],v.BaseTextureCache[e]=t)},E.removeFromCache=function(t){if("string"==typeof t){var e=v.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return-1<i&&e.textureCacheIds.splice(i,1),delete v.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete v.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},E._globalBatch=0,E);function E(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=x.call(this)||this,r=(e=e||{}).alphaMode,n=e.mipmap,a=e.anisotropicLevel,o=e.scaleMode,s=e.width,u=e.height,h=e.wrapMode,l=e.format,c=e.type,p=e.target,d=e.resolution,e=e.resourceOptions;return!t||t instanceof _||((t=g(t,e)).internal=!0),i.resolution=d||f.settings.RESOLUTION,i.width=Math.round((s||0)*i.resolution)/i.resolution,i.height=Math.round((u||0)*i.resolution)/i.resolution,i._mipmap=void 0!==n?n:f.settings.MIPMAP_TEXTURES,i.anisotropicLevel=void 0!==a?a:f.settings.ANISOTROPIC_LEVEL,i._wrapMode=h||f.settings.WRAP_MODE,i._scaleMode=void 0!==o?o:f.settings.SCALE_MODE,i.format=l||m.FORMATS.RGBA,i.type=c||m.TYPES.UNSIGNED_BYTE,i.target=p||m.TARGETS.TEXTURE_2D,i.alphaMode=void 0!==r?r:m.ALPHA_MODES.UNPACK,i.uid=v.uid(),i.touched=0,i.isPowerOfTwo=!1,i._refreshPOT(),i._glTextures={},i.dirtyId=0,i.dirtyStyleId=0,i.cacheId=null,i.valid=0<s&&0<u,i.textureCacheIds=[],i.destroyed=!1,i.resource=null,i._batchEnabled=0,i._batchLocation=0,i.parentTextureArray=null,i.setResource(t),i}var S,M=(h(A,S=_),A.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof _?this.addResourceAt(t[i],i):this.addResourceAt(g(t[i],e),i))},A.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},A.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},A.prototype.bind=function(t){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");S.prototype.bind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)},A.prototype.unbind=function(t){S.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)},A.prototype.load=function(){var i=this;if(this._load)return this._load;var t=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=i.items[0],e=t.realWidth,t=t.realHeight;return i.resize(e,t),Promise.resolve(i)}),this._load},A);function A(t,e){var i=this,r=e||{},e=r.width,r=r.height;(i=S.call(this,e,r)||this).items=[],i.itemDirtyIds=[];for(var n=0;n<t;n++){var a=new T;i.items.push(a),i.itemDirtyIds.push(-2)}return i.length=t,i._load=null,i.baseTexture=null,i}var w,D=(h(R,w=M),R.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},R.prototype.bind=function(t){w.prototype.bind.call(this,t),t.target=m.TARGETS.TEXTURE_2D_ARRAY},R.prototype.upload=function(t,e,i){var r=this.length,n=this.itemDirtyIds,a=this.items,o=t.gl;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,e.format,i.type,null);for(var s=0;s<r;s++){var u=a[s];n[s]<u.dirtyId&&(n[s]=u.dirtyId,u.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0},R);function R(t,e){var i,r=this,n=e||{},a=n.width,n=n.height,t=Array.isArray(t)?(i=t).length:t,r=w.call(this,t,{width:a,height:n})||this;return i&&r.initFromArray(i,e),r}var O,P=(h(C,O=_),C.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=v.determineCrossOrigin(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},C.prototype.upload=function(t,e,i,r){var n=t.gl,a=e.realWidth,t=e.realHeight;if((r=r||this.source)instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===m.ALPHA_MODES.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||i.width!==a||i.height!==t?(i.width=a,i.height=t,n.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,i.type,r),!0},C.prototype.update=function(){var t,e;this.destroyed||(t=(e=this.source).naturalWidth||e.videoWidth||e.width,e=e.naturalHeight||e.videoHeight||e.height,this.resize(t,e),O.prototype.update.call(this))},C.prototype.dispose=function(){this.source=null},C);function C(t){var e=this,i=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;return(e=O.call(this,i,r)||this).source=t,e.noSubImage=!1,e}var I,L=(h(N,I=P),N.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},N);function N(t){return I.call(this,t)||this}var F,B=(h(U,F=M),U.prototype.bind=function(t){F.prototype.bind.call(this,t),t.target=m.TARGETS.TEXTURE_CUBE_MAP},U.prototype.addBaseTextureAt=function(t,e,i){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||0<Object.keys(t._glTextures).length){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=m.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},U.prototype.upload=function(t,e,i){for(var r=this.itemDirtyIds,n=0;n<U.SIDES;n++){var a=this.items[n];(r[n]<a.dirtyId||i.dirtyId<e.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(t,a,i),r[n]=a.dirtyId):r[n]<-1&&(t.gl.texImage2D(a.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),r[n]=-1))}return!0},U.test=function(t){return Array.isArray(t)&&t.length===U.SIDES},U.SIDES=6,U);function U(t,e){var i=this,r=e||{},n=r.width,a=r.height,o=r.autoLoad,r=r.linkBaseTexture;if(t&&t.length!==U.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");for(var i=F.call(this,6,{width:n,height:a})||this,s=0;s<U.SIDES;s++)i.items[s].target=m.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+s;return i.linkBaseTexture=!1!==r,t&&i.initFromArray(t,e),!1!==o&&i.load(),i}var G,k=(h(z,G=P),z.prototype.load=function(t){var n=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,e){var i=n.source;n.url=i.src;function r(){n.destroyed||(i.onload=null,i.onerror=null,n.resize(i.width,i.height),n._load=null,n.createBitmap?t(n.process()):t(n))}i.complete&&i.src?r():(i.onload=r,i.onerror=function(t){e(t),n.onError.emit(t)})}),this._load)},z.prototype.process=function(){var e=this,i=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var r=globalThis.createImageBitmap,t=!i.crossOrigin||"anonymous"===i.crossOrigin;return this._process=fetch(i.src,{mode:t?"cors":"no-cors"}).then(function(t){return t.blob()}).then(function(t){return r(t,0,0,i.width,i.height,{premultiplyAlpha:e.alphaMode===m.ALPHA_MODES.UNPACK?"premultiply":"none"})}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process},z.prototype.upload=function(t,e,i){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return G.prototype.upload.call(this,t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(G.prototype.upload.call(this,t,e,i,this.bitmap),!this.preserveBitmap){var r,n=!0,a=e._glTextures;for(r in a){var o=a[r];if(o!==i&&o.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},z.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,G.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},z.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},z);function z(t,e){var i,r=this;return e=e||{},t instanceof HTMLImageElement||(i=new Image,P.crossOrigin(i,t,e.crossorigin),i.src=t,t=i),r=G.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==e.createBitmap?e.createBitmap:f.settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,r.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,r.bitmap=null,r._load=null,!1!==e.autoLoad&&r.load(),r}var j,H=(h(V,j=P),V.prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},V.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()}),this._load)},V.prototype._loadSvg=function(){var a=this,o=new Image;P.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){a._resolve&&(o.onerror=null,a.onError.emit(t))},o.onload=function(){if(a._resolve){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=t*a.scale,r=e*a.scale;(a._overrideWidth||a._overrideHeight)&&(i=a._overrideWidth||a._overrideHeight/e*t,r=a._overrideHeight||a._overrideWidth/t*e);var i=Math.round(i),r=Math.round(r),n=a.source;n.width=i,n.height=r,n._pixiId="canvas_"+v.uid(),n.getContext("2d").drawImage(o,0,0,t,e,0,0,i,r),a._resolve(),a._resolve=null}}},V.getSize=function(t){var e=V.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},V.prototype.dispose=function(){j.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},V.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&V.SVG_XML.test(t)},V.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,V.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,V);function V(t,e){var i=this;return e=e||{},(i=j.call(this,f.settings.ADAPTER.createCanvas())||this)._width=0,i._height=0,i.svg=t,i.scale=e.scale||1,i._overrideWidth=e.width,i._overrideHeight=e.height,i._resolve=null,i._crossorigin=e.crossorigin,i._load=null,!1!==e.autoLoad&&i.load(),i}var X,W=(h(Y,X=P),Y.prototype.update=function(t){var e;this.destroyed||(e=a.Ticker.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(X.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},Y.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,i.load())}),this._load},Y.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},Y.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},Y.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},Y.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(a.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},Y.prototype._onPlayStop=function(){this._isConnectedToTicker&&(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},Y.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},Y.prototype.dispose=function(){this._isConnectedToTicker&&(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),X.prototype.dispose.call(this)},Object.defineProperty(Y.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(a.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(Y.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),Y.test=function(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||-1<Y.TYPES.indexOf(e)},Y.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Y.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Y);function Y(t,e){var i=this;if(e=e||{},!(t instanceof HTMLVideoElement)){var r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","");var n=(t="string"==typeof t?[t]:t)[0].src||t[0];P.crossOrigin(r,n,e.crossorigin);for(var a=0;a<t.length;++a){var o=document.createElement("source"),s=t[a],u=s.src,h=s.mime,s=(u=u||t[a]).split("?").shift().toLowerCase(),s=s.slice(s.lastIndexOf(".")+1),h=h||Y.MIME_TYPES[s]||"video/"+s;o.src=u,o.type=h,r.appendChild(o)}t=r}return(i=X.call(this,t)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=e.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==e.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==e.autoLoad&&i.load(),i}var q,Z=(h(J,q=P),J.test=function(t){return!!globalThis.createImageBitmap&&"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},J);function J(t){return q.call(this,t)||this}o.push(k,Z,L,W,H,d,B,D);var K,Q={__proto__:null,Resource:_,BaseImageResource:P,INSTALLED:o,autoDetectResource:g,AbstractMultiResource:M,ArrayResource:D,BufferResource:d,CanvasResource:L,CubeResource:B,ImageResource:k,SVGResource:H,VideoResource:W,ImageBitmapResource:Z},$=(h(tt,K=d),tt.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===m.ALPHA_MODES.UNPACK);var n=e.realWidth,t=e.realHeight;return i.width===n&&i.height===t?r.texSubImage2D(e.target,0,0,0,n,t,e.format,i.type,this.data):(i.width=n,i.height=t,r.texImage2D(e.target,0,i.internalFormat,n,t,0,e.format,i.type,this.data)),!0},tt);function tt(){return null!==K&&K.apply(this,arguments)||this}var et=(Object.defineProperty(it.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),it.prototype.addColorTexture=function(t,e){return this.colorTextures[t=void 0===t?0:t]=e||new T(null,{scaleMode:m.SCALE_MODES.NEAREST,resolution:1,mipmap:m.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},it.prototype.addDepthTexture=function(t){return this.depthTexture=t||new T(new $(null,{width:this.width,height:this.height}),{scaleMode:m.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:m.MIPMAP_MODES.OFF,format:m.FORMATS.DEPTH_COMPONENT,type:m.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},it.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},it.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},it.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},it.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},it.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},it);function it(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new n.Runner("disposeFramebuffer"),this.multisample=m.MSAA_QUALITY.NONE}var rt,nt=(h(at,rt=T),at.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},at.prototype.dispose=function(){this.framebuffer.dispose(),rt.prototype.dispose.call(this)},at.prototype.destroy=function(){rt.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},at);function at(t){var e=this;return(t="number"==typeof(t=void 0===t?{}:t)?{width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}:t).width=t.width||100,t.height=t.height||100,t.multisample=void 0!==t.multisample?t.multisample:m.MSAA_QUALITY.NONE,(e=rt.call(this,null,t)||this).mipmap=m.MIPMAP_MODES.OFF,e.valid=!0,e.clearColor=[0,0,0,0],e.framebuffer=new et(e.realWidth,e.realHeight).addColorTexture(0,e),e.framebuffer.multisample=t.multisample,e.maskStack=[],e.filterStack=[{}],e}var ot=(st.prototype.set=function(t,e,i){var r,n,a,o=e.width,s=e.height;i?(r=t.width/2/o,n=t.height/2/s,a=t.x/o+r,e=t.y/s+n,i=u.groupD8.add(i,u.groupD8.NW),this.x0=a+r*u.groupD8.uX(i),this.y0=e+n*u.groupD8.uY(i),i=u.groupD8.add(i,2),this.x1=a+r*u.groupD8.uX(i),this.y1=e+n*u.groupD8.uY(i),i=u.groupD8.add(i,2),this.x2=a+r*u.groupD8.uX(i),this.y2=e+n*u.groupD8.uY(i),i=u.groupD8.add(i,2),this.x3=a+r*u.groupD8.uX(i),this.y3=e+n*u.groupD8.uY(i)):(this.x0=t.x/o,this.y0=t.y/s,this.x1=(t.x+t.width)/o,this.y1=t.y/s,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/s,this.x3=t.x/o,this.y3=(t.y+t.height)/s),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},st.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},st);function st(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var ut=new ot;function ht(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var lt,ct=(h(pt,lt=v.EventEmitter),pt.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},pt.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},pt.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&t.url&&v.TextureCache[t.url]&&pt.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,pt.removeFromCache(this),this.textureCacheIds=null},pt.prototype.clone=function(){var t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),e=new pt(this.baseTexture,!this.noFrame&&t,e,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(e._frame=t),e},pt.prototype.updateUvs=function(){this._uvs===ut&&(this._uvs=new ot),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},pt.from=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=f.settings.STRICT_TEXTURE_CACHE);var r="string"==typeof t,n=null,n=r?t:t instanceof T?(t.cacheId||(a=e&&e.pixiIdPrefix||"pixiid",t.cacheId=a+"-"+v.uid(),T.addToCache(t,t.cacheId)),t.cacheId):(t._pixiId||(a=e&&e.pixiIdPrefix||"pixiid",t._pixiId=a+"_"+v.uid()),t._pixiId),a=v.TextureCache[n];if(r&&i&&!a)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return a||t instanceof T?!a&&t instanceof T&&(a=new pt(t),pt.addToCache(a,n)):(e.resolution||(e.resolution=v.getResolutionOfUrl(t)),(a=new pt(new T(t,e))).baseTexture.cacheId=n,T.addToCache(a.baseTexture,n),pt.addToCache(a,n)),a},pt.fromURL=function(t,e){var i=Object.assign({autoLoad:!1},null==e?void 0:e.resourceOptions),r=pt.from(t,Object.assign({resourceOptions:i},e),!1),e=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):e.load().then(function(){return Promise.resolve(r)})},pt.fromBuffer=function(t,e,i,r){return new pt(T.fromBuffer(t,e,i,r))},pt.fromLoader=function(t,e,i,r){t=new T(t,Object.assign({scaleMode:f.settings.SCALE_MODE,resolution:v.getResolutionOfUrl(e)},r)),r=t.resource;r instanceof k&&(r.url=e);var n=new pt(t);return T.addToCache(n.baseTexture,i=i||e),pt.addToCache(n,i),i!==e&&(T.addToCache(n.baseTexture,e),pt.addToCache(n,e)),n.baseTexture.valid?Promise.resolve(n):new Promise(function(t){n.baseTexture.once("loaded",function(){return t(n)})})},pt.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),v.TextureCache[e],v.TextureCache[e]=t)},pt.removeFromCache=function(t){if("string"==typeof t){var e=v.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return-1<i&&e.textureCacheIds.splice(i,1),delete v.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)v.TextureCache[t.textureCacheIds[r]]===t&&delete v.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(pt.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,a=e+r>this.baseTexture.width,o=i+n>this.baseTexture.height;if(a||o){e="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,i="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+(a&&o?"and":"or")+" "+i)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(pt.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),pt.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(pt,"EMPTY",{get:function(){return pt._EMPTY||(ht(pt._EMPTY=new pt(new T)),ht(pt._EMPTY.baseTexture)),pt._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(pt,"WHITE",{get:function(){var t,e;return pt._WHITE||(e=(t=f.settings.ADAPTER.createCanvas(16,16)).getContext("2d"),t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),ht(pt._WHITE=new pt(T.from(t))),ht(pt._WHITE.baseTexture)),pt._WHITE},enumerable:!1,configurable:!0}),pt);function pt(t,e,i,r,n,a){var o=lt.call(this)||this;if(o.noFrame=!1,e||(o.noFrame=!0,e=new u.Rectangle(0,0,1,1)),t instanceof pt&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=r,o.valid=!1,o._uvs=ut,o.uvMatrix=null,o.orig=i||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return o.defaultAnchor=a?new u.Point(a.x,a.y):new u.Point(0,0),o._updateID=0,o.textureCacheIds=[],t.valid?o.noFrame?t.valid&&o.onBaseTextureUpdated(t):o.frame=e:t.once("loaded",o.onBaseTextureUpdated,o),o.noFrame&&t.on("update",o.onBaseTextureUpdated,o),o}var dt,ft=(h(mt,dt=ct),Object.defineProperty(mt.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(mt.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),mt.prototype.resize=function(t,e,i){void 0===i&&(i=!0);var r=this.baseTexture.resolution,t=Math.round(t*r)/r,r=Math.round(e*r)/r;this.valid=0<t&&0<r,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=r,i&&this.baseTexture.resize(t,r),this.updateUvs()},mt.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},mt.create=function(t){for(var e=arguments,i=[],r=1;r<arguments.length;r++)i[r-1]=e[r];return"number"==typeof t&&(v.deprecation("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:i[0],scaleMode:i[1],resolution:i[2]}),new mt(new nt(t))},mt);function mt(t,e){e=dt.call(this,t,e)||this;return e.valid=!0,e.filterFrame=null,e.filterPoolKey=null,e.updateUvs(),e}var vt=(gt.prototype.createTexture=function(t,e,i){void 0===i&&(i=m.MSAA_QUALITY.NONE);i=new nt(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new ft(i)},gt.prototype.getOptimalTexture=function(t,e,i,r){var n;void 0===i&&(i=1),void 0===r&&(r=m.MSAA_QUALITY.NONE),t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?n=1<r?-r:-1:(n=((65535&(t=v.nextPow2(t)))<<16|65535&(e=v.nextPow2(e)))>>>0,1<r&&(n+=4294967296*r)),this.texturePool[n]||(this.texturePool[n]=[]);var a=this.texturePool[n].pop();return(a=a||this.createTexture(t,e,r)).filterPoolKey=n,a.setResolution(i),a},gt.prototype.getFilterTexture=function(t,e,i){i=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||m.MSAA_QUALITY.NONE);return i.filterFrame=t.filterFrame,i},gt.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},gt.prototype.returnFilterTexture=function(t){this.returnTexture(t)},gt.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},gt.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=0<t.width&&0<t.height,this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},gt.SCREEN_KEY=-1,gt);function gt(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var _t=(yt.prototype.destroy=function(){this.buffer=null},yt.from=function(t,e,i,r,n){return new yt(t,e,i,r,n)},yt);function yt(t,e,i,r,n,a,o){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=m.TYPES.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=n,this.start=a,this.instance=o}var xt=0,bt=(Tt.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},Tt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Tt.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(Tt.prototype,"index",{get:function(){return this.type===m.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?m.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:m.BUFFER_TYPE.ARRAY_BUFFER},enumerable:!1,configurable:!0}),Tt.from=function(t){return new Tt(t=t instanceof Array?new Float32Array(t):t)},Tt);function Tt(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=xt++,this.disposeRunner=new n.Runner("disposeBuffer")}var Et={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var St={5126:4,5123:2,5121:1},Mt=0,At={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},wt=(Dt.prototype.addAttribute=function(t,e,i,r,n,a,o,s){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof bt||(e instanceof Array&&(e=new Float32Array(e)),e=new bt(e));var u=t.split("|");if(1<u.length){for(var h=0;h<u.length;h++)this.addAttribute(u[h],e,i,r,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new _t(l,i,r,n,a,o,s),this.instanced=this.instanced||s,this},Dt.prototype.getAttribute=function(t){return this.attributes[t]},Dt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Dt.prototype.addIndex=function(t){return t instanceof bt||(t instanceof Array&&(t=new Uint16Array(t)),t=new bt(t)),t.type=m.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Dt.prototype.getIndex=function(){return this.indexBuffer},Dt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new bt;for(t in this.attributes){var n=this.attributes[t],a=this.buffers[n.buffer];e.push(a.data),i.push(n.size*St[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},a=0;a<t.length;a++)r+=e[a],i+=t[a].length;for(var o=new ArrayBuffer(4*i),s=null,u=0,a=0;a<t.length;a++){var h=e[a],l=t[a],c=v.getBufferType(l);n[c]||(n[c]=new Et[c](o));for(var s=n[c],p=0;p<l.length;p++)s[(p/h|0)*r+u+p%h]=l[p];u+=h}return new Float32Array(o)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Dt.prototype.getSize=function(){for(var t in this.attributes){t=this.attributes[t];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0},Dt.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},Dt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Dt.prototype.clone=function(){for(var t=new Dt,e=0;e<this.buffers.length;e++)t.buffers[e]=new bt(this.buffers[e].data.slice(0));for(e in this.attributes){var i=this.attributes[e];t.attributes[e]=new _t(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=m.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),t},Dt.merge=function(t){for(var e=new Dt,i=[],r=[],n=[],a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.buffers.length;s++)r[s]=r[s]||0,r[s]+=o.buffers[s].data.length,n[s]=0;for(a=0;a<o.buffers.length;a++)i[a]=new At[v.getBufferType(o.buffers[a].data)](r[a]),e.buffers[a]=new bt(i[a]);for(a=0;a<t.length;a++){o=t[a];for(s=0;s<o.buffers.length;s++)i[s].set(o.buffers[s].data,n[s]),n[s]+=o.buffers[s].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=m.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;for(var u=0,h=0,l=0,c=0,a=0;a<o.buffers.length;a++)if(o.buffers[a]!==o.indexBuffer){c=a;break}for(a in o.attributes){var p=o.attributes[a];(0|p.buffer)===c&&(h+=p.size*St[p.type]/4)}for(a=0;a<t.length;a++){for(var d=t[a].indexBuffer.data,s=0;s<d.length;s++)e.indexBuffer.data[s+l]+=u;u+=t[a].buffers[c].data.length/h,l+=d.length}}return e},Dt);function Dt(t,e){void 0===e&&(e={}),this.buffers=t=void 0===t?[]:t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Mt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new n.Runner("disposeGeometry"),this.refCount=0}var Rt,Ot=(h(Pt,Rt=wt),Pt);function Pt(){var t=Rt.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}var Ct,It=(h(Lt,Ct=wt),Lt.prototype.map=function(t,e){var i,r;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},Lt.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},Lt);function Lt(){var t=Ct.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new bt(t.vertices),t.uvBuffer=new bt(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}var Nt=0,Ft=(Bt.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},Bt.prototype.add=function(t,e,i){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new Bt(e,i)},Bt.from=function(t,e,i){return new Bt(t,e,i)},Bt.uboFrom=function(t,e){return new Bt(t,null==e||e,!0)},Bt);function Bt(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Nt++,this.static=!!e,this.ubo=!!i,t instanceof bt?(this.buffer=t,this.buffer.type=m.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new bt(new Float32Array(1)),this.buffer.type=m.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}var Ut=(Gt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},Gt);function Gt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=m.MSAA_QUALITY.NONE,this.sourceFrame=new u.Rectangle,this.destinationFrame=new u.Rectangle,this.bindingSourceFrame=new u.Rectangle,this.bindingDestinationFrame=new u.Rectangle,this.filters=[],this.transform=null}var kt=[new u.Point,new u.Point,new u.Point,new u.Point],zt=new u.Matrix,jt=(Ht.prototype.push=function(t,e){for(var i,r,n=this.renderer,a=this.defaultFilterStack,o=this.statePool.pop()||new Ut,s=this.renderer.renderTexture,u=e[0].resolution,h=e[0].multisample,l=e[0].padding,c=e[0].autoFit,p=null===(i=e[0].legacy)||void 0===i||i,d=1;d<e.length;d++)var f=e[d],u=Math.min(u,f.resolution),h=Math.min(h,f.multisample),l=this.useMaxPadding?Math.max(l,f.padding):l+f.padding,c=c&&f.autoFit,p=p||null===(r=f.legacy)||void 0===r||r;1===a.length&&(this.defaultFilterStack[0].renderTexture=s.current),a.push(o),o.resolution=u,o.multisample=h,o.legacy=p,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(l);t=this.tempRect.copyFrom(s.sourceFrame);n.projection.transform&&this.transformAABB(zt.copyFrom(n.projection.transform).invert(),t),c?(o.sourceFrame.fit(t),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(t)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,(s.current||n).resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,u,h),o.filters=e,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;t=this.tempRect;t.x=0,t.y=0,t.width=o.sourceFrame.width,t.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(s.sourceFrame),o.bindingDestinationFrame.copyFrom(s.destinationFrame),o.transform=n.projection.transform,n.projection.transform=null,s.bind(o.renderTexture,o.sourceFrame,t),n.framebuffer.clear(0,0,0,0)},Ht.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var n=r.inputSize,a=r.inputPixel,o=r.inputClamp;n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],a[0]=Math.round(n[0]*e.resolution),a[1]=Math.round(n[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=e.sourceFrame.width*n[2]-.5*a[2],o[3]=e.sourceFrame.height*n[3]-.5*a[3],e.legacy&&((a=r.filterArea)[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,t.renderTexture,m.CLEAR_MODES.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var s=e.renderTexture;(l=this.getOptimalFilterTexture(s.width,s.height,e.resolution)).filterFrame=s.filterFrame;for(var u=0,u=0;u<i.length-1;++u){1===u&&1<e.multisample&&((l=this.getOptimalFilterTexture(s.width,s.height,e.resolution)).filterFrame=s.filterFrame),i[u].apply(this,s,l,m.CLEAR_MODES.CLEAR,e);var h=s,s=l,l=h}i[u].apply(this,s,t.renderTexture,m.CLEAR_MODES.BLEND,e),1<u&&1<e.multisample&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(s),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},Ht.prototype.bindAndClear=function(t,e){void 0===e&&(e=m.CLEAR_MODES.CLEAR);var i=this.renderer,r=i.renderTexture,n=i.state;t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame?((i=this.tempRect).x=0,i.y=0,i.width=t.filterFrame.width,i.height=t.filterFrame.height,r.bind(t,t.filterFrame,i)):t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);n=1&n.stateId||this.forceClear;(e===m.CLEAR_MODES.CLEAR||e===m.CLEAR_MODES.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)},Ht.prototype.applyFilter=function(t,e,i,r){var n=this.renderer;n.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(m.DRAW_MODES.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(m.DRAW_MODES.TRIANGLE_STRIP))},Ht.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,i=e._texture.orig,n=t.set(n.width,0,0,n.height,r.x,r.y),r=e.worldTransform.copyTo(u.Matrix.TEMP_MATRIX);return r.invert(),n.prepend(r),n.scale(1/i.width,1/i.height),n.translate(e.anchor.x,e.anchor.y),n},Ht.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},Ht.prototype.getOptimalFilterTexture=function(t,e,i,r){return void 0===r&&(r=m.MSAA_QUALITY.NONE),this.texturePool.getOptimalTexture(t,e,i=void 0===i?1:i,r)},Ht.prototype.getFilterTexture=function(t,e,i){var r;"number"==typeof t&&(r=t,t=e,e=r),t=t||this.activeState.renderTexture;i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||m.MSAA_QUALITY.NONE);return i.filterFrame=t.filterFrame,i},Ht.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},Ht.prototype.emptyPool=function(){this.texturePool.clear(!0)},Ht.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},Ht.prototype.transformAABB=function(t,e){var i=kt[0],r=kt[1],n=kt[2],a=kt[3];i.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),a.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(a,a);var o=Math.min(i.x,r.x,n.x,a.x),s=Math.min(i.y,r.y,n.y,a.y),t=Math.max(i.x,r.x,n.x,a.x),a=Math.max(i.y,r.y,n.y,a.y);e.x=o,e.y=s,e.width=t-o,e.height=a-s},Ht.prototype.roundFrame=function(t,e,i,r,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){var a=n.a,o=n.b,s=n.c,u=n.d;if((1e-4<Math.abs(o)||1e-4<Math.abs(s))&&(1e-4<Math.abs(a)||1e-4<Math.abs(u)))return}(n=n?zt.copyFrom(n):zt.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}},Ht);function Ht(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new vt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Ot,this.quadUv=new It,this.tempRect=new u.Rectangle,this.activeState={},this.globalUniforms=new Ft({outputFrame:new u.Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}var Vt=(Xt.prototype.flush=function(){},Xt.prototype.destroy=function(){this.renderer=null},Xt.prototype.start=function(){},Xt.prototype.stop=function(){this.flush()},Xt.prototype.render=function(t){},Xt);function Xt(t){this.renderer=t}var Wt=(Yt.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},Yt.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},Yt.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},Yt.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;0<=r;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},Yt.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,a=t.ids,o=t.count,s=0,u=0;u<o;u++){var h=n[u],l=h._batchLocation;if(0<=l&&l<r&&e[l]===h)a[u]=l;else for(;s<r;){var c=e[s];if(!c||c._batchEnabled!==i||c._batchLocation!==s){a[u]=s,e[h._batchLocation=s]=h;break}s++}}},Yt.prototype.destroy=function(){this.renderer=null},Yt);function Yt(t){this.renderer=t,this.emptyRenderer=new Vt(t),this.currentRenderer=this.emptyRenderer}var qt=0,Zt=(Object.defineProperty(Jt.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),Jt.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=qt++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},Jt.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=qt++,this.renderer.runners.contextChange.emit(t)},Jt.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},Jt.prototype.createContext=function(t,e){var i;if(i=f.settings.PREFER_ENV>=m.ENV.WEBGL2?t.getContext("webgl2",e):i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},Jt.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},Jt.prototype.handleContextLost=function(t){t.preventDefault()},Jt.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},Jt.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},Jt.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},Jt.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&e.stencil;t=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=t},Jt);function Jt(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}var Kt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=m.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},Qt=new u.Rectangle,$t=(te.prototype.contextChange=function(){var e,t,i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion?(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,f.settings.PREFER_ENV===m.ENV.WEBGL_LEGACY&&(t=e=null),e?i.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,i.drawBuffers=function(){}),t||(this.writeDepthTexture=!1)):this.msaaSamples=i.getInternalformatParameter(i.RENDERBUFFER,i.RGBA8,i.SAMPLES)},te.prototype.bind=function(t,e,i){void 0===i&&(i=0);var r=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var a,o,s=0;s<t.colorTextures.length;s++){var u=t.colorTextures[s];this.renderer.texture.unbind(u.parentTextureArray||u)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?(a=e.width>>i,o=e.height>>i,n=a/e.width,this.setViewport(e.x*n,e.y*n,a,o)):(a=t.width>>i,o=t.height>>i,this.setViewport(0,0,a,o))}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},te.prototype.setViewport=function(t,e,i,r){var n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(te.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),te.prototype.clear=function(t,e,i,r,n){void 0===n&&(n=m.BUFFER_BITS.COLOR|m.BUFFER_BITS.DEPTH);var a=this.gl;a.clearColor(t,e,i,r),a.clear(n)},te.prototype.initFramebuffer=function(t){var e=this.gl,e=new Kt(e.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},te.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,n=r.length;e.drawBuffers||(n=Math.min(n,1));for(var a=0;a<n;a++){var o=r[a],o=o.parentTextureArray||o;this.renderer.texture.bind(o,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},te.prototype.updateFramebuffer=function(t,e){var i=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures,a=n.length;i.drawBuffers||(a=Math.min(a,1)),1<r.multisample&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var o,s=[],u=0;u<a;u++){var h=n[u],l=h.parentTextureArray||h;this.renderer.texture.bind(l,0),0===u&&r.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+u,h.target,l._glTextures[this.CONTEXT_UID].texture,e),s.push(i.COLOR_ATTACHMENT0+u))}1<s.length&&i.drawBuffers(s),t.depthTexture&&this.writeDepthTexture&&(o=t.depthTexture,this.renderer.texture.bind(o,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,o._glTextures[this.CONTEXT_UID].texture,e)),!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))},te.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},te.prototype.detectSamples=function(t){var e=this.msaaSamples,i=m.MSAA_QUALITY.NONE;if(t<=1||null===e)return i;for(var r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return i=1===i?m.MSAA_QUALITY.NONE:i},te.prototype.blit=function(t,e,i){var r=this.current,n=this.renderer,a=this.gl,o=this.CONTEXT_UID;if(2===n.context.webGLVersion&&r){n=r.glFramebuffers[o];if(n){if(!t){if(!n.msaaBuffer)return;o=r.colorTextures[0];if(!o)return;n.blitFramebuffer||(n.blitFramebuffer=new et(r.width,r.height),n.blitFramebuffer.addColorTexture(0,o)),(t=n.blitFramebuffer).colorTextures[0]!==o&&(t.colorTextures[0]=o,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=Qt).width=r.width,e.height=r.height);r=e.width===(i=i||e).width&&e.height===i.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,n.framebuffer),a.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,a.COLOR_BUFFER_BIT,r?a.NEAREST:a.LINEAR)}}},te.prototype.disposeFramebuffer=function(t,e){var i,r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;r&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(i=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose())},te.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},te.prototype.forceStencil=function(){var t,e,i,r,n=this.current;!n||(t=n.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(n.stencil=!0,e=n.width,i=n.height,n=(r=this.gl).createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n),t.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,t.multisample,r.DEPTH24_STENCIL8,e,i):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,i),t.stencil=n,r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n))},te.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.Rectangle},te.prototype.destroy=function(){this.renderer=null},te);function te(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new et(10,10),this.msaaSamples=null}var ee={5126:4,5123:2,5121:1},ie=(re.prototype.contextChange=function(){this.disposeAll(!0);var e,a,t=this.gl=this.renderer.gl,i=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==i.webGLVersion&&(e=this.renderer.context.extensions.vertexArrayObject,(e=f.settings.PREFER_ENV===m.ENV.WEBGL_LEGACY?null:e)?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})),2!==i.webGLVersion&&((a=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return a.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return a.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return a.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===i.webGLVersion||!!i.extensions.uint32ElementIndex},re.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);n=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},re.prototype.reset=function(){this.unbind()},re.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var r=t.buffers[i];e.update(r)}},re.prototype.checkCompatibility=function(t,e){var i,r=t.attributes;for(i in e.attributeData)if(!r[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},re.prototype.getSignature=function(t,e){var i,r=t.attributes,n=e.attributeData,a=["g",t.id];for(i in r)n[i]&&a.push(i,n[i].location);return a.join("-")},re.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0);var r=this.gl,n=this.CONTEXT_UID,a=this.renderer.buffer,o=e.program;o.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var s=this.getSignature(t,o),u=t.glVertexArrayObjects[this.CONTEXT_UID],e=u[s];if(e)return u[o.id]=e;var h,l=t.buffers,c=t.attributes,p={},d={};for(h in l)p[h]=0,d[h]=0;for(h in c)!c[h].size&&o.attributeData[h]?c[h].size=o.attributeData[h].size:c[h].size,p[c[h].buffer]+=c[h].size*ee[c[h].type];for(h in c){var f=c[h],m=f.size;void 0===f.stride&&(p[f.buffer]===m*ee[f.type]?f.stride=0:f.stride=p[f.buffer]),void 0===f.start&&(f.start=d[f.buffer],d[f.buffer]+=m*ee[f.type])}e=r.createVertexArray(),r.bindVertexArray(e);for(var v=0;v<l.length;v++){var g=l[v];a.bind(g),i&&g._glBuffers[n].refCount++}return this.activateVao(t,o),this._activeVao=e,u[o.id]=e,u[s]=e},re.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,a=t.buffers,o=null===(i=this.renderer)||void 0===i?void 0:i.buffer;if(t.disposeRunner.remove(this),r){if(o)for(var s=0;s<a.length;s++){var u=a[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||o.dispose(a[s],e))}if(!e)for(var h in r)"g"===h[0]&&(h=r[h],this._activeVao===h&&this.unbind(),n.deleteVertexArray(h));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},re.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},re.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,a=t.buffers,o=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);var s,u=null;for(s in o){var h=o[s],l=a[h.buffer],c=l._glBuffers[r];if(e.attributeData[s]){u!==c&&(n.bind(l),u=c);c=e.attributeData[s].location;if(i.enableVertexAttribArray(c),i.vertexAttribPointer(c,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(c,1)}}}},re.prototype.draw=function(t,e,i,r){var n,a,o=this.gl,s=this._activeGeometry;return s.indexBuffer?(a=2===(n=s.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,(2===n||4===n&&this.canUseUInt32ElementIndex)&&(s.instanced?o.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(i||0)*n,r||1):o.drawElements(t,e||s.indexBuffer.data.length,a,(i||0)*n))):s.instanced?o.drawArraysInstanced(t,i,e||s.getSize(),r||1):o.drawArrays(t,i,e||s.getSize()),this},re.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},re.prototype.destroy=function(){this.renderer=null},re);function re(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}var ne=(Object.defineProperty(ae.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),ae.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=m.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},ae.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},ae);function ae(t){void 0===t&&(t=null),this.type=m.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=f.settings.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}function oe(t,e,i){e=t.createShader(e);return t.shaderSource(e,i),t.compileShader(e),e}function se(t,e){var i=t.getShaderSource(e).split("\n").map(function(t,e){return e+": "+t}),e=t.getShaderInfoLog(e),e=e.split("\n"),r={},e=e.map(function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(t){return!(!t||r[t])&&(r[t]=!0)}),n=[""];e.forEach(function(t){i[t-1]="%c"+i[t-1]+"%c",n.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});e=i.join("\n");n[0]=e}function ue(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function he(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ue(2*e);case"bvec3":return ue(3*e);case"bvec4":return ue(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var le,ce={},pe=ce;function de(){var t,e;return(pe===ce||pe&&pe.isContextLost())&&(t=f.settings.ADAPTER.createCanvas(),e=void 0,(e=f.settings.PREFER_ENV>=m.ENV.WEBGL2?t.getContext("webgl2",{}):e)||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),pe=e),pe}function fe(t,e,i){if("precision"===t.substring(0,9))return i!==m.PRECISION.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;var r=e;return"precision "+(r=e===m.PRECISION.HIGH&&i!==m.PRECISION.HIGH?m.PRECISION.MEDIUM:r)+" float;\n"+t}var me={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ve(t){return me[t]}var ge=null,_e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ye(t,e){if(!ge){var i=Object.keys(_e);ge={};for(var r=0;r<i.length;++r){var n=i[r];ge[t[n]]=_e[n]}}return ge[e]}var xe=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],be={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Te={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Ee,Se=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Me(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Se.replace(/%forloop%/gi,function(t){for(var e="",i=0;i<t;++i)0<i&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var Ae=0,we={},De=(Object.defineProperty(Re,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Re,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),Re.from=function(t,e,i){var r=t+e,n=v.ProgramCache[r];return n||(v.ProgramCache[r]=n=new Re(t,e,i)),n},Re);function Re(t,e,i){void 0===i&&(i="pixi-shader"),this.id=Ae++,this.vertexSrc=t||Re.defaultVertexSrc,this.fragmentSrc=e||Re.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),we[i]?(we[i]++,i+="-"+we[i]):we[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=fe(this.vertexSrc,f.settings.PRECISION_VERTEX,m.PRECISION.HIGH),this.fragmentSrc=fe(this.fragmentSrc,f.settings.PRECISION_FRAGMENT,(le||(le=m.PRECISION.MEDIUM,(i=de())&&i.getShaderPrecisionFormat&&(i=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT),le=i.precision?m.PRECISION.HIGH:m.PRECISION.MEDIUM)),le))),this.glPrograms={},this.syncUniforms=null}var Oe=(Pe.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){i=e.uniforms[i];if(i.group&&this.checkUniformExists(t,i))return!0}return!1},Pe.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(Pe.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),Pe.from=function(t,e,i){return new Pe(De.from(t,e),i)},Pe);function Pe(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof Ft?e:new Ft(e):new Ft({})}var Ce=(Object.defineProperty(Ie.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==m.BLEND_MODES.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),Ie.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},Ie.for2d=function(){var t=new Ie;return t.depthTest=!1,t.blend=!0,t},Ie);function Ie(){this.data=0,this.blendMode=m.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}var Le,Ne=(h(Fe,Le=Oe),Fe.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(Fe.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(Fe.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(Fe,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(Fe,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),Fe);function Fe(t,e,i){var r=this,e=De.from(t||Fe.defaultVertexSrc,e||Fe.defaultFragmentSrc);return(r=Le.call(this,e,i)||this).padding=0,r.resolution=f.settings.FILTER_RESOLUTION,r.multisample=f.settings.FILTER_MULTISAMPLE,r.enabled=!0,r.autoFit=!0,r.state=new Ce,r}var Be=new u.Matrix,Ue=(Object.defineProperty(Ge.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),Ge.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e[r]=n*i.a+a*i.c+i.tx,e[r+1]=n*i.b+a*i.d+i.ty}return e},Ge.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(Be.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Be));t=e.baseTexture,i=this.uClampFrame,r=this.clampMargin/t.resolution,n=this.clampOffset;return i[0]=(e._frame.x+r+n)/t.width,i[1]=(e._frame.y+r+n)/t.height,i[2]=(e._frame.x+e._frame.width-r+n)/t.width,i[3]=(e._frame.y+e._frame.height-r+n)/t.height,this.uClampOffset[0]=n/t.realWidth,this.uClampOffset[1]=n/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},Ge);function Ge(t,e){this._texture=t,this.mapCoord=new u.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var ke,ze=(h(je,ke=Ne),Object.defineProperty(je.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),je.prototype.apply=function(t,e,i,r){var n=this._maskSprite,a=n._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Ue(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},je);function je(t,e,i){var r=this,n=null;return"string"!=typeof t&&void 0===e&&void 0===i&&(n=t,i=e=t=void 0),(r=ke.call(this,t||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",e||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i)||this).maskSprite=n,r.maskMatrix=new u.Matrix,r}var He=(Ve.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},Ve.prototype.push=function(t,e){var i=e;i.isMaskData||((r=this.maskDataPool.pop()||new ne).pooled=!0,r.maskObject=e,i=r);var r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==m.MASK_TYPES.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case m.MASK_TYPES.SCISSOR:this.renderer.scissor.push(i);break;case m.MASK_TYPES.STENCIL:this.renderer.stencil.push(i);break;case m.MASK_TYPES.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case m.MASK_TYPES.COLOR:this.pushColorMask(i)}i.type===m.MASK_TYPES.SPRITE&&this.maskStack.push(i)},Ve.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case m.MASK_TYPES.SCISSOR:this.renderer.scissor.pop(e);break;case m.MASK_TYPES.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case m.MASK_TYPES.SPRITE:this.popSpriteMask(e);break;case m.MASK_TYPES.COLOR:this.popColorMask(e)}e.reset(),e.pooled&&this.maskDataPool.push(e),0===this.maskStack.length||(t=this.maskStack[this.maskStack.length-1]).type===m.MASK_TYPES.SPRITE&&t._filters&&(t._filters[0].maskSprite=t.maskObject)}},Ve.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=m.MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=m.MASK_TYPES.SCISSOR:t.type=m.MASK_TYPES.STENCIL:t.type=m.MASK_TYPES.COLOR},Ve.prototype.pushSpriteMask=function(t){var e,i,r=t.maskObject,n=t._target,a=(a=t._filters)||((a=this.alphaMaskPool[this.alphaMaskIndex])||(this.alphaMaskPool[this.alphaMaskIndex]=[new ze])),o=this.renderer,s=o.renderTexture;u=s.current?(e=s.current,i=t.resolution||e.resolution,null!==(s=t.multisample)&&void 0!==s?s:e.multisample):(i=t.resolution||o.resolution,null!==(u=t.multisample)&&void 0!==u?u:o.multisample),a[0].resolution=i,a[0].multisample=u,a[0].maskSprite=r;var u=n.filterArea;n.filterArea=r.getBounds(!0),o.filter.push(n,a),n.filterArea=u,t._filters||this.alphaMaskIndex++},Ve.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},Ve.prototype.pushColorMask=function(t){var e=t._colorMask,t=t._colorMask=e&t.colorMask;t!==e&&this.renderer.gl.colorMask(0!=(1&t),0!=(2&t),0!=(4&t),0!=(8&t))},Ve.prototype.popColorMask=function(t){var e=t._colorMask,t=0<this.maskStack.length?this.maskStack[this.maskStack.length-1]._colorMask:15;t!==e&&this.renderer.gl.colorMask(0!=(1&t),0!=(2&t),0!=(4&t),0!=(8&t))},Ve.prototype.destroy=function(){this.renderer=null},Ve);function Ve(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}var Xe=(We.prototype.getStackLength=function(){return this.maskStack.length},We.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==i&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},We.prototype._useCurrent=function(){},We.prototype.destroy=function(){this.renderer=null,this.maskStack=null},We);function We(t){this.renderer=t,this.maskStack=[],this.glConst=0}var Ye,qe=new u.Matrix,Ze=[],Je=(h(Ke,Ye=Xe),Ke.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},Ke.prototype.calcScissorRect=function(t){var e,i,r,n;t._scissorRectLocal||(e=t._scissorRect,n=t.maskObject,r=(i=this.renderer).renderTexture,n=n.getBounds(!0,null!==(n=Ze.pop())&&void 0!==n?n:new u.Rectangle),this.roundFrameToPixels(n,(r.current||i).resolution,r.sourceFrame,r.destinationFrame,i.projection.transform),e&&n.fit(e),t._scissorRectLocal=n)},Ke.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,i=t.b,r=t.c,t=t.d;return(1e-4<Math.abs(i)||1e-4<Math.abs(r))&&(1e-4<Math.abs(e)||1e-4<Math.abs(t))},Ke.prototype.testScissor=function(t){var e=t.maskObject;if(!e.isFastRect||!e.isFastRect())return!1;if(Ke.isMatrixRotated(e.worldTransform))return!1;if(Ke.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);t=t._scissorRectLocal;return 0<t.width&&0<t.height},Ke.prototype.roundFrameToPixels=function(t,e,i,r,n){Ke.isMatrixRotated(n)||((n=n?qe.copyFrom(n):qe.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.renderer.filter.transformAABB(n,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))},Ke.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},Ke.prototype.pop=function(t){var e=this.renderer.gl;t&&Ze.push(t._scissorRectLocal),0<this.getStackLength()?this._useCurrent():e.disable(e.SCISSOR_TEST)},Ke.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y;this.renderer.gl.scissor(t.x,e,t.width,t.height)},Ke);function Ke(t){t=Ye.call(this,t)||this;return t.glConst=f.settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,t}var Qe,$e=(h(ti,Qe=Xe),ti.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},ti.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;var n=t._colorMask;0!==n&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(t._colorMask=n,i.colorMask(0!=(1&n),0!=(2&n),0!=(4&n),0!=(8&n))),this._useCurrent()},ti.prototype.pop=function(t){var e,i,r=this.renderer.gl;0===this.getStackLength()?r.disable(r.STENCIL_TEST):(0!==(i=(e=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null)?e._colorMask:15)&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,r.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))),this._useCurrent())},ti.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},ti);function ti(t){t=Qe.call(this,t)||this;return t.glConst=f.settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,t}var ei=(ii.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)},ii.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,r=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=r*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-r-e.y*n.d},ii.prototype.setTransform=function(t){},ii.prototype.destroy=function(){this.renderer=null},ii);function ii(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new u.Matrix,this.transform=null}var ri=new u.Rectangle,ni=new u.Rectangle,ai=(oi.prototype.bind=function(t,e,i){var r,n,a,o=this.renderer;(this.current=t=void 0===t?null:t)?(a=(r=t.baseTexture).resolution,e||(ri.width=t.frame.width,ri.height=t.frame.height,e=ri),i||(ni.x=t.frame.x,ni.y=t.frame.y,ni.width=e.width,ni.height=e.height,i=ni),n=r.framebuffer):(a=o.resolution,e||(ri.width=o.screen.width,ri.height=o.screen.height,e=ri),i||((i=ri).width=e.width,i.height=e.height));var s=this.viewportFrame;s.x=i.x*a,s.y=i.y*a,s.width=i.width*a,s.height=i.height*a,t||(s.y=o.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(n,s),this.renderer.projection.update(i,e,a,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},oi.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i,r,n=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer.screen,o=n.width!==a.width||n.height!==a.height;o&&(i=(r=this.viewportFrame).x,n=r.y,a=r.width,r=r.height,i=Math.round(i),n=Math.round(n),a=Math.round(a),r=Math.round(r),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(i,n,a,r)),this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),o&&this.renderer.scissor.pop()},oi.prototype.resize=function(){this.bind(null)},oi.prototype.reset=function(){this.bind(null)},oi.prototype.destroy=function(){this.renderer=null},oi);function oi(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new u.Rectangle,this.destinationFrame=new u.Rectangle,this.viewportFrame=new u.Rectangle}function si(t,e,i,r,n){i.buffer.update(n)}var ui={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},hi={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function li(t){for(var e=t.map(function(t){return{data:t,offset:0,dataLen:0,dirty:0}}),i=0,r=0,n=0,a=0;a<e.length;a++){var o,s=e[a],i=hi[s.data.type];1<s.data.size&&(i=Math.max(i,16)*s.data.size),r%(s.dataLen=i)!=0&&r<16&&(r+=o=r%i%16,n+=o),16<r+i?(n=16*Math.ceil(n/16),s.offset=n,n+=i,r=i):(s.offset=n,r+=i,n+=i)}return{uboElements:e,size:n=16*Math.ceil(n/16)}}function ci(t,e){var i,r=[];for(i in t)e[i]&&r.push(e[i]);return r.sort(function(t,e){return t.index-e.index}),r}function pi(t,e){if(!t.autoManage)return{size:0,syncFunc:si};for(var e=li(ci(t.uniforms,e)),i=e.uboElements,e=e.size,r=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],n=0;n<i.length;n++){for(var a,o,s=i[n],u=t.uniforms[s.data.name],h=s.data.name,l=!1,c=0;c<xe.length;c++){var p=xe[c];if(p.codeUbo&&p.test(s.data,u)){r.push("offset = "+s.offset/4+";",xe[c].codeUbo(s.data.name,u)),l=!0;break}}l||(1<s.data.size?(a=ve(s.data.type),o=Math.max(hi[s.data.type]/16,1),r.push("\n                cv = ud."+h+".value;\n                v = uv."+h+";\n                offset = "+s.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+s.data.size*o+"; i++)\n                {\n                    for(var j = 0; j < "+(o=a/o)+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+(4-o%4)%4+";\n                }\n\n                ")):(o=ui[s.data.type],r.push("\n                cv = ud."+h+".value;\n                v = uv."+h+";\n                offset = "+s.offset/4+";\n                "+o+";\n                ")))}return r.push("\n       renderer.buffer.update(buffer);\n    "),{size:e,syncFunc:new Function("ud","uv","renderer","syncData","buffer",r.join("\n"))}}function di(){}var fi=(mi.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},mi);function mi(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}function vi(t,e){var i,r,n,a,o=oe(t,t.VERTEX_SHADER,e.vertexSrc),s=oe(t,t.FRAGMENT_SHADER,e.fragmentSrc),u=t.createProgram();if(t.attachShader(u,o),t.attachShader(u,s),t.linkProgram(u),t.getProgramParameter(u,t.LINK_STATUS)||(r=u,n=o,a=s,(i=t).getProgramParameter(r,i.LINK_STATUS)||(i.getShaderParameter(n,i.COMPILE_STATUS)||se(i,n),i.getShaderParameter(a,i.COMPILE_STATUS)||se(i,a),i.getProgramInfoLog(r))),e.attributeData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var a,o=e.getActiveAttrib(t,n);0!==o.name.indexOf("gl_")&&(a={type:a=ye(e,o.type),name:o.name,size:ve(a),location:e.getAttribLocation(t,o.name)},i[o.name]=a)}return i}(u,t),e.uniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var a=e.getActiveUniform(t,n),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),u=ye(e,a.type);i[o]={name:o,index:n,type:u,size:a.size,isArray:s,value:he(u,a.size)}}return i}(u,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var h=Object.keys(e.attributeData);h.sort(function(t,e){return e<t?1:-1});for(var l=0;l<h.length;l++)e.attributeData[h[l]].location=l,t.bindAttribLocation(u,l,h[l]);t.linkProgram(u)}t.deleteShader(o),t.deleteShader(s);var c={};for(l in e.uniformData){var p=e.uniformData[l];c[l]={location:t.getUniformLocation(u,l),value:he(p.type,p.size)}}return new fi(u,c)}var gi=0,_i={textureCount:0,uboCount:0},yi=(xi.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Ee)return Ee;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Ee=!0===t({a:"b"},"a","b")}catch(t){Ee=!1}return Ee}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},xi.prototype.contextChange=function(t){this.gl=t,this.reset()},xi.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(_i.textureCount=0,_i.uboCount=0,this.syncUniformGroup(t.uniformGroup,_i)),r},xi.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},xi.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},xi.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},xi.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var i,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(i in t.uniforms){var n=e[i];if(n){for(var a,o=t.uniforms[i],s=!1,u=0;u<xe.length;u++)if(xe[u].test(n,o)){r.push(xe[u].code(i,o)),s=!0;break}s||(a=(1===n.size?be:Te)[n.type].replace("location",'ud["'+i+'"].location'),r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+a+";"))}else null!==(a=t.uniforms[i])&&void 0!==a&&a.group&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},xi.prototype.syncUniformBufferGroup=function(t,e){var i,r=this.getGlProgram();t.static&&0===t.dirtyId&&r.uniformGroups[t.id]||(t.dirtyId=0,i=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e),t.buffer.update(),i(r.uniformData,t.uniforms,this.renderer,_i,t.buffer)),this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])},xi.prototype.createSyncBufferGroup=function(t,e,i){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;r=this.getSignature(t,this.shader.program.uniformData,"ubo"),n=(n=this._uboCache[r])||(this._uboCache[r]=pi(t,this.shader.program.uniformData));return t.autoManage&&(r=new Float32Array(n.size/4),t.buffer.update(r)),e.uniformGroups[t.id]=n.syncFunc,e.uniformGroups[t.id]},xi.prototype.getSignature=function(t,e,i){var r,n=[i+"-"];for(r in t.uniforms)n.push(r),e[r]&&n.push(e[r].type);return n.join("-")},xi.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},xi.prototype.generateProgram=function(t){var e=this.gl,t=t.program,e=vi(e,t);return t.glPrograms[this.renderer.CONTEXT_UID]=e},xi.prototype.reset=function(){this.program=null,this.shader=null},xi.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},xi);function xi(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=gi++}var bi=(Ti.prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,(e=void 0===e?[]:e)[m.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[m.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.NONE]=[0,0],e[m.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[m.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[m.BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[m.BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[m.BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[m.BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[m.BLEND_MODES.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[m.BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},Ti.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},Ti.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},Ti.prototype.setBlend=function(t){this.updateCheck(Ti.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},Ti.prototype.setOffset=function(t){this.updateCheck(Ti.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},Ti.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},Ti.prototype.setDepthMask=function(t){this.gl.depthMask(t)},Ti.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},Ti.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},Ti.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},Ti.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},Ti.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},Ti.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},Ti.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},Ti.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},Ti.prototype.destroy=function(){this.gl=null},Ti);function Ti(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=m.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Ce,this.defaultState.blend=!0}var Ei=(Si.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==m.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},Si.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),i=!(e[r]=null))}if(i){for(var a=0,r=0;r<e.length;r++)null!==e[r]&&(e[a++]=e[r]);e.length=a}},Si.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;0<=r;r--)this.unload(t.children[r])},Si.prototype.destroy=function(){this.renderer=null},Si);function Si(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=f.settings.GC_MAX_IDLE,this.checkCountMax=f.settings.GC_MAX_CHECK_COUNT,this.mode=f.settings.GC_MODE}var Mi=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=m.TYPES.UNSIGNED_BYTE,this.internalFormat=m.FORMATS.RGBA,this.samplerType=0},Ai=(wi.prototype.contextChange=function(){var t,e,i,r=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=(t=r,o="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((i={})[m.TYPES.UNSIGNED_BYTE]=((e={})[m.FORMATS.RGBA]=t.RGBA8,e[m.FORMATS.RGB]=t.RGB8,e[m.FORMATS.RG]=t.RG8,e[m.FORMATS.RED]=t.R8,e[m.FORMATS.RGBA_INTEGER]=t.RGBA8UI,e[m.FORMATS.RGB_INTEGER]=t.RGB8UI,e[m.FORMATS.RG_INTEGER]=t.RG8UI,e[m.FORMATS.RED_INTEGER]=t.R8UI,e[m.FORMATS.ALPHA]=t.ALPHA,e[m.FORMATS.LUMINANCE]=t.LUMINANCE,e[m.FORMATS.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,e),i[m.TYPES.BYTE]=((e={})[m.FORMATS.RGBA]=t.RGBA8_SNORM,e[m.FORMATS.RGB]=t.RGB8_SNORM,e[m.FORMATS.RG]=t.RG8_SNORM,e[m.FORMATS.RED]=t.R8_SNORM,e[m.FORMATS.RGBA_INTEGER]=t.RGBA8I,e[m.FORMATS.RGB_INTEGER]=t.RGB8I,e[m.FORMATS.RG_INTEGER]=t.RG8I,e[m.FORMATS.RED_INTEGER]=t.R8I,e),i[m.TYPES.UNSIGNED_SHORT]=((e={})[m.FORMATS.RGBA_INTEGER]=t.RGBA16UI,e[m.FORMATS.RGB_INTEGER]=t.RGB16UI,e[m.FORMATS.RG_INTEGER]=t.RG16UI,e[m.FORMATS.RED_INTEGER]=t.R16UI,e[m.FORMATS.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,e),i[m.TYPES.SHORT]=((e={})[m.FORMATS.RGBA_INTEGER]=t.RGBA16I,e[m.FORMATS.RGB_INTEGER]=t.RGB16I,e[m.FORMATS.RG_INTEGER]=t.RG16I,e[m.FORMATS.RED_INTEGER]=t.R16I,e),i[m.TYPES.UNSIGNED_INT]=((e={})[m.FORMATS.RGBA_INTEGER]=t.RGBA32UI,e[m.FORMATS.RGB_INTEGER]=t.RGB32UI,e[m.FORMATS.RG_INTEGER]=t.RG32UI,e[m.FORMATS.RED_INTEGER]=t.R32UI,e[m.FORMATS.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,e),i[m.TYPES.INT]=((e={})[m.FORMATS.RGBA_INTEGER]=t.RGBA32I,e[m.FORMATS.RGB_INTEGER]=t.RGB32I,e[m.FORMATS.RG_INTEGER]=t.RG32I,e[m.FORMATS.RED_INTEGER]=t.R32I,e),i[m.TYPES.FLOAT]=((e={})[m.FORMATS.RGBA]=t.RGBA32F,e[m.FORMATS.RGB]=t.RGB32F,e[m.FORMATS.RG]=t.RG32F,e[m.FORMATS.RED]=t.R32F,e[m.FORMATS.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,e),i[m.TYPES.HALF_FLOAT]=((e={})[m.FORMATS.RGBA]=t.RGBA16F,e[m.FORMATS.RGB]=t.RGB16F,e[m.FORMATS.RG]=t.RG16F,e[m.FORMATS.RED]=t.R16F,e),i[m.TYPES.UNSIGNED_SHORT_5_6_5]=((e={})[m.FORMATS.RGB]=t.RGB565,e),i[m.TYPES.UNSIGNED_SHORT_4_4_4_4]=((e={})[m.FORMATS.RGBA]=t.RGBA4,e),i[m.TYPES.UNSIGNED_SHORT_5_5_5_1]=((e={})[m.FORMATS.RGBA]=t.RGB5_A1,e),i[m.TYPES.UNSIGNED_INT_2_10_10_10_REV]=((e={})[m.FORMATS.RGBA]=t.RGB10_A2,e[m.FORMATS.RGBA_INTEGER]=t.RGB10_A2UI,e),i[m.TYPES.UNSIGNED_INT_10F_11F_11F_REV]=((e={})[m.FORMATS.RGB]=t.R11F_G11F_B10F,e),i[m.TYPES.UNSIGNED_INT_5_9_9_9_REV]=((e={})[m.FORMATS.RGB]=t.RGB9_E5,e),i[m.TYPES.UNSIGNED_INT_24_8]=((e={})[m.FORMATS.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,e),i[m.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]=((e={})[m.FORMATS.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,e),i):((o={})[m.TYPES.UNSIGNED_BYTE]=((i={})[m.FORMATS.RGBA]=t.RGBA,i[m.FORMATS.RGB]=t.RGB,i[m.FORMATS.ALPHA]=t.ALPHA,i[m.FORMATS.LUMINANCE]=t.LUMINANCE,i[m.FORMATS.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,i),o[m.TYPES.UNSIGNED_SHORT_5_6_5]=((i={})[m.FORMATS.RGB]=t.RGB,i),o[m.TYPES.UNSIGNED_SHORT_4_4_4_4]=((i={})[m.FORMATS.RGBA]=t.RGBA,i),o[m.TYPES.UNSIGNED_SHORT_5_5_5_1]=((i={})[m.FORMATS.RGBA]=t.RGBA,i),o));var n=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(var a=0;a<n;a++)this.boundTextures[a]=null;this.emptyTextures={};var o=new Mi(r.createTexture());r.bindTexture(r.TEXTURE_2D,o.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[r.TEXTURE_2D]=o,this.emptyTextures[r.TEXTURE_CUBE_MAP]=new Mi(r.createTexture()),r.bindTexture(r.TEXTURE_CUBE_MAP,this.emptyTextures[r.TEXTURE_CUBE_MAP].texture);for(a=0;a<6;a++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null);r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR);for(a=0;a<this.boundTextures.length;a++)this.bind(null,a)},wi.prototype.bind=function(t,e){void 0===e&&(e=0);var i,r=this.gl;(t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray?(t.touched=this.renderer.textureGC.count,i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null)},wi.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},wi.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},wi.prototype.ensureSamplerType=function(t){var e=this.boundTextures,i=this.hasIntegerTextures,r=this.CONTEXT_UID;if(i)for(var n=t-1;0<=n;--n){var a=e[n];a&&a._glTextures[r].samplerType!==m.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(a)}},wi.prototype.initTexture=function(t){var e=new Mi(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},wi.prototype.initTextureType=function(t,e){var i;e.internalFormat=null!==(i=null===(i=this.internalFormats[t.type])||void 0===i?void 0:i[t.format])&&void 0!==i?i:t.format,2===this.webGLVersion&&t.type===m.TYPES.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},wi.prototype.updateTexture=function(t){var e,i,r,n=t._glTextures[this.CONTEXT_UID];n&&(r=this.renderer,this.initTextureType(t,n),t.resource&&t.resource.upload(r,t,n)?n.samplerType!==m.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0):(e=t.realWidth,i=t.realHeight,r=r.gl,(n.width!==e||n.height!==i||n.dirtyId<0)&&(n.width=e,n.height=i,r.texImage2D(t.target,0,n.internalFormat,e,i,0,t.format,n.type,null))),t.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(t),n.dirtyId=t.dirtyId)},wi.prototype.destroyTexture=function(t,e){var i=this.gl;(t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e||-1!==(t=this.managedTextures.indexOf(t))&&v.removeItems(this.managedTextures,t,1))},wi.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==m.MIPMAP_MODES.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=m.WRAP_MODES.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},wi.prototype.setStyle=function(t,e){var i,r=this.gl;e.mipmap&&t.mipmap!==m.MIPMAP_MODES.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===m.SCALE_MODES.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST),(i=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===m.SCALE_MODES.LINEAR&&(e=Math.min(t.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),r.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,e))):r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===m.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST),r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===m.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)},wi.prototype.destroy=function(){this.renderer=null},wi);function wi(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new T,this.hasIntegerTextures=!1}var Di,Ri={__proto__:null,FilterSystem:jt,BatchSystem:Wt,ContextSystem:Zt,FramebufferSystem:$t,GeometrySystem:ie,MaskSystem:He,ScissorSystem:Je,StencilSystem:$e,ProjectionSystem:ei,RenderTextureSystem:ai,ShaderSystem:yi,StateSystem:bi,TextureGCSystem:Ei,TextureSystem:Ai},Oi=new u.Matrix,Pi=(h(Ci,Di=v.EventEmitter),Ci.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(Ci.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(Ci.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),Ci.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);t=this.view.width/this.resolution,e=this.view.height/this.resolution;this.screen.width=t,this.screen.height=e,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},Ci.prototype.generateTexture=function(t,e,i,r){"number"==typeof(e=void 0===e?{}:e)&&(v.deprecation("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:i,region:r});i=e.region,e=function(t,e){var i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);e=ft.create(l({width:r.width,height:r.height},e));return Oi.tx=-r.x,Oi.ty=-r.y,this.render(t,{renderTexture:e,clear:!1,transform:Oi,skipUpdateTransform:!!t.parent}),e},Ci.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);t=this;t.plugins=null,t.type=m.RENDERER_TYPE.UNKNOWN,t.view=null,t.screen=null,t._tempDisplayObjectParent=null,t.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(Ci.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=v.hex2string(t),v.hex2rgb(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(Ci.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),Ci);function Ci(t,e){void 0===t&&(t=m.RENDERER_TYPE.UNKNOWN);var i=Di.call(this)||this;return e=Object.assign({},f.settings.RENDER_OPTIONS,e),i.options=e,i.type=t,i.screen=new u.Rectangle(0,0,e.width,e.height),i.view=e.view||f.settings.ADAPTER.createCanvas(),i.resolution=e.resolution||f.settings.RESOLUTION,i.useContextAlpha=e.useContextAlpha,i.autoDensity=!!e.autoDensity,i.preserveDrawingBuffer=e.preserveDrawingBuffer,i.clearBeforeRender=e.clearBeforeRender,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,1],i._backgroundColorString="#000000",i.backgroundColor=e.backgroundColor||i._backgroundColor,i.backgroundAlpha=e.backgroundAlpha,void 0!==e.transparent&&(v.deprecation("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),i.useContextAlpha=e.transparent,i.backgroundAlpha=e.transparent?0:1),i._lastObjectRendered=null,i.plugins={},i}var Ii=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Li=(Ni.prototype.destroy=function(){this.renderer=null},Ni.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},Ni.prototype.bind=function(t){var e=this.gl,i=this.CONTEXT_UID,i=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,i.buffer)},Ni.prototype.bindBufferBase=function(t,e){var i=this.gl,r=this.CONTEXT_UID;this.boundBufferBases[e]!==t&&(r=t._glBuffers[r]||this.createGLBuffer(t),this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,r.buffer))},Ni.prototype.bindBufferRange=function(t,e,i){var r=this.gl,n=this.CONTEXT_UID;i=i||0;t=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,t.buffer,256*i,256)},Ni.prototype.update=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i];t._updateID!==r.updateID&&(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength?e.bufferSubData(t.type,0,t.data):(i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)))},Ni.prototype.dispose=function(t,e){var i,r;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],i=t._glBuffers[this.CONTEXT_UID],r=this.gl,t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Ni.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},Ni.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,i=this.gl;return t._glBuffers[e]=new Ii(i.createBuffer()),(this.managedBuffers[t.id]=t).disposeRunner.add(this),t._glBuffers[e]},Ni);function Ni(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}var Fi,Bi=(h(Ui,Fi=Pi),Ui.create=function(t){if(v.isWebGLSupported())return new Ui(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Ui.prototype.contextChange=function(){var t,e,i=this.gl;1===this.context.webGLVersion?(e=i.getParameter(i.FRAMEBUFFER_BINDING),i.bindFramebuffer(i.FRAMEBUFFER,null),t=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.FRAMEBUFFER,e)):(e=i.getParameter(i.DRAW_FRAMEBUFFER_BINDING),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),t=i.getParameter(i.SAMPLES),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,e)),t>=m.MSAA_QUALITY.HIGH?this.multisample=m.MSAA_QUALITY.HIGH:t>=m.MSAA_QUALITY.MEDIUM?this.multisample=m.MSAA_QUALITY.MEDIUM:t>=m.MSAA_QUALITY.LOW?this.multisample=m.MSAA_QUALITY.LOW:this.multisample=m.MSAA_QUALITY.NONE},Ui.prototype.addSystem=function(t,e){var i,r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(i in this[e]=r,this.runners)this.runners[i].add(r);return this},Ui.prototype.render=function(t,e){var i,r,n,a;e&&(a=e instanceof ft?(v.deprecation("6.0.0","Renderer#render arguments changed, use options instead."),i=e,r=arguments[2],n=arguments[3],arguments[4]):(i=e.renderTexture,r=e.clear,n=e.transform,e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(i||(this._lastObjectRendered=t),a||(a=t.enableTempParent(),t.updateTransform(),t.disableTempParent(a)),this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender"))},Ui.prototype.generateTexture=function(t,e,i,r){r=Fi.prototype.generateTexture.call(this,t,e=void 0===e?{}:e,i,r);return this.framebuffer.blit(),r},Ui.prototype.resize=function(t,e){Fi.prototype.resize.call(this,t,e),this.runners.resize.emit(this.screen.height,this.screen.width)},Ui.prototype.reset=function(){return this.runners.reset.emit(),this},Ui.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},Ui.prototype.destroy=function(t){for(var e in this.runners.destroy.emit(),this.runners)this.runners[e].destroy();Fi.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(Ui.prototype,"extract",{get:function(){return v.deprecation("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),Ui.registerPlugin=function(t,e){v.deprecation("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),r.extensions.add({name:t,type:r.ExtensionType.RendererPlugin,ref:e})},Ui.__plugins={},Ui);function Ui(t){var e=Fi.call(this,m.RENDERER_TYPE.WEBGL,t)||this;return t=e.options,e.gl=null,e.CONTEXT_UID=0,e.runners={destroy:new n.Runner("destroy"),contextChange:new n.Runner("contextChange"),reset:new n.Runner("reset"),update:new n.Runner("update"),postrender:new n.Runner("postrender"),prerender:new n.Runner("prerender"),resize:new n.Runner("resize")},e.runners.contextChange.add(e),e.globalUniforms=new Ft({projectionMatrix:new u.Matrix},!0),e.addSystem(He,"mask").addSystem(Zt,"context").addSystem(bi,"state").addSystem(yi,"shader").addSystem(Ai,"texture").addSystem(Li,"buffer").addSystem(ie,"geometry").addSystem($t,"framebuffer").addSystem(Je,"scissor").addSystem($e,"stencil").addSystem(ei,"projection").addSystem(Ei,"textureGC").addSystem(jt,"filter").addSystem(ai,"renderTexture").addSystem(Wt,"batch"),e.initPlugins(Ui.__plugins),e.multisample=void 0,t.context?e.context.initFromContext(t.context):e.context.initFromOptions({alpha:!!e.useContextAlpha,antialias:t.antialias,premultipliedAlpha:e.useContextAlpha&&"notMultiplied"!==e.useContextAlpha,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:e.options.powerPreference}),e.renderingToScreen=!0,v.sayHello(2===e.context.webGLVersion?"WebGL 2":"WebGL 1"),e.resize(e.options.width,e.options.height),e}r.extensions.handleByMap(r.ExtensionType.RendererPlugin,Bi.__plugins);var Gi=(ki.prototype.destroy=function(){this.renderer=null},ki);function ki(t){v.deprecation("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}var zi=function(){this.texArray=null,this.blend=0,this.type=m.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null},ji=(Hi.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},Hi);function Hi(){this.elements=[],this.ids=[],this.count=0}var Vi=(Object.defineProperty(Xi.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(Xi.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(Xi.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(Xi.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(Xi.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),Xi.prototype.view=function(t){return this[t+"View"]},Xi.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Xi.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Xi);function Xi(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var Wi,Yi=(h(qi,Wi=Vt),qi.prototype.contextChange=function(){var t=this.renderer.gl;f.settings.PREFER_ENV===m.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Me(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},qi.prototype.initFlushBuffers=function(){for(var t=qi._drawCallPool,e=qi._textureArrayPool,i=this.size/4,r=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new zi);for(;e.length<r;)e.push(new ji);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},qi.prototype.onPrerender=function(){this._flushId=0},qi.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},qi.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,i=qi._textureArrayPool,r=this.renderer.batch,n=this._tempBoundTextures,a=this.renderer.textureGC.count,o=++T._globalBatch,s=0,u=i[0],h=0;r.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==o&&(u.count>=e&&(r.boundArray(u,n,o,e),this.buildDrawCalls(u,h,l),h=l,u=i[++s],++o),c._batchEnabled=o,c.touched=a,u.elements[u.count++]=c)}0<u.count&&(r.boundArray(u,n,o,e),this.buildDrawCalls(u,h,this._bufferSize),++s,++o);for(l=0;l<n.length;l++)n[l]=null;T._globalBatch=o},qi.prototype.buildDrawCalls=function(t,e,i){var r=this._bufferedElements,n=this._attributeBuffer,a=this._indexBuffer,o=this.vertexSize,s=qi._drawCallPool,u=this._dcIndex,h=this._aIndex,l=this._iIndex,c=s[u];c.start=this._iIndex,c.texArray=t;for(var p=e;p<i;++p){var d=r[p],f=d._texture.baseTexture,f=v.premultiplyBlendMode[f.alphaMode?1:0][d.blendMode];r[p]=null,e<p&&c.blend!==f&&(c.size=l-c.start,e=p,(c=s[++u]).texArray=t,c.start=l),this.packInterleavedGeometry(d,n,a,h,l),h+=d.vertexData.length/2*o,l+=d.indices.length,c.blend=f}e<i&&(c.size=l-c.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=l},qi.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},qi.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;f.settings.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},qi.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,i=e.gl,r=e.state,n=qi._drawCallPool,a=null,o=0;o<t;o++){var s=n[o],u=s.texArray,h=s.type,l=s.size,c=s.start,s=s.blend;a!==u&&this.bindAndClearTexArray(a=u),this.state.blendMode=s,r.set(this.state),i.drawElements(h,l,i.UNSIGNED_SHORT,2*c)}},qi.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},qi.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),f.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},qi.prototype.stop=function(){this.flush()},qi.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),Wi.prototype.destroy.call(this)},qi.prototype.getAttributeBuffer=function(t){var e=v.nextPow2(Math.ceil(t/8)),t=v.log2(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new Vi(e*this.vertexSize*4)),t},qi.prototype.getIndexBuffer=function(t){var e=v.nextPow2(Math.ceil(t/12)),i=v.log2(e),t=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);e=this._iBuffers[i];return e||(this._iBuffers[i]=e=new Uint16Array(t)),e},qi.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var a=e.uint32View,o=e.float32View,s=r/this.vertexSize,u=t.uvs,h=t.indices,l=t.vertexData,c=t._texture.baseTexture._batchLocation,e=Math.min(t.worldAlpha,1),p=e<1&&t._texture.baseTexture.alphaMode?v.premultiplyTint(t._tintRGB,e):t._tintRGB+(255*e<<24),d=0;d<l.length;d+=2)o[r++]=l[d],o[r++]=l[d+1],o[r++]=u[d],o[r++]=u[d+1],a[r++]=p,o[r++]=c;for(d=0;d<h.length;d++)i[n++]=s+h[d]},qi._drawCallPool=[],qi._textureArrayPool=[],qi);function qi(t){var e=Wi.call(this,t)||this;return e.shaderGenerator=null,e.geometryClass=null,e.vertexSize=null,e.state=Ce.for2d(),e.size=4*f.settings.SPRITE_BATCH_SIZE,e._vertexCount=0,e._indexCount=0,e._bufferedElements=[],e._bufferedTextures=[],e._bufferSize=0,e._shader=null,e._packedGeometries=[],e._packedGeometryPoolSize=2,e._flushId=0,e._aBuffers={},e._iBuffers={},e.MAX_TEXTURES=1,e.renderer.on("prerender",e.onPrerender,e),t.runners.contextChange.add(e),e._dcIndex=0,e._aIndex=0,e._iIndex=0,e._attributeBuffer=null,e._indexBuffer=null,e._tempBoundTextures=[],e}var Zi=(Ji.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Ft.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new De(this.vertexSrc,r)}r={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.Matrix,default:this.defaultGroupCache[t]};return new Oe(this.programCache[t],r)},Ji.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)0<i&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},Ji);function Ji(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}var Ki,Qi=(h($i,Ki=wt),$i);function $i(t){void 0===t&&(t=!1);var e=Ki.call(this)||this;return e._buffer=new bt(null,t,!1),e._indexBuffer=new bt(null,t,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,m.TYPES.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,m.TYPES.FLOAT).addAttribute("aColor",e._buffer,4,!0,m.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,m.TYPES.FLOAT).addIndex(e._indexBuffer),e}var tr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",er="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",t=(ir.create=function(t){var e,t=Object.assign({vertex:tr,fragment:er,geometryClass:Qi,vertexSize:6},t),i=t.vertex,r=t.fragment,n=t.vertexSize,a=t.geometryClass;return h(o,e=Yi),o;function o(t){t=e.call(this,t)||this;return t.shaderGenerator=new Zi(i,r),t.geometryClass=a,t.vertexSize=n,t}},Object.defineProperty(ir,"defaultVertexSrc",{get:function(){return tr},enumerable:!1,configurable:!0}),Object.defineProperty(ir,"defaultFragmentTemplate",{get:function(){return er},enumerable:!1,configurable:!0}),ir);function ir(){}Xe=t.create();Object.assign(Xe,{extension:{name:"batch",type:r.ExtensionType.RendererPlugin}});var rr={};for(nr in Q)!function(t){Object.defineProperty(rr,t,{get:function(){return v.deprecation("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Q[t]}})}(nr);var nr,ar={};for(nr in Ri)!function(t){Object.defineProperty(ar,t,{get:function(){return v.deprecation("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Ri[t]}})}(nr);i.AbstractBatchRenderer=Yi,i.AbstractMultiResource=M,i.AbstractRenderer=Pi,i.ArrayResource=D,i.Attribute=_t,i.BaseImageResource=P,i.BaseRenderTexture=nt,i.BaseTexture=T,i.BatchDrawCall=zi,i.BatchGeometry=Qi,i.BatchPluginFactory=t,i.BatchRenderer=Xe,i.BatchShaderGenerator=Zi,i.BatchSystem=Wt,i.BatchTextureArray=ji,i.Buffer=bt,i.BufferResource=d,i.CanvasResource=L,i.ContextSystem=Zt,i.CubeResource=B,i.Filter=Ne,i.FilterState=Ut,i.FilterSystem=jt,i.Framebuffer=et,i.FramebufferSystem=$t,i.GLFramebuffer=Kt,i.GLProgram=fi,i.GLTexture=Mi,i.Geometry=wt,i.GeometrySystem=ie,i.IGLUniformData=di,i.INSTALLED=o,i.ImageBitmapResource=Z,i.ImageResource=k,i.MaskData=ne,i.MaskSystem=He,i.ObjectRenderer=Vt,i.Program=De,i.ProjectionSystem=ei,i.Quad=Ot,i.QuadUv=It,i.RenderTexture=ft,i.RenderTexturePool=vt,i.RenderTextureSystem=ai,i.Renderer=Bi,i.Resource=_,i.SVGResource=H,i.ScissorSystem=Je,i.Shader=Oe,i.ShaderSystem=yi,i.SpriteMaskFilter=ze,i.State=Ce,i.StateSystem=bi,i.StencilSystem=$e,i.System=Gi,i.Texture=ct,i.TextureGCSystem=Ei,i.TextureMatrix=Ue,i.TextureSystem=Ai,i.TextureUvs=ot,i.UniformGroup=Ft,i.VERSION="6.5.2",i.VideoResource=W,i.ViewableBuffer=Vi,i.autoDetectRenderer=function(t){return Bi.create(t)},i.autoDetectResource=g,i.checkMaxIfStatementsInShader=Me,i.createUBOElements=li,i.defaultFilterVertex="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",i.defaultVertex="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",i.generateProgram=vi,i.generateUniformBufferSync=pi,i.getTestContext=de,i.getUBOData=ci,i.resources=rr,i.systems=ar,i.uniformParsers=xe,Object.keys(r).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}})})},{"@pixi/constants":4,"@pixi/extensions":7,"@pixi/math":18,"@pixi/runner":27,"@pixi/settings":28,"@pixi/ticker":35,"@pixi/utils":36}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/settings"),a=t("@pixi/math"),o=t("@pixi/utils");r.settings.SORTABLE_CHILDREN=!1;var s=(n.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},n.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},n.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?a.Rectangle.EMPTY:((t=t||new a.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},n.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},n.prototype.addPointMatrix=function(t,e){var i=t.a,r=t.b,n=t.c,a=t.d,o=t.tx,t=t.ty,o=i*e.x+n*e.y+o,t=r*e.x+a*e.y+t;this.minX=Math.min(this.minX,o),this.maxX=Math.max(this.maxX,o),this.minY=Math.min(this.minY,t),this.maxY=Math.max(this.maxY,t)},n.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,a=t[0],o=t[1],e=a<e?a:e,i=o<i?o:i,r=r<a?a:r,n=n<o?o:n;e=(a=t[2])<e?a:e,i=(o=t[3])<i?o:i,r=r<a?a:r,n=n<o?o:n,e=(a=t[4])<e?a:e,i=(o=t[5])<i?o:i,r=r<a?a:r,n=n<o?o:n,a=t[6],i=(o=t[7])<i?o:i,r=r<a?a:r,n=n<o?o:n,this.minX=e=a<e?a:e,this.minY=i,this.maxX=r,this.maxY=n},n.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},n.prototype.addFrameMatrix=function(t,e,i,r,n){var a=t.a,o=t.b,s=t.c,u=t.d,h=t.tx,l=t.ty,c=a*e+s*i+h,p=o*e+u*i+l,d=c<(d=this.minX)?c:d,f=p<(f=this.minY)?p:f,m=(m=this.maxX)<c?c:m,t=(t=this.maxY)<p?p:t;d=(c=a*r+s*i+h)<d?c:d,f=(p=o*r+u*i+l)<f?p:f,m=m<c?c:m,t=t<p?p:t,d=(c=a*e+s*n+h)<d?c:d,f=(p=o*e+u*n+l)<f?p:f,t=t<p?p:t,f=(p=o*r+u*n+l)<f?p:f,m=(m=m<c?c:m)<(c=a*r+s*n+h)?c:m,t=t<p?p:t,this.minX=d=c<d?c:d,this.minY=f,this.maxX=m,this.maxY=t},n.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,a=this.maxX,o=this.maxY,s=e;s<i;s+=2)var u=t[s],h=t[s+1],r=u<r?u:r,n=h<n?h:n,a=a<u?u:a,o=o<h?h:o;this.minX=r,this.minY=n,this.maxX=a,this.maxY=o},n.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},n.prototype.addVerticesMatrix=function(t,e,i,r,n,a){void 0===n&&(n=0),void 0===a&&(a=n);for(var o=t.a,s=t.b,u=t.c,h=t.d,l=t.tx,c=t.ty,p=this.minX,d=this.minY,f=this.maxX,m=this.maxY,v=i;v<r;v+=2)var g=e[v],_=e[v+1],y=o*g+u*_+l,g=h*_+s*g+c,p=Math.min(p,y-n),f=Math.max(f,y+n),d=Math.min(d,g-a),m=Math.max(m,g+a);this.minX=p,this.minY=d,this.maxX=f,this.maxY=m},n.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},n.prototype.addBoundsMask=function(t,e){var i,r,n=(t.minX>e.minX?t:e).minX,a=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,s=(t.maxY<e.maxY?t:e).maxY;n<=o&&a<=s&&(i=this.minX,r=this.minY,t=this.maxX,e=this.maxY,this.minX=n<i?n:i,this.minY=a<r?a:r,this.maxX=t<o?o:t,this.maxY=e<s?s:e)},n.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},n.prototype.addBoundsArea=function(t,e){var i,r,n=t.minX>e.x?t.minX:e.x,a=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;n<=o&&a<=s&&(i=this.minX,r=this.minY,t=this.maxX,e=this.maxY,this.minX=n<i?n:i,this.minY=a<r?a:r,this.maxX=t<o?o:t,this.maxY=e<s?s:e)},n.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},n.prototype.addFramePad=function(t,e,i,r,n,a){e-=a,i+=n,r+=a,this.minX=this.minX<(t-=n)?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},n);function n(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function h(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l,t=(h(c,l=o.EventEmitter),c.mixin=function(t){for(var e=Object.keys(t),i=0;i<e.length;++i){var r=e[i];Object.defineProperty(c.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},Object.defineProperty(c.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),c.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},c.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},c.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new a.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},c.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new a.Rectangle),t=this._localBoundsRect),this._localBounds||(this._localBounds=new s);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,n=this._boundsID;this._bounds=this._localBounds;t=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-n,t},c.prototype.toGlobal=function(t,e,i){return(i=void 0===i?!1:i)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},c.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},c.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},c.prototype.setTransform=function(t,e,i,r,n,a,o,s,u){return void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t=void 0===t?0:t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=a,this.skew.y=o,this.pivot.x=s,this.pivot.y=u,this},c.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(c.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new C),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),c.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},c.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(c.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"angle",{get:function(){return this.transform.rotation*a.RAD_TO_DEG},set:function(t){this.transform.rotation=t*a.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),c);function c(){var t=l.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new a.Transform,t.alpha=1,t.visible=!0,t.renderable=!0,t.cullable=!1,t.cullArea=null,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new s,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._maskRefCount=0,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}var p,d,f,m,v,g,_,y,x,b,T,E,S,M,A,w,D,R,O,P,C=(h(I,p=t),I);function I(){var t=null!==p&&p.apply(this,arguments)||this;return t.sortDirty=null,t}function L(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}t.prototype.displayObjectUpdateTransform=t.prototype.updateTransform,(d=d=d||{})[d.WEBGL_LEGACY=0]="WEBGL_LEGACY",d[d.WEBGL=1]="WEBGL",d[d.WEBGL2=2]="WEBGL2",(f=f=f||{})[f.UNKNOWN=0]="UNKNOWN",f[f.WEBGL=1]="WEBGL",f[f.CANVAS=2]="CANVAS",(m=m=m||{})[m.COLOR=16384]="COLOR",m[m.DEPTH=256]="DEPTH",m[m.STENCIL=1024]="STENCIL",(v=v=v||{})[v.NORMAL=0]="NORMAL",v[v.ADD=1]="ADD",v[v.MULTIPLY=2]="MULTIPLY",v[v.SCREEN=3]="SCREEN",v[v.OVERLAY=4]="OVERLAY",v[v.DARKEN=5]="DARKEN",v[v.LIGHTEN=6]="LIGHTEN",v[v.COLOR_DODGE=7]="COLOR_DODGE",v[v.COLOR_BURN=8]="COLOR_BURN",v[v.HARD_LIGHT=9]="HARD_LIGHT",v[v.SOFT_LIGHT=10]="SOFT_LIGHT",v[v.DIFFERENCE=11]="DIFFERENCE",v[v.EXCLUSION=12]="EXCLUSION",v[v.HUE=13]="HUE",v[v.SATURATION=14]="SATURATION",v[v.COLOR=15]="COLOR",v[v.LUMINOSITY=16]="LUMINOSITY",v[v.NORMAL_NPM=17]="NORMAL_NPM",v[v.ADD_NPM=18]="ADD_NPM",v[v.SCREEN_NPM=19]="SCREEN_NPM",v[v.NONE=20]="NONE",v[v.SRC_OVER=0]="SRC_OVER",v[v.SRC_IN=21]="SRC_IN",v[v.SRC_OUT=22]="SRC_OUT",v[v.SRC_ATOP=23]="SRC_ATOP",v[v.DST_OVER=24]="DST_OVER",v[v.DST_IN=25]="DST_IN",v[v.DST_OUT=26]="DST_OUT",v[v.DST_ATOP=27]="DST_ATOP",v[v.ERASE=26]="ERASE",v[v.SUBTRACT=28]="SUBTRACT",v[v.XOR=29]="XOR",(g=g=g||{})[g.POINTS=0]="POINTS",g[g.LINES=1]="LINES",g[g.LINE_LOOP=2]="LINE_LOOP",g[g.LINE_STRIP=3]="LINE_STRIP",g[g.TRIANGLES=4]="TRIANGLES",g[g.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",g[g.TRIANGLE_FAN=6]="TRIANGLE_FAN",(_=_=_||{})[_.RGBA=6408]="RGBA",_[_.RGB=6407]="RGB",_[_.RG=33319]="RG",_[_.RED=6403]="RED",_[_.RGBA_INTEGER=36249]="RGBA_INTEGER",_[_.RGB_INTEGER=36248]="RGB_INTEGER",_[_.RG_INTEGER=33320]="RG_INTEGER",_[_.RED_INTEGER=36244]="RED_INTEGER",_[_.ALPHA=6406]="ALPHA",_[_.LUMINANCE=6409]="LUMINANCE",_[_.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_[_.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_[_.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(y=y=y||{})[y.TEXTURE_2D=3553]="TEXTURE_2D",y[y.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",y[y.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",y[y.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",y[y.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",y[y.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",y[y.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",y[y.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",y[y.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(x=x=x||{})[x.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",x[x.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",x[x.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",x[x.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",x[x.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",x[x.UNSIGNED_INT=5125]="UNSIGNED_INT",x[x.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",x[x.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",x[x.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",x[x.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",x[x.BYTE=5120]="BYTE",x[x.SHORT=5122]="SHORT",x[x.INT=5124]="INT",x[x.FLOAT=5126]="FLOAT",x[x.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",x[x.HALF_FLOAT=36193]="HALF_FLOAT",(b=b=b||{})[b.FLOAT=0]="FLOAT",b[b.INT=1]="INT",b[b.UINT=2]="UINT",(T=T=T||{})[T.NEAREST=0]="NEAREST",T[T.LINEAR=1]="LINEAR",(E=E=E||{})[E.CLAMP=33071]="CLAMP",E[E.REPEAT=10497]="REPEAT",E[E.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(S=S=S||{})[S.OFF=0]="OFF",S[S.POW2=1]="POW2",S[S.ON=2]="ON",S[S.ON_MANUAL=3]="ON_MANUAL",(M=M=M||{})[M.NPM=0]="NPM",M[M.UNPACK=1]="UNPACK",M[M.PMA=2]="PMA",M[M.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",M[M.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",M[M.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",M[M.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(A=A=A||{})[A.NO=0]="NO",A[A.YES=1]="YES",A[A.AUTO=2]="AUTO",A[A.BLEND=0]="BLEND",A[A.CLEAR=1]="CLEAR",A[A.BLIT=2]="BLIT",(w=w=w||{})[w.AUTO=0]="AUTO",w[w.MANUAL=1]="MANUAL",(R=R=R||{}).LOW="lowp",R.MEDIUM="mediump",R.HIGH="highp",(R=D=D||{})[R.NONE=0]="NONE",R[R.SCISSOR=1]="SCISSOR",R[R.STENCIL=2]="STENCIL",R[R.SPRITE=3]="SPRITE",R[R.COLOR=4]="COLOR",(O=O=O||{})[O.RED=1]="RED",O[O.GREEN=2]="GREEN",O[O.BLUE=4]="BLUE",O[O.ALPHA=8]="ALPHA",(P=P=P||{})[P.NONE=0]="NONE",P[P.LOW=2]="LOW",P[P.MEDIUM=4]="MEDIUM",P[P.HIGH=8]="HIGH",(F=F=F||{})[F.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",F[F.ARRAY_BUFFER=34962]="ARRAY_BUFFER",F[F.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";var N,F=(h(B,N=t),B.prototype.onChildrenChange=function(t){},B.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(1<e.length)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),(n.parent=this).sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},B.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},B.prototype.swapChildren=function(t,e){var i,r;t!==e&&(i=this.getChildIndex(t),r=this.getChildIndex(e),this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r))},B.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},B.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);o.removeItems(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},B.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},B.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(1<e.length)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],a=this.children.indexOf(n);if(-1===a)return null;n.parent=null,n.transform._parentID=-1,o.removeItems(this.children,a,1),this._boundsID++,this.onChildrenChange(a),n.emit("removed",this),this.emit("childRemoved",n,this,a)}return e[0]},B.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,o.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},B.prototype.removeChildren=function(t,e){var i=t=void 0===t?0:t,r=(e=void 0===e?this.children.length:e)-i;if(0<r&&r<=e){for(var n=this.children.splice(i,r),a=0;a<n.length;++a)n[a].parent=null,n[a].transform&&(n[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(a=0;a<n.length;++a)n[a].emit("removed",this),this.emit("childRemoved",n[a],this,a);return n}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},B.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(L),this.sortDirty=!1},B.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},B.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,i=this.children[t];i.visible&&i.renderable&&(i.calculateBounds(),i._mask?(e=i._mask.isMaskData?i._mask.maskObject:i._mask)?(e.calculateBounds(),this._bounds.addBoundsMask(i._bounds,e._bounds)):this._bounds.addBounds(i._bounds):i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds))}this._bounds.updateID=this._boundsID},B.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);t=N.prototype.getLocalBounds.call(this,t);if(!e)for(var i=0,r=this.children.length;i<r;++i){var n=this.children[i];n.visible&&n.updateTransform()}return t},B.prototype._calculateBounds=function(){},B.prototype._renderWithCulling=function(t){var e,i,r=t.renderTexture.sourceFrame;if(0<r.width&&0<r.height){if(this.cullArea?(e=this.cullArea,i=this.worldTransform):this._render!==B.prototype._render&&(e=this.getBounds(!0)),e&&r.intersects(e,i))this._render(t);else if(this.cullArea)return;for(var n=0,a=this.children.length;n<a;++n){var o=this.children[n],s=o.cullable;o.cullable=s||!this.cullArea,o.render(t),o.cullable=s}}},B.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},B.prototype.renderAdvanced=function(t){var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var r=this._enabledFilters.length=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var n=e&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==D.NONE));if(n&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(var r=0,a=this.children.length;r<a;++r)this.children[r].render(t)}n&&t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},B.prototype._render=function(t){},B.prototype.destroy=function(t){N.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(e)for(var r=0;r<i.length;++r)i[r].destroy(t)},Object.defineProperty(B.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),B);function B(){var t=N.call(this)||this;return t.children=[],t.sortableChildren=r.settings.SORTABLE_CHILDREN,t.sortDirty=!1,t}F.prototype.containerUpdateTransform=F.prototype.updateTransform,i.Bounds=s,i.Container=F,i.DisplayObject=t,i.TemporaryDisplayObject=C},{"@pixi/math":18,"@pixi/settings":28,"@pixi/utils":36}],7:[function(t,e,a){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(a,"__esModule",{value:!0});var r,n=function(){return(n=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var a in e=i[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};a.ExtensionType=void 0,(r=a.ExtensionType||(a.ExtensionType={})).Application="application",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Loader="loader",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser";function o(t){if("function"==typeof t||"object"===i(t)&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e="object"!==i(t.extension)?{type:t.extension}:t.extension;t=n(n({},e),{ref:t})}if("object"!==i(t))throw new Error("Invalid extension type");return"string"==typeof(t=n({},t)).type&&(t.type=[t.type]),t}a.extensions={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,r=this,e=[],i=0;i<arguments.length;i++)e[i]=t[i];return e.map(o).forEach(function(i){i.type.forEach(function(t){var e;return null===(t=(e=r._removeHandlers)[t])||void 0===t?void 0:t.call(e,i)})}),this},add:function(){for(var t=arguments,n=this,e=[],i=0;i<arguments.length;i++)e[i]=t[i];return e.map(o).forEach(function(r){r.type.forEach(function(t){var e=n._addHandlers,i=n._queue;e[t]?e[t](r):(i[t]=i[t]||[],i[t].push(r))})}),this},handle:function(t,e,i){var r=this._addHandlers=this._addHandlers||{},n=this._removeHandlers=this._removeHandlers||{};if(r[t]||n[t])throw new Error("Extension type "+t+" already has a handler");r[t]=e,n[t]=i;i=this._queue;return i[t]&&(i[t].forEach(function(t){return e(t)}),delete i[t]),this},handleByMap:function(t,e){return this.handle(t,function(t){e[t.name]=t.ref},function(t){delete e[t.name]})},handleByList:function(r,n){return this.handle(r,function(t){var e,i;n.push(t.ref),r===a.ExtensionType.Loader&&null!==(i=(e=t.ref).add)&&void 0!==i&&i.call(e)},function(t){t=n.indexOf(t.ref);-1!==t&&n.splice(t,1)})}}},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=t("@pixi/utils"),r=t("@pixi/math"),c=t("@pixi/core"),p=new r.Rectangle,r=(d.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},d.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},d.prototype.canvas=function(t,e){var i,r,n=this.renderer,a=!1,o=!1;t&&(t instanceof c.RenderTexture?r=t:(r=this.renderer.generateTexture(t),o=!0)),r?(i=r.baseTexture.resolution,e=null!=e?e:r.frame,a=!1,n.renderTexture.bind(r)):(i=n.resolution,e||((e=p).width=n.width,e.height=n.height),a=!0,n.renderTexture.bind(null));var s=Math.round(e.width*i),u=Math.round(e.height*i),h=new l.CanvasRenderTarget(s,u,1),t=new Uint8Array(4*s*u),n=n.gl;n.readPixels(Math.round(e.x*i),Math.round(e.y*i),s,u,n.RGBA,n.UNSIGNED_BYTE,t);s=h.context.getImageData(0,0,s,u);return d.arrayPostDivide(t,s.data),h.context.putImageData(s,0,0),a&&((a=new l.CanvasRenderTarget(h.width,h.height,1)).context.scale(1,-1),a.context.drawImage(h.canvas,0,-u),h.destroy(),h=a),o&&r.destroy(!0),h.canvas},d.prototype.pixels=function(t,e){var i,r,n=this.renderer,a=!1;t&&(t instanceof c.RenderTexture?r=t:(r=this.renderer.generateTexture(t),a=!0)),r?(i=r.baseTexture.resolution,e=null!=e?e:r.frame,n.renderTexture.bind(r)):(i=n.resolution,e||((e=p).width=n.width,e.height=n.height),n.renderTexture.bind(null));var o=Math.round(e.width*i),s=Math.round(e.height*i),t=new Uint8Array(4*o*s),n=n.gl;return n.readPixels(Math.round(e.x*i),Math.round(e.y*i),o,s,n.RGBA,n.UNSIGNED_BYTE,t),a&&r.destroy(!0),d.arrayPostDivide(t,t),t},d.prototype.destroy=function(){this.renderer=null},d.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},d.extension={name:"extract",type:c.ExtensionType.RendererPlugin},d);function d(t){this.renderer=t}i.Extract=r},{"@pixi/core":5,"@pixi/math":18,"@pixi/utils":36}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/core"),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var a,o,s,t=(a=r.Filter,n(o=h,s=a),o.prototype=null===s?Object.create(s):(u.prototype=s.prototype,new u),Object.defineProperty(h.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),h);function u(){this.constructor=o}function h(t){void 0===t&&(t=1);var e=a.call(this,r.defaultVertex,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return e.alpha=t,e}i.AlphaFilter=t},{"@pixi/core":5}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/core"),s=t("@pixi/settings"),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function a(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";var o,h,l,c,p,d,f,m,v,g,_,y,x,b,T,E,S,M,A,w,D={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},R=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");(o=o=o||{})[o.WEBGL_LEGACY=0]="WEBGL_LEGACY",o[o.WEBGL=1]="WEBGL",o[o.WEBGL2=2]="WEBGL2",(h=h=h||{})[h.UNKNOWN=0]="UNKNOWN",h[h.WEBGL=1]="WEBGL",h[h.CANVAS=2]="CANVAS",(l=l=l||{})[l.COLOR=16384]="COLOR",l[l.DEPTH=256]="DEPTH",l[l.STENCIL=1024]="STENCIL",(c=c=c||{})[c.NORMAL=0]="NORMAL",c[c.ADD=1]="ADD",c[c.MULTIPLY=2]="MULTIPLY",c[c.SCREEN=3]="SCREEN",c[c.OVERLAY=4]="OVERLAY",c[c.DARKEN=5]="DARKEN",c[c.LIGHTEN=6]="LIGHTEN",c[c.COLOR_DODGE=7]="COLOR_DODGE",c[c.COLOR_BURN=8]="COLOR_BURN",c[c.HARD_LIGHT=9]="HARD_LIGHT",c[c.SOFT_LIGHT=10]="SOFT_LIGHT",c[c.DIFFERENCE=11]="DIFFERENCE",c[c.EXCLUSION=12]="EXCLUSION",c[c.HUE=13]="HUE",c[c.SATURATION=14]="SATURATION",c[c.COLOR=15]="COLOR",c[c.LUMINOSITY=16]="LUMINOSITY",c[c.NORMAL_NPM=17]="NORMAL_NPM",c[c.ADD_NPM=18]="ADD_NPM",c[c.SCREEN_NPM=19]="SCREEN_NPM",c[c.NONE=20]="NONE",c[c.SRC_OVER=0]="SRC_OVER",c[c.SRC_IN=21]="SRC_IN",c[c.SRC_OUT=22]="SRC_OUT",c[c.SRC_ATOP=23]="SRC_ATOP",c[c.DST_OVER=24]="DST_OVER",c[c.DST_IN=25]="DST_IN",c[c.DST_OUT=26]="DST_OUT",c[c.DST_ATOP=27]="DST_ATOP",c[c.ERASE=26]="ERASE",c[c.SUBTRACT=28]="SUBTRACT",c[c.XOR=29]="XOR",(p=p=p||{})[p.POINTS=0]="POINTS",p[p.LINES=1]="LINES",p[p.LINE_LOOP=2]="LINE_LOOP",p[p.LINE_STRIP=3]="LINE_STRIP",p[p.TRIANGLES=4]="TRIANGLES",p[p.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",p[p.TRIANGLE_FAN=6]="TRIANGLE_FAN",(d=d=d||{})[d.RGBA=6408]="RGBA",d[d.RGB=6407]="RGB",d[d.RG=33319]="RG",d[d.RED=6403]="RED",d[d.RGBA_INTEGER=36249]="RGBA_INTEGER",d[d.RGB_INTEGER=36248]="RGB_INTEGER",d[d.RG_INTEGER=33320]="RG_INTEGER",d[d.RED_INTEGER=36244]="RED_INTEGER",d[d.ALPHA=6406]="ALPHA",d[d.LUMINANCE=6409]="LUMINANCE",d[d.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",d[d.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",d[d.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(f=f=f||{})[f.TEXTURE_2D=3553]="TEXTURE_2D",f[f.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",f[f.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",f[f.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",f[f.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",f[f.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",f[f.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",f[f.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",f[f.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(m=m=m||{})[m.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",m[m.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",m[m.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",m[m.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",m[m.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",m[m.UNSIGNED_INT=5125]="UNSIGNED_INT",m[m.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",m[m.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",m[m.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",m[m.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",m[m.BYTE=5120]="BYTE",m[m.SHORT=5122]="SHORT",m[m.INT=5124]="INT",m[m.FLOAT=5126]="FLOAT",m[m.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",m[m.HALF_FLOAT=36193]="HALF_FLOAT",(v=v=v||{})[v.FLOAT=0]="FLOAT",v[v.INT=1]="INT",v[v.UINT=2]="UINT",(g=g=g||{})[g.NEAREST=0]="NEAREST",g[g.LINEAR=1]="LINEAR",(_=_=_||{})[_.CLAMP=33071]="CLAMP",_[_.REPEAT=10497]="REPEAT",_[_.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(y=y=y||{})[y.OFF=0]="OFF",y[y.POW2=1]="POW2",y[y.ON=2]="ON",y[y.ON_MANUAL=3]="ON_MANUAL",(b=b=b||{})[b.NPM=0]="NPM",b[b.UNPACK=1]="UNPACK",b[b.PMA=2]="PMA",b[b.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",b[b.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",b[b.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",b[b.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(b=x=x||{})[b.NO=0]="NO",b[b.YES=1]="YES",b[b.AUTO=2]="AUTO",b[b.BLEND=0]="BLEND",b[b.CLEAR=1]="CLEAR",b[b.BLIT=2]="BLIT",(T=T=T||{})[T.AUTO=0]="AUTO",T[T.MANUAL=1]="MANUAL",(E=E=E||{}).LOW="lowp",E.MEDIUM="mediump",E.HIGH="highp",(S=S=S||{})[S.NONE=0]="NONE",S[S.SCISSOR=1]="SCISSOR",S[S.STENCIL=2]="STENCIL",S[S.SPRITE=3]="SPRITE",S[S.COLOR=4]="COLOR",(M=M=M||{})[M.RED=1]="RED",M[M.GREEN=2]="GREEN",M[M.BLUE=4]="BLUE",M[M.ALPHA=8]="ALPHA",(A=A=A||{})[A.NONE=0]="NONE",A[A.LOW=2]="LOW",A[A.MEDIUM=4]="MEDIUM",A[A.HIGH=8]="HIGH",(w=w=w||{})[w.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",w[w.ARRAY_BUFFER=34962]="ARRAY_BUFFER",w[w.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";var O,P=(a(C,O=r.Filter),C.prototype.apply=function(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{var n=t.getFilterTexture(),a=t.renderer,o=e,s=n;this.state.blend=!1,t.applyFilter(this,o,s,x.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(o,x.BLIT);var h=this.uniforms.uSampler=s,s=o,o=h;a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,s,i,r),t.returnFilterTexture(n)}},Object.defineProperty(C.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),C);function C(t,e,i,r,n){void 0===e&&(e=8),void 0===i&&(i=4),void 0===r&&(r=s.settings.FILTER_RESOLUTION);var a=this,o=function(t,e){for(var i=Math.ceil(t/2),r=u,n="",a=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);",o=0;o<t;o++)n+=a.replace("%index%",o.toString()).replace("%sampleIndex%",o-(i-1)+".0"),n+="\n";return r=(r=r.replace("%blur%",n)).replace("%size%",t.toString())}(n=void 0===n?5:n,t),n=function(t){for(var e=D[t],i=e.length,r=R,n="",a=0;a<t;a++){var o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString()),s=a;n+=o=o.replace("%value%",e[s=i<=a?t-a-1:s].toString()),n+="\n"}return r=(r=r.replace("%blur%",n)).replace("%size%",t.toString())}(n);return(a=O.call(this,o,n)||this).horizontal=t,a.resolution=r,a._quality=0,a.quality=i,a.blur=e,a}var I,r=(a(L,I=r.Filter),L.prototype.apply=function(t,e,i,r){var n=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);n&&a?(n=t.getFilterTexture(),this.blurXFilter.apply(t,e,n,x.CLEAR),this.blurYFilter.apply(t,n,i,r),t.returnFilterTexture(n)):(a?this.blurYFilter:this.blurXFilter).apply(t,e,i,r)},L.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(L.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),L);function L(t,e,i,r){void 0===t&&(t=8),void 0===e&&(e=4),void 0===i&&(i=s.settings.FILTER_RESOLUTION),void 0===r&&(r=5);var n=I.call(this)||this;return n.blurXFilter=new P(!0,t,e,i,r),n.blurYFilter=new P(!1,t,e,i,r),n.resolution=i,n.quality=e,n.blur=t,n.repeatEdgePixels=!1,n}i.BlurFilter=r,i.BlurFilterPass=P},{"@pixi/core":5,"@pixi/settings":28}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/core"),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var a,o,s,t=(a=r.Filter,n(o=h,s=a),o.prototype=null===s?Object.create(s):(u.prototype=s.prototype,new u),h.prototype._loadMatrix=function(t,e){var i=t;(e=void 0===e?!1:e)&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},h.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},h.prototype._colorMatrix=function(t){t=new Float32Array(t);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},h.prototype.brightness=function(t,e){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],e)},h.prototype.tint=function(t,e){this._loadMatrix([(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0],e)},h.prototype.greyscale=function(t,e){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],e)},h.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},h.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,t=(0,Math.sqrt)(n);this._loadMatrix([i+(1-i)*n,n*(1-i)-t*r,n*(1-i)+t*r,0,0,n*(1-i)+t*r,i+n*(1-i),n*(1-i)-t*r,0,0,n*(1-i)-t*r,n*(1-i)+t*r,i+n*(1-i),0,0,0,0,0,1,0],e)},h.prototype.contrast=function(t,e){var i=(t||0)+1,t=-.5*(i-1);this._loadMatrix([i,0,0,0,t,0,i,0,0,t,0,0,i,0,t,0,0,0,1,0],e)},h.prototype.saturate=function(t,e){var i=2*(t=void 0===t?0:t)/3+1,t=-.5*(i-1);this._loadMatrix([i,t,t,0,0,t,i,t,0,0,t,t,i,0,0,0,0,0,1,0],e)},h.prototype.desaturate=function(){this.saturate(-1)},h.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},h.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},h.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},h.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},h.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},h.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},h.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},h.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},h.prototype.colorTone=function(t,e,i,r,n){var a=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,s=(255&i)/255,u=((r=r||3375104)>>16&255)/255,i=(r>>8&255)/255,r=(255&r)/255;this._loadMatrix([.3,.59,.11,0,0,a,o,s,t=t||.2,0,u,i,r,e=e||.15,0,a-u,o-i,s-r,0,0],n)},h.prototype.night=function(t,e){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},h.prototype.predator=function(t,e){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],e)},h.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},h.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(h.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),h);function u(){this.constructor=o}function h(){var t=this,e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(t=a.call(this,r.defaultFilterVertex,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e)||this).alpha=1,t}t.prototype.grayscale=t.prototype.greyscale,i.ColorMatrixFilter=t},{"@pixi/core":5}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/core"),n=t("@pixi/math"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var o,s,u,r=(o=r.Filter,a(s=l,u=o),s.prototype=null===u?Object.create(u):(h.prototype=u.prototype,new h),l.prototype.apply=function(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,a=Math.sqrt(n.a*n.a+n.b*n.b),o=Math.sqrt(n.c*n.c+n.d*n.d);0!==a&&0!==o&&(this.uniforms.rotation[0]=n.a/a,this.uniforms.rotation[1]=n.b/a,this.uniforms.rotation[2]=n.c/o,this.uniforms.rotation[3]=n.d/o),t.applyFilter(this,e,i,r)},Object.defineProperty(l.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),l);function h(){this.constructor=s}function l(t,e){var i=this,r=new n.Matrix;return t.renderable=!1,(i=o.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=t,i.maskMatrix=r,i.scale=new n.Point(e=null==e?20:e,e),i}i.DisplacementFilter=r},{"@pixi/core":5,"@pixi/math":18}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=t("@pixi/core"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var n,a,o,t=(n=t.Filter,r(a=u,o=n),a.prototype=null===o?Object.create(o):(s.prototype=o.prototype,new s),u);function s(){this.constructor=a}function u(){return n.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}i.FXAAFilter=t},{"@pixi/core":5}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/core"),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var a,o,s,t=(a=r.Filter,n(o=h,s=a),o.prototype=null===s?Object.create(s):(u.prototype=s.prototype,new u),Object.defineProperty(h.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),h);function u(){this.constructor=o}function h(t,e){void 0===t&&(t=.5),void 0===e&&(e=Math.random());var i=a.call(this,r.defaultFilterVertex,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return i.noise=t,i.seed=e,i}i.NoiseFilter=t},{"@pixi/core":5}],15:[function(t,e,H){"use strict";Object.defineProperty(H,"__esModule",{value:!0});var f=t("@pixi/core"),V=t("@pixi/math"),c=t("@pixi/utils"),m=t("@pixi/constants"),i=t("@pixi/display");H.LINE_JOIN=void 0,(l=H.LINE_JOIN||(H.LINE_JOIN={})).MITER="miter",l.BEVEL="bevel",l.ROUND="round",H.LINE_CAP=void 0,(E=H.LINE_CAP||(H.LINE_CAP={})).BUTT="butt",E.ROUND="round",E.SQUARE="square";var X={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;t=Math.ceil(t/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},r=(n.prototype.clone=function(){var t=new n;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=f.Texture.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null},n);function n(){this.color=16777215,this.alpha=1,this.texture=f.Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}var a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function o(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function p(t,e){void 0===e&&(e=!1);var i=t.length;if(!(i<6)){for(var r=0,n=0,a=t[i-2],o=t[i-1];n<i;n+=2){var s=t[n],u=t[n+1];r+=(s-a)*(u+o),a=s,o=u}if(!e&&0<r||e&&r<=0)for(e=i/2,n=e+e%2;n<i;n+=2){var h=i-n-2,l=i-n-1,c=n,p=n+1,d=[t[c],t[h]];t[h]=d[0],t[c]=d[1],d=[t[p],t[l]],t[l]=d[0],t[p]=d[1]}}}var s={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,n=e.points,a=e.indices;if(6<=i.length){p(i,!1);for(var o=[],s=0;s<r.length;s++){var u=r[s];p(u.points,!0),o.push(i.length/2),i=i.concat(u.points)}var h=c.earcut(i,o,2);if(h){for(var l=n.length/2,s=0;s<h.length;s+=3)a.push(h[s]+l),a.push(h[s+1]+l),a.push(h[s+2]+l);for(s=0;s<i.length;s++)n.push(i[s])}}}},h={build:function(t){var e,i,r,n,a,o,s,u,h=t.points;if(t.type===V.SHAPES.CIRC?(n=(r=t.shape).x,a=r.y,o=i=r.radius,s=e=0):t.type===V.SHAPES.ELIP?(n=(u=t.shape).x,a=u.y,o=u.width,i=u.height,s=e=0):(t=(u=t.shape).width/2,c=u.height/2,n=u.x+t,a=u.y+c,s=t-(o=i=Math.max(0,Math.min(u.radius,Math.min(t,c)))),e=c-i),0<=o&&0<=i&&0<=s&&0<=e){var l=Math.ceil(2.3*Math.sqrt(o+i)),c=8*l+(s?4:0)+(e?4:0);if(0!=(h.length=c)){if(0===l)return h.length=8,h[0]=h[6]=n+s,h[1]=h[3]=a+e,h[2]=h[4]=n-s,void(h[5]=h[7]=a-e);var p=0,d=4*l+(s?2:0)+2,f=d,m=c,v=n+(T=s+o),g=n-T,_=a+(E=e);h[p++]=v,h[p++]=_,h[--d]=_,h[--d]=g,e&&(b=a-E,h[f++]=g,h[f++]=b,h[--m]=b,h[--m]=v);for(var y=1;y<l;y++){var x=Math.PI/2*(y/l),v=n+(T=s+Math.cos(x)*o),g=n-T,_=a+(E=e+Math.sin(x)*i),b=a-E;h[p++]=v,h[p++]=_,h[--d]=_,h[--d]=g,h[f++]=g,h[f++]=b,h[--m]=b,h[--m]=v}var T,E,v=n+(T=s),g=n-T,_=a+(E=e+i),b=a-E;h[p++]=v,h[p++]=_,h[--m]=b,h[--m]=v,s&&(h[p++]=g,h[p++]=_,h[--m]=b,h[--m]=g)}}else h.length=0},triangulate:function(t,e){var i=t.points,r=e.points,n=e.indices;if(0!==i.length){var a,o,s=r.length/2,u=s;o=t.type!==V.SHAPES.RREC?(a=(o=t.shape).x,o.y):(a=(h=t.shape).x+h.width/2,h.y+h.height/2);var h=t.matrix;r.push(t.matrix?h.a*a+h.c*o+h.tx:a,t.matrix?h.b*a+h.d*o+h.ty:o),s++,r.push(i[0],i[1]);for(var l=2;l<i.length;l+=2)r.push(i[l],i[l+1]),n.push(s++,u,s);n.push(u+1,u,s)}}},t={build:function(t){var e=t.shape,i=e.x,r=e.y,n=e.width,e=e.height,t=t.points;t.length=0,t.push(i,r,i+n,r,i+n,r+e,i,r+e)},triangulate:function(t,e){var i=t.points,r=e.points,t=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(t,1+t,2+t,1+t,2+t,3+t)}};function v(t,e,i){return t+(e-t)*i}function u(t,e,i,r,n,a,o){for(var s,u,h,l,c,p,d,f=o=void 0===o?[]:o,m=0;m<=20;++m)s=v(t,i,d=m/20),u=v(e,r,d),h=v(i,n,d),l=v(r,a,d),c=v(s,h,d),p=v(u,l,d),0===m&&f[f.length-2]===c&&f[f.length-1]===p||f.push(c,p);return f}var l={build:function(t){var e,i,r,n,a;z.nextRoundedRectBehavior?h.build(t):(a=t.shape,e=t.points,i=a.x,r=a.y,n=a.width,t=a.height,a=Math.max(0,Math.min(a.radius,Math.min(n,t)/2)),e.length=0,a?(u(i,r+a,i,r,i+a,r,e),u(i+n-a,r,i+n,r,i+n,r+a,e),u(i+n,r+t-a,i+n,r+t,i+n-a,r+t,e),u(i+a,r+t,i,r+t,i,r+t-a,e)):e.push(i,r,i+n,r,i+n,r+t,i,r+t))},triangulate:function(t,e){if(z.nextRoundedRectBehavior)h.triangulate(t,e);else{for(var i=t.points,r=e.points,n=e.indices,a=r.length/2,o=c.earcut(i,null,2),s=0,u=o.length;s<u;s+=3)n.push(o[s]+a),n.push(o[s+1]+a),n.push(o[s+2]+a);for(s=0,u=i.length;s<u;s++)r.push(i[s],i[++s])}}};function W(t,e,i,r,n,a,o,s){var u,h=o?(u=r,-i):(u=-r,i),o=t+i*a+u,a=e+r*a+h;return s.push(t-i*n+u,e-r*n+h),s.push(o,a),2}function Y(t,e,i,r,n,a,o,s){var u=i-t,h=r-e,l=Math.atan2(u,h),c=Math.atan2(n-t,a-e);s&&l<c?l+=2*Math.PI:!s&&c<l&&(c+=2*Math.PI);var p=l,c=c-l,l=Math.abs(c),d=Math.sqrt(u*u+h*h),f=1+(15*l*Math.sqrt(d)/Math.PI>>0),m=c/f;if(p+=m,s){o.push(t,e),o.push(i,r);for(var v=1,g=p;v<f;v++,g+=m)o.push(t,e),o.push(t+Math.sin(g)*d,e+Math.cos(g)*d);o.push(t,e),o.push(n,a)}else{o.push(i,r),o.push(t,e);for(v=1,g=p;v<f;v++,g+=m)o.push(t+Math.sin(g)*d,e+Math.cos(g)*d),o.push(t,e);o.push(n,a),o.push(t,e)}return 2*f}function d(t,e){(t.lineStyle.native?function(t,e){var i=0,r=t.shape,n=t.points||r.points,r=r.type!==V.SHAPES.POLY||r.closeStroke;if(0!==n.length){var a=e.points,o=e.indices,s=n.length/2,e=a.length/2,u=e;for(a.push(n[0],n[1]),i=1;i<s;i++)a.push(n[2*i],n[2*i+1]),o.push(u,u+1),u++;r&&o.push(u,e)}}:function(t,e){var i=t.shape,r=t.points||i.points.slice(),n=e.closePointEps;if(0!==r.length){var a=t.lineStyle,o=new V.Point(r[0],r[1]),t=new V.Point(r[r.length-2],r[r.length-1]),i=i.type!==V.SHAPES.POLY||i.closeStroke,n=Math.abs(o.x-t.x)<n&&Math.abs(o.y-t.y)<n;i&&(r=r.slice(),n&&(r.pop(),r.pop(),t.set(r[r.length-2],r[r.length-1])),n=.5*(o.x+t.x),M=.5*(t.y+o.y),r.unshift(n,M),r.push(n,M));var s,u,h=e.points,l=r.length/2,c=r.length,p=h.length/2,d=a.width/2,f=d*d,m=a.miterLimit*a.miterLimit,v=r[0],g=r[1],_=r[2],y=r[3],x=0,b=0,T=-(g-y),E=v-_,S=Math.sqrt(T*T+E*E);T/=S,E/=S,T*=d,E*=d;var M=a.alignment,A=2*(1-M),w=2*M;i||(a.cap===H.LINE_CAP.ROUND?c+=Y(v-T*(A-w)*.5,g-E*(A-w)*.5,v-T*A,g-E*A,v+T*w,g+E*w,h,!0)+2:a.cap===H.LINE_CAP.SQUARE&&(c+=W(v,g,T,E,A,w,!0,h))),h.push(v-T*A,g-E*A),h.push(v+T*w,g+E*w);for(var D=1;D<l-1;++D){v=r[2*(D-1)],g=r[2*(D-1)+1],_=r[2*D],y=r[2*D+1],x=r[2*(D+1)],b=r[2*(D+1)+1],T=-(g-y),E=v-_,T/=S=Math.sqrt(T*T+E*E),E/=S,T*=d,E*=d,s=-(y-b),u=_-x,s/=S=Math.sqrt(s*s+u*u),u/=S,s*=d,u*=d;var R,O,P,C,I,L,N=_-v,F=g-y,B=_-x,U=b-y,G=F*B-U*N,k=G<0;Math.abs(G)<.1?(h.push(_-T*A,y-E*A),h.push(_+T*w,y+E*w)):(P=_+((R=(N*(L=(-s+x)*(-u+y)-(-s+_)*(-u+b))-B*(I=(-T+v)*(-E+y)-(-T+_)*(-E+g)))/G)-_)*A,C=y+((O=(U*I-F*L)/G)-y)*A,I=_-(R-_)*w,L=y-(O-y)*w,G=k?A:w,(O=(R-_)*(R-_)+(O-y)*(O-y))<=Math.min(N*N+F*F,B*B+U*U)+G*G*f?a.join===H.LINE_JOIN.BEVEL||m<O/f?(k?(h.push(P,C),h.push(_+T*w,y+E*w),h.push(P,C),h.push(_+s*w,y+u*w)):(h.push(_-T*A,y-E*A),h.push(I,L),h.push(_-s*A,y-u*A),h.push(I,L)),c+=2):a.join===H.LINE_JOIN.ROUND?k?(h.push(P,C),h.push(_+T*w,y+E*w),c+=Y(_,y,_+T*w,y+E*w,_+s*w,y+u*w,h,!0)+4,h.push(P,C),h.push(_+s*w,y+u*w)):(h.push(_-T*A,y-E*A),h.push(I,L),c+=Y(_,y,_-T*A,y-E*A,_-s*A,y-u*A,h,!1)+4,h.push(_-s*A,y-u*A),h.push(I,L)):(h.push(P,C),h.push(I,L)):(h.push(_-T*A,y-E*A),h.push(_+T*w,y+E*w),a.join===H.LINE_JOIN.ROUND?c+=k?Y(_,y,_+T*w,y+E*w,_+s*w,y+u*w,h,!0)+2:Y(_,y,_-T*A,y-E*A,_-s*A,y-u*A,h,!1)+2:a.join===H.LINE_JOIN.MITER&&O/f<=m&&(k?(h.push(I,L),h.push(I,L)):(h.push(P,C),h.push(P,C)),c+=2),h.push(_-s*A,y-u*A),h.push(_+s*w,y+u*w),c+=2))}v=r[2*(l-2)],g=r[2*(l-2)+1],_=r[2*(l-1)],T=-(g-(y=r[2*(l-1)+1])),E=v-_,T/=S=Math.sqrt(T*T+E*E),E/=S,h.push(_-(T*=d)*A,y-(E*=d)*A),h.push(_+T*w,y+E*w),i||(a.cap===H.LINE_CAP.ROUND?c+=Y(_-T*(A-w)*.5,y-E*(A-w)*.5,_-T*A,y-E*A,_+T*w,y+E*w,h,!1)+2:a.cap===H.LINE_CAP.SQUARE&&(c+=W(_,y,T,E,A,w,!1,h)));for(var z=e.indices,j=X.epsilon*X.epsilon,D=p;D<c+p-2;++D)v=h[2*D],g=h[2*D+1],_=h[2*(D+1)],y=h[2*(D+1)+1],x=h[2*(D+2)],b=h[2*(D+2)+1],Math.abs(v*(y-b)+_*(b-g)+x*(g-y))<j||z.push(D,D+1,D+2)}})(t,e)}var g=(_.curveTo=function(t,e,i,r,n,a){var o=a[a.length-2],s=a[a.length-1]-e,u=o-t,h=r-e,l=i-t,c=Math.abs(s*l-u*h);if(c<1e-8||0===n)return a[a.length-2]===t&&a[a.length-1]===e||a.push(t,e),null;var p=s*s+u*u,d=h*h+l*l,o=s*h+u*l,r=n*Math.sqrt(p)/c,i=n*Math.sqrt(d)/c,a=r*o/p,c=i*o/d,p=r*l+i*u,o=r*h+i*s,d=l*(r+c),c=h*(r+c);return{cx:p+t,cy:o+e,radius:n,startAngle:Math.atan2(s*(i+a)-o,u*(i+a)-p),endAngle:Math.atan2(c-o,d-p),anticlockwise:l*s<u*h}},_.arc=function(t,e,i,r,n,a,o,s,u){for(var h=o-a,o=X._segmentsCount(Math.abs(h)*n,40*Math.ceil(Math.abs(h)/V.PI_2)),l=h/(2*o),c=2*l,p=Math.cos(l),d=Math.sin(l),f=o-1,m=f%1/f,v=0;v<=f;++v){var g=l+a+c*(v+m*v),_=Math.cos(g),g=-Math.sin(g);u.push((p*_+d*g)*n+i,(p*-g+d*_)*n+r)}},_);function _(){}var y=(x.curveLength=function(t,e,i,r,n,a,o,s){for(var u,h,l,c,p,d,f,m,v,g,_=0,y=t,x=e,b=1;b<=10;++b)v=y-(f=(d=(p=(c=1-(u=b/10))*c)*c)*t+3*p*u*i+3*c*(h=u*u)*n+(l=h*u)*o),g=x-(m=d*e+3*p*u*r+3*c*h*a+l*s),y=f,x=m,_+=Math.sqrt(v*v+g*g);return _},x.curveTo=function(t,e,i,r,n,a,o){var s=o[o.length-2],u=o[o.length-1];o.length-=2;var h,l,c,p,d,f=X._segmentsCount(x.curveLength(s,u,t,e,i,r,n,a));o.push(s,u);for(var m,v=1;v<=f;++v)o.push((c=(l=(h=1-(m=v/f))*h)*h)*s+3*l*m*t+3*h*(p=m*m)*i+(d=p*m)*n,c*u+3*l*m*e+3*h*p*r+d*a)},x);function x(){}var b=(T.curveLength=function(t,e,i,r,n,a){var o=t-2*i+n,s=e-2*r+a,n=2*i-2*t,a=2*r-2*e,i=4*(o*o+s*s),t=4*(o*n+s*a),r=n*n+a*a,e=2*Math.sqrt(i+t+r),o=Math.sqrt(i),s=2*i*o,n=2*Math.sqrt(r),a=t/o;return(s*e+o*t*(e-n)+(4*r*i-t*t)*Math.log((2*o+a+e)/(a+n)))/(4*s)},T.curveTo=function(t,e,i,r,n){for(var a=n[n.length-2],o=n[n.length-1],s=X._segmentsCount(T.curveLength(a,o,t,e,i,r)),u=0,h=0,l=1;l<=s;++l){var c=l/s;n.push((u=a+(t-a)*c)+(t+(i-t)*c-u)*c,(h=o+(e-o)*c)+(e+(r-e)*c-h)*c)}},T);function T(){}var E,S=(M.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},M.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},M.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},M);function M(){this.reset()}var A=((E={})[V.SHAPES.POLY]=s,E[V.SHAPES.CIRC]=h,E[V.SHAPES.ELIP]=h,E[V.SHAPES.RECT]=t,E[V.SHAPES.RREC]=l,E),w=[],D=[],R=(O.prototype.clone=function(){return new O(this.shape,this.fillStyle,this.lineStyle,this.matrix)},O.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},O);function O(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type}var P,C=new V.Point,I=(o(L,P=f.BatchGeometry),Object.defineProperty(L.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),L.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0;for(var t=this.textureIds.length=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),D.push(this.drawCalls[t]);for(t=this.drawCalls.length=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),w.push(e)}this.batches.length=0},L.prototype.clear=function(){return 0<this.graphicsData.length&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},L.prototype.drawShape=function(t,e,i,r){r=new R(t,e=void 0===e?null:e,i=void 0===i?null:i,r=void 0===r?null:r);return this.graphicsData.push(r),this.dirty++,this},L.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;t=new R(t,null,null,e=void 0===e?null:e),e=this.graphicsData[this.graphicsData.length-1];return t.lineStyle=e.lineStyle,e.holes.push(t),this.dirty++,this},L.prototype.destroy=function(){P.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},L.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(t,C):C.copyFrom(t),r.shape.contains(C.x,C.y)))){var n=!1;if(r.holes)for(var a=0;a<r.holes.length;a++)if(r.holes[a].shape.contains(C.x,C.y)){n=!0;break}if(!n)return!0}}return!1},L.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,r=null;0<this.batches.length&&(r=(i=this.batches[this.batches.length-1]).style);for(var n=this.shapeIndex;n<e.length;n++){this.shapeIndex++;var a=e[n],o=a.fillStyle,s=a.lineStyle;A[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(o.visible||s.visible)&&this.processHoles(a.holes);for(var u=0;u<2;u++){var h,l,c,p=0===u?o:s;p.visible&&(c=p.texture.baseTexture,h=this.indices.length,l=this.points.length/2,c.wrapMode=m.WRAP_MODES.REPEAT,0===u?this.processFill(a):this.processLine(a),0!=(c=this.points.length/2-l)&&(i&&!this._compareStyles(r,p)&&(i.end(h,l),i=null),i||((i=w.pop()||new S).begin(p,h,l),this.batches.push(i),r=p),this.addUvs(this.points,t,p.texture,l,c,p.matrix)))}}var d=this.indices.length,f=this.points.length/2;i&&i.end(d,f),0!==this.batches.length?(f=65535<f,this.indicesUint16&&this.indices.length===this.indicesUint16.length&&f==2<this.indicesUint16.BYTES_PER_ELEMENT?this.indicesUint16.set(this.indices):this.indicesUint16=new(f?Uint32Array:Uint16Array)(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()):this.batchable=!0}}else this.batchable=!0},L.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},L.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],r=i.fillStyle,i=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},L.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var r=t[e],n=0;n<r.size;n++){var a=r.start+n;this.indicesUint16[a]=this.indicesUint16[a]-r.attribStart}},L.prototype.isBatchable=function(){if(131070<this.points.length)return!1;for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*L.BATCHABLE_SIZE},L.prototype.buildDrawCalls=function(){for(var t=++f.BaseTexture._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),D.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,r=this.textureIds,n=D.pop();n||((n=new f.BatchDrawCall).texArray=new f.BatchTextureArray),n.texArray.count=0,n.start=0,n.size=0,n.type=m.DRAW_MODES.TRIANGLES;var a,o=0,s=null,u=!1,h=m.DRAW_MODES.TRIANGLES,l=0;this.drawCalls.push(n);for(e=0;e<this.batches.length;e++){var c=this.batches[e],p=c.style,d=p.texture.baseTexture;u!==!!p.native&&(h=(u=!!p.native)?m.DRAW_MODES.LINES:m.DRAW_MODES.TRIANGLES,s=null,o=8,t++),s!==d&&(s=d)._batchEnabled!==t&&(8===o&&(t++,(o=0)<n.size&&((n=D.pop())||((n=new f.BatchDrawCall).texArray=new f.BatchTextureArray),this.drawCalls.push(n)),n.start=l,n.size=0,n.texArray.count=0,n.type=h),d.touched=1,d._batchEnabled=t,d._batchLocation=o,d.wrapMode=m.WRAP_MODES.REPEAT,n.texArray.elements[n.texArray.count++]=d,o++),n.size+=c.size,l+=c.size,a=d._batchLocation,this.addColors(i,p.color,p.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,a,c.attribSize,c.attribStart)}f.BaseTexture._globalBatch=t,this.packAttributes()},L.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*t.length*4),a=new Float32Array(n),o=new Uint32Array(n),s=0,u=0;u<t.length/2;u++)a[s++]=t[2*u],a[s++]=t[2*u+1],a[s++]=e[2*u],a[s++]=e[2*u+1],o[s++]=i[u],a[s++]=r[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},L.prototype.processFill=function(t){(t.holes.length?s:A[t.type]).triangulate(t,this)},L.prototype.processLine=function(t){d(t,this);for(var e=0;e<t.holes.length;e++)d(t.holes[e],this)},L.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];A[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},L.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},L.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var r=t[2*i],n=t[2*i+1];t[2*i]=e.a*r+e.c*n+e.tx,t[2*i+1]=e.b*r+e.d*n+e.ty}},L.prototype.addColors=function(t,e,i,r,n){void 0===n&&(n=0);var a=c.premultiplyTint((e>>16)+(65280&e)+((255&e)<<16),i);t.length=Math.max(t.length,n+r);for(var o=0;o<r;o++)t[n+o]=a},L.prototype.addTextureIds=function(t,e,i,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+i);for(var n=0;n<i;n++)t[r+n]=e},L.prototype.addUvs=function(t,e,i,r,n,a){void 0===a&&(a=null);for(var o=0,s=e.length,u=i.frame;o<n;){var h,l=t[2*(r+o)],c=t[2*(r+o)+1];a&&(h=a.a*l+a.c*c+a.tx,c=a.b*l+a.d*c+a.ty,l=h),o++,e.push(l/u.width,c/u.height)}var p=i.baseTexture;(u.width<p.width||u.height<p.height)&&this.adjustUvs(e,i,s,n)},L.prototype.adjustUvs=function(t,e,i,r){for(var n=e.baseTexture,a=i+2*r,e=e.frame,o=e.width/n.width,s=e.height/n.height,u=e.x/e.width,h=e.y/e.height,l=Math.floor(t[i]+1e-6),c=Math.floor(t[i+1]+1e-6),p=i+2;p<a;p+=2)l=Math.min(l,Math.floor(t[p]+1e-6)),c=Math.min(c,Math.floor(t[p+1]+1e-6));u-=l,h-=c;for(p=i;p<a;p+=2)t[p]=(t[p]+u)*o,t[p+1]=(t[p+1]+h)*s},L.BATCHABLE_SIZE=100,L);function L(){var t=P.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new i.Bounds,t.boundsDirty=-1,t}var N,F=(o(B,N=r),B.prototype.clone=function(){var t=new B;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},B.prototype.reset=function(){N.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},B);function B(){var t=null!==N&&N.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=H.LINE_CAP.BUTT,t.join=H.LINE_JOIN.MITER,t.miterLimit=10,t}var U,G=new Float32Array(3),k={},z=(o(j,U=i.Container),Object.defineProperty(j.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),j.prototype.clone=function(){return this.finishPoly(),new j(this._geometry)},Object.defineProperty(j.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),j.prototype.lineStyle=function(t,e,i,r,n){return void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=.5),void 0===n&&(n=!1),this.lineTextureStyle(t="number"==typeof(t=void 0===t?null:t)?{width:t,color:e,alpha:i,alignment:r,native:n}:t)},j.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:f.Texture.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:H.LINE_CAP.BUTT,join:H.LINE_JOIN.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=0<t.width&&0<t.alpha;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},j.prototype.startPoly=function(){var t,e;this.currentPath?(t=this.currentPath.points,2<(e=this.currentPath.points.length)&&(this.drawShape(this.currentPath),this.currentPath=new V.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))):(this.currentPath=new V.Polygon,this.currentPath.closeStroke=!1)},j.prototype.finishPoly=function(){this.currentPath&&(2<this.currentPath.points.length?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},j.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},j.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this},j.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},j.prototype.quadraticCurveTo=function(t,e,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),b.curveTo(t,e,i,r,n),this},j.prototype.bezierCurveTo=function(t,e,i,r,n,a){return this._initCurve(),y.curveTo(t,e,i,r,n,a,this.currentPath.points),this},j.prototype.arcTo=function(t,e,i,r,n){this._initCurve(t,e);var a=this.currentPath.points,t=g.curveTo(t,e,i,r,n,a);return t&&(e=t.cx,i=t.cy,r=t.radius,n=t.startAngle,a=t.endAngle,t=t.anticlockwise,this.arc(e,i,r,n,a,t)),this},j.prototype.arc=function(t,e,i,r,n,a){if(r===n)return this;if(!(a=void 0===a?!1:a)&&n<=r?n+=V.PI_2:a&&r<=n&&(r+=V.PI_2),0==n-r)return this;var o,s,u=t+Math.cos(r)*i,h=e+Math.sin(r)*i,l=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;return c?(o=Math.abs(c[c.length-2]-u),s=Math.abs(c[c.length-1]-h),o<l&&s<l||c.push(u,h)):(this.moveTo(u,h),c=this.currentPath.points),g.arc(u,h,t,e,i,r,n,a,c),this},j.prototype.beginFill=function(t,e){return this.beginTextureFill({texture:f.Texture.WHITE,color:t=void 0===t?0:t,alpha:e=void 0===e?1:e})},j.prototype.beginTextureFill=function(t){t=Object.assign({texture:f.Texture.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=0<t.alpha;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},j.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},j.prototype.drawRect=function(t,e,i,r){return this.drawShape(new V.Rectangle(t,e,i,r))},j.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new V.RoundedRectangle(t,e,i,r,n))},j.prototype.drawCircle=function(t,e,i){return this.drawShape(new V.Circle(t,e,i))},j.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new V.Ellipse(t,e,i,r))},j.prototype.drawPolygon=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=!0,n=e[0],n=n.points?(r=n.closeStroke,n.points):Array.isArray(e[0])?e[0]:e,n=new V.Polygon(n);return n.closeStroke=r,this.drawShape(n),this},j.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},j.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},j.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==V.SHAPES.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},j.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},j.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var r=0;r<i;r++){var n=t.batches[r],a=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),s=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),n={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:s,_batchRGB:c.hex2rgb(a),_tintRGB:a,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=n}},j.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},j.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,r=this.tint,n=this.worldAlpha,a=e.uniforms,o=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(r>>16&255)/255*n,a.tint[1]=(r>>8&255)/255*n,a.tint[2]=(255&r)/255*n,a.tint[3]=n,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var s=0,u=o.length;s<u;s++)this._renderDrawCallDirect(t,i.drawCalls[s])},j.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,r=e.type,n=e.size,e=e.start,a=i.count,o=0;o<a;o++)t.texture.bind(i.elements[o],o);t.geometry.draw(r,n,e)},j.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!k[i]){for(var r=t.plugins[i].MAX_TEXTURES,n=new Int32Array(r),a=0;a<r;a++)n[a]=a;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new V.Matrix,default:f.UniformGroup.from({uSamplers:n},!0)},t=t.plugins[i]._shader.program;k[i]=new f.Shader(t,o)}e=k[i]}return e},j.prototype._calculateBounds=function(){this.finishPoly();var t,e,i,r=this._geometry;r.graphicsData.length&&(t=(i=r.bounds).minX,e=i.minY,r=i.maxX,i=i.maxY,this._bounds.addFrame(this.transform,t,e,r,i))},j.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,j._TEMP_POINT),this._geometry.containsPoint(j._TEMP_POINT)},j.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=c.hex2rgb(this.tint,G),e=0;e<this.batches.length;e++){var i=this.batches[e],r=i._batchRGB,r=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(r>>16)+(65280&r)+((255&r)<<16)}}},j.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var t=this.transform.worldTransform,e=t.a,i=t.b,r=t.c,n=t.d,a=t.tx,o=t.ty,s=this._geometry.points,u=this.vertexData,h=0,l=0;l<s.length;l+=2){var c=s[l],p=s[l+1];u[h++]=e*c+r*p+a,u[h++]=n*p+i*c+o}}},j.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},j.prototype.setMatrix=function(t){return this._matrix=t,this},j.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},j.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},j.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,U.prototype.destroy.call(this,t)},j.nextRoundedRectBehavior=!1,j._TEMP_POINT=new V.Point,j);function j(t){void 0===t&&(t=null);var e=U.call(this)||this;return e.shader=null,e.pluginName="batch",e.currentPath=null,e.batches=[],e.batchTint=-1,e.batchDirty=-1,e.vertexData=null,e._fillStyle=new r,e._lineStyle=new F,e._matrix=null,e._holeMode=!1,e.state=f.State.for2d(),e._geometry=t||new I,e._geometry.refCount++,e._transformID=-1,e.tint=16777215,e.blendMode=m.BLEND_MODES.NORMAL,e}l={buildPoly:s,buildCircle:h,buildRectangle:t,buildRoundedRectangle:l,buildLine:d,ArcUtils:g,BezierUtils:y,QuadraticUtils:b,BatchPart:S,FILL_COMMANDS:A,BATCH_POOL:w,DRAW_CALL_POOL:D};H.FillStyle=r,H.GRAPHICS_CURVES=X,H.Graphics=z,H.GraphicsData=R,H.GraphicsGeometry=I,H.LineStyle=F,H.graphicsUtils=l},{"@pixi/constants":4,"@pixi/core":5,"@pixi/display":6,"@pixi/math":18,"@pixi/utils":36}],16:[function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(i,"__esModule",{value:!0});var n=t("@pixi/math"),a=t("@pixi/ticker"),o=t("@pixi/display"),s=t("@pixi/utils"),u=t("@pixi/core"),h=(Object.defineProperty(l.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),l.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},l.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},l.prototype.reset=function(){this.isPrimary=!1},l);function l(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new n.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var p=(d.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},d.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},d);function d(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}var f=(m.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(m.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"none",{get:function(){return this._flags===m.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"over",{get:function(){return 0!=(this._flags&m.FLAGS.OVER)},set:function(t){this._doSet(m.FLAGS.OVER,t)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"rightDown",{get:function(){return 0!=(this._flags&m.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(m.FLAGS.RIGHT_DOWN,t)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"leftDown",{get:function(){return 0!=(this._flags&m.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(m.FLAGS.LEFT_DOWN,t)},enumerable:!1,configurable:!0}),m.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),m);function m(t){this._pointerId=t,this._flags=m.FLAGS.NONE}var v=(g.prototype.recursiveFindHit=function(t,e,i,r,n){var a;if(!e||!e.visible)return!1;var o,s=t.data.global,u=!1,h=n=e.interactive||n,l=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?u=!0:l=r=!1),h=!1):e._mask&&r&&(!(o=e._mask.isMaskData?e._mask.maskObject:e._mask)||null!==(a=o.containsPoint)&&void 0!==a&&a.call(o,s)||(r=!1)),l&&e.interactiveChildren&&e.children)for(var c=e.children,p=c.length-1;0<=p;p--){var d=c[p],f=this.recursiveFindHit(t,d,i,r,h);f&&d.parent&&(h=!1,f&&(t.target&&(r=!1),u=!0))}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(u=!0),e.interactive&&(u&&!t.target&&(t.target=e),i&&i(t,e,!!u))),u},g.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)},g);function g(){this._tempPoint=new n.Point}t={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};o.DisplayObject.mixin(t);var _,y,x,b={target:null,data:{global:null}},u=(_=s.EventEmitter,c(y=E,x=_),y.prototype=null===x?Object.create(x):(T.prototype=x.prototype,new T),Object.defineProperty(E.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){(this._useSystemTicker=t)?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),E.prototype.hitTest=function(t,e){return b.target=null,b.data.global=t,e=e||this.lastObjectRendered,this.processInteractive(b,e,null,!0),b.target},E.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},E.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(a.Ticker.system.add(this.tickerUpdate,this,a.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},E.prototype.removeTickerListener=function(){this.tickerAdded&&(a.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},E.prototype.addEvents=function(){var t;!this.eventsAdded&&this.interactionDOMElement&&(t=this.interactionDOMElement.style,globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0)},E.prototype.removeEvents=function(){var t;this.eventsAdded&&this.interactionDOMElement&&(t=this.interactionDOMElement.style,globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1)},E.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},E.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)!this.activeInteractionData.hasOwnProperty(t)||(t=this.activeInteractionData[t]).originalEvent&&"touch"!==t.pointerType&&(t=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t),this.processInteractive(t,this.lastObjectRendered,this.processPointerOverOut,!0));this.setCursorMode(this.cursor)}},E.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(r(i)){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},E.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},E.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},E.prototype.mapPositionToPoint=function(t,e,i){var r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0},n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},E.prototype.processInteractive=function(t,e,i,r){var r=this.search.findHit(t,e,i,r),n=this.delayedEvents;if(!n.length)return r;t.stopPropagationHint=!1;var a=n.length;this.delayedEvents=[];for(var o=0;o<a;o++){var s=n[o],u=s.displayObject,h=s.eventString,s=s.eventData;s.stopsPropagatingAt===u&&(s.stopPropagationHint=!0),this.dispatchEvent(u,h,s)}return r},E.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);!this.autoPreventDefault||!e[0].isNormalized||!t.cancelable&&"cancelable"in t||t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],a=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,a);a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===n.pointerType?this.emit("touchstart",a):"mouse"!==n.pointerType&&"pen"!==n.pointerType||(n=2===n.button,this.emit(n?"rightdown":"mousedown",this.eventData))}}},E.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;i&&(e.trackedPointers[n]||(e.trackedPointers[n]=new f(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType?this.dispatchEvent(e,"touchstart",t):"mouse"!==r.pointerType&&"pen"!==r.pointerType||((r=2===r.button)?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,r?"rightdown":"mousedown",t)))},E.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,a=t.target,o=(a=t.composedPath&&0<t.composedPath().length?t.composedPath()[0]:a)!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var u=r[s],h=this.getInteractionDataForPointerId(u),l=this.configureInteractionEventForDOMEvent(this.eventData,u,h);l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===u.pointerType||"pen"===u.pointerType?(h=2===u.button,this.emit(h?"rightup"+o:"mouseup"+o,l)):"touch"===u.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(u.pointerId))}},E.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},E.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},E.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},E.prototype.processPointerUp=function(t,e,i){var r,n=t.data,a=t.data.identifier,o=e.trackedPointers[a],s="touch"===n.pointerType,u="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;u&&(r=2===n.button,n=f.FLAGS,n=r?n.RIGHT_DOWN:n.LEFT_DOWN,n=void 0!==o&&o.flags&n,i?(this.dispatchEvent(e,r?"rightup":"mouseup",t),n&&(this.dispatchEvent(e,r?"rightclick":"click",t),h=!0)):n&&this.dispatchEvent(e,r?"rightupoutside":"mouseupoutside",t),o&&(r?o.rightDown=!1:o.leftDown=!1)),i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(u&&!h||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[a]},E.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],a=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,a);a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===n.pointerType&&this.emit("touchmove",a),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},E.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,r="mouse"===r.pointerType||"pen"===r.pointerType;r&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),r&&this.dispatchEvent(e,"mousemove",t))},E.prototype.onPointerOut=function(t){var e,i;this.supportsTouchEvents&&"touch"===t.pointerType||("mouse"===(e=this.normalizeToPointerData(t)[0]).pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),i=this.getInteractionDataForPointerId(e),(t=this.configureInteractionEventForDOMEvent(this.eventData,e,i)).data.originalEvent=e,this.processInteractive(t,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",t),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",t):this.releaseInteractionDataForPointerId(i.identifier))},E.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,a="mouse"===r.pointerType||"pen"===r.pointerType,r=e.trackedPointers[n];void 0!==(r=i&&!r?e.trackedPointers[n]=new f(n):r)&&(i&&this.mouseOverRenderer?(r.over||(r.over=!0,this.delayDispatchEvent(e,"pointerover",t),a&&this.delayDispatchEvent(e,"mouseover",t)),a&&null===this.cursor&&(this.cursor=e.cursor)):r.over&&(r.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),a&&this.dispatchEvent(e,"mouseout",t),r.none&&delete e.trackedPointers[n]))},E.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],t=this.getInteractionDataForPointerId(e),t=this.configureInteractionEventForDOMEvent(this.eventData,e,t);"mouse"===(t.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",t),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",t)},E.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new h).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},E.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},E.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},E.prototype.normalizeToPointerData=function(t){var e,i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,n=t.changedTouches.length;r<n;r++){var a=t.changedTouches[r];void 0===a.button&&(a.button=t.touches.length?1:0),void 0===a.buttons&&(a.buttons=t.touches.length?1:0),void 0===a.isPrimary&&(a.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===a.width&&(a.width=a.radiusX||1),void 0===a.height&&(a.height=a.radiusY||1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="touch"),void 0===a.pointerId&&(a.pointerId=a.identifier||0),void 0===a.pressure&&(a.pressure=a.force||.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),void 0===a.layerX&&(a.layerX=a.offsetX=a.clientX),void 0===a.layerY&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,i.push(a)}else!globalThis.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof globalThis.PointerEvent)?(void 0===(e=t).isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=1),void 0===e.pressure&&(e.pressure=.5),void 0===e.twist&&(e.twist=0),void 0===e.tangentialPressure&&(e.tangentialPressure=0),e.isNormalized=!0,i.push(e)):i.push(t);return i},E.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},E.extension={name:"interaction",type:[u.ExtensionType.RendererPlugin,u.ExtensionType.CanvasRendererPlugin]},E);function T(){this.constructor=y}function E(t,e){var i=_.call(this)||this;return e=e||{},i.renderer=t,i.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,i.interactionFrequency=e.interactionFrequency||10,i.mouse=new h,i.mouse.identifier=1,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[1]=i.mouse,i.interactionDataPool=[],i.eventData=new p,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.tickerAdded=!1,i.mouseOverRenderer=!("PointerEvent"in globalThis),i.supportsTouchEvents="ontouchstart"in globalThis,i.supportsPointerEvents=!!globalThis.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i.resolution=1,i.delayedEvents=[],i.search=new v,i._tempDisplayObject=new o.TemporaryDisplayObject,i._eventListenerOptions={capture:!0,passive:!1},i._useSystemTicker=void 0===e.useSystemTicker||e.useSystemTicker,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}i.InteractionData=h,i.InteractionEvent=p,i.InteractionManager=u,i.InteractionTrackingData=f,i.interactiveTarget=t},{"@pixi/core":5,"@pixi/display":6,"@pixi/math":18,"@pixi/ticker":35,"@pixi/utils":36}],17:[function(t,e,u){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(u,"__esModule",{value:!0});var o=t("@pixi/core"),r=t("@pixi/utils"),i=(n.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},n);function n(t,e,i){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}function s(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}var h,l=(c.prototype.handlers=function(t){var e=this._head;if(t=void 0===t?!1:t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},c.prototype.has=function(t){if(!(t instanceof i))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},c.prototype.dispatch=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},c.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new i(t,!1,e))},c.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new i(t,!0,e))},c.prototype.detach=function(t){if(!(t instanceof i))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},c.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},c);function c(){this._head=this._tail=void 0}function p(t,e){for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[(e=e||{}).strictMode?"strict":"loose"].exec(t),n={},a=14;a--;)n[r.key[a]]=i[a]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(t,e,i){e&&(n[r.q.name][e]=i)}),n}var d=null;function f(){}function m(t,e,i){(e=e&&0===e.indexOf(".")?e.substring(1):e)&&(t[e]=i)}function v(t){return t.toString().replace("object ","")}function g(t,e,i){if(this._dequeue=f,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(g.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=g.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=f,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new l,this.onProgress=new l,this.onComplete=new l,this.onAfterMiddleware=new l}function _(){}u.LoaderResource=(g.setExtensionLoadType=function(t,e){m(g._loadTypeMap,t,e)},g.setExtensionXhrType=function(t,e){m(g._xhrTypeMap,t,e)},Object.defineProperty(g.prototype,"isDataUrl",{get:function(){return this._hasFlag(g.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isComplete",{get:function(){return this._hasFlag(g.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isLoading",{get:function(){return this._hasFlag(g.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),g.prototype.complete=function(){this._clearEvents(),this._finish()},g.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=g.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},g.prototype.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(g.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case g.LOAD_TYPE.IMAGE:this.type=g.TYPE.IMAGE,this._loadElement("image");break;case g.LOAD_TYPE.AUDIO:this.type=g.TYPE.AUDIO,this._loadSourceElement("audio");break;case g.LOAD_TYPE.VIDEO:this.type=g.TYPE.VIDEO,this._loadSourceElement("video");break;default:g.LOAD_TYPE.XHR;(h=void 0===h?!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest):h)&&this.crossOrigin?this._loadXdr():this._loadXhr()}},g.prototype._hasFlag=function(t){return 0!=(this._flags&t)},g.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},g.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},g.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(g.STATUS_FLAGS.COMPLETE,!0),this._setFlag(g.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},g.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},g.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},g.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(t.withCredentials=!0),t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===g.XHR_RESPONSE_TYPE.JSON||this.xhrType===g.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=g.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},g.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},g.prototype._createSource=function(t,e,i){i=i||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=i,t},g.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},g.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},g.prototype._onTimeout=function(){this.abort("Load timed out.")},g.prototype._xhrOnError=function(){var t=this.xhr;this.abort(v(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},g.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(v(t)+" Request timed out.")},g.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(v(t)+" Request was aborted by the user.")},g.prototype._xhrOnLoad=function(){var t,e,i=this.xhr,r="",n=void 0===i.status?200:i.status;if(""!==i.responseType&&"text"!==i.responseType&&void 0!==i.responseType||(r=i.responseText),0===n&&(0<r.length||i.responseType===g.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===g.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=g.TYPE.TEXT;else if(this.xhrType===g.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=g.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===g.XHR_RESPONSE_TYPE.DOCUMENT)try{globalThis.DOMParser?(t=new DOMParser,this.data=t.parseFromString(r,"text/xml")):((e=document.createElement("div")).innerHTML=r,this.data=e),this.type=g.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=i.response||r;this.complete()}else this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL)},g.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,(d=d||document.createElement("a")).href=t;var i=p(d.href,{strictMode:!0}),r=!i.port&&""===e.port||i.port===e.port,t=i.protocol?i.protocol+":":"";return i.host===e.hostname&&r&&t===e.protocol?"":"anonymous"},g.prototype._determineXhrType=function(){return g._xhrTypeMap[this.extension]||g.XHR_RESPONSE_TYPE.TEXT},g.prototype._determineLoadType=function(){return g._loadTypeMap[this.extension]||g.LOAD_TYPE.XHR},g.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e,i;return(this.isDataUrl?(i=t.indexOf("/"),t.substring(i+1,t.indexOf(";",i))):(e=t.indexOf("?"),i=t.indexOf("#"),i=Math.min(-1<e?e:t.length,-1<i?i:t.length),(t=t.substring(0,i)).substring(t.lastIndexOf(".")+1))).toLowerCase()},g.prototype._getMimeFromXhrType=function(t){switch(t){case g.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case g.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case g.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case g.XHR_RESPONSE_TYPE.JSON:return"application/json";case g.XHR_RESPONSE_TYPE.DEFAULT:case g.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},g),O=u.LoaderResource||(u.LoaderResource={}),(A=O.STATUS_FLAGS||(O.STATUS_FLAGS={}))[A.NONE=0]="NONE",A[A.DATA_URL=1]="DATA_URL",A[A.COMPLETE=2]="COMPLETE",A[A.LOADING=4]="LOADING",(A=O.TYPE||(O.TYPE={}))[A.UNKNOWN=0]="UNKNOWN",A[A.JSON=1]="JSON",A[A.XML=2]="XML",A[A.IMAGE=3]="IMAGE",A[A.AUDIO=4]="AUDIO",A[A.VIDEO=5]="VIDEO",A[A.TEXT=6]="TEXT",(A=O.LOAD_TYPE||(O.LOAD_TYPE={}))[A.XHR=1]="XHR",A[A.IMAGE=2]="IMAGE",A[A.AUDIO=3]="AUDIO",A[A.VIDEO=4]="VIDEO",(A=O.XHR_RESPONSE_TYPE||(O.XHR_RESPONSE_TYPE={})).DEFAULT="text",A.BUFFER="arraybuffer",A.BLOB="blob",A.DOCUMENT="document",A.JSON="json",A.TEXT="text",O._loadTypeMap={gif:O.LOAD_TYPE.IMAGE,png:O.LOAD_TYPE.IMAGE,bmp:O.LOAD_TYPE.IMAGE,jpg:O.LOAD_TYPE.IMAGE,jpeg:O.LOAD_TYPE.IMAGE,tif:O.LOAD_TYPE.IMAGE,tiff:O.LOAD_TYPE.IMAGE,webp:O.LOAD_TYPE.IMAGE,tga:O.LOAD_TYPE.IMAGE,svg:O.LOAD_TYPE.IMAGE,"svg+xml":O.LOAD_TYPE.IMAGE,mp3:O.LOAD_TYPE.AUDIO,ogg:O.LOAD_TYPE.AUDIO,wav:O.LOAD_TYPE.AUDIO,mp4:O.LOAD_TYPE.VIDEO,webm:O.LOAD_TYPE.VIDEO},O._xhrTypeMap={xhtml:O.XHR_RESPONSE_TYPE.DOCUMENT,html:O.XHR_RESPONSE_TYPE.DOCUMENT,htm:O.XHR_RESPONSE_TYPE.DOCUMENT,xml:O.XHR_RESPONSE_TYPE.DOCUMENT,tmx:O.XHR_RESPONSE_TYPE.DOCUMENT,svg:O.XHR_RESPONSE_TYPE.DOCUMENT,tsx:O.XHR_RESPONSE_TYPE.DOCUMENT,gif:O.XHR_RESPONSE_TYPE.BLOB,png:O.XHR_RESPONSE_TYPE.BLOB,bmp:O.XHR_RESPONSE_TYPE.BLOB,jpg:O.XHR_RESPONSE_TYPE.BLOB,jpeg:O.XHR_RESPONSE_TYPE.BLOB,tif:O.XHR_RESPONSE_TYPE.BLOB,tiff:O.XHR_RESPONSE_TYPE.BLOB,webp:O.XHR_RESPONSE_TYPE.BLOB,tga:O.XHR_RESPONSE_TYPE.BLOB,json:O.XHR_RESPONSE_TYPE.JSON,text:O.XHR_RESPONSE_TYPE.TEXT,txt:O.XHR_RESPONSE_TYPE.TEXT,ttf:O.XHR_RESPONSE_TYPE.BUFFER,otf:O.XHR_RESPONSE_TYPE.BUFFER},O.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var y=function(t,e){this.data=t,this.callback=e},x=(b.prototype._next=function(r){var n=this;return function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];--n.workers,r.callback.apply(r,e),null!=e[0]&&n.error(e[0],r.data),n.workers<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}},b.prototype.push=function(t,e){this._insert(t,!1,e)},b.prototype.kill=function(){this.workers=0,this.drain=_,this.started=!1,this._tasks=[]},b.prototype.unshift=function(t,e){this._insert(t,!0,e)},b.prototype.length=function(){return this._tasks.length},b.prototype.running=function(){return this.workers},b.prototype.idle=function(){return this._tasks.length+this.workers===0},b.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},b.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},b.eachSeries=function(i,r,n,a){var o=0,s=i.length;!function t(e){e||o===s?n&&n(e):a?setTimeout(function(){r(i[o++],t)},1):r(i[o++],t)}()},b.queue=function(t,e){return new b(t,e)},b);function b(t,e){var r=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=_,this.unsaturated=_,this.empty=_,this.drain=_,this.error=_,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,i){if(i&&"function"!=typeof i)throw new Error("task callback must be a function");r.started=!0,null==t&&r.idle()?setTimeout(function(){return r.drain()},1):(i=new y(t,"function"==typeof i?i:_),e?r._tasks.unshift(i):r._tasks.push(i),setTimeout(r.process,1))},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(t.data,function(n){return function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(null===n)throw new Error("Callback was already called.");var r=n;n=null,r.apply(this,e)}}(r._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}var T=/(#[\w-]+)?$/,E=(S.prototype._add=function(t,e,i,r){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new u.LoaderResource(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var n=i.parentResource,a=[],o=0;o<n.children.length;++o)n.children[o].isComplete||a.push(n.children[o]);var s=n.progressChunk*(a.length+1)/(a.length+2);n.children.push(this.resources[t]),n.progressChunk=s;for(o=0;o<a.length;++o)a[o].progressChunk=s;this.resources[t].progressChunk=s}return this._queue.push(this.resources[t]),this},S.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},S.prototype.use=function(t){return this._afterMiddleware.push(t),this},S.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){t=this.resources[t];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},S.prototype.load=function(t){if(r.deprecation("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(S.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),S.prototype._prepareUrl=function(t){var e=p(t,{strictMode:!0});return e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString&&(t=T.exec(e)[0],-1!==(e=e.slice(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},S.prototype._loadResource=function(i,t){var r=this;i._dequeue=t,x.eachSeries(this._beforeMiddleware,function(t,e){t.call(r,i,function(){e(i.isComplete?{}:null)})},function(){i.isComplete?r._onLoad(i):(i._onLoadBinding=i.onComplete.once(r._onLoad,r),i.load())},!0)},S.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},S.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},S.prototype._onLoad=function(i){var r=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),x.eachSeries(this._afterMiddleware,function(t,e){t.call(r,i,e)},function(){i.onAfterMiddleware.dispatch(i),r.progress=Math.min(100,r.progress+i.progressChunk),r.onProgress.dispatch(r,i),i.error?r.onError.dispatch(i.error,r,i):r.onLoad.dispatch(r,i),r._resourcesParsing.splice(r._resourcesParsing.indexOf(i),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},S.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(S,"shared",{get:function(){var t=S._shared;return t||((t=new S)._protected=!0,S._shared=t),t},enumerable:!1,configurable:!0}),S.registerPlugin=function(t){return r.deprecation("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),o.extensions.add({type:o.ExtensionType.Loader,ref:t}),S},S._plugins=[],S);function S(t,e){var i=this;void 0===t&&(t=""),void 0===e&&(e=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this.resources={},this.baseUrl=t,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=x.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new l,this.onError=new l,this.onLoad=new l,this.onStart=new l,this.onComplete=new l;for(var r=0;r<S._plugins.length;++r){var n=S._plugins[r],a=n.pre,n=n.use;a&&this.pre(a),n&&this.use(n)}this._protected=!1}o.extensions.handleByList(o.ExtensionType.Loader,E._plugins),E.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"===a(t)&&(i=t,r=e||i.callback||i.onComplete,e=i.url,t=i.name||i.key||i.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof i&&(r=i,i=null),this._add(t,e,i,r)};M.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?E.shared:new E},M.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},M.extension=o.ExtensionType.Application,t=M;function M(){}var A=(w.add=function(){u.LoaderResource.setExtensionLoadType("svg",u.LoaderResource.LOAD_TYPE.XHR),u.LoaderResource.setExtensionXhrType("svg",u.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},w.use=function(e,i){var t,r,n,a;!e.data||e.type!==u.LoaderResource.TYPE.IMAGE&&"svg"!==e.extension?i():(t=e.data,r=e.url,n=e.name,a=e.metadata,o.Texture.fromLoader(t,r,n,a).then(function(t){e.texture=t,i()}).catch(i))},w.extension=o.ExtensionType.Loader,w);function w(){}var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function R(t,e){if(t.data){if(t.xhr&&t.xhrType===u.LoaderResource.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=globalThis.URL||globalThis.webkitURL,r=i.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=u.LoaderResource.TYPE.IMAGE,void(t.data.onload=function(){i.revokeObjectURL(r),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],a=0;a<r.length;++a)i<t.length?r[a]=255&t.charCodeAt(i++):r[a]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(a=0;a<n.length;++a)e+=D.charAt(n[a])}return e}(t.xhr.responseText),t.type=u.LoaderResource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}var O=(P.extension=o.ExtensionType.Loader,P.use=R,P);function P(){}o.extensions.add(A,O),u.AppLoaderPlugin=t,u.Loader=E,u.TextureLoader=A},{"@pixi/core":5,"@pixi/utils":36}],18:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var h=2*Math.PI,i=180/Math.PI,r=Math.PI/180;s.SHAPES=void 0,(P=s.SHAPES||(s.SHAPES={}))[P.POLY=0]="POLY",P[P.RECT=1]="RECT",P[P.CIRC=2]="CIRC",P[P.ELIP=3]="ELIP",P[P.RREC=4]="RREC";var n=(a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},a.prototype.copyTo=function(t){return t.set(this.x,this.y),t},a.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},a.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},a.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},a);function a(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}var f=[new n,new n,new n,new n],o=(Object.defineProperty(u.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(u,"EMPTY",{get:function(){return new u(0,0,0,0)},enumerable:!1,configurable:!0}),u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height)},u.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},u.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},u.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},u.prototype.intersects=function(t,e){if(!e){var i=(this.x<t.x?t:this).x;return(this.right>t.right?t:this).right<=i?!1:(this.y<t.y?t:this).y<(this.bottom>t.bottom?t:this).bottom}var r=this.left,n=this.right,a=this.top,o=this.bottom;if(n<=r||o<=a)return!1;var s=f[0].set(t.left,t.top),u=f[1].set(t.left,t.bottom),h=f[2].set(t.right,t.top),l=f[3].set(t.right,t.bottom);if(h.x<=s.x||u.y<=s.y)return!1;var c=Math.sign(e.a*e.d-e.b*e.c);if(0===c)return!1;if(e.apply(s,s),e.apply(u,u),e.apply(h,h),e.apply(l,l),Math.max(s.x,u.x,h.x,l.x)<=r||Math.min(s.x,u.x,h.x,l.x)>=n||Math.max(s.y,u.y,h.y,l.y)<=a||Math.min(s.y,u.y,h.y,l.y)>=o)return!1;var p=c*(u.y-s.y),d=c*(s.x-u.x),i=p*r+d*a,t=p*n+d*a,e=p*r+d*o,u=p*n+d*o;if(Math.max(i,t,e,u)<=p*s.x+d*s.y||Math.min(i,t,e,u)>=p*l.x+d*l.y)return!1;d=c*(s.y-h.y),c*=h.x-s.x,h=d*r+c*a,a=d*n+c*a,r=d*r+c*o,o=d*n+c*o;return!(Math.max(h,a,r,o)<=d*s.x+c*s.y||Math.min(h,a,r,o)>=d*l.x+c*l.y)},u.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},u.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(t-r,0),this},u.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},u.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=t-r,this},u.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},u);function u(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=s.SHAPES.RECT}var l=(c.prototype.clone=function(){return new c(this.x,this.y,this.radius)},c.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=i},c.prototype.getBounds=function(){return new o(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},c.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},c);function c(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.x=t=void 0===t?0:t,this.y=e,this.radius=i,this.type=s.SHAPES.CIRC}var p=(d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height)},d.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},d.prototype.getBounds=function(){return new o(this.x-this.width,this.y-this.height,this.width,this.height)},d.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},d);function d(t,e,i,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t=void 0===t?0:t,this.y=e,this.width=i,this.height=r,this.type=s.SHAPES.ELIP}var m=(v.prototype.clone=function(){var t=new v(this.points.slice());return t.closeStroke=this.closeStroke,t},v.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,a=r-1;n<r;a=n++){var o=this.points[2*n],s=this.points[2*n+1],u=this.points[2*a],h=this.points[2*a+1];e<s!=e<h&&t<(e-s)/(h-s)*(u-o)+o&&(i=!i)}return i},v.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce(function(t,e){return t+", "+e},"")+"]"},v);function v(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){for(var n=[],a=0,o=r.length;a<o;a++)n.push(r[a].x,r[a].y);r=n}this.points=r,this.type=s.SHAPES.POLY,this.closeStroke=!0}var g=(_.prototype.clone=function(){return new _(this.x,this.y,this.width,this.height,this.radius)},_.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var r=t-(this.x+i),n=e-(this.y+i),a=i*i;if(r*r+n*n<=a)return!0;if((r=t-(this.x+this.width-i))*r+n*n<=a)return!0;if(r*r+(n=e-(this.y+this.height-i))*n<=a)return!0;if((r=t-(this.x+i))*r+n*n<=a)return!0}return!1},_.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},_);function _(t,e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=20),this.x=t=void 0===t?0:t,this.y=e,this.width=i,this.height=r,this.radius=n,this.type=s.SHAPES.RREC}var y=(x.prototype.clone=function(t,e){return new x(t=void 0===t?this.cb:t,e=void 0===e?this.scope:e,this._x,this._y)},x.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},x.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},x.prototype.copyTo=function(t){return t.set(this._x,this._y),t},x.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},x.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(x.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),x);function x(t,e,i,r){void 0===r&&(r=0),this._x=i=void 0===i?0:i,this._y=r,this.cb=t,this.scope=e}var b=(T.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},T.prototype.set=function(t,e,i,r,n,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a,this},T.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},T.prototype.apply=function(t,e){e=e||new n;var i=t.x,t=t.y;return e.x=this.a*i+this.c*t+this.tx,e.y=this.b*i+this.d*t+this.ty,e},T.prototype.applyInverse=function(t,e){e=e||new n;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,t=t.y;return e.x=this.d*i*r+-this.c*i*t+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*t+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},T.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},T.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},T.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,t=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=t*e-this.ty*i,this.ty=t*i+this.ty*e,this},T.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},T.prototype.setTransform=function(t,e,i,r,n,a,o,s,u){return this.a=Math.cos(o+u)*n,this.b=Math.sin(o+u)*n,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},T.prototype.prepend=function(t){var e,i,r=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,i=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d),this.tx=r*t.a+this.ty*t.c+t.tx,this.ty=r*t.b+this.ty*t.d+t.ty,this},T.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=t.pivot,o=-Math.atan2(-r,n),s=Math.atan2(i,e),u=Math.abs(o+s);return u<1e-5||Math.abs(h-u)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(a.x*e+a.y*r),t.position.y=this.ty+(a.x*i+a.y*n),t},T.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,a=t*r-e*i;return this.a=r/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-r*n)/a,this.ty=-(t*this.ty-e*n)/a,this},T.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},T.prototype.clone=function(){var t=new T;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},T.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},T.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},T.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(T,"IDENTITY",{get:function(){return new T},enumerable:!1,configurable:!0}),Object.defineProperty(T,"TEMP_MATRIX",{get:function(){return new T},enumerable:!1,configurable:!0}),T);function T(t,e,i,r,n,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a}var E=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],S=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],M=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],A=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],w=[],D=[],R=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];w.push(e);for(var i=0;i<16;i++)for(var r=R(E[t]*E[i]+M[t]*S[i]),n=R(S[t]*E[i]+A[t]*S[i]),a=R(E[t]*M[i]+M[t]*A[i]),o=R(S[t]*M[i]+A[t]*A[i]),s=0;s<16;s++)if(E[s]===r&&S[s]===n&&M[s]===a&&A[s]===o){e.push(s);break}}for(t=0;t<16;t++){var u=new b;u.set(E[t],S[t],M[t],A[t],0,0),D.push(u)}}();var O={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return E[t]},uY:function(t){return S[t]},vX:function(t){return M[t]},vY:function(t){return A[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return w[t][e]},sub:function(t,e){return w[t][O.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?O.S:O.N:2*Math.abs(e)<=Math.abs(t)?0<t?O.E:O.W:0<e?0<t?O.SE:O.SW:0<t?O.NE:O.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);e=D[O.inv(e)];e.tx=i,e.ty=r,t.append(e)}},P=(C.prototype.onChange=function(){this._localID++},C.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},C.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},C.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},C.prototype.updateTransform=function(t){var e,i,r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(i=this.worldTransform).a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},C.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(C.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),C.IDENTITY=new C,C);function C(){this.worldTransform=new b,this.localTransform=new b,this.position=new y(this.onChange,this,0,0),this.scale=new y(this.onChange,this,1,1),this.pivot=new y(this.onChange,this,0,0),this.skew=new y(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}s.Circle=l,s.DEG_TO_RAD=r,s.Ellipse=p,s.Matrix=b,s.ObservablePoint=y,s.PI_2=h,s.Point=n,s.Polygon=m,s.RAD_TO_DEG=i,s.Rectangle=o,s.RoundedRectangle=g,s.Transform=P,s.groupD8=O},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("@pixi/mesh"),a=t("@pixi/constants"),s=t("@pixi/core"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u,h=(n(l,u=o.MeshGeometry),l.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,a=this.segHeight-1,o=this.width/n,s=this.height/a,u=0;u<t;u++){var h=u%this.segWidth,l=u/this.segWidth|0;e.push(h*o,l*s),i.push(h/n,l/a)}for(var c=n*a,u=0;u<c;u++){var p=u%n,d=u/n|0,f=d*this.segWidth+p,m=d*this.segWidth+p+1,v=(1+d)*this.segWidth+p,p=(1+d)*this.segWidth+p+1;r.push(f,m,v,m,p,v)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},l);function l(t,e,i,r){void 0===t&&(t=100),void 0===e&&(e=100),void 0===i&&(i=10),void 0===r&&(r=10);var n=u.call(this)||this;return n.segWidth=i,n.segHeight=r,n.width=t,n.height=e,n.build(),n}var c,p=(n(d,c=o.MeshGeometry),Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),d.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var n=i.data,a=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var o=0,s=t[0],u=this._width*this.textureScale,h=t.length,l=0;l<h;l++){var c,p,d=4*l;0<this.textureScale?(c=s.x-t[l].x,p=s.y-t[l].y,p=Math.sqrt(c*c+p*p),s=t[l],o+=p/u):o=l/(h-1),n[d]=o,n[d+1]=0,n[d+2]=o,n[d+3]=1}for(var f=0,l=0;l<h-1;l++){d=2*l;a[f++]=d,a[f++]=d+1,a[f++]=d+2,a[f++]=d+2,a[f++]=d+1,a[f++]=d+3}i.update(),r.update(),this.updateVertices()}}},d.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],i=this.buffers[0].data,r=t.length,n=0;n<r;n++){var a=t[n],o=4*n,s=-((l=n<t.length-1?t[n+1]:a).x-e.x),u=l.y-e.y,h=Math.sqrt(u*u+s*s),l=0<this.textureScale?this.textureScale*this._width/2:this._width/2;u/=h,s/=h,u*=l,s*=l,i[o]=a.x+u,i[1+o]=a.y+s,i[2+o]=a.x-u,i[3+o]=a.y-s,e=a}this.buffers[0].update()}},d.prototype.update=function(){0<this.textureScale?this.build():this.updateVertices()},d);function d(t,e,i){void 0===t&&(t=200),void 0===i&&(i=0);var r=c.call(this,new Float32Array(4*e.length),new Float32Array(4*e.length),new Uint16Array(6*(e.length-1)))||this;return r.points=e,r._width=t,r.textureScale=i,r.build(),r}var f,m=(n(v,f=o.Mesh),v.prototype._render=function(t){var e=this.geometry;!this.autoUpdate&&e._width===this.shader.texture.height||(e._width=this.shader.texture.height,e.update()),f.prototype._render.call(this,t)},v);function v(t,e,i){var r=this,n=new p(t.height,e,i=void 0===i?0:i),e=new o.MeshMaterial(t);return 0<i&&(t.baseTexture.wrapMode=a.WRAP_MODES.REPEAT),(r=f.call(this,n,e)||this).autoUpdate=!0,r}var g,_=(n(y,g=o.Mesh),y.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,i=e.width,e=e.height;!this.autoResize||t.width===i&&t.height===e||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(y.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),y.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),g.prototype._render.call(this,t)},y.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),g.prototype.destroy.call(this,t)},y);function y(t,e,i){var r=this,e=new h(t.width,t.height,e,i),i=new o.MeshMaterial(s.Texture.WHITE);return(r=g.call(this,e,i)||this).texture=t,r.autoResize=!0,r}var x,b=(n(T,x=o.Mesh),Object.defineProperty(T.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),T.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),x.prototype._render.call(this,t)},T);function T(t,e,i,r,n){void 0===t&&(t=s.Texture.EMPTY);var a=this,r=new o.MeshGeometry(e,i,r);r.getBuffer("aVertexPosition").static=!1;t=new o.MeshMaterial(t);return(a=x.call(this,r,t,null,n)||this).autoUpdate=!0,a}var E,t=(n(S,E=_),S.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(S.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),S.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},S.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},S.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,t=this._topHeight+this._bottomHeight,t=this._height>t?1:this._height/t;return Math.min(e,t)},Object.defineProperty(S.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),S.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,t=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=t*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-t*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},S);function S(t,e,i,r,n){void 0===e&&(e=10),void 0===i&&(i=10),void 0===r&&(r=10),void 0===n&&(n=10);var a=E.call(this,s.Texture.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=e,a._rightWidth=r,a._topHeight=i,a._bottomHeight=n,a.texture=t,a}i.NineSlicePlane=t,i.PlaneGeometry=h,i.RopeGeometry=p,i.SimpleMesh=b,i.SimplePlane=_,i.SimpleRope=m},{"@pixi/constants":4,"@pixi/core":5,"@pixi/mesh":20}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("@pixi/core"),n=t("@pixi/math"),o=t("@pixi/constants"),r=t("@pixi/display"),f=t("@pixi/settings"),s=t("@pixi/utils"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function h(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l=(c.prototype.update=function(t){!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID||(this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID,t=this.uvBuffer.data,this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++)},c);function c(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}var p,d=new n.Point,m=new n.Polygon,v=(h(g,p=r.Container),Object.defineProperty(g.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),g.prototype._render=function(t){var e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===o.DRAW_MODES.TRIANGLES&&e.length<2*g.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},g.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},g.prototype._renderToBatch=function(t){var e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},g.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var t=this.transform.worldTransform,r=t.a,n=t.b,a=t.c,o=t.d,s=t.tx,u=t.ty,h=this.vertexData,l=0;l<h.length/2;l++){var c=e[2*l],p=e[2*l+1];h[2*l]=r*c+a*p+s,h[2*l+1]=n*c+o*p+u}if(this._roundPixels)for(var d=f.settings.RESOLUTION,l=0;l<h.length;++l)h[l]=Math.round((h[l]*d|0)/d);this.vertexDirty=i}},g.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new l(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},g.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},g.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,d);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=m.points,r=this.geometry.getIndex().data,n=r.length,a=4===this.drawMode?3:1,o=0;o+2<n;o+=a){var s=2*r[o],u=2*r[o+1],h=2*r[o+2];if(i[0]=e[s],i[1]=e[1+s],i[2]=e[u],i[3]=e[1+u],i[4]=e[h],i[5]=e[1+h],m.contains(d.x,d.y))return!0}return!1},g.prototype.destroy=function(t){p.prototype.destroy.call(this,t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},g.BATCHABLE_SIZE=100,g);function g(t,e,i,r){void 0===r&&(r=o.DRAW_MODES.TRIANGLES);var n=p.call(this)||this;return n.geometry=t,n.shader=e,n.state=i||a.State.for2d(),n.drawMode=r,n.start=0,n.size=0,n.uvs=null,n.indices=null,n.vertexData=new Float32Array(1),n.vertexDirty=-1,n._transformID=-1,n._roundPixels=f.settings.ROUND_PIXELS,n.batchUvs=null,n}var _,t=(h(y,_=a.Shader),Object.defineProperty(y.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),y.prototype.update=function(){var t;this._colorDirty&&(this._colorDirty=!1,t=this.texture.baseTexture,s.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},y);function y(t,e){var i=this,r={uSampler:t,alpha:1,uTextureMatrix:n.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e)).uniforms&&Object.assign(r,e.uniforms),(i=_.call(this,e.program||a.Program.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),r)||this)._colorDirty=!1,i.uvMatrix=new a.TextureMatrix(t),i.batchable=void 0===e.program,i.pluginName=e.pluginName,i.tint=e.tint,i.alpha=e.alpha,i}var x,r=(h(b,x=a.Geometry),Object.defineProperty(b.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),b);function b(t,e,i){var r=x.call(this)||this,t=new a.Buffer(t),e=new a.Buffer(e,!0),i=new a.Buffer(i,!0,!0);return r.addAttribute("aVertexPosition",t,2,!1,o.TYPES.FLOAT).addAttribute("aTextureCoord",e,2,!1,o.TYPES.FLOAT).addIndex(i),r._updateId=-1,r}i.Mesh=v,i.MeshBatchUvs=l,i.MeshGeometry=r,i.MeshMaterial=t},{"@pixi/constants":4,"@pixi/core":5,"@pixi/display":6,"@pixi/math":18,"@pixi/settings":28,"@pixi/utils":36}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r,n,a,o,s,u,h,l,c,p,d,f,m,v,g,_,y,x,b,T,E=t("@pixi/core"),S=t("@pixi/sprite"),M=t("@pixi/display"),A=t("@pixi/math"),w=t("@pixi/utils"),D=t("@pixi/settings");(r=r=r||{})[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",(n=n=n||{})[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",(a=a=a||{})[a.COLOR=16384]="COLOR",a[a.DEPTH=256]="DEPTH",a[a.STENCIL=1024]="STENCIL",(o=o=o||{})[o.NORMAL=0]="NORMAL",o[o.ADD=1]="ADD",o[o.MULTIPLY=2]="MULTIPLY",o[o.SCREEN=3]="SCREEN",o[o.OVERLAY=4]="OVERLAY",o[o.DARKEN=5]="DARKEN",o[o.LIGHTEN=6]="LIGHTEN",o[o.COLOR_DODGE=7]="COLOR_DODGE",o[o.COLOR_BURN=8]="COLOR_BURN",o[o.HARD_LIGHT=9]="HARD_LIGHT",o[o.SOFT_LIGHT=10]="SOFT_LIGHT",o[o.DIFFERENCE=11]="DIFFERENCE",o[o.EXCLUSION=12]="EXCLUSION",o[o.HUE=13]="HUE",o[o.SATURATION=14]="SATURATION",o[o.COLOR=15]="COLOR",o[o.LUMINOSITY=16]="LUMINOSITY",o[o.NORMAL_NPM=17]="NORMAL_NPM",o[o.ADD_NPM=18]="ADD_NPM",o[o.SCREEN_NPM=19]="SCREEN_NPM",o[o.NONE=20]="NONE",o[o.SRC_OVER=0]="SRC_OVER",o[o.SRC_IN=21]="SRC_IN",o[o.SRC_OUT=22]="SRC_OUT",o[o.SRC_ATOP=23]="SRC_ATOP",o[o.DST_OVER=24]="DST_OVER",o[o.DST_IN=25]="DST_IN",o[o.DST_OUT=26]="DST_OUT",o[o.DST_ATOP=27]="DST_ATOP",o[o.ERASE=26]="ERASE",o[o.SUBTRACT=28]="SUBTRACT",o[o.XOR=29]="XOR",(s=s=s||{})[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN",(u=u=u||{})[u.RGBA=6408]="RGBA",u[u.RGB=6407]="RGB",u[u.RG=33319]="RG",u[u.RED=6403]="RED",u[u.RGBA_INTEGER=36249]="RGBA_INTEGER",u[u.RGB_INTEGER=36248]="RGB_INTEGER",u[u.RG_INTEGER=33320]="RG_INTEGER",u[u.RED_INTEGER=36244]="RED_INTEGER",u[u.ALPHA=6406]="ALPHA",u[u.LUMINANCE=6409]="LUMINANCE",u[u.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",u[u.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",u[u.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(h=h=h||{})[h.TEXTURE_2D=3553]="TEXTURE_2D",h[h.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",h[h.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",h[h.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",h[h.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",h[h.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",h[h.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",h[h.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",h[h.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(l=l=l||{})[l.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",l[l.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",l[l.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",l[l.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",l[l.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",l[l.UNSIGNED_INT=5125]="UNSIGNED_INT",l[l.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",l[l.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",l[l.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",l[l.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",l[l.BYTE=5120]="BYTE",l[l.SHORT=5122]="SHORT",l[l.INT=5124]="INT",l[l.FLOAT=5126]="FLOAT",l[l.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",l[l.HALF_FLOAT=36193]="HALF_FLOAT",(c=c=c||{})[c.FLOAT=0]="FLOAT",c[c.INT=1]="INT",c[c.UINT=2]="UINT",(p=p=p||{})[p.NEAREST=0]="NEAREST",p[p.LINEAR=1]="LINEAR",(d=d=d||{})[d.CLAMP=33071]="CLAMP",d[d.REPEAT=10497]="REPEAT",d[d.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(f=f=f||{})[f.OFF=0]="OFF",f[f.POW2=1]="POW2",f[f.ON=2]="ON",f[f.ON_MANUAL=3]="ON_MANUAL",(m=m=m||{})[m.NPM=0]="NPM",m[m.UNPACK=1]="UNPACK",m[m.PMA=2]="PMA",m[m.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",m[m.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",m[m.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",m[m.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(v=v=v||{})[v.NO=0]="NO",v[v.YES=1]="YES",v[v.AUTO=2]="AUTO",v[v.BLEND=0]="BLEND",v[v.CLEAR=1]="CLEAR",v[v.BLIT=2]="BLIT",(g=g=g||{})[g.AUTO=0]="AUTO",g[g.MANUAL=1]="MANUAL",(_=_=_||{}).LOW="lowp",_.MEDIUM="mediump",_.HIGH="highp",(y=y=y||{})[y.NONE=0]="NONE",y[y.SCISSOR=1]="SCISSOR",y[y.STENCIL=2]="STENCIL",y[y.SPRITE=3]="SPRITE",y[y.COLOR=4]="COLOR",(b=b=b||{})[b.RED=1]="RED",b[b.GREEN=2]="GREEN",b[b.BLUE=4]="BLUE",b[b.ALPHA=8]="ALPHA",(b=x=x||{})[b.NONE=0]="NONE",b[b.LOW=2]="LOW",b[b.MEDIUM=4]="MEDIUM",b[b.HIGH=8]="HIGH",(T=T=T||{})[T.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",T[T.ARRAY_BUFFER=34962]="ARRAY_BUFFER",T[T.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";var R=new A.Matrix;M.DisplayObject.prototype._cacheAsBitmap=!1,M.DisplayObject.prototype._cacheData=null,M.DisplayObject.prototype._cacheAsBitmapResolution=null,M.DisplayObject.prototype._cacheAsBitmapMultisample=x.NONE;var O=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(M.DisplayObject.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&((this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new O),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),M.DisplayObject.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},M.DisplayObject.prototype._initCachedDisplayObject=function(t){var e,i,r,n,a,o,s,u;this._cacheData&&this._cacheData.sprite||(e=this.alpha,this.alpha=1,t.batch.flush(),i=this.getLocalBounds(null,!0).clone(),this.filters&&this.filters.length&&(u=this.filters[0].padding,i.pad(u)),i.ceil(D.settings.RESOLUTION),r=t.renderTexture.current,n=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),o=t.projection.transform,u=E.RenderTexture.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(s=this.cacheAsBitmapMultisample)&&void 0!==s?s:t.multisample}),s="cacheAsBitmap_"+w.uid(),this._cacheData.textureCacheId=s,E.BaseTexture.addToCache(u.baseTexture,s),E.Texture.addToCache(u,s),s=this.transform.localTransform.copyTo(R).invert().translate(-i.x,-i.y),this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:s,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=o,t.renderTexture.bind(r,n,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e,(u=new S.Sprite(u)).transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(i.x/i.width),u.anchor.y=-(i.y/i.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u))},M.DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},M.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){var e,i,r,n,a,o;this._cacheData&&this._cacheData.sprite||(e=this.getLocalBounds(null,!0),i=this.alpha,this.alpha=1,r=t.context,n=t._projTransform,e.ceil(D.settings.RESOLUTION),o=E.RenderTexture.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+w.uid(),this._cacheData.textureCacheId=a,E.BaseTexture.addToCache(o.baseTexture,a),E.Texture.addToCache(o,a),this.transform.localTransform.copyTo(a=R),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i,(o=new S.Sprite(o)).transform.worldTransform=this.transform.worldTransform,o.anchor.x=-(e.x/e.width),o.anchor.y=-(e.y/e.height),o.alpha=i,o._bounds=this._bounds,this._cacheData.sprite=o,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=o.containsPoint.bind(o))},M.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},M.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},M.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,E.BaseTexture.removeFromCache(this._cacheData.textureCacheId),E.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},M.DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},i.CacheData=O},{"@pixi/core":5,"@pixi/display":6,"@pixi/math":18,"@pixi/settings":28,"@pixi/sprite":31,"@pixi/utils":36}],22:[function(t,e,i){"use strict";t=t("@pixi/display");t.DisplayObject.prototype.name=null,t.Container.prototype.getChildByName=function(t,e){for(var i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,r=this.children.length;i<r;i++){var n=this.children[i];if(n.getChildByName){n=n.getChildByName(t,!0);if(n)return n}}return null}},{"@pixi/display":6}],23:[function(t,e,i){"use strict";var r=t("@pixi/display"),n=t("@pixi/math");r.DisplayObject.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new n.Point),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"@pixi/display":6,"@pixi/math":18}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("@pixi/constants"),r=t("@pixi/display"),v=t("@pixi/utils"),s=t("@pixi/core"),n=t("@pixi/math"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function u(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var h,t=(u(l,h=r.Container),l.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},l.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(l.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,v.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),l.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},l.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},l.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},l.prototype.destroy=function(t){h.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},l);function l(t,e,i,r){void 0===t&&(t=1500),void 0===i&&(i=16384),void 0===r&&(r=!1);var n=h.call(this)||this;return 16384<i&&(i=16384),n._properties=[!1,!0,!1,!1,!1],n._maxSize=t,n._batchSize=i,n._buffers=null,n._bufferUpdateIDs=[],n._updateID=0,n.interactiveChildren=!1,n.blendMode=o.BLEND_MODES.NORMAL,n.autoResize=r,n.roundPixels=!0,n.baseTexture=null,n.setProperties(e),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}var c=(p.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new s.Buffer(v.createIndicesForQuads(this.size),!0,!0),t.addIndex(this.indexBuffer);for(var i=this.dynamicStride=0;i<this.dynamicProperties.length;++i)(a=this.dynamicProperties[i]).offset=e,e+=a.size,this.dynamicStride+=a.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new s.Buffer(this.dynamicData,!1,!1);for(var n=0,i=this.staticStride=0;i<this.staticProperties.length;++i)(a=this.staticProperties[i]).offset=n,n+=a.size,this.staticStride+=a.size;r=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(r),this.staticDataUint32=new Uint32Array(r),this.staticBuffer=new s.Buffer(this.staticData,!0,!1);for(i=0;i<this.dynamicProperties.length;++i){var a=this.dynamicProperties[i];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===o.TYPES.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(i=0;i<this.staticProperties.length;++i){a=this.staticProperties[i];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===o.TYPES.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}},p.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.type===o.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},p.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.type===o.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},p.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},p);function p(t,e,i){this.geometry=new s.Geometry,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var n={attributeName:(n=t[r]).attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||o.TYPES.FLOAT,offset:n.offset};(e[r]?this.dynamicProperties:this.staticProperties).push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}var d,r=(u(f,d=s.ObjectRenderer),f.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer,a=e.length;if(0!==a){i<a&&!t.autoResize&&(a=i);var o=(o=t._buffers)||(t._buffers=this.generateBuffers(t)),s=e[0]._texture.baseTexture,u=0<s.alphaMode;this.state.blendMode=v.correctBlendMode(t.blendMode,u),n.state.set(this.state);var h=n.gl,i=t.worldTransform.copyTo(this.tempMatrix);i.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=i.toArray(!0),this.shader.uniforms.uColor=v.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var l=!1,c=0,p=0;c<a;c+=r,p+=1){var d=a-c;r<d&&(d=r),p>=o.length&&o.push(this._generateOneMoreBuffer(t));var f=o[p];f.uploadDynamic(e,c,d);var m=t._bufferUpdateIDs[p]||0;(l=l||f._updateID<m)&&(f._updateID=t._updateID,f.uploadStatic(e,c,d)),n.geometry.bind(f.geometry),h.drawElements(h.TRIANGLES,6*d,h.UNSIGNED_SHORT,0)}}},f.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,n=t._properties,a=0;a<i;a+=r)e.push(new c(this.properties,n,r));return e},f.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,t=t._properties;return new c(this.properties,t,e)},f.prototype.uploadVertices=function(t,e,i,r,n,a){for(var o=0,s=0,u=0,h=0,l=0;l<i;++l){var c=t[e+l],p=c._texture,d=c.scale.x,f=c.scale.y,m=p.trim,p=p.orig;m?(o=(s=m.x-c.anchor.x*p.width)+m.width,u=(h=m.y-c.anchor.y*p.height)+m.height):(o=p.width*(1-c.anchor.x),s=p.width*-c.anchor.x,u=p.height*(1-c.anchor.y),h=p.height*-c.anchor.y),r[a]=s*d,r[a+1]=h*f,r[a+n]=o*d,r[a+n+1]=h*f,r[a+2*n]=o*d,r[a+2*n+1]=u*f,r[a+3*n]=s*d,r[a+3*n+1]=u*f,a+=4*n}},f.prototype.uploadPosition=function(t,e,i,r,n,a){for(var o=0;o<i;o++){var s=t[e+o].position;r[a]=s.x,r[a+1]=s.y,r[a+n]=s.x,r[a+n+1]=s.y,r[a+2*n]=s.x,r[a+2*n+1]=s.y,r[a+3*n]=s.x,r[a+3*n+1]=s.y,a+=4*n}},f.prototype.uploadRotation=function(t,e,i,r,n,a){for(var o=0;o<i;o++){var s=t[e+o].rotation;r[a]=s,r[a+n]=s,r[a+2*n]=s,r[a+3*n]=s,a+=4*n}},f.prototype.uploadUvs=function(t,e,i,r,n,a){for(var o=0;o<i;++o){var s=t[e+o]._texture._uvs;s?(r[a]=s.x0,r[a+1]=s.y0,r[a+n]=s.x1,r[a+n+1]=s.y1,r[a+2*n]=s.x2,r[a+2*n+1]=s.y2,r[a+3*n]=s.x3,r[a+3*n+1]=s.y3):(r[a]=0,r[a+1]=0,r[a+n]=0,r[a+n+1]=0,r[a+2*n]=0,r[a+2*n+1]=0,r[a+3*n]=0,r[a+3*n+1]=0),a+=4*n}},f.prototype.uploadTint=function(t,e,i,r,n,a){for(var o=0;o<i;++o){var s=t[e+o],u=0<s._texture.baseTexture.alphaMode,h=s.alpha,h=h<1&&u?v.premultiplyTint(s._tintRGB,h):s._tintRGB+(255*h<<24);r[a]=h,r[a+n]=h,r[a+2*n]=h,r[a+3*n]=h,a+=4*n}},f.prototype.destroy=function(){d.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},f.extension={name:"particle",type:s.ExtensionType.RendererPlugin},f);function f(t){t=d.call(this,t)||this;return t.shader=null,t.properties=null,t.tempMatrix=new n.Matrix,t.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:t.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:t.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:t.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:t.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:o.TYPES.UNSIGNED_BYTE,uploadFunction:t.uploadTint,offset:0}],t.shader=s.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),t.state=s.State.for2d(),t}i.ParticleContainer=t,i.ParticleRenderer=r},{"@pixi/constants":4,"@pixi/core":5,"@pixi/display":6,"@pixi/math":18,"@pixi/utils":36}],25:[function(l,t,e){!function(h){!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var t=l("promise-polyfill"),i=l("object-assign");function r(t){return t&&"object"===e(t)&&"default"in t?t:{default:t}}t=r(t),i=r(i);"undefined"==typeof globalThis&&("undefined"!=typeof self?self.globalThis=self:void 0!==h&&(h.globalThis=h)),globalThis.Promise||(globalThis.Promise=t.default),Object.assign||(Object.assign=i.default);var n;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),globalThis.performance&&globalThis.performance.now||(n=Date.now(),globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-n});for(var a=Date.now(),o=["ms","moz","webkit","o"],s=0;s<o.length&&!globalThis.requestAnimationFrame;++s){var u=o[s];globalThis.requestAnimationFrame=globalThis[u+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[u+"CancelAnimationFrame"]||globalThis[u+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+a-e;return i<0&&(i=0),a=e,globalThis.self.setTimeout(function(){a=Date.now(),t(performance.now())},i)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":40,"promise-polyfill":42}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/settings"),a=t("@pixi/core"),o=t("@pixi/graphics"),s=t("@pixi/ticker"),n=t("@pixi/display"),u=t("@pixi/text"),h=t("@pixi/utils");r.settings.UPLOADS_PER_FRAME=4;var l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var c=(p.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},p.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},p);function p(t){this.maxItemsPerFrame=t,this.itemsLeft=0}function d(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r,n=0;n<t._textures.length;n++)t._textures[n]instanceof a.Texture&&(r=t._textures[n].baseTexture,-1===e.indexOf(r)&&(e.push(r),i=!0));return i}function f(t,e){if(t.baseTexture instanceof a.BaseTexture){t=t.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function m(t,e){if(t._texture&&t._texture instanceof a.Texture){t=t._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function v(t,e){return e instanceof u.Text&&(e.updateText(!0),!0)}function g(t,e){if(e instanceof u.TextStyle){e=e.toFontString();return u.TextMetrics.measureFont(e),!0}return!1}function _(t,e){if(t instanceof u.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);t=t._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function y(t,e){return t instanceof u.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}var x=(b.prototype.upload=function(i,r){var n=this;return"function"==typeof i&&(r=i,i=null),r&&h.deprecation("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(t){i&&n.add(i);function e(){null!=r&&r(),t()}n.queue.length?(n.completes.push(e),n.ticking||(n.ticking=!0,s.Ticker.system.addOnce(n.tick,n,s.UPDATE_PRIORITY.UTILITY))):e()})},b.prototype.tick=function(){setTimeout(this.delayedTick,0)},b.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)s.Ticker.system.addOnce(this.tick,this,s.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var n=this.completes.slice(0),i=this.completes.length=0,r=n.length;i<r;i++)n[i]()}},b.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},b.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},b.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof n.Container)for(e=t.children.length-1;0<=e;e--)this.add(t.children[e]);return this},b.prototype.destroy=function(){this.ticking&&s.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},b);function b(t){var e=this;this.limiter=new c(r.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(_),this.registerFindHook(y),this.registerFindHook(d),this.registerFindHook(f),this.registerFindHook(m),this.registerUploadHook(v),this.registerUploadHook(g)}function T(t,e){return e instanceof a.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function E(t,e){if(!(e instanceof o.Graphics))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var a=r[n].style.texture;a&&T(t,a.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function S(t,e){return t instanceof o.Graphics&&(e.push(t),!0)}var M,A,w,D=(l(A=O,w=M=x),A.prototype=null===w?Object.create(w):(R.prototype=w.prototype,new R),O.extension={name:"prepare",type:a.ExtensionType.RendererPlugin},O);function R(){this.constructor=A}function O(t){t=M.call(this,t)||this;return t.uploadHookHelper=t.renderer,t.registerFindHook(S),t.registerUploadHook(T),t.registerUploadHook(E),t}P.prototype.beginFrame=function(){this.frameStart=Date.now()},P.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t=P;function P(t){this.maxMilliseconds=t,this.frameStart=0}i.BasePrepare=x,i.CountLimiter=c,i.Prepare=D,i.TimeLimiter=t},{"@pixi/core":5,"@pixi/display":6,"@pixi/graphics":15,"@pixi/settings":28,"@pixi/text":34,"@pixi/ticker":35,"@pixi/utils":36}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=(n.prototype.emit=function(t,e,i,r,n,a,o,s){if(8<arguments.length)throw new Error("max arguments reached");var u=this.name,h=this.items;this._aliasCount++;for(var l=0,c=h.length;l<c;l++)h[l][u](t,e,i,r,n,a,o,s);return h===this.items&&this._aliasCount--,this},n.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},n.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},n.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},n.prototype.contains=function(t){return-1!==this.items.indexOf(t)},n.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},n.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(n.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n);function n(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}}),i.Runner=r},{}],28:[function(t,e,i){"use strict";var r,n,a,o,s,u,h,l,c,p,d,f,m,v,g,_,y,x;Object.defineProperty(i,"__esModule",{value:!0}),(r=r=r||{})[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",(n=n=n||{})[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",(a=a=a||{})[a.COLOR=16384]="COLOR",a[a.DEPTH=256]="DEPTH",a[a.STENCIL=1024]="STENCIL",(o=o=o||{})[o.NORMAL=0]="NORMAL",o[o.ADD=1]="ADD",o[o.MULTIPLY=2]="MULTIPLY",o[o.SCREEN=3]="SCREEN",o[o.OVERLAY=4]="OVERLAY",o[o.DARKEN=5]="DARKEN",o[o.LIGHTEN=6]="LIGHTEN",o[o.COLOR_DODGE=7]="COLOR_DODGE",o[o.COLOR_BURN=8]="COLOR_BURN",o[o.HARD_LIGHT=9]="HARD_LIGHT",o[o.SOFT_LIGHT=10]="SOFT_LIGHT",o[o.DIFFERENCE=11]="DIFFERENCE",o[o.EXCLUSION=12]="EXCLUSION",o[o.HUE=13]="HUE",o[o.SATURATION=14]="SATURATION",o[o.COLOR=15]="COLOR",o[o.LUMINOSITY=16]="LUMINOSITY",o[o.NORMAL_NPM=17]="NORMAL_NPM",o[o.ADD_NPM=18]="ADD_NPM",o[o.SCREEN_NPM=19]="SCREEN_NPM",o[o.NONE=20]="NONE",o[o.SRC_OVER=0]="SRC_OVER",o[o.SRC_IN=21]="SRC_IN",o[o.SRC_OUT=22]="SRC_OUT",o[o.SRC_ATOP=23]="SRC_ATOP",o[o.DST_OVER=24]="DST_OVER",o[o.DST_IN=25]="DST_IN",o[o.DST_OUT=26]="DST_OUT",o[o.DST_ATOP=27]="DST_ATOP",o[o.ERASE=26]="ERASE",o[o.SUBTRACT=28]="SUBTRACT",o[o.XOR=29]="XOR",(s=s=s||{})[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN",(u=u=u||{})[u.RGBA=6408]="RGBA",u[u.RGB=6407]="RGB",u[u.RG=33319]="RG",u[u.RED=6403]="RED",u[u.RGBA_INTEGER=36249]="RGBA_INTEGER",u[u.RGB_INTEGER=36248]="RGB_INTEGER",u[u.RG_INTEGER=33320]="RG_INTEGER",u[u.RED_INTEGER=36244]="RED_INTEGER",u[u.ALPHA=6406]="ALPHA",u[u.LUMINANCE=6409]="LUMINANCE",u[u.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",u[u.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",u[u.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(h=h=h||{})[h.TEXTURE_2D=3553]="TEXTURE_2D",h[h.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",h[h.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",h[h.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",h[h.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",h[h.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",h[h.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",h[h.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",h[h.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(l=l=l||{})[l.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",l[l.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",l[l.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",l[l.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",l[l.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",l[l.UNSIGNED_INT=5125]="UNSIGNED_INT",l[l.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",l[l.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",l[l.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",l[l.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",l[l.BYTE=5120]="BYTE",l[l.SHORT=5122]="SHORT",l[l.INT=5124]="INT",l[l.FLOAT=5126]="FLOAT",l[l.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",l[l.HALF_FLOAT=36193]="HALF_FLOAT",(f=f=f||{})[f.FLOAT=0]="FLOAT",f[f.INT=1]="INT",f[f.UINT=2]="UINT",(f=c=c||{})[f.NEAREST=0]="NEAREST",f[f.LINEAR=1]="LINEAR",(f=p=p||{})[f.CLAMP=33071]="CLAMP",f[f.REPEAT=10497]="REPEAT",f[f.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(f=d=d||{})[f.OFF=0]="OFF",f[f.POW2=1]="POW2",f[f.ON=2]="ON",f[f.ON_MANUAL=3]="ON_MANUAL",(m=m=m||{})[m.NPM=0]="NPM",m[m.UNPACK=1]="UNPACK",m[m.PMA=2]="PMA",m[m.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",m[m.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",m[m.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",m[m.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",(g=g=g||{})[g.NO=0]="NO",g[g.YES=1]="YES",g[g.AUTO=2]="AUTO",g[g.BLEND=0]="BLEND",g[g.CLEAR=1]="CLEAR",g[g.BLIT=2]="BLIT",(g=v=v||{})[g.AUTO=0]="AUTO",g[g.MANUAL=1]="MANUAL",(g=V=V||{}).LOW="lowp",g.MEDIUM="mediump",g.HIGH="highp",(_=_=_||{})[_.NONE=0]="NONE",_[_.SCISSOR=1]="SCISSOR",_[_.STENCIL=2]="STENCIL",_[_.SPRITE=3]="SPRITE",_[_.COLOR=4]="COLOR",(x=x=x||{})[x.RED=1]="RED",x[x.GREEN=2]="GREEN",x[x.BLUE=4]="BLUE",x[x.ALPHA=8]="ALPHA",(x=y=y||{})[x.NONE=0]="NONE",x[x.LOW=2]="LOW",x[x.MEDIUM=4]="MEDIUM",x[x.HIGH=8]="HIGH",(T=T=T||{})[T.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",T[T.ARRAY_BUFFER=34962]="ARRAY_BUFFER",T[T.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";var b,T={createCanvas:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:(b=function(t,e){return fetch(t,e)},E.toString=function(){return b.toString()},E)};function E(t,e){return b.apply(this,arguments)}function S(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var M=/iPhone/i,A=/iPod/i,w=/iPad/i,D=/\biOS-universal(?:.+)Mac\b/i,R=/\bAndroid(?:.+)Mobile\b/i,O=/Android/i,P=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,C=/Silk/i,I=/Windows Phone/i,L=/\bWindows(?:.+)ARM\b/i,N=/BlackBerry/i,F=/BB10/i,B=/Opera Mini/i,U=/\b(CriOS|Chrome)(?:.+)Mobile/i,G=/Mobile(?:.+)Firefox\b/i;var k=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i,r=e.userAgent;return void 0!==(t=(r=void 0!==(t=r.split("[FBAN"))[1]?t[0]:r).split("Twitter"))[1]&&(r=t[0]),(r={apple:{phone:(r=(i=r,function(t){return t.test(i)}))(M)&&!r(I),ipod:r(A),tablet:!r(M)&&(r(w)||S(e))&&!r(I),universal:r(D),device:(r(M)||r(A)||r(w)||r(D)||S(e))&&!r(I)},amazon:{phone:r(P),tablet:!r(P)&&r(C),device:r(P)||r(C)},android:{phone:!r(I)&&r(P)||!r(I)&&r(R),tablet:!r(I)&&!r(P)&&!r(R)&&(r(C)||r(O)),device:!r(I)&&(r(P)||r(C)||r(R)||r(O))||r(/\bokhttp\b/i)},windows:{phone:r(I),tablet:r(L),device:r(I)||r(L)},other:{blackberry:r(N),blackberry10:r(F),opera:r(B),firefox:r(G),chrome:r(U),device:r(N)||r(F)||r(B)||r(G)||r(U)},any:!1,phone:!1,tablet:!1}).any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}(globalThis.navigator);var z,j,H,V={ADAPTER:T,MIPMAP_TEXTURES:d.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:y.NONE,SPRITE_MAX_TEXTURES:(z=32,H=!0,(k.tablet||k.phone)&&(k.apple.device&&(j=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(j[1],10)<11&&(H=!1),k.android.device&&(j=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(j[1],10)<7&&(H=!1)),H?z:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:v.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:p.CLAMP,SCALE_MODE:c.LINEAR,PRECISION_VERTEX:V.HIGH,PRECISION_FRAGMENT:k.apple.device?V.HIGH:V.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!k.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};i.BrowserAdapter=T,i.isMobile=k,i.settings=V},{}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/core"),n=t("@pixi/sprite"),a=t("@pixi/ticker"),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var s,u,h,n=(s=n.Sprite,o(u=c,h=s),u.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l),c.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},c.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(a.Ticker.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},c.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},c.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},c.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},c.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},c.prototype.destroy=function(t){this.stop(),s.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},c.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(r.Texture.from(t[i]));return new c(e)},c.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(r.Texture.from(t[i]));return new c(e)},Object.defineProperty(c.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(a.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),c);function l(){this.constructor=u}function c(t,e){void 0===e&&(e=!0);var i=s.call(this,t[0]instanceof r.Texture?t[0]:t[0].texture)||this;return i._textures=null,i._durations=null,i._autoUpdate=e,i._isConnectedToTicker=!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i._playing=!1,i._previousFrame=null,i.textures=t,i}i.AnimatedSprite=n},{"@pixi/core":5,"@pixi/sprite":31,"@pixi/ticker":35}],30:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("@pixi/core"),a=t("@pixi/math"),r=t("@pixi/sprite"),d=t("@pixi/constants"),f=t("@pixi/utils"),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function s(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u,h=new a.Point,t=(s(l,u=r.Sprite),Object.defineProperty(l.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),l.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},l.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},l.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},l.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new a.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):u.prototype.getLocalBounds.call(this,t)},l.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,h);var e=this._width,i=this._height,t=-e*this.anchor._x;if(h.x>=t&&h.x<t+e){e=-i*this.anchor._y;if(h.y>=e&&h.y<e+i)return!0}return!1},l.prototype.destroy=function(t){u.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},l.from=function(t,e){return new l(t instanceof n.Texture?t:n.Texture.from(t,e),e.width,e.height)},Object.defineProperty(l.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),l);function l(t,e,i){void 0===e&&(e=100),void 0===i&&(i=100);var r=u.call(this,t)||this;return r.tileTransform=new a.Transform,r._width=e,r._height=i,r.uvMatrix=r.texture.uvMatrix||new n.TextureMatrix(t),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}var c,p="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",m=new a.Matrix,r=(s(v,c=n.ObjectRenderer),v.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=n.Shader.from(p,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=1<t.context.webGLVersion?n.Shader.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):n.Shader.from(p,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},v.prototype.render=function(t){var e=this.renderer,i=this.quad,r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var n=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;(r=i.uvs)[0]=r[6]=-n,r[1]=r[3]=-a,r[2]=r[4]=1-n,r[5]=r[7]=1-a,i.invalidate();var o=t._texture,s=o.baseTexture,u=0<s.alphaMode,h=t.tileTransform.localTransform,l=t.uvMatrix,c=s.isPowerOfTwo&&o.frame.width===s.width&&o.frame.height===s.height;c&&(s._glTextures[e.CONTEXT_UID]?c=s.wrapMode!==d.WRAP_MODES.CLAMP:s.wrapMode===d.WRAP_MODES.CLAMP&&(s.wrapMode=d.WRAP_MODES.REPEAT));var p=c?this.simpleShader:this.shader,n=o.width,r=o.height,a=t._width,s=t._height;m.set(h.a*n/a,h.b*n/s,h.c*r/a,h.d*r/s,h.tx/a,h.ty/s),m.invert(),c?m.prepend(l.mapCoord):(p.uniforms.uMapCoord=l.mapCoord.toArray(!0),p.uniforms.uClampFrame=l.uClampFrame,p.uniforms.uClampOffset=l.uClampOffset),p.uniforms.uTransform=m.toArray(!0),p.uniforms.uColor=f.premultiplyTintToRgba(t.tint,t.worldAlpha,p.uniforms.uColor,u),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=o,e.shader.bind(p),e.geometry.bind(i),this.state.blendMode=f.correctBlendMode(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},v.extension={name:"tilingSprite",type:n.ExtensionType.RendererPlugin},v);function v(t){var e=c.call(this,t)||this;return t.runners.contextChange.add(e),e.quad=new n.QuadUv,e.state=n.State.for2d(),e}i.TilingSprite=t,i.TilingSpriteRenderer=r},{"@pixi/constants":4,"@pixi/core":5,"@pixi/math":18,"@pixi/sprite":31,"@pixi/utils":36}],31:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("@pixi/constants"),n=t("@pixi/core"),a=t("@pixi/display"),o=t("@pixi/math"),v=t("@pixi/settings"),s=t("@pixi/utils"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var h,l,c,p=new o.Point,d=new Uint16Array([0,1,2,0,2,3]),t=(h=a.Container,u(l=m,c=h),l.prototype=null===c?Object.create(c):(f.prototype=c.prototype,new f),m.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=s.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=s.sign(this.scale.y)*this._height/this._texture.orig.height)},m.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},m.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,a=e.d,o=e.tx,s=e.ty,u=this.vertexData,h=t.trim,l=t.orig,c=this._anchor,p=0,d=0,e=0,t=0,e=h?(p=(d=h.x-c._x*l.width)+h.width,(t=h.y-c._y*l.height)+h.height):(p=(d=-c._x*l.width)+l.width,(t=-c._y*l.height)+l.height);if(u[0]=i*d+n*t+o,u[1]=a*t+r*d+s,u[2]=i*p+n*t+o,u[3]=a*t+r*p+s,u[4]=i*p+n*e+o,u[5]=a*e+r*p+s,u[6]=i*d+n*e+o,u[7]=a*e+r*d+s,this._roundPixels)for(var f=v.settings.RESOLUTION,m=0;m<u.length;++m)u[m]=Math.round((u[m]*f|0)/f)}},m.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,a=n.a,o=n.b,s=n.c,u=n.d,h=n.tx,l=n.ty,t=-r._x*i.width,n=t+i.width,r=-r._y*i.height,i=r+i.height;e[0]=a*t+s*r+h,e[1]=u*r+o*t+l,e[2]=a*n+s*r+h,e[3]=u*r+o*n+l,e[4]=a*n+s*i+h,e[5]=u*i+o*n+l,e[6]=a*t+s*i+h,e[7]=u*i+o*t+l},m.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},m.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},m.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._localBounds||(this._localBounds=new a.Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._localBounds.getRectangle(t)):h.prototype.getLocalBounds.call(this,t)},m.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,p);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,t=0;return p.x>=r&&p.x<r+e&&(t=-i*this.anchor.y,p.y>=t&&p.y<t+i)},m.prototype.destroy=function(t){h.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null},m.from=function(t,e){return new m(t instanceof n.Texture?t:n.Texture.from(t,e))},Object.defineProperty(m.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=s.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=s.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||n.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),m);function f(){this.constructor=l}function m(t){var e=h.call(this)||this;return e._anchor=new o.ObservablePoint(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=r.BLEND_MODES.NORMAL,e._cachedTint=16777215,e.uvs=null,e.texture=t||n.Texture.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.indices=d,e.pluginName="batch",e.isSprite=!0,e._roundPixels=v.settings.ROUND_PIXELS,e}i.Sprite=t},{"@pixi/constants":4,"@pixi/core":5,"@pixi/display":6,"@pixi/math":18,"@pixi/settings":28,"@pixi/utils":36}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var h=t("@pixi/math"),l=t("@pixi/core"),u=t("@pixi/utils"),c=t("@pixi/loaders"),p=(d.prototype._updateResolution=function(t){var e=this.data.meta.scale,t=u.getResolutionOfUrl(t=void 0===t?null:t,null);return 1!==(t=null===t?void 0!==e?parseFloat(e):1:t)&&this.baseTexture.setResolution(t),t},d.prototype.parse=function(i){var t=this;return i&&u.deprecation("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(e){t._callback=function(t){null!=i&&i(t),e(t)},t._batchIndex=0,t._frameKeys.length<=d.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()})},d.prototype._processFrames=function(t){for(var e=t,i=d.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var r,n,a,o=this._frameKeys[e],s=this._frames[o],u=s.frame;u&&(r=a=null,n=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,n=new h.Rectangle(0,0,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),a=s.rotated?new h.Rectangle(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):new h.Rectangle(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(r=new h.Rectangle(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[o]=new l.Texture(this.baseTexture,a,n,r,s.rotated?2:0,s.anchor),l.Texture.addToCache(this.textures[o],o)),e++}},d.prototype._processAnimations=function(){var t,e=this.data.animations||{};for(t in e){this.animations[t]=[];for(var i=0;i<e[t].length;i++){var r=e[t][i];this.animations[t].push(this.textures[r])}}},d.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},d.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*d.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*d.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},d.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null!==(t=this._texture)&&void 0!==t&&t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},d.BATCH_SIZE=1e3,d);function d(t,e,i){void 0===i&&(i=null),this.linkedSheets=[],this._texture=t instanceof l.Texture?t:null,this.baseTexture=t instanceof l.BaseTexture?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;e=this.baseTexture.resource;this.resolution=this._updateResolution(i||(e?e.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}f.use=function(r,i){var n=this,t=r.name+"_image";if(r.data&&r.type===c.LoaderResource.TYPE.JSON&&r.data.frames&&!n.resources[t]){var e=null===(s=null===(e=r.data)||void 0===e?void 0:e.meta)||void 0===s?void 0:s.related_multi_packs;if(Array.isArray(e))for(var a=0,o=e;a<o.length;a++)!function(t){if("string"!=typeof t)return;var e=t.replace(".json",""),i=u.url.resolve(r.url.replace(n.baseUrl,""),t);if(n.resources[e]||Object.values(n.resources).some(function(t){return u.url.format(u.url.parse(t.url))===i}))return;t={crossOrigin:r.crossOrigin,loadType:c.LoaderResource.LOAD_TYPE.XHR,xhrType:c.LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:r,metadata:r.metadata};n.add(e,i,t)}(o[a]);var s={crossOrigin:r.crossOrigin,metadata:r.metadata.imageMetadata,parentResource:r},e=f.getResourcePath(r,n.baseUrl);n.add(t,e,s,function(t){var e;t.error?i(t.error):(e=new p(t.texture,r.data,r.url)).parse().then(function(){r.spritesheet=e,r.textures=e.textures,i()})})}else i()},f.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:u.url.resolve(t.url.replace(e,""),t.data.meta.image)},f.extension=l.ExtensionType.Loader,t=f;function f(){}i.Spritesheet=p,i.SpritesheetLoader=t},{"@pixi/core":5,"@pixi/loaders":17,"@pixi/math":18,"@pixi/utils":36}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var $=t("@pixi/math"),O=t("@pixi/settings"),tt=t("@pixi/mesh"),et=t("@pixi/utils"),it=t("@pixi/core"),P=t("@pixi/text"),rt=t("@pixi/constants"),r=t("@pixi/display"),f=t("@pixi/loaders"),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};var C=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},a=(o.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},o.parse=function(t){var e,i=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(e in i){var n,a=i[e].match(/^[a-z]+/gm)[0],o=i[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(n in o){var u=o[n].split("="),h=u[0],l=u[1].replace(/"/gm,""),u=parseFloat(l),u=isNaN(u)?l:u;s[h]=u}r[a].push(s)}var c=new C;return r.info.forEach(function(t){return c.info.push({face:t.face,size:parseInt(t.size,10)})}),r.common.forEach(function(t){return c.common.push({lineHeight:parseInt(t.lineHeight,10)})}),r.page.forEach(function(t){return c.page.push({id:parseInt(t.id,10),file:t.file})}),r.char.forEach(function(t){return c.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})}),r.kerning.forEach(function(t){return c.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})}),r.distanceField.forEach(function(t){return c.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})}),c},o);function o(){}var s=(u.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},u.parse=function(t){for(var e=new C,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),s=t.getElementsByTagName("distanceField"),u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(u=0;u<r.length;u++)e.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(u=0;u<n.length;u++)e.page.push({id:parseInt(n[u].getAttribute("id"),10)||0,file:n[u].getAttribute("file")});for(u=0;u<a.length;u++){var h=a[u];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(u=0;u<o.length;u++)e.kerning.push({first:parseInt(o[u].getAttribute("first"),10),second:parseInt(o[u].getAttribute("second"),10),amount:parseInt(o[u].getAttribute("amount"),10)});for(u=0;u<s.length;u++)e.distanceField.push({fieldType:s[u].getAttribute("fieldType"),distanceRange:parseInt(s[u].getAttribute("distanceRange"),10)});return e},u);function u(){}var h=(l.test=function(t){if("string"==typeof t&&-1<t.indexOf("<font>")){t=(new globalThis.DOMParser).parseFromString(t,"text/xml");return s.test(t)}return!1},l.parse=function(t){t=(new globalThis.DOMParser).parseFromString(t,"text/xml");return s.parse(t)},l);function l(){}var c=[a,s,h];function m(t){for(var e=0;e<c.length;e++)if(c[e].test(t))return c[e];return null}function I(t,e,i,r,n,a,o){var s=i.text,u=i.fontProperties;e.translate(r,n),e.scale(a,a);var h=o.strokeThickness/2,r=-o.strokeThickness/2;e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=function(t,e,i,r,n,a){var o=i.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var s=i.dropShadow?i.dropShadowDistance:0,u=i.padding||0,h=t.width/r-s-2*u,l=t.height/r-s-2*u,c=o.slice(),p=i.fillGradientStops.slice();if(!p.length)for(var d=c.length+1,f=1;f<d;++f)p.push(f/d);if(c.unshift(o[0]),p.unshift(0),c.push(o[o.length-1]),p.push(1),i.fillGradientType===P.TEXT_GRADIENT.LINEAR_VERTICAL)for(var m=e.createLinearGradient(h/2,u,h/2,l+u),v=0,g=(a.fontProperties.fontSize+i.strokeThickness)/l,f=0;f<n.length;f++)for(var _=a.lineHeight*f,y=0;y<c.length;y++){var x=0,x="number"==typeof p[y]?p[y]:y/c.length,x=Math.max(v,_/l+x*g),x=Math.min(x,1);m.addColorStop(x,c[y]),v=x}else{m=e.createLinearGradient(u,l/2,h+u,l/2);for(var b=c.length+1,T=1,f=0;f<c.length;f++){var E=void 0,E="number"==typeof p[f]?p[f]:T/b;m.addColorStop(E,c[f]),T++}}return m}(t,e,o,a,[s],i),e.strokeStyle=o.stroke,o.dropShadow?(n=o.dropShadowColor,t=et.hex2rgb("number"==typeof n?n:et.string2hex(n)),n=o.dropShadowBlur*a,a=o.dropShadowDistance*a,e.shadowColor="rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+o.dropShadowAlpha+")",e.shadowBlur=n,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*a,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*a):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),o.stroke&&o.strokeThickness&&e.strokeText(s,h,r+i.lineHeight-u.descent),o.fill&&e.fillText(s,h,r+i.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function nt(t){return Array.from?Array.from(t):t.split("")}function at(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var ot=(L.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},L.install=function(t,e,i){var r;if(t instanceof C)r=t;else{var n=m(t);if(!n)throw new Error("Unrecognized data format for font.");r=n.parse(t)}i=new L(r,e=e instanceof it.Texture?[e]:e,i);return L.available[i.font]=i},L.uninstall=function(t){var e=L.available[t];if(!e)throw new Error("No font found named '"+t+"'");e.destroy(),delete L.available[t]},L.from=function(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var r=Object.assign({},L.defaultOptions,i),i=r.chars,n=r.padding,a=r.resolution,o=r.textureWidth,s=r.textureHeight,u=function(t){for(var e=[],i=0,r=(t="string"==typeof t?[t]:t).length;i<r;i++){var n=t[i];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var a=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,u=o;s<=u;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,nt(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i),h=e instanceof P.TextStyle?e:new P.TextStyle(e),l=o,c=new C;c.info[0]={face:h.fontFamily,size:h.fontSize},c.common[0]={lineHeight:h.fontSize};for(var p,d,f,m=0,v=0,g=0,_=[],y=0;y<u.length;y++){p||((p=O.settings.ADAPTER.createCanvas()).width=o,p.height=s,d=p.getContext("2d"),f=new it.BaseTexture(p,{resolution:a}),_.push(new it.Texture(f)),c.page.push({id:_.length-1,file:""}));var x=P.TextMetrics.measureText(u[y],h,!1,p),b=x.width,T=Math.ceil(x.height),E=Math.ceil(("italic"===h.fontStyle?2:1)*b);if(s-T*a<=v){if(0===v)throw new Error("[BitmapFont] textureHeight "+s+"px is too small for "+h.fontSize+"px fonts");--y,f=d=p=null,g=m=v=0}else{g=Math.max(T+x.fontProperties.descent,g);l<=E*a+m?(--y,v+=g*a,v=Math.ceil(v),g=m=0):(I(p,d,x,m,v,a,h),x=at(x.text),c.char.push({id:x,page:_.length-1,x:m/a,y:v/a,width:E,height:T,xoffset:0,yoffset:0,xadvance:Math.ceil(b-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0))}),m+=(E+2*n)*a,m=Math.ceil(m))}}for(var y=0,S=u.length;y<S;y++)for(var M=u[y],A=0;A<S;A++){var w=u[A],D=d.measureText(M).width,R=d.measureText(w).width,R=d.measureText(M+w).width-(D+R);R&&c.kerning.push({first:at(M),second:at(w),amount:R})}e=new L(c,_,!0);return void 0!==L.available[t]&&L.uninstall(t),L.available[t]=e},L.ALPHA=[["a","z"],["A","Z"]," "],L.NUMERIC=[["0","9"]],L.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],L.ASCII=[[" ","~"]],L.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:L.ALPHANUMERIC},L.available={},L);function L(t,e,i){var r=t.info[0],n=t.common[0],a=t.page[0],o=t.distanceField[0],s=et.getResolutionOfUrl(a.file),u={};this._ownsTextures=i,this.font=r.face,this.size=r.size,this.lineHeight=n.lineHeight/s,this.chars={},this.pageTextures=u;for(var h=0;h<t.page.length;h++){var l=t.page[h],c=l.id,l=l.file;u[c]=e instanceof Array?e[h]:e[l],null!=o&&o.fieldType&&"none"!==o.fieldType&&(u[c].baseTexture.alphaMode=rt.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA)}for(h=0;h<t.char.length;h++){var p=t.char[h],c=p.id,d=p.page,f=t.char[h],m=f.x,v=f.y,g=f.width,_=f.height,y=f.xoffset,p=f.yoffset,f=f.xadvance;m/=s,v/=s,g/=s,_/=s,y/=s,p/=s,f/=s;_=new $.Rectangle(m+u[d].frame.x/s,v+u[d].frame.y/s,g,_);this.chars[c]={xOffset:y,yOffset:p,xAdvance:f,kerning:{},texture:new it.Texture(u[d].baseTexture,_),page:d}}for(h=0;h<t.kerning.length;h++){var x=t.kerning[h],b=x.first,T=x.second,x=x.amount;b/=s,T/=s,x/=s,this.chars[T]&&(this.chars[T].kerning[b]=x)}this.distanceFieldRange=null==o?void 0:o.distanceRange,this.distanceFieldType=null!==(n=null===(n=null==o?void 0:o.fieldType)||void 0===n?void 0:n.toLowerCase())&&void 0!==n?n:"none"}var p,d,v,st=[],ut=[],ht=[],t=(p=r.Container,n(d=_,v=p),d.prototype=null===v?Object.create(v):(g.prototype=v.prototype,new g),_.prototype.updateText=function(){for(var t=ot.available[this._fontName],e=this._fontSize/t.size,i=new $.Point,r=[],n=[],a=[],o=nt(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),s=this._maxWidth*t.size/this._fontSize,u="none"===t.distanceFieldType?st:ut,h=null,l=0,c=0,p=0,d=-1,f=0,m=0,v=0,g=0,_=0;_<o.length;_++){var y,x,b=at(B=o[_]);/(?:\s)/.test(B)&&(d=_,f=l,g++),"\r"!==B&&"\n"!==B?(y=t.chars[b])&&(h&&y.kerning[h]&&(i.x+=y.kerning[h]),(x=ht.pop()||{texture:it.Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new $.Point}).texture=y.texture,x.line=p,x.charCode=b,x.position.x=i.x+y.xOffset+this._letterSpacing/2,x.position.y=i.y+y.yOffset,x.prevSpaces=g,r.push(x),l=x.position.x+Math.max(y.xAdvance-y.xOffset,y.texture.orig.width),i.x+=y.xAdvance+this._letterSpacing,v=Math.max(v,y.yOffset+y.texture.height),h=b,-1!==d&&0<s&&i.x>s&&(++m,et.removeItems(r,1+d-m,1+_-d),_=d,d=-1,n.push(f),a.push(0<r.length?r[r.length-1].prevSpaces:0),c=Math.max(c,f),p++,i.x=0,i.y+=t.lineHeight,h=null,g=0)):(n.push(l),a.push(-1),c=Math.max(c,l),++p,++m,i.x=0,i.y+=t.lineHeight,h=null,g=0)}var T=o[o.length-1];"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(l=f),n.push(l),c=Math.max(c,l),a.push(-1));for(var E=[],_=0;_<=p;_++){var S=0;"right"===this._align?S=c-n[_]:"center"===this._align?S=(c-n[_])/2:"justify"===this._align&&(S=a[_]<0?0:(c-n[_])/a[_]),E.push(S)}for(var M=r.length,A={},w=[],D=this._activePagesMeshData,_=0;_<D.length;_++)u.push(D[_]);for(_=0;_<M;_++){var R,O,P,C=(U=r[_].texture).baseTexture.uid;A[C]||((X=u.pop())||(R=new tt.MeshGeometry,O=P=void 0,O="none"===t.distanceFieldType?(P=new tt.MeshMaterial(it.Texture.EMPTY),rt.BLEND_MODES.NORMAL):(P=new tt.MeshMaterial(it.Texture.EMPTY,{program:it.Program.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),rt.BLEND_MODES.NORMAL_NPM),(P=new tt.Mesh(R,P)).blendMode=O,X={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:P,vertices:null,uvs:null,indices:null}),X.index=0,X.indexCount=0,X.vertexCount=0,X.uvsCount=0,X.total=0,(P=this._textureCache)[C]=P[C]||new it.Texture(U.baseTexture),X.mesh.texture=P[C],X.mesh.tint=this._tint,w.push(X),A[C]=X),A[C].total++}for(_=0;_<D.length;_++)-1===w.indexOf(D[_])&&this.removeChild(D[_].mesh);for(_=0;_<w.length;_++)w[_].mesh.parent!==this&&this.addChild(w[_].mesh);for(_ in this._activePagesMeshData=w,A){var I=(X=A[_]).total;if(!((null===(L=X.indices)||void 0===L?void 0:L.length)>6*I)||X.vertices.length<2*tt.Mesh.BATCHABLE_SIZE)X.vertices=new Float32Array(8*I),X.uvs=new Float32Array(8*I),X.indices=new Uint16Array(6*I);else for(var L=X.total,N=X.vertices,F=4*L*2;F<N.length;F++)N[F]=0;X.mesh.size=6*I}for(_=0;_<M;_++){var B,U,G=(B=r[_]).position.x+E[B.line]*("justify"===this._align?B.prevSpaces:1),k=(G=this._roundPixels?Math.round(G):G)*e,z=B.position.y*e,j=A[(U=B.texture).baseTexture.uid],H=U.frame,V=U._uvs,G=j.index++;j.indices[6*G+0]=0+4*G,j.indices[6*G+1]=1+4*G,j.indices[6*G+2]=2+4*G,j.indices[6*G+3]=0+4*G,j.indices[6*G+4]=2+4*G,j.indices[6*G+5]=3+4*G,j.vertices[8*G+0]=k,j.vertices[8*G+1]=z,j.vertices[8*G+2]=k+H.width*e,j.vertices[8*G+3]=z,j.vertices[8*G+4]=k+H.width*e,j.vertices[8*G+5]=z+H.height*e,j.vertices[8*G+6]=k,j.vertices[8*G+7]=z+H.height*e,j.uvs[8*G+0]=V.x0,j.uvs[8*G+1]=V.y0,j.uvs[8*G+2]=V.x1,j.uvs[8*G+3]=V.y1,j.uvs[8*G+4]=V.x2,j.uvs[8*G+5]=V.y2,j.uvs[8*G+6]=V.x3,j.uvs[8*G+7]=V.y3}for(_ in this._textWidth=c*e,this._textHeight=(i.y+t.lineHeight)*e,A){var X=A[_];if(0!==this.anchor.x||0!==this.anchor.y)for(var W=0,Y=this._textWidth*this.anchor.x,q=this._textHeight*this.anchor.y,Z=0;Z<X.total;Z++)X.vertices[W++]-=Y,X.vertices[W++]-=q,X.vertices[W++]-=Y,X.vertices[W++]-=q,X.vertices[W++]-=Y,X.vertices[W++]-=q,X.vertices[W++]-=Y,X.vertices[W++]-=q;this._maxLineHeight=v*e;var J=X.mesh.geometry.getBuffer("aVertexPosition"),K=X.mesh.geometry.getBuffer("aTextureCoord"),Q=X.mesh.geometry.getIndex();J.data=X.vertices,K.data=X.uvs,Q.data=X.indices,J.update(),K.update(),Q.update()}for(_=0;_<r.length;_++)ht.push(r[_])},_.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},_.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);var e=ot.available[this._fontName],i=e.distanceFieldRange,r=e.distanceFieldType,n=e.size;if("none"!==r)for(var a=this.worldTransform,o=a.a,e=a.b,r=a.c,a=a.d,e=Math.sqrt(o*o+e*e),a=Math.sqrt(r*r+a*a),s=(Math.abs(e)+Math.abs(a))/2,u=this._fontSize/n,h=0,l=this._activePagesMeshData;h<l.length;h++)l[h].mesh.shader.uniforms.uFWidth=s*i*u*this._resolution;p.prototype._render.call(this,t)},_.prototype.getLocalBounds=function(){return this.validate(),p.prototype.getLocalBounds.call(this)},_.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(_.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!ot.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),_.prototype.destroy=function(t){var e,i=this._textureCache;for(e in i)i[e].destroy(),delete i[e];this._textureCache=null,p.prototype.destroy.call(this,t)},_.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},_);function g(){this.constructor=d}function _(t,e){void 0===e&&(e={});var i=p.call(this)||this;i._tint=16777215;var r=Object.assign({},_.styleDefaults,e),n=r.align,a=r.tint,o=r.maxWidth,s=r.letterSpacing,e=r.fontName,r=r.fontSize;if(!ot.available[e])throw new Error('Missing BitmapFont "'+e+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=n,i._tint=a,i._fontName=e,i._fontSize=r||ot.available[e].size,i.text=t,i._maxWidth=o,i._maxLineHeight=0,i._letterSpacing=s,i._anchor=new $.ObservablePoint(function(){i.dirty=!0},i,0,0),i._roundPixels=O.settings.ROUND_PIXELS,i.dirty=!0,i._resolution=O.settings.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}y.add=function(){f.LoaderResource.setExtensionXhrType("fnt",f.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},y.use=function(e,i){var t=m(e.data);if(t)for(var r=y.getBaseUrl(this,e),n=t.parse(e.data),a={},o=function(t){a[t.metadata.pageFile]=t.texture,Object.keys(a).length===n.page.length&&(e.bitmapFont=ot.install(n,a,!0),i())},s=0;s<n.page.length;++s){var u,h,l=n.page[s].file,c=r+l,p=!1;for(u in this.resources){var d=this.resources[u];if(d.url===c){d.metadata.pageFile=l,d.texture?o(d):d.onAfterMiddleware.add(o),p=!0;break}}p||(h={crossOrigin:e.crossOrigin,loadType:f.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e},this.add(c,h,o))}else i()},y.getBaseUrl=function(t,e){var i=e.isDataUrl?"":y.dirname(e.url);return e.isDataUrl&&("."===i&&(i=""),t.baseUrl&&i&&"/"===t.baseUrl.charAt(t.baseUrl.length-1)&&(i+="/")),(i=i.replace(t.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/"),i},y.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},y.extension=it.ExtensionType.Loader,r=y;function y(){}i.BitmapFont=ot,i.BitmapFontData=C,i.BitmapFontLoader=r,i.BitmapText=t,i.TextFormat=a,i.XMLFormat=s,i.XMLStringFormat=h,i.autoDetectFormat=m},{"@pixi/constants":4,"@pixi/core":5,"@pixi/display":6,"@pixi/loaders":17,"@pixi/math":18,"@pixi/mesh":20,"@pixi/settings":28,"@pixi/text":34,"@pixi/utils":36}],34:[function(t,e,A){"use strict";Object.defineProperty(A,"__esModule",{value:!0});var i=t("@pixi/sprite"),o=t("@pixi/core"),s=t("@pixi/settings"),u=t("@pixi/math"),b=t("@pixi/utils"),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};A.TEXT_GRADIENT=void 0,(t=A.TEXT_GRADIENT||(A.TEXT_GRADIENT={}))[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL";var n={align:"left",breakWords:!(t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"),dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:A.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},a=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],h=(l.prototype.clone=function(){var t={};return d(t,this,n),new l(t)},l.prototype.reset=function(){d(this,n,n)},Object.defineProperty(l.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){t=p(t);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fill",{get:function(){return this._fill},set:function(t){t=p(t);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){!function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}(this._fillGradientStops,t)&&(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"stroke",{get:function(){return this._stroke},set:function(t){t=p(t);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),l.prototype.toFontString=function(){for(var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily,i=(e=!Array.isArray(this.fontFamily)?this.fontFamily.split(","):e).length-1;0<=i;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&a.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},l);function l(t){this.styleID=0,this.reset(),d(this,t,t)}function c(t){return"number"==typeof t?b.hex2string(t):"string"==typeof t&&0===t.indexOf("0x")?t.replace("0x","#"):t}function p(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=c(t[e]);return t}return c(t)}function d(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var T=(M.measureText=function(t,e,i,r){void 0===r&&(r=M._canvas),i=null==i?e.wordWrap:i;var n=e.toFontString(),a=M.measureFont(n);0===a.fontSize&&(a.fontSize=e.fontSize,a.ascent=e.fontSize);var o=r.getContext("2d");o.font=n;for(var s=(i?M.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),u=new Array(s.length),h=0,l=0;l<s.length;l++){var c=o.measureText(s[l]).width+(s[l].length-1)*e.letterSpacing;u[l]=c,h=Math.max(h,c)}n=h+e.strokeThickness;e.dropShadow&&(n+=e.dropShadowDistance);i=e.lineHeight||a.fontSize+e.strokeThickness,r=Math.max(i,a.fontSize+e.strokeThickness)+(s.length-1)*(i+e.leading);return e.dropShadow&&(r+=e.dropShadowDistance),new M(t,e,n,r,s,u,i+e.leading,h,a)},M.wordWrap=function(t,e,i){for(var r=(i=void 0===i?M._canvas:i).getContext("2d"),n=0,a="",o="",s=Object.create(null),u=e.letterSpacing,i=e.whiteSpace,h=M.collapseSpaces(i),l=M.collapseNewlines(i),c=!h,p=e.wordWrapWidth+u,d=M.tokenize(t),f=0;f<d.length;f++){var m=d[f];if(M.isNewline(m)){if(!l){o+=M.addLine(a),c=!h,a="",n=0;continue}m=" "}if(h){var v=M.isBreakingSpace(m),g=M.isBreakingSpace(a[a.length-1]);if(v&&g)continue}v=M.getFromCache(m,u,s,r);if(p<v)if(""!==a&&(o+=M.addLine(a),a="",n=0),M.canBreakWords(m,e.breakWords))for(var _=M.wordWrapSplit(m),y=0;y<_.length;y++){for(var x=_[y],b=1;_[y+b];){var T=_[y+b],E=x[x.length-1];if(M.canBreakChars(E,T,m,y,e.breakWords))break;x+=T,b++}y+=x.length-1;var S=M.getFromCache(x,u,s,r);p<S+n&&(o+=M.addLine(a),c=!1,a="",n=0),a+=x,n+=S}else{0<a.length&&(o+=M.addLine(a),a="",n=0);g=f===d.length-1;o+=M.addLine(m,!g),c=!1,a="",n=0}else p<v+n&&(c=!1,o+=M.addLine(a),a="",n=0),(0<a.length||!M.isBreakingSpace(m)||c)&&(a+=m,n+=v)}return o+=M.addLine(a,!1)},M.addLine=function(t,e){return void 0===e&&(e=!0),t=M.trimRight(t),t=e?t+"\n":t},M.getFromCache=function(t,e,i,r){var n=i[t];return"number"!=typeof n&&(e=t.length*e,n=r.measureText(t).width+e,i[t]=n),n},M.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},M.collapseNewlines=function(t){return"normal"===t},M.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;0<=e;e--){var i=t[e];if(!M.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},M.isNewline=function(t){return"string"==typeof t&&0<=M._newlines.indexOf(t.charCodeAt(0))},M.isBreakingSpace=function(t,e){return"string"==typeof t&&0<=M._breakingSpaces.indexOf(t.charCodeAt(0))},M.tokenize=function(t){var e=[],i="";if("string"!=typeof t)return e;for(var r=0;r<t.length;r++){var n=t[r],a=t[r+1];M.isBreakingSpace(n,a)||M.isNewline(n)?(""!==i&&(e.push(i),i=""),e.push(n)):i+=n}return""!==i&&e.push(i),e},M.canBreakWords=function(t,e){return e},M.canBreakChars=function(t,e,i,r,n){return!0},M.wordWrapSplit=function(t){return t.split("")},M.measureFont=function(t){if(M._fonts[t])return M._fonts[t];var e={ascent:0,descent:0,fontSize:0},i=M._canvas,r=M._context;r.font=t;var n=M.METRICS_STRING+M.BASELINE_SYMBOL,a=Math.ceil(r.measureText(n).width),o=Math.ceil(r.measureText(M.BASELINE_SYMBOL).width),s=Math.ceil(M.HEIGHT_MULTIPLIER*o),o=o*M.BASELINE_MULTIPLIER|0;i.width=a,i.height=s,r.fillStyle="#f00",r.fillRect(0,0,a,s),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(n,0,o);for(var u=r.getImageData(0,0,a,s).data,r=u.length,h=4*a,l=0,c=0,p=!1,l=0;l<o;++l){for(var d=0;d<h;d+=4)if(255!==u[c+d]){p=!0;break}if(p)break;c+=h}for(e.ascent=o-l,c=r-h,p=!1,l=s;o<l;--l){for(d=0;d<h;d+=4)if(255!==u[c+d]){p=!0;break}if(p)break;c-=h}return e.descent=l-o,e.fontSize=e.ascent+e.descent,M._fonts[t]=e},M.clearMetrics=function(t){(t=void 0===t?"":t)?delete M._fonts[t]:M._fonts={}},Object.defineProperty(M,"_canvas",{get:function(){if(!M.__canvas){var e=void 0;try{var t=new OffscreenCanvas(0,0),i=t.getContext("2d");if(i&&i.measureText)return M.__canvas=t;e=s.settings.ADAPTER.createCanvas()}catch(t){e=s.settings.ADAPTER.createCanvas()}e.width=e.height=10,M.__canvas=e}return M.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(M,"_context",{get:function(){return M.__context=!M.__context?M._canvas.getContext("2d"):M.__context},enumerable:!1,configurable:!0}),M);function M(t,e,i,r,n,a,o,s,u){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=s,this.fontProperties=u}T._fonts={},T.METRICS_STRING="|q",T.BASELINE_SYMBOL="M",T.BASELINE_MULTIPLIER=1.4,T.HEIGHT_MULTIPLIER=2,T._newlines=[10,13];var f,m,v,g={texture:!0,children:!(T._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]),baseTexture:!0},i=(f=i.Sprite,r(m=E,v=f),m.prototype=null===v?Object.create(v):(_.prototype=v.prototype,new _),E.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,r,n=this.context,a=T.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),t=a.width,o=a.height,s=a.lines,u=a.lineHeight,h=a.lineWidths,l=a.maxLineWidth,c=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,t)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,d=0;d<p;++d){var f,m,v=e.dropShadow&&0===d,g=v?Math.ceil(Math.max(1,o)+2*e.padding):0,_=g*this._resolution;v?(n.fillStyle="black",n.strokeStyle="black",m=e.dropShadowColor,f=b.hex2rgb("number"==typeof m?m:b.string2hex(m)),v=e.dropShadowBlur*this._resolution,m=e.dropShadowDistance*this._resolution,n.shadowColor="rgba("+255*f[0]+","+255*f[1]+","+255*f[2]+","+e.dropShadowAlpha+")",n.shadowBlur=v,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*m,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*m+_):(n.fillStyle=this._generateFillStyle(e,s,a),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0);var y=(u-c.fontSize)/2;(!E.nextLineHeightBehavior||u-c.fontSize<0)&&(y=0);for(var x=0;x<s.length;x++)i=e.strokeThickness/2,r=e.strokeThickness/2+x*u+c.ascent+y,"right"===e.align?i+=l-h[x]:"center"===e.align&&(i+=(l-h[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[x],i+e.padding,r+e.padding-g,!0),e.fill&&this.drawLetterSpacing(s[x],i+e.padding,r+e.padding-g)}this.updateTexture()}},E.prototype.drawLetterSpacing=function(t,e,i,r){void 0===r&&(r=!1);var n=this._style.letterSpacing,a=E.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===n||a)return a&&(this.context.letterSpacing=n,this.context.textLetterSpacing=n),void(r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var o,s=e,u=Array.from?Array.from(t):t.split(""),h=this.context.measureText(t).width,l=0;l<u.length;++l){var c=u[l];r?this.context.strokeText(c,s,i):this.context.fillText(c,s,i);for(var p="",d=l+1;d<u.length;++d)p+=u[d];s+=h-(o=this.context.measureText(p).width)+n,h=o}},E.prototype.updateTexture=function(){var t=this.canvas;!this._style.trim||(r=b.trimCanvas(t)).data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0));var e=this._texture,i=this._style,r=i.trim?0:i.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-2*r,e.orig.height=e._frame.height-2*r,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1},E.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),f.prototype._render.call(this,t)},E.prototype.updateTransform=function(){this.updateText(!0),f.prototype.updateTransform.call(this)},E.prototype.getBounds=function(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),f.prototype.getBounds.call(this,t,e)},E.prototype.getLocalBounds=function(t){return this.updateText(!0),f.prototype.getLocalBounds.call(this,t)},E.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},E.prototype._generateFillStyle=function(t,e,i){var r=t.fill;if(!Array.isArray(r))return r;if(1===r.length)return r[0];var n=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,o=this.canvas.width/this._resolution-n-2*a,s=this.canvas.height/this._resolution-n-2*a,u=r.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var l=u.length+1,c=1;c<l;++c)h.push(c/l);if(u.unshift(r[0]),h.unshift(0),u.push(r[r.length-1]),h.push(1),t.fillGradientType===A.TEXT_GRADIENT.LINEAR_VERTICAL)for(var p=this.context.createLinearGradient(o/2,a,o/2,s+a),d=i.fontProperties.fontSize+t.strokeThickness,c=0;c<e.length;c++)for(var f=i.lineHeight*(c-1)+d,m=i.lineHeight*c,v=m,g=m+d,_=i.lineHeight*(c+1),y=g,x=((y=c+1<e.length&&_<g?(g+_)/2:y)-(v=0<c&&m<f?(m+f)/2:v))/s,b=0;b<u.length;b++){var T=0,T="number"==typeof h[b]?h[b]:b/u.length,T=Math.min(1,Math.max(0,v/s+T*x)),T=Number(T.toFixed(5));p.addColorStop(T,u[b])}else{p=this.context.createLinearGradient(a,s/2,o+a,s/2);for(var E=u.length+1,S=1,c=0;c<u.length;c++){var M=void 0,M="number"==typeof h[c]?h[c]:S/E;p.addColorStop(M,u[c]),S++}}return p},E.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},g,t),f.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(E.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=b.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=b.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof h?t:new h(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),E.nextLineHeightBehavior=!1,E.experimentalLetterSpacing=!1,E);function _(){this.constructor=m}function E(t,e,i){var r=this,n=!1;i||(i=s.settings.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;var a=o.Texture.from(i);return a.orig=new u.Rectangle,a.trim=new u.Rectangle,(r=f.call(this,a)||this)._ownCanvas=n,r.canvas=i,r.context=i.getContext("2d"),r._resolution=s.settings.RESOLUTION,r._autoResolution=!0,r._text=null,r._style=null,r._styleListener=null,r._font="",r.text=t,r.style=e,r.localStyleID=-1,r}A.Text=i,A.TextMetrics=T,A.TextStyle=h},{"@pixi/core":5,"@pixi/math":18,"@pixi/settings":28,"@pixi/sprite":31,"@pixi/utils":36}],35:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("@pixi/settings"),i=t("@pixi/extensions");n.settings.TARGET_FPMS=.06,r.UPDATE_PRIORITY=void 0,(t=r.UPDATE_PRIORITY||(r.UPDATE_PRIORITY={}))[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY";var a=(o.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},o.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},o.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},o.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},o);function o(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}var s=(u.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},u.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},u.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},u.prototype.add=function(t,e,i){return void 0===i&&(i=r.UPDATE_PRIORITY.NORMAL),this._addListener(new a(t,e,i))},u.prototype.addOnce=function(t,e,i){return void 0===i&&(i=r.UPDATE_PRIORITY.NORMAL),this._addListener(new a(t,e,i,!0))},u.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}e=(i=e).next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},u.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(u.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),u.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},u.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},u.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},u.prototype.update=function(t){if((t=void 0===t?performance.now():t)>this.lastTime){if((i=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*n.settings.TARGET_FPMS;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(u.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,n.settings.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!1,configurable:!0}),Object.defineProperty(u,"shared",{get:function(){var t;return u._shared||((t=u._shared=new u).autoStart=!0,t._protected=!0),u._shared},enumerable:!1,configurable:!0}),Object.defineProperty(u,"system",{get:function(){var t;return u._system||((t=u._system=new u).autoStart=!0,t._protected=!0),u._system},enumerable:!1,configurable:!0}),u);function u(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new a(null,null,1/0),this.deltaMS=1/n.settings.TARGET_FPMS,this.elapsedMS=1/n.settings.TARGET_FPMS,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}h.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,r.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?s.shared:new s,t.autoStart&&this.start()},h.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())},h.extension=i.ExtensionType.Application,i=h;function h(){}r.Ticker=s,r.TickerPlugin=i},{"@pixi/extensions":7,"@pixi/settings":28}],36:[function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(i,"__esModule",{value:!0});var a=t("@pixi/settings"),n=t("eventemitter3"),o=t("earcut"),s=t("url"),u=t("@pixi/constants");function h(t){return t&&"object"===r(t)&&"default"in t?t:{default:t}}var l=h(n),c=h(o),p={parse:s.parse,format:s.format,resolve:s.resolve};function d(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}var f={toPosix:function(t){return e="\\",i="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i);var e,i},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){d(t),t=this.toPosix(t);var e="",i=/^file:\/\/\//.exec(t),r=/^[^/:]+:\/\//.exec(t),n=/^[^/:]+:\//.exec(t);return(i||r||n)&&(n=(null==i?void 0:i[0])||(null==r?void 0:r[0])||(null==n?void 0:n[0]),t=t.slice((e=n).length)),e},toAbsolute:function(t,e,i){if(this.isDataUrl(t))return t;e=this.toPosix(null!=e?e:a.settings.ADAPTER.getBaseUrl()),i=this.toPosix(null!=i?i:this.rootname(e));return d(t),(t=this.toPosix(t)).startsWith("/")?f.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(e,t)},normalize:function(t){if(d(t=this.toPosix(t)),0===t.length)return".";var e="",i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var r=t.endsWith("/");return 0<(t=function(t,e){for(var i,r="",n=0,a=-1,o=0,s=0;s<=t.length;++s){if(s<t.length)i=t.charCodeAt(s);else{if(47===i)break;i=47}if(47===i){if(a!==s-1&&1!==o)if(a!==s-1&&2===o){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(2<r.length){var u=r.lastIndexOf("/");if(u!==r.length-1){n=-1===u?(r="",0):(r=r.slice(0,u)).length-1-r.lastIndexOf("/"),a=s,o=0;continue}}else if(2===r.length||1===r.length){r="",a=s,o=n=0;continue}e&&(0<r.length?r+="/..":r="..",n=2)}else 0<r.length?r+="/"+t.slice(a+1,s):r=t.slice(a+1,s),n=s-a-1;a=s,o=0}else 46===i&&-1!==o?++o:o=-1}return r}(t,!1)).length&&r&&(t+="/"),i?"/"+t:e+t},isAbsolute:function(t){return d(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join:function(){for(var t,e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];if(0===i.length)return".";for(var n=0;n<i.length;++n){var a=i[n];d(a),0<a.length&&(void 0===t?t=a:t+="/"+a)}return void 0===t?".":this.normalize(t)},dirname:function(t){if(d(t),0===t.length)return".";for(var e=47===(t=this.toPosix(t)).charCodeAt(0),i=-1,r=!0,n=this.getProtocol(t),a=t,o=(t=t.slice(n.length)).length-1;1<=o;--o)if(47===t.charCodeAt(o)){if(!r){i=o;break}}else r=!1;return-1===i?e?"/":this.isUrl(a)?n+t:n:e&&1===i?"//":n+t.slice(0,i)},rootname:function(t){d(t);var e,i="";return i=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)&&((i=-1!==(e=t.indexOf("/",i.length))?t.slice(0,e):t).endsWith("/")||(i+="/")),i},basename:function(t,e){d(t),e&&d(e),t=this.toPosix(t);var i=0,r=-1,n=!0;if(void 0!==e&&0<e.length&&e.length<=t.length){if(e.length===t.length&&e===t)return"";for(var a=e.length-1,o=-1,s=t.length-1;0<=s;--s){var u=t.charCodeAt(s);if(47===u){if(!n){i=s+1;break}}else-1===o&&(n=!1,o=s+1),0<=a&&(u===e.charCodeAt(a)?-1==--a&&(r=s):(a=-1,r=o))}return i===r?r=o:-1===r&&(r=t.length),t.slice(i,r)}for(s=t.length-1;0<=s;--s)if(47===t.charCodeAt(s)){if(!n){i=s+1;break}}else-1===r&&(n=!1,r=s+1);return-1===r?"":t.slice(i,r)},extname:function(t){d(t);for(var e=-1,i=0,r=-1,n=!0,a=0,o=(t=this.toPosix(t)).length-1;0<=o;--o){var s=t.charCodeAt(o);if(47===s){if(n)continue;i=o+1;break}-1===r&&(n=!1,r=o+1),46===s?-1===e?e=o:1!==a&&(a=1):-1!==e&&(a=-1)}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===i+1?"":t.slice(e,r)},parse:function(t){d(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;(t=this.toPosix(t)).charCodeAt(0);var i,r=this.isAbsolute(t);e.root=this.rootname(t);for(var n=r||this.hasProtocol(t)?1:0,a=-1,o=0,s=-1,u=!0,h=t.length-1,l=0;n<=h;--h){if(47===(i=t.charCodeAt(h))){if(u)continue;o=h+1;break}-1===s&&(u=!1,s=h+1),46===i?-1===a?a=h:1!==l&&(l=1):-1!==a&&(l=-1)}return-1===a||-1===s||0===l||1===l&&a===s-1&&a===o+1?-1!==s&&(e.base=e.name=0===o&&r?t.slice(1,s):t.slice(o,s)):(0===o&&r?(e.name=t.slice(1,a),e.base=t.slice(1,s)):(e.name=t.slice(o,a),e.base=t.slice(o,s)),e.ext=t.slice(a,s)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};a.settings.RETINA_PREFIX=/@([0-9\.]+)x/;var m,v=a.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var g={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var _=function(){for(var t=[],e=[],i=0;i<32;i++)e[t[i]=i]=i;t[u.BLEND_MODES.NORMAL_NPM]=u.BLEND_MODES.NORMAL,t[u.BLEND_MODES.ADD_NPM]=u.BLEND_MODES.ADD,t[u.BLEND_MODES.SCREEN_NPM]=u.BLEND_MODES.SCREEN,e[u.BLEND_MODES.NORMAL]=u.BLEND_MODES.NORMAL_NPM,e[u.BLEND_MODES.ADD]=u.BLEND_MODES.ADD_NPM,e[u.BLEND_MODES.SCREEN]=u.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function y(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var x={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var b=0;var T={};var E=Object.create(null),S=Object.create(null);M.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},M.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},M.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(M.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),s=M;function M(t,e,i){this.canvas=a.settings.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||a.settings.RESOLUTION,this.resize(t,e)}var A,w=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;Object.defineProperty(i,"isMobile",{enumerable:!0,get:function(){return a.isMobile}}),Object.defineProperty(i,"EventEmitter",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(i,"earcut",{enumerable:!0,get:function(){return c.default}}),i.BaseTextureCache=S,i.CanvasRenderTarget=s,i.DATA_URI=w,i.ProgramCache={},i.TextureCache=E,i.clearTextureCache=function(){for(var t in E)delete E[t];for(t in S)delete S[t]},i.correctBlendMode=function(t,e){return _[e?1:0][t]},i.createIndicesForQuads=function(t,e){var i=6*t;if((e=(e=void 0===e?null:e)||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e},i.decomposeDataUri=function(t){if(t=w.exec(t))return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},i.deprecation=function(t,e,i){var r;void 0===i&&(i=3),T[e]||(void 0===(r=(new Error).stack)||(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed),T[e]=!0)},i.destroyTextureCache=function(){for(var t in E)E[t].destroy();for(t in S)S[t].destroy()},i.determineCrossOrigin=function(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,(A=A||document.createElement("a")).href=t;var i=p.parse(A.href),t=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&t&&i.protocol===e.protocol?"":"anonymous"},i.getBufferType=y,i.getResolutionOfUrl=function(t,e){return(t=a.settings.RETINA_PREFIX.exec(t))?parseFloat(t[1]):void 0!==e?e:1},i.hex2rgb=function(t,e){return(e=void 0===e?[]:e)[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},i.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substring(0,6-t.length)+t)},i.interleaveTypedArrays=function(t,e){for(var i=0,r=0,n={},a=0;a<t.length;a++)r+=e[a],i+=t[a].length;for(var o=new ArrayBuffer(4*i),s=null,u=0,a=0;a<t.length;a++){var h=e[a],l=t[a],c=y(l);n[c]||(n[c]=new x[c](o));for(var s=n[c],p=0;p<l.length;p++)s[(p/h|0)*r+u+p%h]=l[p];u+=h}return new Float32Array(o)},i.isPow2=function(t){return!(t&t-1||!t)},i.isWebGLSupported=function(){return m=void 0===m?function(){var t={stencil:!0,failIfMajorPerformanceCaveat:a.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!a.settings.ADAPTER.getWebGLRenderingContext())return!1;var e,i=a.settings.ADAPTER.createCanvas(),r=i.getContext("webgl",t)||i.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);return!r||(e=r.getExtension("WEBGL_lose_context"))&&e.loseContext(),r=null,n}catch(t){return!1}}():m},i.log2=function(t){var e=(65535<t?1:0)<<4,i=(255<(t>>>=e)?1:0)<<3;return e|=i,e|=i=(15<(t>>>=i)?1:0)<<2,(e|=i=(3<(t>>>=i)?1:0)<<1)|(t>>>=i)>>1},i.nextPow2=function(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},i.path=f,i.premultiplyBlendMode=_,i.premultiplyRgba=function(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i},i.premultiplyTint=function(t,e){return 1===e?(255*e<<24)+t:0===e?0:(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+((255&t)*e+.5|0)},i.premultiplyTintToRgba=function(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,!r&&void 0!==r||(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i},i.removeItems=function(t,e,i){var r=t.length;if(!(r<=e||0===i)){for(var n=r-(i=r<e+i?r-e:i),a=e;a<n;++a)t[a]=t[a+i];t.length=n}},i.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},i.sayHello=function(t){var e;v||(-1<a.settings.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")?(e=globalThis.console).log.apply(e,["\n %c %c %c PixiJS 6.5.2 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):globalThis.console&&globalThis.console.log("PixiJS 6.5.2 - "+t+" - http://www.pixijs.com/"),v=!0)},i.sign=function(t){return 0===t?0:t<0?-1:1},i.skipHello=function(){v=!0},i.string2hex=function(t){return"string"==typeof t&&"#"===(t=g[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)},i.trimCanvas=function(t){for(var e,i,r=t.width,n=t.height,a=t.getContext("2d"),o=a.getImageData(0,0,r,n).data,s=o.length,u={top:null,left:null,right:null,bottom:null},t=null,h=0;h<s;h+=4)0!==o[h+3]&&(e=h/4%r,i=~~(h/4/r),null===u.top&&(u.top=i),(null===u.left||e<u.left)&&(u.left=e),(null===u.right||u.right<e)&&(u.right=1+e),(null===u.bottom||u.bottom<i)&&(u.bottom=i));return null!==u.top&&(r=u.right-u.left,n=u.bottom-u.top+1,t=a.getImageData(u.left,u.top,r,n)),{height:n,width:r,data:t}},i.uid=function(){return++b},i.url=p},{"@pixi/constants":4,"@pixi/settings":28,earcut:38,eventemitter3:37,url:49}],37:[function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,d="~";function n(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,r,n){if("function"!=typeof i)throw new TypeError("The listener must be a function");n=new a(i,r||t,n),e=d?d+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],n]:t._events[e].push(n):(t._events[e]=n,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(d=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(d?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var t=d?d+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,r=e.length,n=new Array(r);i<r;i++)n[i]=e[i].fn;return n},s.prototype.listenerCount=function(t){t=d?d+t:t,t=this._events[t];return t?t.fn?1:t.length:0},s.prototype.emit=function(t,e,i,r,n,a){var o=d?d+t:t;if(!this._events[o])return!1;var s,u=this._events[o],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,n),!0;case 6:return u.fn.call(u.context,e,i,r,n,a),!0}for(p=1,s=new Array(h-1);p<h;p++)s[p-1]=arguments[p];u.fn.apply(u.context,s)}else for(var l,c=u.length,p=0;p<c;p++)switch(u[p].once&&this.removeListener(t,u[p].fn,void 0,!0),h){case 1:u[p].fn.call(u[p].context);break;case 2:u[p].fn.call(u[p].context,e);break;case 3:u[p].fn.call(u[p].context,e,i);break;case 4:u[p].fn.call(u[p].context,e,i,r);break;default:if(!s)for(l=1,s=new Array(h-1);l<h;l++)s[l-1]=arguments[l];u[p].fn.apply(u[p].context,s)}return!0},s.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},s.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},s.prototype.removeListener=function(t,e,i,r){t=d?d+t:t;if(!this._events[t])return this;if(!e)return u(this,t),this;var n=this._events[t];if(n.fn)n.fn!==e||r&&!n.once||i&&n.context!==i||u(this,t);else{for(var a=0,o=[],s=n.length;a<s;a++)(n[a].fn!==e||r&&!n[a].once||i&&n[a].context!==i)&&o.push(n[a]);o.length?this._events[t]=1===o.length?o[0]:o:u(this,t)}return this},s.prototype.removeAllListeners=function(t){return t?(t=d?d+t:t,this._events[t]&&u(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=d,s.EventEmitter=s,void 0!==e&&(e.exports=s)},{}],38:[function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,n,a,o,s,u=e&&e.length,h=u?e[0]*i:t.length,l=m(t,0,h,i,!0),c=[];if(!l||l.next===l.prev)return c;if(u&&(l=function(t,e,i,r){var n,a,o,s,u=[];for(n=0,a=e.length;n<a;n++)o=e[n]*r,s=n<a-1?e[n+1]*r:t.length,(s=m(t,o,s,r,!1))===s.next&&(s.steiner=!0),u.push(function(t){var e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next,e!==t;);return i}(s));for(u.sort(_),n=0;n<u.length;n++)i=function(t,e){var i=function(t,e){var i,r=e,n=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&o<s&&(o=s,i=r.x<r.next.x?r:r.next,s===n))return i}}while(r=r.next,r!==e);if(!i)return null;var u,h=i,l=i.x,c=i.y,p=1/0;r=i;for(;n>=r.x&&r.x>=l&&n!==r.x&&T(a<c?n:o,a,l,c,a<c?o:n,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(n-r.x),y(r,t)&&(u<p||u===p&&(r.x>i.x||r.x===i.x&&function(t,e){return E(t.prev,t,e.prev)<0&&E(e.next,t,t.next)<0}(i,r)))&&(i=r,p=u)),r=r.next,r!==h;);return i}(t,e);if(!i)return e;t=x(i,t);return v(t,t.next),v(i,i.next)}(u[n],i);return i}(t,e,l,i)),t.length>80*i){for(var p=r=t[0],d=n=t[1],f=i;f<h;f+=i)(a=t[f])<p&&(p=a),(o=t[f+1])<d&&(d=o),r<a&&(r=a),n<o&&(n=o);s=0!==(s=Math.max(r-p,n-d))?32767/s:0}return g(l,c,i,p,d,s,0),c}function m(t,e,i,r,n){var a,o;if(n===0<S(t,e,i,r))for(a=e;a<i;a+=r)o=s(a,t[a],t[a+1],o);else for(a=i-r;e<=a;a-=r)o=s(a,t[a],t[a+1],o);return o&&l(o,o.next)&&(p(o),o=o.next),o}function v(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!l(r,r.next)&&0!==E(r.prev,r,r.next))r=r.next;else{if(p(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function g(t,e,i,r,n,a,o){if(t){!o&&a&&function(t,e,i,r){var n=t;for(;0===n.z&&(n.z=b(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,a,o,s,u,h=1;do{for(i=t,a=t=null,o=0;i;){for(o++,r=i,e=s=0;e<h&&(s++,r=r.nextZ);e++);for(u=h;0<s||0<u&&r;)0!==s&&(0===u||!r||i.z<=r.z)?(i=(n=i).nextZ,s--):(r=(n=r).nextZ,u--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;i=r}}while(a.nextZ=null,h*=2,1<o)}(n)}(t,r,n,a);for(var s,u,h=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?function(t,e,i,r){var n=t.prev,a=t,o=t.next;if(0<=E(n,a,o))return!1;var s=n.x,u=a.x,h=o.x,l=n.y,c=a.y,p=o.y,d=s<u?s<h?s:h:u<h?u:h,f=l<c?l<p?l:p:c<p?c:p,m=u<s?h<s?s:h:h<u?u:h,v=c<l?p<l?l:p:p<c?c:p,g=b(d,f,e,i,r),_=b(m,v,e,i,r),y=t.prevZ,x=t.nextZ;for(;y&&y.z>=g&&x&&x.z<=_;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=v&&y!==n&&y!==o&&T(s,l,u,c,h,p,y.x,y.y)&&0<=E(y.prev,y,y.next))return!1;if(y=y.prevZ,x.x>=d&&x.x<=m&&x.y>=f&&x.y<=v&&x!==n&&x!==o&&T(s,l,u,c,h,p,x.x,x.y)&&0<=E(x.prev,x,x.next))return!1;x=x.nextZ}for(;y&&y.z>=g;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=v&&y!==n&&y!==o&&T(s,l,u,c,h,p,y.x,y.y)&&0<=E(y.prev,y,y.next))return!1;y=y.prevZ}for(;x&&x.z<=_;){if(x.x>=d&&x.x<=m&&x.y>=f&&x.y<=v&&x!==n&&x!==o&&T(s,l,u,c,h,p,x.x,x.y)&&0<=E(x.prev,x,x.next))return!1;x=x.nextZ}return!0}(t,r,n,a):function(t){var e=t.prev,i=t,t=t.next;if(0<=E(e,i,t))return!1;var r=e.x,n=i.x,a=t.x,o=e.y,s=i.y,u=t.y,h=r<n?r<a?r:a:n<a?n:a,l=o<s?o<u?o:u:s<u?s:u,c=n<r?a<r?r:a:a<n?n:a,p=s<o?u<o?o:u:u<s?s:u,d=t.next;for(;d!==e;){if(d.x>=h&&d.x<=c&&d.y>=l&&d.y<=p&&T(r,o,n,s,a,u,d.x,d.y)&&0<=E(d.prev,d,d.next))return!1;d=d.next}return!0}(t))e.push(s.i/i|0),e.push(t.i/i|0),e.push(u.i/i|0),p(t),t=u.next,h=u.next;else if((t=u)===h){o?1===o?g(t=function(t,e,i){var r=t;do{var n=r.prev,a=r.next.next}while(!l(n,a)&&c(n,r,r.next,a)&&y(n,a)&&y(a,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(a.i/i|0),p(r),p(r.next),r=t=a),r=r.next,r!==t);return v(r)}(v(t),e,i),e,i,r,n,a,2):2===o&&function(t,e,i,r,n,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&c(i,i.next,t,e))return!0}while(i=i.next,i!==t);return!1}(t,e)&&(y(t,e)&&y(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;for(;i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next,i!==t;);return r}(t,e)&&(E(t.prev,t,e.prev)||E(t,e.prev,e))||l(t,e)&&0<E(t.prev,t,t.next)&&0<E(e.prev,e,e.next))}(o,s)){var u=x(o,s);return o=v(o,o.next),u=v(u,u.next),g(o,e,i,r,n,a,0),g(u,e,i,r,n,a,0)}s=s.next}}while(o=o.next,o!==t)}(t,e,i,r,n,a):g(v(t),e,i,r,n,a,1);break}}}function _(t,e){return t.x-e.x}function b(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function T(t,e,i,r,n,a,o,s){return(t-o)*(a-s)<=(n-o)*(e-s)&&(i-o)*(e-s)<=(t-o)*(r-s)&&(n-o)*(r-s)<=(i-o)*(a-s)}function E(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function l(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,i,r){var n=h(E(t,e,i)),a=h(E(t,e,r)),o=h(E(i,r,t)),s=h(E(i,r,e));return n!==a&&o!==s||(0===n&&u(t,i,e)||(0===a&&u(t,r,e)||(0===o&&u(i,t,r)||!(0!==s||!u(i,e,r)))))}function u(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function h(t){return 0<t?1:t<0?-1:0}function y(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function x(t,e){var i=new o(t.i,t.x,t.y),r=new o(e.i,e.x,e.y),n=t.next,a=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(a.next=r).prev=a,r}function s(t,e,i,r){i=new o(t,e,i);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function p(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,i,r){for(var n=0,a=e,o=i-r;a<i;a+=r)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}e.exports=r,(e.exports.default=r).deviation=function(t,e,i,r){var n=e&&e.length,a=n?e[0]*i:t.length,o=Math.abs(S(t,0,a,i));if(n)for(var s=0,u=e.length;s<u;s++){var h=e[s]*i,l=s<u-1?e[s+1]*i:t.length;o-=Math.abs(S(t,h,l,i))}for(var c=0,s=0;s<r.length;s+=3){var p=r[s]*i,d=r[s+1]*i,f=r[s+2]*i;c+=Math.abs((t[p]-t[f])*(t[1+d]-t[1+p])-(t[p]-t[d])*(t[1+f]-t[1+p]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var o=0;o<e;o++)i.vertices.push(t[n][a][o]);0<n&&(r+=t[n-1].length,i.holes.push(r))}return i}},{}],39:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.bezierToPoints=function t(e,i,r,n,a,o,s,u,h,l,c){var p=(e+r)/2,d=(i+n)/2,f=(r+a)/2,m=(n+o)/2,v=(a+s)/2,g=(o+u)/2,_=(p+f)/2,y=(d+m)/2,x=(f+v)/2,b=(m+g)/2,T=(_+x)/2,E=(y+b)/2,f=s-e,m=u-i,n=F((r-s)*m-(n-u)*f),o=F((a-s)*m-(o-u)*f);l||(l=[e,i,s,u],c=2);l.splice(c||l.length-2,0,T,E);h*(f*f+m*m)<(n+o)*(n+o)&&(o=l.length,t(e,i,p,d,_,y,T,E,h,l,c),t(T,E,x,b,v,g,s,u,h,l,c+2+(l.length-o)));return l},i.cacheRawPathMeasurements=H,i.convertToPath=function(t,e){var i,r,n,a,o,s,u,h,l,c,p,d,f,m,v,g,_,y=t.tagName.toLowerCase(),x=.552284749831;if("path"===y||!t.getBBox)return t;o=G(t,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),_=z(t,k[y]),"rect"===y?(n=_.rx,a=_.ry||n,i=_.x,r=_.y,s=_.width-2*n,u=_.height-2*a,u=n||a?"M"+(d=(c=(l=i+n)+s)+n)+","+(f=r+a)+" V"+(m=f+u)+" C"+[d,v=m+a*x,p=c+n*x,g=m+a,c,g,c-(c-l)/3,g,l+(c-l)/3,g,l,g,h=i+n*(1-x),g,i,v,i,m,i,m-(m-f)/3,i,f+(m-f)/3,i,f,i,m=r+a*(1-x),h,r,l,r,l+(c-l)/3,r,c-(c-l)/3,r,c,r,p,r,d,m,d,f].join(",")+"z":"M"+(i+s)+","+r+" v"+u+" h"+-s+" v"+-u+" h"+s+"z"):"circle"===y||"ellipse"===y?(s="circle"===y?(n=a=_.r)*x:(n=_.rx,(a=_.ry)*x),i=_.cx,r=_.cy,u="M"+(i+n)+","+r+" C"+[i+n,r+s,i+(x=n*x),r+a,i,r+a,i-x,r+a,i-n,r+s,i-n,r,i-n,r-s,i-x,r-a,i,r-a,i+x,r-a,i+n,r-s,i+n,r].join(",")+"z"):"line"===y?u="M"+_.x1+","+_.y1+" L"+_.x2+","+_.y2:"polyline"!==y&&"polygon"!==y||(_=(t.getAttribute("points")+"").match(T)||[],i=_.shift(),r=_.shift(),u="M"+i+","+r+" L"+_.join(","),"polygon"===y&&(u+=","+i+","+r+"z"));o.setAttribute("d",q(o._gsRawPath=W(u))),e&&t.parentNode&&(t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t));return o},i.copyRawPath=U,i.flatPointsToSegment=function(t,e){void 0===e&&(e=1);for(var i=t[0],r=0,n=[i,r],a=2;a<t.length;a+=2)n.push(i,r,t[a],r=(t[a]-i)*e/2,i=t[a],-r);return n},i.getClosestData=function(t,e,i,r){var n,a,o,s,u={j:0,i:0,t:0},h=O;for(a=0;a<t.length;a++)for(s=t[a],n=0;n<s.length;n+=6)o=Y(1,e,i,0,1,r||20,s[n],s[n+1],s[n+2],s[n+3],s[n+4],s[n+5],s[n+6],s[n+7]),y<h&&(h=y,u.j=a,u.i=n,u.t=o);return u},i.getPositionOnPath=function(t,e,i,r){var n,a,o,s,u,h=t[0],l=r||{};(e<0||1<e)&&(e=d(e));if(1<t.length){for(n=t.totalLength*e,a=o=0;(a+=t[o++].totalLength)<n;)h=t[o];u=a-h.totalLength,e=(n-u)/(a-u)||0}s=h.samples,r=h.resolution,n=h.totalLength*e,o=h.lookup.length?h.lookup[e<1?~~(n/h.minLength):h.lookup.length-1]||0:f(s,n,e),u=o?s[o-1]:0,(a=s[o])<n&&(u=a,a=s[++o]);u=1-(s=1/r*((n-u)/(a-u)+o%r)||0),r=h[o=6*~~(o/r)],l.x=w((s*s*(h[o+6]-r)+3*u*(s*(h[o+4]-r)+u*(h[o+2]-r)))*s+r),l.y=w((s*s*(h[o+7]-(r=h[o+1]))+3*u*(s*(h[o+5]-r)+u*(h[o+3]-r)))*s+r),i&&(l.angle=h.totalLength?j(h,o,1<=s?1-1e-9:s||1e-9):h.angle||0);return l},i.getRawPath=function(t){var e,i=(t=n(t)&&r.test(t)&&document.querySelector(t)||t).getAttribute?t:0;if(i&&(t=t.getAttribute("d")))return i._gsPath||(i._gsPath={}),(e=i._gsPath[t])&&!e._dirty?e:i._gsPath[t]=W(t);return t?n(t)?W(t):u(t[0])?[t]:t:void 0},i.getRotationAtProgress=function(t,e){e=X(t,1<=e?1-1e-9:e||1e-9);return j(e.segment,e.i,e.t)},i.pointsToSegment=function(t,e,i){var r,n,a,o,s,u,h,l,c,p,d,f,m=(t=F(t[0]-t[2])<1e-4&&F(t[1]-t[3])<1e-4?t.slice(2):t).length-2,v=+t[0],g=+t[1],_=+t[2],y=+t[3],x=[v,g,v,g],b=_-v,T=y-g,E=Math.abs(t[m]-v)<.001&&Math.abs(t[m+1]-g)<.001;isNaN(i)&&(i=Math.PI/10);E&&(t.push(_,y),_=v,y=g,v=t[m-2],g=t[m-1],t.unshift(v,g),m+=4);for(e=e||0===e?+e:1,s=2;s<m;s+=2)r=v,n=g,v=_,g=y,_=+t[s+2],y=+t[s+3],v===_&&g===y||(p=(u=b)*u+(l=T)*l,d=(b=_-v)*b+(T=y-g)*T,f=(h=_-r)*h+(c=y-n)*c,a=Math.acos((p+d-f)/B(4*p*d)),f=a/Math.PI*e,p=B(p)*f,f*=B(d),v===r&&g===n||(i<a?(o=S(c,h),x.push(w(v-N(o)*p),w(g-L(o)*p),w(v),w(g),w(v+N(o)*f),w(g+L(o)*f))):(o=S(l,u),x.push(w(v-N(o)*p),w(g-L(o)*p)),o=S(T,b),x.push(w(v),w(g),w(v+N(o)*f),w(g+L(o)*f)))));v!==_||g!==y||x.length<4?x.push(w(_),w(y),w(_),w(y)):x.length-=2,E&&(x.splice(0,6),x.length=x.length-6);return x},i.rawPathToString=q,i.reverseSegment=o,i.simplifyPoints=function(t,e){var i,r,n,a,o,s,u=parseFloat(t[0]),h=parseFloat(t[1]),l=[u,h],c=t.length-2;for(e=Math.pow(e||1,2),i=2;i<c;i+=2)r=parseFloat(t[i]),n=parseFloat(t[i+1]),e<(a=u-r)*a+(a=h-n)*a&&(l.push(r,n),u=r,h=n);return l.push(parseFloat(t[c]),parseFloat(t[1+c])),s=l.length-2,o=[l[0],l[1]],function t(e,i,r,n,a){var o,s,u,h=n,l=e[i],c=e[i+1],p=e[r],d=e[r+1];for(s=i+2;s<r;s+=2)u=m(e[s],e[s+1],l,c,p,d),h<u&&(o=s,h=u);n<h&&(2<o-i&&t(e,i,o,n,a),a.push(e[o],e[o+1]),2<r-o&&t(e,o,r,n,a))}(l,0,s,e,o),o.push(l[s],l[1+s]),o},i.sliceRawPath=function(t,e,i){i=x(i)?1:D(i)||0,e=D(e)||0;var r=Math.max(0,~~(F(i-e)-1e-8)),n=U(t);i<e&&(e=1-e,i=1-i,P(n),n.totalLength=0);(e<0||i<0)&&(y=Math.abs(~~Math.min(e,i))+1,e+=y,i+=y);n.totalLength||H(n);var a,o,s,u,h,l=1<i,c=X(n,e,M,!0),p=X(n,i,A),d=p.segment,f=c.segment,m=p.segIndex,v=c.segIndex,g=p.i,_=c.i,t=v===m,y=g===_&&t;if(l||r){for(l=m<v||t&&g<_||y&&p.t<c.t,R(n,v,_,c.t)&&(v++,l||(m++,y?(p.t=(p.t-c.t)/(1-c.t),g=0):t&&(g-=_))),1-(i-e)<1e-5?m=v-1:!p.t&&m?m--:R(n,m,g,p.t)&&l&&v++,1===c.t&&(v=(v+1)%n.length),o=[],s=n.length,u=1+s*r,u+=(s-(h=v)+m)%s,a=0;a<u;a++)C(o,n[h++%s]);n=o}else if(r=1===p.t?6:V(d,g,p.t),e!==i)for(y=V(f,_,y?c.t/p.t:c.t),t&&(r+=y),d.splice(g+r+2),(y||_)&&f.splice(0,_+y),a=n.length;a--;)(a<v||m<a)&&n.splice(a,1);else d.angle=j(d,g+r,0),c=d[g+=r],p=d[g+1],d.length=d.totalLength=0,d.totalPoints=n.totalPoints=8,d.push(c,p,c,p,c,p,c,p);return n.totalLength=0,n},i.stringToRawPath=W,i.subdivideSegment=V,i.subdivideSegmentNear=function(t,e,i,r,n){var a,o,s=i.length,u=O,h=0,l=0;for(r=r||20,n=n||3,o=0;o<s;o+=6)a=Y(1,t,e,0,1,r,i[o],i[o+1],i[o+2],i[o+3],i[o+4],i[o+5],i[o+6],i[o+7]),y<u&&(u=y,h=a,l=o);return a=Y(n,t,e,h-.05,h+.05,r,i[l],i[l+1],i[l+2],i[l+3],i[l+4],i[l+5],i[l+6],i[l+7]),V(i,l,a),l+6},i.transformRawPath=function(t,e,i,r,n,a,o){var s,u,h,l,c,p=t.length;for(;-1<--p;)for(s=t[p],u=s.length,h=0;h<u;h+=2)l=s[h],c=s[h+1],s[h]=l*e+c*r+a,s[h+1]=l*i+c*n+o;return t._dirty=1,t};var y,b=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,T=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,E=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,r=/(^[#\.][a-z]|[a-y][a-z])/i,I=Math.PI/180,s=180/Math.PI,L=Math.sin,N=Math.cos,F=Math.abs,B=Math.sqrt,S=Math.atan2,O=1e8,n=function(t){return"string"==typeof t},u=function(t){return"number"==typeof t},x=function(t){return void 0===t},M={},A={},d=function(t){return Math.round((t+O)%1*1e5)/1e5||(t<0?0:1)},w=function(t){return Math.round(1e5*t)/1e5||0},D=function(t){return Math.round(1e10*t)/1e10||0},R=function(t,e,i,r){var n=t[e],r=1===r?6:V(n,i,r);if(r&&r+i+2<n.length)return t.splice(e,0,n.slice(0,i+r+2)),n.splice(0,i+r),1},f=function(t,e,i){var r=t.length,n=~~(i*r);if(t[n]>e)for(;--n&&t[n]>e;);else for(;t[++n]<e&&n<r;);return n<r?n:r-1},P=function(t,e){var i=t.length;for(e||t.reverse();i--;)t[i].reversed||o(t[i])},a=function(t,e){return e.totalLength=t.totalLength,t.samples?(e.samples=t.samples.slice(0),e.lookup=t.lookup.slice(0),e.minLength=t.minLength,e.resolution=t.resolution):t.totalPoints&&(e.totalPoints=t.totalPoints),e},C=function(t,e){var i=t.length,r=t[i-1]||[],n=r.length;i&&e[0]===r[n-2]&&e[1]===r[n-1]&&(e=r.concat(e.slice(2)),i--),t[i]=e};function U(t){for(var e=[],i=0;i<t.length;i++)e[i]=a(t[i],t[i].slice(0));return a(t,e)}function o(t){var e,i=0;for(t.reverse();i<t.length;i+=2)e=t[i],t[i]=t[i+1],t[i+1]=e;t.reversed=!t.reversed}var G=function(t,e){var i,r=document.createElementNS("http://www.w3.org/2000/svg","path"),n=[].slice.call(t.attributes),a=n.length;for(e=","+e+",";-1<--a;)i=n[a].nodeName.toLowerCase(),e.indexOf(","+i+",")<0&&r.setAttributeNS(null,i,n[a].nodeValue);return r},k={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},z=function(t,e){for(var i=e?e.split(","):[],r={},n=i.length;-1<--n;)r[i[n]]=+t.getAttribute(i[n])||0;return r};function j(t,e,i){var r,n=t[e],a=t[e+2],o=t[e+4];return n+=(a-n)*i,r=(a+=(o-a)*i)+(o+(t[e+6]-o)*i-a)*i-(n+=(a-n)*i),n=t[e+1],a=t[e+3],o=t[e+5],n+=(a-n)*i,w(S((a+=(o-a)*i)+(o+(t[e+7]-o)*i-a)*i-(n+=(a-n)*i),r)*s)}function H(t,e){for(var i,r,n=i=r=0;n<t.length;n++)t[n].resolution=~~e||12,r+=t[n].length,i+=function(t,e,i){e=e||0,t.samples||(t.samples=[],t.lookup=[]);var r,n,a,o,s,u,h,l,c,p,d,f,m,v,g,_,y=~~t.resolution||12,x=1/y,b=i?e+6*i+1:t.length,T=t[e],E=t[e+1],S=e?e/6*y:0,M=t.samples,A=t.lookup,w=(e?t.minLength:O)||O,D=M[S+i*y-1],R=e?M[S-1]:0;for(M.length=A.length=0,n=e+2;n<b;n+=6){if(a=t[n+4]-T,o=t[n+2]-T,s=t[n]-T,l=t[n+5]-E,c=t[n+3]-E,p=t[n+1]-E,h=d=0,F(a)<.01&&F(l)<.01&&F(s)+F(p)<.01)8<t.length&&(t.splice(n,6),n-=6,b-=6);else for(r=1;r<=y;r++)u=h-(h=((m=x*r)*m*a+3*(f=1-m)*(m*o+f*s))*m),m=d-(d=(m*m*l+3*f*(m*c+f*p))*m),(g=B(m*m+u*u))<w&&(w=g),R+=g,M[S++]=R;T+=a,E+=l}if(D)for(D-=R;S<M.length;S++)M[S]+=D;if(M.length&&w){if(t.totalLength=_=M[M.length-1]||0,_/(t.minLength=w)<9999)for(r=g=v=0;r<_;r+=w)A[g++]=M[v]<r?++v:v}else t.totalLength=M[0]=0;return e?R-M[e/2-1]:R}(t[n]);return t.totalPoints=r,t.totalLength=i,t}function V(t,e,i){if(i<=0||1<=i)return 0;var r=t[e],n=t[e+1],a=t[e+2],o=t[e+3],s=t[e+4],u=t[e+5],h=r+(a-r)*i,l=a+(s-a)*i,r=n+(o-n)*i,a=o+(u-o)*i,n=h+(l-h)*i,o=r+(a-r)*i,s=s+(t[e+6]-s)*i,u=u+(t[e+7]-u)*i;return l+=(s-l)*i,a+=(u-a)*i,t.splice(e+2,4,w(h),w(r),w(n),w(o),w(n+(l-n)*i),w(o+(a-o)*i),w(l),w(a),w(s),w(u)),t.samples&&t.samples.splice(e/6*t.resolution|0,0,0,0,0,0,0,0),6}function X(t,e,i,r){i=i||{},t.totalLength||H(t),(e<0||1<e)&&(e=d(e));var n,a,o,s,u,h,l,c=0,p=t[0];if(e)if(1===e)h=(p=t[c=t.length-(l=1)]).length-8;else{if(1<t.length){for(o=t.totalLength*e,u=h=0;(u+=t[h++].totalLength)<o;)c=h;e=(o-(s=u-(p=t[c]).totalLength))/(u-s)||0}n=p.samples,a=p.resolution,o=p.totalLength*e,s=(h=p.lookup.length?p.lookup[~~(o/p.minLength)]||0:f(n,o,e))?n[h-1]:0,(u=n[h])<o&&(s=u,u=n[++h]),l=1/a*((o-s)/(u-s)+h%a),h=6*~~(h/a),r&&1===l&&(h+6<p.length?(h+=6,l=0):c+1<t.length&&(h=l=0,p=t[++c]))}else p=t[l=h=c=0];return i.t=l,i.i=h,i.path=t,i.segment=p,i.segIndex=c,i}function W(t){function e(t,e,i,r){h=(i-t)/3,l=(r-e)/3,o.push(t+h,e+l,i-h,r-l,i,r)}var i,r,n,a,o,s,u,h,l,c,p,d,f,m=(t+"").replace(E,function(t){t=+t;return t<1e-4&&-1e-4<t?0:t}).match(b)||[],v=[],g=0,_=0,y=m.length,x=0;if(!t||!isNaN(m[0])||isNaN(m[1]))return v;for(i=0;i<y;i++)if(p=n,isNaN(m[i])?a=(n=m[i].toUpperCase())!==m[i]:i--,d=+m[i+1],f=+m[i+2],a&&(d+=g,f+=_),i||(s=d,u=f),"M"===n)o&&(o.length<8?--v.length:x+=o.length),g=s=d,_=u=f,o=[d,f],v.push(o),i+=2,n="L";else if("C"===n)a||(g=_=0),(o=o||[0,0]).push(d,f,g+ +m[i+3],_+ +m[i+4],g+=+m[i+5],_+=+m[i+6]),i+=6;else if("S"===n)h=g,l=_,"C"!==p&&"S"!==p||(h+=g-o[o.length-4],l+=_-o[o.length-3]),a||(g=_=0),o.push(h,l,d,f,g+=+m[i+3],_+=+m[i+4]),i+=4;else if("Q"===n)h=g+2/3*(d-g),l=_+2/3*(f-_),a||(g=_=0),g+=+m[i+3],_+=+m[i+4],o.push(h,l,g+2/3*(d-g),_+2/3*(f-_),g,_),i+=4;else if("T"===n)h=g-o[o.length-4],l=_-o[o.length-3],o.push(g+h,_+l,d+2/3*(g+1.5*h-d),f+2/3*(_+1.5*l-f),g=d,_=f),i+=2;else if("H"===n)e(g,_,g=d,_),i+=1;else if("V"===n)e(g,_,g,_=d+(a?_-g:0)),i+=1;else if("L"===n||"Z"===n)"Z"===n&&(d=s,f=u,o.closed=!0),("L"===n||.5<F(g-d)||.5<F(_-f))&&(e(g,_,d,f),"L"===n&&(i+=2)),g=d,_=f;else if("A"===n){if(d=m[i+4],f=m[i+5],h=m[i+6],l=m[i+7],r=7,1<d.length&&(d.length<3?(l=h,h=f,r--):(l=f,h=d.substr(2),r-=2),f=d.charAt(1),d=d.charAt(0)),c=function(t,e,i,r,n,a,o,s,u){if(t!==s||e!==u){i=F(i),r=F(r);var h=n%360*I,l=N(h),c=L(h),p=Math.PI,d=2*p,f=(t-s)/2,m=(e-u)/2,v=l*f+c*m,g=-c*f+l*m,_=v*v,h=g*g,f=_/(i*i)+h/(r*r);1<f&&(i=B(f)*i,r=B(f)*r);var m=i*i,f=r*r,_=(m*f-m*h-f*_)/(m*h+f*_),a=(a===o?-1:1)*B(_=_<0?0:_),_=i*g/r*a,a=-r*v/i*a,y=l*_-c*a+(t+s)/2,x=c*_+l*a+(e+u)/2,b=(v-_)/i,T=(g-a)/r,e=(-v-_)/i,_=(-g-a)/r,a=b*b+T*T,E=(T<0?-1:1)*Math.acos(b/B(a)),_=(b*_-T*e<0?-1:1)*Math.acos((b*e+T*_)/B(a*(e*e+_*_)));isNaN(_)&&(_=p),!o&&0<_?_-=d:o&&_<0&&(_+=d),E%=d,_%=d;for(var S=Math.ceil(F(_)/(d/4)),M=[],A=_/S,w=4/3*L(A/2)/(1+N(A/2)),D=l*i,R=c*i,O=c*-r,P=l*r,C=0;C<S;C++)v=N(n=E+C*A),g=L(n),b=N(n+=A),T=L(n),M.push(v-w*g,g+w*v,b+w*T,T-w*b,b,T);for(C=0;C<M.length;C+=2)v=M[C],g=M[C+1],M[C]=v*D+g*O+y,M[C+1]=v*R+g*P+x;return M[C-2]=s,M[C-1]=u,M}}(g,_,+m[i+1],+m[i+2],+m[i+3],+d,+f,(a?g:0)+ +h,(a?_:0)+ +l),i+=r,c)for(r=0;r<c.length;r++)o.push(c[r]);g=o[o.length-2],_=o[o.length-1]}return(i=o.length)<6?(v.pop(),i=0):o[0]===o[i-2]&&o[1]===o[i-1]&&(o.closed=!0),v.totalPoints=x+i,v}function m(t,e,i,r,n,a){var o,s=n-i,u=a-r;return(s||u)&&(1<(o=((t-i)*s+(e-r)*u)/(s*s+u*u))?(i=n,r=a):0<o&&(i+=s*o,r+=u*o)),Math.pow(t-i,2)+Math.pow(e-r,2)}function Y(t,e,i,r,n,a,o,s,u,h,l,c,p,d){var f,m,v=(n-r)/a,g=0,_=r;for(y=O;_<=n;)(m=(f=(m=1-_)*m*m*o+3*m*m*_*u+3*m*_*_*l+_*_*_*p-e)*f+(m=m*m*m*s+3*m*m*_*h+3*m*_*_*c+_*_*_*d-i)*m)<y&&(y=m,g=_),_+=v;return 1<t?Y(t-1,e,i,Math.max(g-v,0),Math.min(g+v,1),a,o,s,u,h,l,c,p,d):g}function q(t){for(var e,i,r,n="",a=(t=u(t[0])?[t]:t).length,o=0;o<a;o++){for(r=t[o],n+="M"+w(r[0])+","+w(r[1])+" C",e=r.length,i=2;i<e;i++)n+=w(r[i++])+","+w(r[i++])+" "+w(r[i++])+","+w(r[i++])+" "+w(r[i++])+","+w(r[i])+" ";r.closed&&(n+="z")}return n}},{}],40:[function(t,e,i){"use strict";var u=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(t){return}}()?Object.assign:function(t,e){for(var i,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),n=1;n<arguments.length;n++){for(var a in i=Object(arguments[n]))h.call(i,a)&&(r[a]=i[a]);if(u)for(var o=u(i),s=0;s<o.length;s++)l.call(i,o[s])&&(r[o[s]]=i[o[s]])}return r}},{}],41:[function(t,e,i){"use strict";var r,n,e=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var u,h=[],l=!1,c=-1;function p(){l&&u&&(l=!1,u.length?h=u.concat(h):c=-1,h.length&&d())}function d(){if(!l){var t=s(p);l=!0;for(var e=h.length;e;){for(u=h,h=[];++c<e;)u&&u[c].run();c=-1,e=h.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}e.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new f(t,e)),1!==h.length||l||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=m,e.addListener=m,e.once=m,e.off=m,e.removeListener=m,e.removeAllListeners=m,e.emit=m,e.prependListener=m,e.prependOnceListener=m,e.listeners=function(t){return[]},e.binding=function(t){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(t){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],42:[function(t,d,e){!function(i){!function(){"use strict";function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var e=setTimeout;function h(t){return Boolean(t&&void 0!==t.length)}function r(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function n(i,r){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,a._immediateFn(function(){var t,e=1===i._state?r.onFulfilled:r.onRejected;if(null!==e){try{t=e(i._value)}catch(t){return void s(r.promise,t)}o(r.promise,t)}else(1===i._state?o:s)(r.promise,i._value)})):i._deferreds.push(r)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===u(t)||"function"==typeof t)){var i=t.then;if(t instanceof a)return e._state=3,e._value=t,void l(e);if("function"==typeof i)return void p((r=i,n=t,function(){r.apply(n,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){s(e,t)}var r,n}function s(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)n(t,t._deferreds[e]);t._deferreds=null}function c(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function p(t,e){var i=!1;try{t(function(t){i||(i=!0,o(e,t))},function(t){i||(i=!0,s(e,t))})}catch(t){if(i)return;i=!0,s(e,t)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var i=new this.constructor(r);return n(this,new c(t,e,i)),i},a.prototype.finally=function(e){var i=this.constructor;return this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){return i.reject(t)})})},a.all=function(e){return new a(function(n,a){if(!h(e))return a(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return n([]);var s=o.length;for(var t=0;t<o.length;t++)!function e(i,t){try{if(t&&("object"===u(t)||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void r.call(t,function(t){e(i,t)},a)}o[i]=t,0==--s&&n(o)}catch(t){a(t)}}(t,o[t])})},a.allSettled=function(i){return new this(function(n,t){if(!i||void 0===i.length)return t(new TypeError(u(i)+" "+i+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var a=Array.prototype.slice.call(i);if(0===a.length)return n([]);var o=a.length;for(var e=0;e<a.length;e++)!function e(i,t){if(t&&("object"===u(t)||"function"==typeof t)){var r=t.then;if("function"==typeof r)return void r.call(t,function(t){e(i,t)},function(t){a[i]={status:"rejected",reason:t},0==--o&&n(a)})}a[i]={status:"fulfilled",value:t},0==--o&&n(a)}(e,a[e])})},a.resolve=function(e){return e&&"object"===u(e)&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(i){return new a(function(t,e){e(i)})},a.race=function(n){return new a(function(t,e){if(!h(n))return e(new TypeError("Promise.race accepts an array"));for(var i=0,r=n.length;i<r;i++)a.resolve(n[i]).then(t,e)})},a._immediateFn="function"==typeof i?function(t){i(t)}:function(t){e(t,0)},a._unhandledRejectionFn=function(t){},d.exports=a}.call(this)}.call(this,t("timers").setImmediate)},{timers:48}],43:[function(t,R,O){!function(D){!function(){"use strict";function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e="object"==(void 0===O?"undefined":w(O))&&O&&!O.nodeType&&O,i="object"==(void 0===R?"undefined":w(R))&&R&&!R.nodeType&&R,r="object"==(void 0===D?"undefined":w(D))&&D;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var n,a,v=2147483647,g=36,_=26,o=38,s=700,u=/^xn--/,h=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=g-1,y=Math.floor,x=String.fromCharCode;function b(t){throw new RangeError(c[t])}function d(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function f(t,e){var i=t.split("@"),r="";return 1<i.length&&(r=i[0]+"@",t=i[1]),r+d((t=t.replace(l,".")).split("."),e).join(".")}function T(t){for(var e,i,r=[],n=0,a=t.length;n<a;)55296<=(e=t.charCodeAt(n++))&&e<=56319&&n<a?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function m(t){return d(t,function(t){var e="";return 65535<t&&(e+=x((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=x(t)}).join("")}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function S(t,e,i){var r=0;for(t=i?y(t/s):t>>1,t+=y(t/e);p*_>>1<t;r+=g)t=y(t/p);return y(r+(p+1)*t/(t+o))}function M(t){var e,i,r,n,a,o,s,u=[],h=t.length,l=0,c=128,p=72,d=t.lastIndexOf("-");for(d<0&&(d=0),i=0;i<d;++i)128<=t.charCodeAt(i)&&b("not-basic"),u.push(t.charCodeAt(i));for(r=0<d?d+1:0;r<h;){for(n=l,a=1,o=g;h<=r&&b("invalid-input"),s=t.charCodeAt(r++),(g<=(s=s-48<10?s-22:s-65<26?s-65:s-97<26?s-97:g)||s>y((v-l)/a))&&b("overflow"),l+=s*a,!(s<(s=o<=p?1:p+_<=o?_:o-p));o+=g)a>y(v/(s=g-s))&&b("overflow"),a*=s;p=S(l-n,e=u.length+1,0==n),y(l/e)>v-c&&b("overflow"),c+=y(l/e),l%=e,u.splice(l++,0,c)}return m(u)}function A(t){for(var e,i,r,n,a,o,s,u,h,l,c=[],p=(t=T(t)).length,d=128,f=72,m=e=0;m<p;++m)(s=t[m])<128&&c.push(x(s));for(i=r=c.length,r&&c.push("-");i<p;){for(n=v,m=0;m<p;++m)d<=(s=t[m])&&s<n&&(n=s);for(n-d>y((v-e)/(u=i+1))&&b("overflow"),e+=(n-d)*u,d=n,m=0;m<p;++m)if((s=t[m])<d&&++e>v&&b("overflow"),s==d){for(a=e,o=g;!(a<(h=o<=f?1:f+_<=o?_:o-f));o+=g)c.push(x(E(h+(l=a-h)%(h=g-h),0))),a=y(l/h);c.push(x(E(a,0))),f=S(e,u,i==r),e=0,++i}++e,++d}return c.join("")}if(n={version:"1.4.1",ucs2:{decode:T,encode:m},decode:M,encode:A,toASCII:function(t){return f(t,function(t){return h.test(t)?"xn--"+A(t):t})},toUnicode:function(t){return f(t,function(t){return u.test(t)?M(t.slice(4).toLowerCase()):t})}},"function"==typeof define&&"object"==w(define.amd)&&define.amd)define("punycode",function(){return n});else if(e&&i)if(R.exports==e)i.exports=n;else for(a in n)n.hasOwnProperty(a)&&(e[a]=n[a]);else t.punycode=n}(void 0)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,e,i){"use strict";e.exports=function(t,e,i,r){i=i||"=";var n={};if("string"!=typeof t||0===t.length)return n;var a=/\+/g;t=t.split(e=e||"&");e=1e3;r&&"number"==typeof r.maxKeys&&(e=r.maxKeys);var o=t.length;0<e&&e<o&&(o=e);for(var s=0;s<o;++s){var u,h=t[s].replace(a,"%20"),l=h.indexOf(i),l=0<=l?(u=h.substr(0,l),h.substr(l+1)):(u=h,""),h=decodeURIComponent(u),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(n,h)?c(n[h])?n[h].push(l):n[h]=[n[h],l]:n[h]=l}return n};var c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],45:[function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){switch(a(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(i,r,n,t){return r=r||"&",n=n||"=","object"===a(i=null===i?void 0:i)?u(h(i),function(t){var e=encodeURIComponent(o(t))+n;return s(i[t])?u(i[t],function(t){return e+encodeURIComponent(o(t))}).join(r):e+encodeURIComponent(o(i[t]))}).join(r):t?encodeURIComponent(o(t))+n+encodeURIComponent(o(i)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function u(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var h=Object.keys||function(t){var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i}},{}],46:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":44,"./encode":45}],47:[function(t,e,i){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e,i){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(i):e.value}})(t,e,i||t)}function j(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(i){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=d(i);return o(this,r?(t=d(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function o(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}Object.defineProperty(i,"__esModule",{value:!0}),i.AlwaysStencilFunc=i.AlwaysDepth=i.AlphaFormat=i.AdditiveBlending=i.AdditiveAnimationBlendMode=i.AddOperation=i.AddEquation=i.ACESFilmicToneMapping=void 0,i.AmbientLight=wl,i.AmbientLightProbe=Zl,i.AnimationClip=Lh,i.AnimationLoader=jh,i.AnimationMixer=gc,i.AnimationObjectGroup=mc,i.AnimationUtils=void 0,i.ArcCurve=Jh,i.ArrayCamera=zo,i.AudioListener=i.AudioContext=i.AudioAnalyser=i.Audio=i.ArrowHelper=void 0,i.AudioLoader=Yl,i.AxesHelper=void 0,i.AxisHelper=function(t){return void 0,new Xc(t)},i.BasicShadowMap=i.BasicDepthPacking=i.BackSide=void 0,i.BinaryTextureLoader=function(t){return void 0,new Wh(t)},i.Bone=Ds,i.BooleanKeyframeTrack=wh,i.BoundingBoxHelper=function(t,e){return void 0,new zc(t,e)},i.BoxHelper=i.BoxGeometry=i.BoxBufferGeometry=i.Box3Helper=i.Box3=i.Box2=void 0,i.BufferAttribute=Dr,i.BufferGeometry=Yr,i.BufferGeometryLoader=Nl,i.Cache=i.ByteType=void 0,i.Camera=Dn,i.CameraHelper=void 0,i.CanvasRenderer=function(){},i.CanvasTexture=tu,i.CatmullRomCurve3=il,i.Clock=i.ClampToEdgeWrapping=i.CircleGeometry=i.CircleBufferGeometry=i.CineonToneMapping=void 0,i.ClosedSplineCurve3=up,i.Color=void 0,i.ColorKeyframeTrack=Dh,i.CompressedTexture=$s,i.CompressedTextureLoader=Hh,i.ConeGeometry=i.ConeBufferGeometry=void 0,i.CubeCamera=Cn,i.CubeRefractionMapping=i.CubeReflectionMapping=i.CubeGeometry=void 0,i.CubeTexture=aa,i.CubeTextureLoader=Xh,i.CubeUVRefractionMapping=i.CubeUVReflectionMapping=void 0,i.CubicBezierCurve=ol,i.CubicBezierCurve3=sl,i.CubicInterpolant=Eh,i.CullFaceNone=i.CullFaceFrontBack=i.CullFaceFront=i.CullFaceBack=void 0,i.Curve=qh,i.CurvePath=fl,i.Cylindrical=i.CylinderGeometry=i.CylinderBufferGeometry=i.CustomToneMapping=i.CustomBlending=void 0,i.DataTexture=Ln,i.DataTexture2DArray=oa,i.DataTexture3D=sa,i.DataTextureLoader=Wh,i.DepthStencilFormat=i.DepthFormat=i.DefaultLoadingManager=i.DecrementWrapStencilOp=i.DecrementStencilOp=void 0,i.DepthTexture=eu,i.DirectionalLight=Al,i.DirectionalLightHelper=void 0,i.DiscreteInterpolant=Mh,i.DstColorFactor=i.DstAlphaFactor=i.DoubleSide=i.DodecahedronGeometry=i.DodecahedronBufferGeometry=void 0,i.DstColorFactor=i.DstAlphaFactor=i.DoubleSide=i.DodecahedronGeometry=i.DodecahedronBufferGeometry=void 0,i.DynamicBufferAttribute=function(t,e){return void 0,new Dr(t,e).setUsage(Be)},i.EdgesGeometry=i.DynamicReadUsage=i.DynamicDrawUsage=i.DynamicCopyUsage=void 0,i.EdgesHelper=function(t,e){return void 0,new Hs(new ih(t.geometry),new Ls({color:void 0!==e?e:16777215}))},i.EllipseCurve=Zh,i.Euler=i.EquirectangularRefractionMapping=i.EquirectangularReflectionMapping=i.EqualStencilFunc=i.EqualDepth=void 0,i.EventDispatcher=Ge,i.Face3=i.ExtrudeGeometry=i.ExtrudeBufferGeometry=void 0,i.Face4=function(t,e,i,r,n,a,o){return void 0,new Tr(t,e,i,n,a,o)},i.FaceColors=void 0,i.FileLoader=zh,i.FlatShading=void 0,i.Float32Attribute=function(t,e){return void 0,new Fr(t,e)},i.Float32BufferAttribute=Fr,i.Float64Attribute=function(t,e){return void 0,new Br(t,e)},i.Float64BufferAttribute=Br,i.FogExp2=i.Fog=i.FloatType=void 0,i.Font=Vl,i.FontLoader=Xl,i.Frustum=i.FrontSide=void 0,i.GLBufferAttribute=yc,i.GammaEncoding=i.GLSL3=i.GLSL1=void 0,i.Geometry=yn,i.GridHelper=i.GreaterStencilFunc=i.GreaterEqualStencilFunc=i.GreaterEqualDepth=i.GreaterDepth=i.GeometryUtils=void 0,i.Group=jo,i.HalfFloatType=void 0,i.HemisphereLight=_l,i.HemisphereLightHelper=void 0,i.HemisphereLightProbe=ql,i.IcosahedronGeometry=i.IcosahedronBufferGeometry=void 0,i.ImageBitmapLoader=jl,i.ImageLoader=Vh,i.ImageUtils=void 0,i.ImmediateRenderObject=Ac,i.IncrementWrapStencilOp=i.IncrementStencilOp=void 0,i.InstancedBufferAttribute=Ll,i.InstancedBufferGeometry=Il,i.InstancedInterleavedBuffer=_c,i.InstancedMesh=Is,i.Int16Attribute=function(t,e){return void 0,new Cr(t,e)},i.Int16BufferAttribute=Cr,i.Int32Attribute=function(t,e){return void 0,new Lr(t,e)},i.Int32BufferAttribute=Lr,i.Int8Attribute=function(t,e){return void 0,new Rr(t,e)},i.Int8BufferAttribute=Rr,i.IntType=void 0,i.InterleavedBuffer=Ko,i.InterleavedBufferAttribute=ts,i.Interpolant=Th,i.InvertStencilOp=i.InterpolateSmooth=i.InterpolateLinear=i.InterpolateDiscrete=void 0,i.JSONLoader=function(){},i.KeepStencilOp=void 0,i.KeyframeTrack=Ah,i.LOD=Es,i.Layers=i.LatheGeometry=i.LatheBufferGeometry=void 0,i.LensFlare=function(){},i.LessStencilFunc=i.LessEqualStencilFunc=i.LessEqualDepth=i.LessDepth=void 0,i.Light=gl,i.LightProbe=Ol,i.LightShadow=yl,i.Line=ks,i.Line3=void 0,i.LineBasicMaterial=Ls,i.LineCurve=ul,i.LineCurve3=hl,i.LineDashedMaterial=yh,i.LineLoop=Vs,i.LinePieces=void 0,i.LineSegments=Hs,i.LinearFilter=i.LinearEncoding=i.LineStrip=void 0,i.LinearFilter=i.LinearEncoding=i.LineStrip=void 0,i.LinearInterpolant=Sh,i.LinearToneMapping=i.LinearMipmapNearestFilter=i.LinearMipmapLinearFilter=i.LinearMipMapNearestFilter=i.LinearMipMapLinearFilter=void 0,i.Loader=Gh,i.LoaderUtils=void 0,i.LoadingManager=Bh,i.MOUSE=i.LuminanceFormat=i.LuminanceAlphaFormat=i.LoopRepeat=i.LoopPingPong=i.LoopOnce=i.LogLuvEncoding=void 0,i.Material=Sr,i.MaterialLoader=Pl,i.MaxEquation=i.Matrix4=i.Matrix3=i.MathUtils=i.Math=void 0,i.Mesh=pn,i.MeshBasicMaterial=Mr,i.MeshDepthMaterial=Io,i.MeshDistanceMaterial=Lo,i.MeshFaceMaterial=function(t){return void 0,t},i.MeshLambertMaterial=gh,i.MeshMatcapMaterial=_h,i.MeshNormalMaterial=vh,i.MeshPhongMaterial=fh,i.MeshPhysicalMaterial=dh,i.MeshStandardMaterial=ph,i.MeshToonMaterial=mh,i.MixOperation=i.MirroredRepeatWrapping=i.MinEquation=void 0,i.MultiMaterial=function(t){void 0===t&&(t=[]);return void 0,t.isMultiMaterial=!0,(t.materials=t).clone=function(){return t.slice()},t},i.NotEqualStencilFunc=i.NotEqualDepth=i.NormalBlending=i.NormalAnimationBlendMode=i.NoToneMapping=i.NoColors=i.NoBlending=i.NeverStencilFunc=i.NeverDepth=i.NearestMipmapNearestFilter=i.NearestMipmapLinearFilter=i.NearestMipMapNearestFilter=i.NearestMipMapLinearFilter=i.NearestFilter=i.MultiplyOperation=i.MultiplyBlending=void 0,i.NumberKeyframeTrack=Rh,i.Object3D=$i,i.ObjectLoader=Bl,i.OneMinusSrcColorFactor=i.OneMinusSrcAlphaFactor=i.OneMinusDstColorFactor=i.OneMinusDstAlphaFactor=i.OneFactor=i.OctahedronGeometry=i.OctahedronBufferGeometry=i.ObjectSpaceNormalMap=void 0,i.OrthographicCamera=Sl,i.PMREMGenerator=i.PCFSoftShadowMap=i.PCFShadowMap=void 0,i.ParametricBufferGeometry=nu,i.ParametricGeometry=ru,i.Particle=function(t){return void 0,new fs(t)},i.ParticleBasicMaterial=function(t){return void 0,new Xs(t)},i.ParticleSystem=function(t,e){return void 0,new Js(t,e)},i.ParticleSystemMaterial=function(t){return void 0,new Xs(t)},i.Path=ml,i.PerspectiveCamera=Rn,i.PlaneHelper=i.PlaneGeometry=i.PlaneBufferGeometry=i.Plane=void 0,i.PointCloud=function(t,e){return void 0,new Js(t,e)},i.PointCloudMaterial=function(t){return void 0,new Xs(t)},i.PointLight=El,i.PointLightHelper=void 0,i.Points=Js,i.PointsMaterial=Xs,i.PositionalAudio=i.PolyhedronGeometry=i.PolyhedronBufferGeometry=i.PolarGridHelper=void 0,i.PropertyBinding=fc,i.PropertyMixer=hc,i.QuadraticBezierCurve=ll,i.QuadraticBezierCurve3=cl,i.Quaternion=void 0,i.QuaternionKeyframeTrack=Ph,i.QuaternionLinearInterpolant=Oh,i.REVISION=void 0,i.RGIntegerFormat=i.RGFormat=i.RGB_S3TC_DXT1_Format=i.RGB_PVRTC_4BPPV1_Format=i.RGB_PVRTC_2BPPV1_Format=i.RGB_ETC2_Format=i.RGB_ETC1_Format=i.RGBM7Encoding=i.RGBM16Encoding=i.RGBIntegerFormat=i.RGBFormat=i.RGBEFormat=i.RGBEEncoding=i.RGBDEncoding=i.RGBA_S3TC_DXT5_Format=i.RGBA_S3TC_DXT3_Format=i.RGBA_S3TC_DXT1_Format=i.RGBA_PVRTC_4BPPV1_Format=i.RGBA_PVRTC_2BPPV1_Format=i.RGBA_ETC2_EAC_Format=i.RGBA_BPTC_Format=i.RGBA_ASTC_8x8_Format=i.RGBA_ASTC_8x6_Format=i.RGBA_ASTC_8x5_Format=i.RGBA_ASTC_6x6_Format=i.RGBA_ASTC_6x5_Format=i.RGBA_ASTC_5x5_Format=i.RGBA_ASTC_5x4_Format=i.RGBA_ASTC_4x4_Format=i.RGBA_ASTC_12x12_Format=i.RGBA_ASTC_12x10_Format=i.RGBA_ASTC_10x8_Format=i.RGBA_ASTC_10x6_Format=i.RGBA_ASTC_10x5_Format=i.RGBA_ASTC_10x10_Format=i.RGBAIntegerFormat=i.RGBAFormat=i.RGBADepthPacking=i.REVISION=void 0,i.RawShaderMaterial=ch,i.Ray=void 0,i.Raycaster=xc,i.RectAreaLight=Dl,i.ShaderLib=i.ShaderChunk=i.SceneUtils=i.Scene=i.SRGB8_ALPHA8_ASTC_8x8_Format=i.SRGB8_ALPHA8_ASTC_8x6_Format=i.SRGB8_ALPHA8_ASTC_8x5_Format=i.SRGB8_ALPHA8_ASTC_6x6_Format=i.SRGB8_ALPHA8_ASTC_6x5_Format=i.SRGB8_ALPHA8_ASTC_5x5_Format=i.SRGB8_ALPHA8_ASTC_5x4_Format=i.SRGB8_ALPHA8_ASTC_4x4_Format=i.SRGB8_ALPHA8_ASTC_12x12_Format=i.SRGB8_ALPHA8_ASTC_12x10_Format=i.SRGB8_ALPHA8_ASTC_10x8_Format=i.SRGB8_ALPHA8_ASTC_10x6_Format=i.SRGB8_ALPHA8_ASTC_10x5_Format=i.SRGB8_ALPHA8_ASTC_10x10_Format=i.RingGeometry=i.RingBufferGeometry=i.ReverseSubtractEquation=i.ReplaceStencilOp=i.RepeatWrapping=i.ReinhardToneMapping=i.RedIntegerFormat=i.RedFormat=void 0,i.ShaderMaterial=wn,i.ShadowMaterial=lh,i.Shape=vl,i.ShapeGeometry=i.ShapeBufferGeometry=void 0,i.ShapePath=Hl,i.ShortType=i.ShapeUtils=void 0,i.Skeleton=ws,i.SkeletonHelper=void 0,i.SkinnedMesh=Ss,i.SphericalHarmonics3=i.Spherical=i.SphereGeometry=i.SphereBufferGeometry=i.Sphere=i.SmoothShading=void 0,i.Spline=lp,i.SplineCurve=pl,i.SplineCurve3=hp,i.SpotLight=bl,i.SpotLightHelper=void 0,i.Sprite=fs,i.SpriteMaterial=es,i.StaticReadUsage=i.StaticDrawUsage=i.StaticCopyUsage=i.SrcColorFactor=i.SrcAlphaSaturateFactor=i.SrcAlphaFactor=void 0,i.StereoCamera=Ql,i.StreamCopyUsage=void 0,i.StreamReadUsage=i.StreamDrawUsage=i.StreamCopyUsage=void 0,i.StringKeyframeTrack=Ch,i.TextGeometry=i.TextBufferGeometry=i.TetrahedronGeometry=i.TetrahedronBufferGeometry=i.TangentSpaceNormalMap=i.TOUCH=i.SubtractiveBlending=i.SubtractEquation=void 0,i.Texture=Ze,i.TextureLoader=Yh,i.UVMapping=i.TubeGeometry=i.TubeBufferGeometry=i.TrianglesDrawMode=i.TriangleStripDrawMode=i.TriangleFanDrawMode=i.Triangle=i.TorusKnotGeometry=i.TorusKnotBufferGeometry=i.TorusGeometry=i.TorusBufferGeometry=void 0,i.Uint16Attribute=function(t,e){return void 0,new Ir(t,e)},i.Uint16BufferAttribute=Ir,i.Uint32Attribute=function(t,e){return void 0,new Nr(t,e)},i.Uint32BufferAttribute=Nr,i.Uint8Attribute=function(t,e){return void 0,new Or(t,e)},i.Uint8BufferAttribute=Or,i.Uint8ClampedAttribute=function(t,e){return void 0,new Pr(t,e)},i.Uint8ClampedBufferAttribute=Pr,i.Vector4=i.Vector3=i.Vector2=i.VSMShadowMap=i.UnsignedShortType=i.UnsignedShort565Type=i.UnsignedShort5551Type=i.UnsignedShort4444Type=i.UnsignedIntType=i.UnsignedInt248Type=i.UnsignedByteType=i.UniformsUtils=i.UniformsLib=i.Uniform=void 0,i.VectorKeyframeTrack=Ih,i.Vertex=function(t,e,i){return void 0,new ti(t,e,i)},i.VertexColors=void 0,i.VideoTexture=Qs,i.WebGL1Renderer=Yo,i.WebGLCubeRenderTarget=In,i.WebGLMultisampleRenderTarget=Qe,i.WebGLRenderTarget=Ke,i.WebGLRenderTargetCube=function(t,e,i){return void 0,new In(t,i)},i.WebGLRenderer=Wo,i.WebGLUtils=ko,i.WireframeGeometry=void 0,i.WireframeHelper=function(t,e){return void 0,new Hs(new iu(t.geometry),new Ls({color:void 0!==e?e:16777215}))},i.WrapAroundEnding=void 0,i.XHRLoader=function(t){return void 0,new zh(t)},(i.sRGBEncoding=i.ZeroStencilOp=i.ZeroSlopeEnding=i.ZeroFactor=i.ZeroCurvatureEnding=void 0)===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e});i.REVISION="120";i.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2};i.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3};var H=0;i.CullFaceNone=H;var V=1;i.CullFaceBack=V;var X=2;i.CullFaceFront=X;i.CullFaceFrontBack=3;i.BasicShadowMap=0;var R=1;i.PCFShadowMap=R;i.PCFSoftShadowMap=2;var O=3;i.VSMShadowMap=O;var v=0;i.FrontSide=v;var W=1;i.BackSide=W;var Y=2;i.DoubleSide=Y;i.FlatShading=1;i.SmoothShading=2;var q=0;i.NoBlending=q;var Z=1;i.NormalBlending=Z;var J=2;i.AdditiveBlending=J;var K=3;i.SubtractiveBlending=K;var Q=4;i.MultiplyBlending=Q;var $=5;i.CustomBlending=$;var tt=100;i.AddEquation=tt;var et=101;i.SubtractEquation=et;var it=102;i.ReverseSubtractEquation=it;var rt=103;i.MinEquation=rt;var nt=104;i.MaxEquation=nt;var at=200;i.ZeroFactor=at;var ot=201;i.OneFactor=ot;var st=202;i.SrcColorFactor=st;var ut=203;i.OneMinusSrcColorFactor=ut;var ht=204;i.SrcAlphaFactor=ht;var lt=205;i.OneMinusSrcAlphaFactor=lt;var ct=206;i.DstAlphaFactor=ct;var pt=207;i.OneMinusDstAlphaFactor=pt;var dt=208;i.DstColorFactor=dt;var ft=209;i.OneMinusDstColorFactor=ft;var mt=210;i.SrcAlphaSaturateFactor=mt;var vt=0;i.NeverDepth=vt;var gt=1;i.AlwaysDepth=gt;var _t=2;i.LessDepth=_t;var yt=3;i.LessEqualDepth=yt;var xt=4;i.EqualDepth=xt;var bt=5;i.GreaterEqualDepth=bt;var Tt=6;i.GreaterDepth=Tt;var Et=7;i.NotEqualDepth=Et;var T=0;i.MultiplyOperation=T;i.MixOperation=1;i.AddOperation=2;var Mt=0;i.NoToneMapping=Mt;i.LinearToneMapping=1;i.ReinhardToneMapping=2;i.CineonToneMapping=3;i.ACESFilmicToneMapping=4;i.CustomToneMapping=5;i.UVMapping=300;var E=301;i.CubeReflectionMapping=E;var S=302;i.CubeRefractionMapping=S;var u=303;i.EquirectangularReflectionMapping=u;var c=304;i.EquirectangularRefractionMapping=c;var M=306;i.CubeUVReflectionMapping=M;var A=307;i.CubeUVRefractionMapping=A;var G=1e3;i.RepeatWrapping=G;var k=1001;i.ClampToEdgeWrapping=k;var z=1002;i.MirroredRepeatWrapping=z;var St=1003;i.NearestFilter=St;var At=1004;i.NearestMipmapNearestFilter=At;i.NearestMipMapNearestFilter=1004;var wt=1005;i.NearestMipmapLinearFilter=wt;i.NearestMipMapLinearFilter=1005;var Dt=1006;i.LinearFilter=Dt;var Rt=1007;i.LinearMipmapNearestFilter=Rt;i.LinearMipMapNearestFilter=1007;var Ot=1008;i.LinearMipmapLinearFilter=Ot;i.LinearMipMapLinearFilter=1008;var Pt=1009;i.UnsignedByteType=Pt;var s=1010;i.ByteType=s;var f=1011;i.ShortType=f;var Ct=1012;i.UnsignedShortType=Ct;var g=1013;i.IntType=g;var It=1014;i.UnsignedIntType=It;var Lt=1015;i.FloatType=Lt;var Nt=1016;i.HalfFloatType=Nt;var y=1017;i.UnsignedShort4444Type=y;var x=1018;i.UnsignedShort5551Type=x;var b=1019;i.UnsignedShort565Type=b;var Ft=1020;i.UnsignedInt248Type=Ft;var w=1021;i.AlphaFormat=w;var Bt=1022;i.RGBFormat=Bt;var Ut=1023;i.RGBAFormat=Ut;var D=1024;i.LuminanceFormat=D;var P=1025;i.LuminanceAlphaFormat=P;var C=Ut;i.RGBEFormat=C;var Gt=1026;i.DepthFormat=Gt;var kt=1027;i.DepthStencilFormat=kt;var I=1028;i.RedFormat=I;var L=1029;i.RedIntegerFormat=L;var N=1030;i.RGFormat=N;var F=1031;i.RGIntegerFormat=F;var U=1032;i.RGBIntegerFormat=U;var zt=1033;i.RGBAIntegerFormat=zt;var jt=33776;i.RGB_S3TC_DXT1_Format=jt;var Ht=33777;i.RGBA_S3TC_DXT1_Format=Ht;var Vt=33778;i.RGBA_S3TC_DXT3_Format=Vt;var Xt=33779;i.RGBA_S3TC_DXT5_Format=Xt;var Wt=35840;i.RGB_PVRTC_4BPPV1_Format=Wt;var Yt=35841;i.RGB_PVRTC_2BPPV1_Format=Yt;var qt=35842;i.RGBA_PVRTC_4BPPV1_Format=qt;var Zt=35843;i.RGBA_PVRTC_2BPPV1_Format=Zt;var Jt=36196;i.RGB_ETC1_Format=Jt;var Kt=37492;i.RGB_ETC2_Format=Kt;var Qt=37496;i.RGBA_ETC2_EAC_Format=Qt;var $t=37808;i.RGBA_ASTC_4x4_Format=$t;var te=37809;i.RGBA_ASTC_5x4_Format=te;var ee=37810;i.RGBA_ASTC_5x5_Format=ee;var ie=37811;i.RGBA_ASTC_6x5_Format=ie;var re=37812;i.RGBA_ASTC_6x6_Format=re;var ne=37813;i.RGBA_ASTC_8x5_Format=ne;var ae=37814;i.RGBA_ASTC_8x6_Format=ae;var oe=37815;i.RGBA_ASTC_8x8_Format=oe;var se=37816;i.RGBA_ASTC_10x5_Format=se;var ue=37817;i.RGBA_ASTC_10x6_Format=ue;var he=37818;i.RGBA_ASTC_10x8_Format=he;var le=37819;i.RGBA_ASTC_10x10_Format=le;var ce=37820;i.RGBA_ASTC_12x10_Format=ce;var pe=37821;i.RGBA_ASTC_12x12_Format=pe;var de=36492;i.RGBA_BPTC_Format=de;var fe=37840;i.SRGB8_ALPHA8_ASTC_4x4_Format=fe;var me=37841;i.SRGB8_ALPHA8_ASTC_5x4_Format=me;var ve=37842;i.SRGB8_ALPHA8_ASTC_5x5_Format=ve;var ge=37843;i.SRGB8_ALPHA8_ASTC_6x5_Format=ge;var _e=37844;i.SRGB8_ALPHA8_ASTC_6x6_Format=_e;var ye=37845;i.SRGB8_ALPHA8_ASTC_8x5_Format=ye;var xe=37846;i.SRGB8_ALPHA8_ASTC_8x6_Format=xe;var be=37847;i.SRGB8_ALPHA8_ASTC_8x8_Format=be;var Te=37848;i.SRGB8_ALPHA8_ASTC_10x5_Format=Te;var Ee=37849;i.SRGB8_ALPHA8_ASTC_10x6_Format=Ee;var Se=37850;i.SRGB8_ALPHA8_ASTC_10x8_Format=Se;var Me=37851;i.SRGB8_ALPHA8_ASTC_10x10_Format=Me;var Ae=37852;i.SRGB8_ALPHA8_ASTC_12x10_Format=Ae;var we=37853;i.SRGB8_ALPHA8_ASTC_12x12_Format=we;i.LoopOnce=2200;i.LoopRepeat=2201;i.LoopPingPong=2202;i.InterpolateDiscrete=2300;i.InterpolateLinear=2301;i.InterpolateSmooth=2302;i.ZeroCurvatureEnding=2400;i.ZeroSlopeEnding=2401;i.WrapAroundEnding=2402;var De=2500;i.NormalAnimationBlendMode=De;i.AdditiveAnimationBlendMode=2501;i.TrianglesDrawMode=0;i.TriangleStripDrawMode=1;i.TriangleFanDrawMode=2;var Re=3e3;i.LinearEncoding=Re;i.sRGBEncoding=3001;i.GammaEncoding=3007;i.RGBEEncoding=3002;i.LogLuvEncoding=3003;i.RGBM7Encoding=3004;i.RGBM16Encoding=3005;i.RGBDEncoding=3006;var Oe=3200;i.BasicDepthPacking=Oe;var Pe=3201;i.RGBADepthPacking=Pe;var Ce=0;i.TangentSpaceNormalMap=Ce;var Ie=1;i.ObjectSpaceNormalMap=Ie;i.ZeroStencilOp=0;var Le=7680;i.KeepStencilOp=Le;i.ReplaceStencilOp=7681;i.IncrementStencilOp=7682;i.DecrementStencilOp=7683;i.IncrementWrapStencilOp=34055;i.DecrementWrapStencilOp=34056;i.InvertStencilOp=5386;i.NeverStencilFunc=512;i.LessStencilFunc=513;i.EqualStencilFunc=514;i.LessEqualStencilFunc=515;i.GreaterStencilFunc=516;i.NotEqualStencilFunc=517;i.GreaterEqualStencilFunc=518;var Ne=519;i.AlwaysStencilFunc=Ne;var Fe=35044;i.StaticDrawUsage=Fe;var Be=35048;i.DynamicDrawUsage=Be;i.StreamDrawUsage=35040;i.StaticReadUsage=35045;i.DynamicReadUsage=35049;i.StreamReadUsage=35041;i.StaticCopyUsage=35046;i.DynamicCopyUsage=35050;i.StreamCopyUsage=35042;i.GLSL1="100";var Ue="300 es";function Ge(){}i.GLSL3=Ue,Object.assign(Ge.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){void 0!==this._listeners&&(void 0===(t=this._listeners[t])||-1!==(e=t.indexOf(e))&&t.splice(e,1))},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=e.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,t)}}}});for(var ke=[],ze=0;ze<256;ze++)ke[ze]=(ze<16?"0":"")+ze.toString(16);var je=1234567,He={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ke[255&t]+ke[t>>8&255]+ke[t>>16&255]+ke[t>>24&255]+"-"+ke[255&e]+ke[e>>8&255]+"-"+ke[e>>16&15|64]+ke[e>>24&255]+"-"+ke[63&i|128]+ke[i>>8&255]+"-"+ke[i>>16&255]+ke[i>>24&255]+ke[255&r]+ke[r>>8&255]+ke[r>>16&255]+ke[r>>24&255]).toUpperCase()},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,r,n){return r+(t-e)*(n-r)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:i<=t?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((je=16807*(je=void 0!==t?t%2147483647:je)%2147483647)-1)/2147483646},degToRad:function(t){return t*He.DEG2RAD},radToDeg:function(t){return t*He.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,i,r,n){var a=Math.cos,o=Math.sin,s=a(i/2),u=o(i/2),h=a((e+r)/2),l=o((e+r)/2),c=a((e-r)/2),p=o((e-r)/2),d=a((r-e)/2),f=o((r-e)/2);switch(n){case"XYX":t.set(s*l,u*c,u*p,s*h);break;case"YZY":t.set(u*p,s*l,u*c,s*h);break;case"ZXZ":t.set(u*c,u*p,s*l,s*h);break;case"XZX":t.set(s*l,u*f,u*d,s*h);break;case"YXY":t.set(u*d,s*l,u*f,s*h);break;case"ZYZ":t.set(u*f,u*d,s*l,s*h)}}};i.MathUtils=i.Math=He;var Ve=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;B(this,i),Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}return m(i,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,i=this.y,t=t.elements;return this.x=t[0]*e+t[3]*i+t[6],this.y=t[1]*e+t[4]*i+t[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,t=this.y-t.y;return e*e+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this}},{key:"toArray",value:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=this.x-t.x,e=this.y-t.y;return this.x=n*i-e*r+t.x,this.y=n*r+e*i+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}]),i}();i.Vector2=Ve;var Xe,We=function(){function t(){B(this,t),Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1]}return m(t,[{key:"set",value:function(t,e,i,r,n,a,o,s,u){var h=this.elements;return h[0]=t,h[1]=r,h[2]=o,h[3]=e,h[4]=n,h[5]=s,h[6]=i,h[7]=a,h[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this}},{key:"extractBasis",value:function(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){t=t.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var i=t.elements,r=e.elements,n=this.elements,a=i[0],o=i[3],s=i[6],u=i[1],h=i[4],l=i[7],c=i[2],p=i[5],d=i[8],f=r[0],m=r[3],v=r[6],g=r[1],_=r[4],t=r[7],e=r[2],i=r[5],r=r[8];return n[0]=a*f+o*g+s*e,n[3]=a*m+o*_+s*i,n[6]=a*v+o*t+s*r,n[1]=u*f+h*g+l*e,n[4]=u*m+h*_+l*i,n[7]=u*v+h*t+l*r,n[2]=c*f+p*g+d*e,n[5]=c*m+p*_+d*i,n[8]=c*v+p*t+d*r,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],a=t[4],o=t[5],s=t[6],u=t[7],t=t[8];return e*a*t-e*o*u-i*n*t+i*o*s+r*n*u-r*a*s}},{key:"getInverse",value:function(t,e){var i=t.elements,r=this.elements,n=i[0],a=i[1],o=i[2],s=i[3],u=i[4],h=i[5],l=i[6],c=i[7],p=i[8],d=p*u-h*c,f=h*l-p*s,t=c*s-u*l,i=n*d+a*f+o*t;if(0==i)return this.set(0,0,0,0,0,0,0,0,0);i=1/i;return r[0]=d*i,r[1]=(o*c-p*a)*i,r[2]=(h*a-o*u)*i,r[3]=f*i,r[4]=(p*n-o*l)*i,r[5]=(o*s-h*n)*i,r[6]=t*i,r[7]=(a*l-c*n)*i,r[8]=(u*n-a*s)*i,this}},{key:"transpose",value:function(){var t=this.elements,e=t[1];return t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,i,r,n,a,o){var s=Math.cos(n),n=Math.sin(n);this.set(i*s,i*n,-i*(s*a+n*o)+a+t,-r*n,r*s,-r*(-n*a+s*o)+o+e,0,0,1)}},{key:"scale",value:function(t,e){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=e,i[4]*=e,i[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),i=Math.sin(t),r=this.elements,n=r[0],a=r[3],o=r[6],s=r[1],u=r[4],t=r[7];return r[0]=e*n+i*s,r[3]=e*a+i*u,r[6]=e*o+i*t,r[1]=-i*n+e*s,r[4]=-i*a+e*u,r[7]=-i*o+e*t,this}},{key:"translate",value:function(t,e){var i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=e*i[2],i[4]+=e*i[5],i[7]+=e*i[8],this}},{key:"equals",value:function(t){for(var e=this.elements,i=t.elements,r=0;r<9;r++)if(e[r]!==i[r])return!1;return!0}},{key:"fromArray",value:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this}},{key:"toArray",value:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}}]),t}();i.Matrix3=We;var Ye={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e,t=t instanceof HTMLCanvasElement?t:((Xe=void 0===Xe?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):Xe).width=t.width,Xe.height=t.height,e=Xe.getContext("2d"),t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),Xe);return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};i.ImageUtils=Ye;var qe=0;function Ze(t,e,i,r,n,a,o,s,u,h){Object.defineProperty(this,"id",{value:qe++}),this.uuid=He.generateUUID(),this.name="",this.image=void 0!==t?t:Ze.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Ze.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:k,this.wrapT=void 0!==r?r:k,this.magFilter=void 0!==n?n:Dt,this.minFilter=void 0!==a?a:Ot,this.anisotropy=void 0!==u?u:1,this.format=void 0!==o?o:Ut,this.internalFormat=null,this.type=void 0!==s?s:Pt,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new We,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==h?h:Re,this.version=0,this.onUpdate=null}Ze.DEFAULT_IMAGE=void 0,Ze.DEFAULT_MAPPING=300,Ze.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Ze,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=He.generateUUID()),!e&&void 0===t.images[r.uuid]){if(Array.isArray(r))for(var n=[],a=0,o=r.length;a<o;a++)n.push(Ye.getDataURL(r[a]));else n=Ye.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:n}}i.image=r.uuid}return e||(t.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||1<t.x)switch(this.wrapS){case G:t.x=t.x-Math.floor(t.x);break;case k:t.x=t.x<0?0:1;break;case z:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case G:t.y=t.y-Math.floor(t.y);break;case k:t.y=t.y<0?0:1;break;case z:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Ze.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});var Je=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;B(this,n),Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=i,this.w=r}return m(n,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}},{key:"set",value:function(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,i=this.y,r=this.z,n=this.w,t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r+t[12]*n,this.y=t[1]*e+t[5]*i+t[9]*r+t[13]*n,this.z=t[2]*e+t[6]*i+t[10]*r+t[14]*n,this.w=t[3]*e+t[7]*i+t[11]*r+t[15]*n,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,i,r,n=t.elements,a=n[0],o=n[4],s=n[8],u=n[1],h=n[5],l=n[9],c=n[2],p=n[6],d=n[10];if(Math.abs(o-u)<.01&&Math.abs(s-c)<.01&&Math.abs(l-p)<.01){if(Math.abs(o+u)<.1&&Math.abs(s+c)<.1&&Math.abs(l+p)<.1&&Math.abs(a+h+d-3)<.1)return this.set(1,0,0,0),this;var f=Math.PI,m=(a+1)/2,v=(h+1)/2,g=(d+1)/2,_=(o+u)/4,t=(s+c)/4,n=(l+p)/4;return v<m&&g<m?r=m<.01?(e=0,i=.707106781):(i=_/(e=Math.sqrt(m)),t/e):g<v?r=v<.01?(i=0,e=.707106781):(e=_/(i=Math.sqrt(v)),n/i):g<.01?(i=e=.707106781,r=0):(e=t/(r=Math.sqrt(g)),i=n/r),this.set(e,i,r,f),this}f=Math.sqrt((p-l)*(p-l)+(s-c)*(s-c)+(u-o)*(u-o));return Math.abs(f)<.001&&(f=1),this.x=(p-l)/f,this.y=(s-c)/f,this.z=(u-o)/f,this.w=Math.acos((a+h+d-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}]),n}();function Ke(t,e,i){this.width=t,this.height=e,this.scissor=new Je(0,0,t,e),this.scissorTest=!1,this.viewport=new Je(0,0,t,e),this.texture=new Ze(void 0,(i=i||{}).mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:Dt,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function Qe(t,e,i){Ke.call(this,t,e,i),this.samples=4}i.Vector4=Je,Ke.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Ke,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Qe.prototype=Object.assign(Object.create(Ke.prototype),{constructor:Qe,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Ke.prototype.copy.call(this,t),this.samples=t.samples,this}});var $e=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;B(this,n),Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=i,this._w=r}return m(n,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=t._x,r=t._y,n=t._z,a=t._order,o=Math.cos,t=Math.sin,s=o(i/2),u=o(r/2),h=o(n/2),l=t(i/2),c=t(r/2),p=t(n/2);switch(a){case"XYZ":this._x=l*u*h+s*c*p,this._y=s*c*h-l*u*p,this._z=s*u*p+l*c*h,this._w=s*u*h-l*c*p;break;case"YXZ":this._x=l*u*h+s*c*p,this._y=s*c*h-l*u*p,this._z=s*u*p-l*c*h,this._w=s*u*h+l*c*p;break;case"ZXY":this._x=l*u*h-s*c*p,this._y=s*c*h+l*u*p,this._z=s*u*p+l*c*h,this._w=s*u*h-l*c*p;break;case"ZYX":this._x=l*u*h-s*c*p,this._y=s*c*h+l*u*p,this._z=s*u*p-l*c*h,this._w=s*u*h+l*c*p;break;case"YZX":this._x=l*u*h+s*c*p,this._y=s*c*h+l*u*p,this._z=s*u*p-l*c*h,this._w=s*u*h-l*c*p;break;case"XZY":this._x=l*u*h-s*c*p,this._y=s*c*h-l*u*p,this._z=s*u*p+l*c*h,this._w=s*u*h+l*c*p}return!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var i=e/2,e=Math.sin(i);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(i),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e,i=t.elements,r=i[0],n=i[4],a=i[8],o=i[1],s=i[5],u=i[9],h=i[2],l=i[6],t=i[10],i=r+s+t;return 0<i?(i=.5/Math.sqrt(i+1),this._w=.25/i,this._x=(l-u)*i,this._y=(a-h)*i,this._z=(o-n)*i):s<r&&t<r?(e=2*Math.sqrt(1+r-s-t),this._w=(l-u)/e,this._x=.25*e,this._y=(n+o)/e,this._z=(a+h)/e):t<s?(e=2*Math.sqrt(1+s-r-t),this._w=(a-h)/e,this._x=(n+o)/e,this._y=.25*e,this._z=(u+l)/e):(s=2*Math.sqrt(1+t-r-s),this._w=(o-n)/s,this._x=(a+h)/s,this._y=(u+l)/s,this._z=.25*s),this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x),this._w=i,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(He.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var i=this.angleTo(t);if(0===i)return this;i=Math.min(1,e/i);return this.slerp(t,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"inverse",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var i=t._x,r=t._y,n=t._z,a=t._w,o=e._x,s=e._y,t=e._z,e=e._w;return this._x=i*e+a*o+r*t-n*s,this._y=r*e+a*s+n*o-i*t,this._z=n*e+a*t+i*s-r*o,this._w=a*e-i*o-r*s-n*t,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,r=this._y,n=this._z,a=this._w,o=a*t._w+i*t._x+r*t._y+n*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=i,this._y=r,this._z=n,this;t=1-o*o;if(t<=Number.EPSILON){var s=1-e;return this._w=s*a+e*this._w,this._x=s*i+e*this._x,this._y=s*r+e*this._y,this._z=s*n+e*this._z,this.normalize(),this._onChangeCallback(),this}s=Math.sqrt(t),t=Math.atan2(s,o),o=Math.sin((1-e)*t)/s,s=Math.sin(e*t)/s;return this._w=a*o+this._w*s,this._x=i*o+this._x*s,this._y=r*o+this._y*s,this._z=n*o+this._z*s,this._onChangeCallback(),this}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t,e){return this._x=t[e=void 0===e?0:e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(t,e,i,r){return i.copy(t).slerp(e,r)}},{key:"slerpFlat",value:function(t,e,i,r,n,a,o){var s=i[r+0],u=i[r+1],h=i[r+2],l=i[r+3],c=n[a+0],p=n[a+1],d=n[a+2],f=n[a+3];l===f&&s===c&&u===p&&h===d||(i=1-o,n=0<=(r=s*c+u*p+h*d+l*f)?1:-1,(a=1-r*r)>Number.EPSILON&&(a=Math.sqrt(a),r=Math.atan2(a,r*n),i=Math.sin(i*r)/a,o=Math.sin(o*r)/a),s=s*i+c*(n=o*n),u=u*i+p*n,h=h*i+d*n,l=l*i+f*n,i===1-o&&(s*=o=1/Math.sqrt(s*s+u*u+h*h+l*l),u*=o,h*=o,l*=o)),t[e]=s,t[e+1]=u,t[e+2]=h,t[e+3]=l}},{key:"multiplyQuaternionsFlat",value:function(t,e,i,r,n,a){var o=i[r],s=i[r+1],u=i[r+2],h=i[r+3],l=n[a],i=n[a+1],r=n[a+2],a=n[a+3];return t[e]=o*a+h*l+s*r-u*i,t[e+1]=s*a+h*i+u*l-o*r,t[e+2]=u*a+h*r+o*i-s*l,t[e+3]=h*a-o*l-s*i-u*r,t}}]),n}();i.Quaternion=$e;var ti=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;B(this,r),Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=i}return m(r,[{key:"set",value:function(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler,this.applyQuaternion(ii.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(ii.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,i=this.y,r=this.z,t=t.elements;return this.x=t[0]*e+t[3]*i+t[6]*r,this.y=t[1]*e+t[4]*i+t[7]*r,this.z=t[2]*e+t[5]*i+t[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.elements,t=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*t,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*t,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*t,this}},{key:"applyQuaternion",value:function(t){var e=this.x,i=this.y,r=this.z,n=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*r-o*i,h=s*i+o*e-n*r,t=s*r+n*i-a*e,r=-n*e-a*i-o*r;return this.x=u*s+r*-n+h*-o-t*-a,this.y=h*s+r*-a+t*-n-u*-o,this.z=t*s+r*-o+u*-a-h*-n,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,i=this.y,r=this.z,t=t.elements;return this.x=t[0]*e+t[4]*i+t[8]*r,this.y=t[1]*e+t[5]*i+t[9]*r,this.z=t[2]*e+t[6]*i+t[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}},{key:"cross",value:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var i=t.x,r=t.y,n=t.z,a=e.x,t=e.y,e=e.z;return this.x=r*e-n*t,this.y=n*a-i*e,this.z=i*t-r*a,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);e=t.dot(this)/e;return this.copy(t).multiplyScalar(e)}},{key:"projectOnPlane",value:function(t){return ei.copy(this).projectOnVector(t),this.sub(ei)}},{key:"reflect",value:function(t){return this.sub(ei.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;e=this.dot(t)/e;return Math.acos(He.clamp(e,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y,t=this.z-t.z;return e*e+i*i+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,i){var r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t,e){return this.x=t[e=void 0===e?0:e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}]),r}(),ei=new(i.Vector3=ti),ii=new $e,ri=function(){function i(t,e){B(this,i),Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new ti(1/0,1/0,1/0),this.max=void 0!==e?e:new ti(-1/0,-1/0,-1/0)}return m(i,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var h=t[s],l=t[s+1],c=t[s+2];h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),a<l&&(a=l),o<c&&(o=c)}return this.min.set(e,i,r),this.max.set(n,a,o),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var h=t.getX(s),l=t.getY(s),c=t.getZ(s);h<e&&(e=h),l<i&&(i=l),c<r&&(r=c),n<h&&(n=h),a<l&&(a=l),o<c&&(o=c)}return this.min.set(e,i,r),this.max.set(n,a,o),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){e=oi.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this}},{key:"setFromObject",value:function(t){return this.makeEmpty(),this.expandByObject(t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return void 0===t&&(t=new ti),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return void 0===t&&(t=new ti),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),si.copy(e.boundingBox),si.applyMatrix4(t.matrixWorld),this.union(si));for(var i=t.children,r=0,n=i.length;r<n;r++)this.expandByObject(i[r]);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return(e=void 0===e?new ti:e).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,oi),oi.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,i=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x);return 0<t.normal.y?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}},{key:"intersectsTriangle",value:function(t){return!this.isEmpty()&&(this.getCenter(fi),mi.subVectors(this.max,fi),ui.subVectors(t.a,fi),hi.subVectors(t.b,fi),li.subVectors(t.c,fi),ci.subVectors(hi,ui),pi.subVectors(li,hi),di.subVectors(ui,li),!!ni([0,-ci.z,ci.y,0,-pi.z,pi.y,0,-di.z,di.y,ci.z,0,-ci.x,pi.z,0,-pi.x,di.z,0,-di.x,-ci.y,ci.x,0,-pi.y,pi.x,0,-di.y,di.x,0],ui,hi,li,mi)&&(!!ni([1,0,0,0,1,0,0,0,1],ui,hi,li,mi)&&(vi.crossVectors(ci,pi),ni([vi.x,vi.y,vi.z],ui,hi,li,mi))))}},{key:"clampPoint",value:function(t,e){return(e=void 0===e?new ti:e).copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return oi.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(oi).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(ai[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ai[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ai[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ai[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ai[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ai[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ai[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ai[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ai)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),i}();function ni(t,e,i,r,n){for(var a=0,o=t.length-3;a<=o;a+=3){gi.fromArray(t,a);var s=n.x*Math.abs(gi.x)+n.y*Math.abs(gi.y)+n.z*Math.abs(gi.z),u=e.dot(gi),h=i.dot(gi),l=r.dot(gi);if(Math.max(-Math.max(u,h,l),Math.min(u,h,l))>s)return!1}return!0}i.Box3=ri;var ai=[new ti,new ti,new ti,new ti,new ti,new ti,new ti,new ti],oi=new ti,si=new ri,ui=new ti,hi=new ti,li=new ti,ci=new ti,pi=new ti,di=new ti,fi=new ti,mi=new ti,vi=new ti,gi=new ti,_i=new ri,yi=function(){function i(t,e){B(this,i),this.center=void 0!==t?t:new ti,this.radius=void 0!==e?e:-1}return m(i,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var i=this.center;void 0!==e?i.copy(e):_i.setFromPoints(t).getCenter(i);for(var r=0,n=0,a=t.length;n<a;n++)r=Math.max(r,i.distanceToSquared(t[n]));return this.radius=Math.sqrt(r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var i=this.center.distanceToSquared(t);return(e=void 0===e?new ti:e).copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return void 0===t&&(t=new ri),this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}]),i}();i.Sphere=yi;var xi=new ti,bi=new ti,Ti=new ti,Ei=new ti,Si=new ti,Mi=new ti,Ai=new ti,wi=function(){function i(t,e){B(this,i),this.origin=void 0!==t?t:new ti,this.direction=void 0!==e?e:new ti(0,0,-1)}return m(i,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return(e=void 0===e?new ti:e).copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,xi)),this}},{key:"closestPointToPoint",value:function(t,e){(e=void 0===e?new ti:e).subVectors(t,this.origin);t=e.dot(this.direction);return t<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=xi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(xi.copy(this.direction).multiplyScalar(e).add(this.origin),xi.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,i,r){bi.copy(t).add(e).multiplyScalar(.5),Ti.copy(e).sub(t).normalize(),Ei.copy(this.origin).sub(bi);var n,a,o=.5*t.distanceTo(e),s=-this.direction.dot(Ti),u=Ei.dot(this.direction),h=-Ei.dot(Ti),l=Ei.lengthSq(),t=Math.abs(1-s*s);return l=0<t?(a=s*u-h,e=o*t,0<=(n=s*h-u)?-e<=a?a<=e?(n*=t=1/t)*(n+s*(a*=t)+2*u)+a*(s*n+a+2*h)+l:(a=o,-(n=Math.max(0,-(s*a+u)))*n+a*(a+2*h)+l):(a=-o,-(n=Math.max(0,-(s*a+u)))*n+a*(a+2*h)+l):a<=-e?-(n=Math.max(0,-(-s*o+u)))*n+(a=0<n?-o:Math.min(Math.max(-o,-h),o))*(a+2*h)+l:a<=e?(n=0,(a=Math.min(Math.max(-o,-h),o))*(a+2*h)+l):-(n=Math.max(0,-(s*o+u)))*n+(a=0<n?o:Math.min(Math.max(-o,-h),o))*(a+2*h)+l):(a=0<s?-o:o,-(n=Math.max(0,-(s*a+u)))*n+a*(a+2*h)+l),i&&i.copy(this.direction).multiplyScalar(n).add(this.origin),r&&r.copy(Ti).multiplyScalar(a).add(bi),l}},{key:"intersectSphere",value:function(t,e){xi.subVectors(t.center,this.origin);var i=xi.dot(this.direction),r=xi.dot(xi)-i*i,t=t.radius*t.radius;if(t<r)return null;t=Math.sqrt(t-r),r=i-t,t=i+t;return r<0&&t<0?null:r<0?this.at(t,e):this.at(r,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;e=-(this.origin.dot(t.normal)+t.constant)/e;return 0<=e?e:null}},{key:"intersectPlane",value:function(t,e){t=this.distanceToPlane(t);return null===t?null:this.at(t,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var i,r,n,a=1/this.direction.x,o=1/this.direction.y,s=1/this.direction.z,u=this.origin,a=0<=a?(i=(t.min.x-u.x)*a,(t.max.x-u.x)*a):(i=(t.max.x-u.x)*a,(t.min.x-u.x)*a),o=0<=o?(r=(t.min.y-u.y)*o,(t.max.y-u.y)*o):(r=(t.max.y-u.y)*o,(t.min.y-u.y)*o);return o<i||a<r?null:((i<r||i!=i)&&(i=r),(o<a||a!=a)&&(a=o),(s=0<=s?(n=(t.min.z-u.z)*s,(t.max.z-u.z)*s):(n=(t.max.z-u.z)*s,(t.min.z-u.z)*s))<i||a<n?null:((i<n||i!=i)&&(i=n),(a=s<a||a!=a?s:a)<0?null:this.at(0<=i?i:a,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,xi)}},{key:"intersectTriangle",value:function(t,e,i,r,n){Si.subVectors(e,t),Mi.subVectors(i,t),Ai.crossVectors(Si,Mi);i=this.direction.dot(Ai);if(0<i){if(r)return null;a=1}else{if(!(i<0))return null;a=-1,i=-i}Ei.subVectors(this.origin,t);r=a*this.direction.dot(Mi.crossVectors(Ei,Mi));if(r<0)return null;t=a*this.direction.dot(Si.cross(Ei));if(t<0)return null;if(i<r+t)return null;var a=-a*Ei.dot(Ai);return a<0?null:this.at(a/i,n)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}]),i}();i.Ray=wi;var Di=function(){function t(){B(this,t),Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return m(t,[{key:"set",value:function(t,e,i,r,n,a,o,s,u,h,l,c,p,d,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=r,v[1]=n,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=h,v[10]=l,v[14]=c,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,t=t.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,t=t.elements;return e[12]=t[12],e[13]=t[13],e[14]=t[14],this}},{key:"extractBasis",value:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,i=t.elements,r=1/Ri.setFromMatrixColumn(t,0).length(),n=1/Ri.setFromMatrixColumn(t,1).length(),t=1/Ri.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*t,e[9]=i[9]*t,e[10]=i[10]*t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler;var e,i,r,n,a,o,s,u,h,l,c,p=this.elements,d=t.x,f=t.y,m=t.z,v=Math.cos(d),g=Math.sin(d),_=Math.cos(f),y=Math.sin(f),d=Math.cos(m),f=Math.sin(m);return"XYZ"===t.order?(e=v*d,r=v*f,i=g*d,m=g*f,p[0]=_*d,p[4]=-_*f,p[8]=y,p[1]=r+i*y,p[5]=e-m*y,p[9]=-g*_,p[2]=m-e*y,p[6]=i+r*y,p[10]=v*_):"YXZ"===t.order?(e=_*f,i=y*d,p[0]=(n=_*d)+(r=y*f)*g,p[4]=i*g-e,p[8]=v*y,p[1]=v*f,p[5]=v*d,p[9]=-g,p[2]=e*g-i,p[6]=r+n*g,p[10]=v*_):"ZXY"===t.order?(n=_*f,a=y*d,p[0]=(s=_*d)-(o=y*f)*g,p[4]=-v*f,p[8]=a+n*g,p[1]=n+a*g,p[5]=v*d,p[9]=o-s*g,p[2]=-v*y,p[6]=g,p[10]=v*_):"ZYX"===t.order?(a=v*d,o=v*f,u=g*d,s=g*f,p[0]=_*d,p[4]=u*y-o,p[8]=a*y+s,p[1]=_*f,p[5]=s*y+a,p[9]=o*y-u,p[2]=-y,p[6]=g*_,p[10]=v*_):"YZX"===t.order?(l=v*_,u=v*y,h=g*_,c=g*y,p[0]=_*d,p[4]=c-l*f,p[8]=h*f+u,p[1]=f,p[5]=v*d,p[9]=-g*d,p[2]=-y*d,p[6]=u*f+h,p[10]=l-c*f):"XZY"===t.order&&(h=v*_,l=v*y,c=g*_,t=g*y,p[0]=_*d,p[4]=-f,p[8]=y*d,p[1]=h*f+t,p[5]=v*d,p[9]=l*f-c,p[2]=c*f-l,p[6]=g*d,p[10]=t*f+h),p[3]=0,p[7]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(Pi,t,Ci)}},{key:"lookAt",value:function(t,e,i){var r=this.elements;return Ni.subVectors(t,e),0===Ni.lengthSq()&&(Ni.z=1),Ni.normalize(),Ii.crossVectors(i,Ni),0===Ii.lengthSq()&&(1===Math.abs(i.z)?Ni.x+=1e-4:Ni.z+=1e-4,Ni.normalize(),Ii.crossVectors(i,Ni)),Ii.normalize(),Li.crossVectors(Ni,Ii),r[0]=Ii.x,r[4]=Li.x,r[8]=Ni.x,r[1]=Ii.y,r[5]=Li.y,r[9]=Ni.y,r[2]=Ii.z,r[6]=Li.z,r[10]=Ni.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var i=t.elements,r=e.elements,n=this.elements,a=i[0],o=i[4],s=i[8],u=i[12],h=i[1],l=i[5],c=i[9],p=i[13],d=i[2],f=i[6],m=i[10],v=i[14],g=i[3],_=i[7],y=i[11],x=i[15],b=r[0],T=r[4],E=r[8],S=r[12],M=r[1],A=r[5],w=r[9],D=r[13],R=r[2],O=r[6],P=r[10],C=r[14],t=r[3],e=r[7],i=r[11],r=r[15];return n[0]=a*b+o*M+s*R+u*t,n[4]=a*T+o*A+s*O+u*e,n[8]=a*E+o*w+s*P+u*i,n[12]=a*S+o*D+s*C+u*r,n[1]=h*b+l*M+c*R+p*t,n[5]=h*T+l*A+c*O+p*e,n[9]=h*E+l*w+c*P+p*i,n[13]=h*S+l*D+c*C+p*r,n[2]=d*b+f*M+m*R+v*t,n[6]=d*T+f*A+m*O+v*e,n[10]=d*E+f*w+m*P+v*i,n[14]=d*S+f*D+m*C+v*r,n[3]=g*b+_*M+y*R+x*t,n[7]=g*T+_*A+y*O+x*e,n[11]=g*E+_*w+y*P+x*i,n[15]=g*S+_*D+y*C+x*r,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],a=t[1],o=t[5],s=t[9],u=t[13],h=t[2],l=t[6],c=t[10],p=t[14];return t[3]*(+n*s*l-r*u*l-n*o*c+i*u*c+r*o*p-i*s*p)+t[7]*(+e*s*p-e*u*c+n*a*c-r*a*p+r*u*h-n*s*h)+t[11]*(+e*u*l-e*o*p-n*a*l+i*a*p+n*o*h-i*u*h)+t[15]*(-r*o*h-e*s*l+e*o*c+r*a*l-i*a*c+i*s*h)}},{key:"transpose",value:function(){var t=this.elements,e=t[1];return t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(t,e,i){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}},{key:"getInverse",value:function(t,e){var i=this.elements,r=t.elements,n=r[0],a=r[1],o=r[2],s=r[3],u=r[4],h=r[5],l=r[6],c=r[7],p=r[8],d=r[9],f=r[10],m=r[11],v=r[12],g=r[13],_=r[14],y=r[15],x=d*_*c-g*f*c+g*l*m-h*_*m-d*l*y+h*f*y,b=v*f*c-p*_*c-v*l*m+u*_*m+p*l*y-u*f*y,T=p*g*c-v*d*c+v*h*m-u*g*m-p*h*y+u*d*y,t=v*d*l-p*g*l-v*h*f+u*g*f+p*h*_-u*d*_,r=n*x+a*b+o*T+s*t;if(0==r)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);r=1/r;return i[0]=x*r,i[1]=(g*f*s-d*_*s-g*o*m+a*_*m+d*o*y-a*f*y)*r,i[2]=(h*_*s-g*l*s+g*o*c-a*_*c-h*o*y+a*l*y)*r,i[3]=(d*l*s-h*f*s-d*o*c+a*f*c+h*o*m-a*l*m)*r,i[4]=b*r,i[5]=(p*_*s-v*f*s+v*o*m-n*_*m-p*o*y+n*f*y)*r,i[6]=(v*l*s-u*_*s-v*o*c+n*_*c+u*o*y-n*l*y)*r,i[7]=(u*f*s-p*l*s+p*o*c-n*f*c-u*o*m+n*l*m)*r,i[8]=T*r,i[9]=(v*d*s-p*g*s-v*a*m+n*g*m+p*a*y-n*d*y)*r,i[10]=(u*g*s-v*h*s+v*a*c-n*g*c-u*a*y+n*h*y)*r,i[11]=(p*h*s-u*d*s-p*a*c+n*d*c+u*a*m-n*h*m)*r,i[12]=t*r,i[13]=(p*g*o-v*d*o+v*a*f-n*g*f-p*a*_+n*d*_)*r,i[14]=(v*h*o-u*g*o-v*a*l+n*g*l+u*a*_-n*h*_)*r,i[15]=(u*d*o-p*h*o+p*a*l-n*d*l-u*a*f+n*h*f)*r,this}},{key:"scale",value:function(t){var e=this.elements,i=t.x,r=t.y,t=t.z;return e[0]*=i,e[4]*=r,e[8]*=t,e[1]*=i,e[5]*=r,e[9]*=t,e[2]*=i,e[6]*=r,e[10]*=t,e[3]*=i,e[7]*=r,e[11]*=t,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,t))}},{key:"makeTranslation",value:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),t=Math.sin(t);return this.set(1,0,0,0,0,e,-t,0,0,t,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,0,t,0,0,1,0,0,-t,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),t=Math.sin(t);return this.set(e,-t,0,0,t,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var i=Math.cos(e),r=Math.sin(e),n=1-i,a=t.x,o=t.y,s=t.z,e=n*a,t=n*o;return this.set(e*a+i,e*o-r*s,e*s+r*o,0,e*o+r*s,t*o+i,t*s-r*a,0,e*s-r*o,t*s+r*a,n*s*s+i,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,i){var r=this.elements,n=e._x,a=e._y,o=e._z,s=e._w,u=n+n,h=a+a,l=o+o,c=n*u,p=n*h,d=n*l,e=a*h,n=a*l,a=o*l,o=s*u,u=s*h,h=s*l,s=i.x,l=i.y,i=i.z;return r[0]=(1-(e+a))*s,r[1]=(p+h)*s,r[2]=(d-u)*s,r[3]=0,r[4]=(p-h)*l,r[5]=(1-(c+a))*l,r[6]=(n+o)*l,r[7]=0,r[8]=(d+u)*i,r[9]=(n-o)*i,r[10]=(1-(c+e))*i,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}},{key:"decompose",value:function(t,e,i){var r=this.elements,n=Ri.set(r[0],r[1],r[2]).length(),a=Ri.set(r[4],r[5],r[6]).length(),o=Ri.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],Oi.copy(this);var s=1/n,t=1/a,r=1/o;return Oi.elements[0]*=s,Oi.elements[1]*=s,Oi.elements[2]*=s,Oi.elements[4]*=t,Oi.elements[5]*=t,Oi.elements[6]*=t,Oi.elements[8]*=r,Oi.elements[9]*=r,Oi.elements[10]*=r,e.setFromRotationMatrix(Oi),i.x=n,i.y=a,i.z=o,this}},{key:"makePerspective",value:function(t,e,i,r,n,a){var o=this.elements,s=2*n/(i-r),u=(e+t)/(e-t),i=(i+r)/(i-r),r=-(a+n)/(a-n),a=-2*a*n/(a-n);return o[0]=2*n/(e-t),o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=s,o[9]=i,o[13]=0,o[2]=0,o[6]=0,o[10]=r,o[14]=a,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(t,e,i,r,n,a){var o=this.elements,s=1/(e-t),u=1/(i-r),h=1/(a-n),t=(e+t)*s,r=(i+r)*u,n=(a+n)*h;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-t,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-r,o[2]=0,o[6]=0,o[10]=-2*h,o[14]=-n,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,i=t.elements,r=0;r<16;r++)if(e[r]!==i[r])return!1;return!0}},{key:"fromArray",value:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this}},{key:"toArray",value:function(t,e){var i=this.elements;return(t=void 0===t?[]:t)[e=void 0===e?0:e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}]),t}();i.Matrix4=Di;var Ri=new ti,Oi=new Di,Pi=new ti(0,0,0),Ci=new ti(1,1,1),Ii=new ti,Li=new ti,Ni=new ti,Fi=function(){function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:n.DefaultOrder;B(this,n),Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=i,this._order=r}return m(n,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t,e,i){var r=He.clamp,t=t.elements,n=t[0],a=t[4],o=t[8],s=t[1],u=t[5],h=t[9],l=t[2],c=t[6],p=t[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(c,u),this._z=0);break;case"YXZ":this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(o,p),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,n),this._z=0);break;case"ZXY":this._x=Math.asin(r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-l,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,n));break;case"ZYX":this._y=Math.asin(-r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(c,p),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-l,n)):(this._x=0,this._y=Math.atan2(o,p));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(c,u),this._y=Math.atan2(o,n)):(this._x=Math.atan2(-h,p),this._y=0)}return this._order=e,!1!==i&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,i){return Bi.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Bi,e,i)}},{key:"setFromVector3",value:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)}},{key:"reorder",value:function(t){return Ui.setFromEuler(this),this.setFromQuaternion(Ui,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"toVector3",value:function(t){return t?t.set(this._x,this._y,this._z):new ti(this._x,this._y,this._z)}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}]),n}();(i.Euler=Fi).DefaultOrder="XYZ",Fi.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Bi=new Di,Ui=new $e,Gi=function(){function t(){B(this,t),this.mask=1}return m(t,[{key:"set",value:function(t){this.mask=1<<t|0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}}]),t}();i.Layers=Gi;var ki=0,zi=new ti,ji=new $e,Hi=new Di,Vi=new ti,Xi=new ti,Wi=new ti,Yi=new $e,qi=new ti(1,0,0),Zi=new ti(0,1,0),Ji=new ti(0,0,1),Ki={type:"added"},Qi={type:"removed"};function $i(){Object.defineProperty(this,"id",{value:ki++}),this.uuid=He.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=$i.DefaultUp.clone();var t=new ti,e=new Fi,i=new $e,r=new ti(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Di},normalMatrix:{value:new We}}),this.matrix=new Di,this.matrixWorld=new Di,this.matrixAutoUpdate=$i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Gi,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}$i.DefaultUp=new ti(0,1,0),$i.DefaultMatrixAutoUpdate=!0,$i.prototype=Object.assign(Object.create(Ge.prototype),{constructor:$i,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return ji.setFromAxisAngle(t,e),this.quaternion.multiply(ji),this},rotateOnWorldAxis:function(t,e){return ji.setFromAxisAngle(t,e),this.quaternion.premultiply(ji),this},rotateX:function(t){return this.rotateOnAxis(qi,t)},rotateY:function(t){return this.rotateOnAxis(Zi,t)},rotateZ:function(t){return this.rotateOnAxis(Ji,t)},translateOnAxis:function(t,e){return zi.copy(t).applyQuaternion(this.quaternion),this.position.add(zi.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(qi,t)},translateY:function(t){return this.translateOnAxis(Zi,t)},translateZ:function(t){return this.translateOnAxis(Ji,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(Hi.getInverse(this.matrixWorld))},lookAt:function(t,e,i){t.isVector3?Vi.copy(t):Vi.set(t,e,i);i=this.parent;this.updateWorldMatrix(!0,!1),Xi.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Hi.lookAt(Xi,Vi,this.up):Hi.lookAt(Vi,Xi,this.up),this.quaternion.setFromRotationMatrix(Hi),i&&(Hi.extractRotation(i.matrixWorld),ji.setFromRotationMatrix(Hi),this.quaternion.premultiply(ji.inverse()))},add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this||t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),(t.parent=this).children.push(t),t.dispatchEvent(Ki)),this},remove:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Qi)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),Hi.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Hi.multiply(t.parent.matrixWorld)),t.applyMatrix4(Hi),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}},getWorldPosition:function(t){return void 0===t&&(t=new ti),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(t=new $e),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Xi,t,Wi),t},getWorldScale:function(t){return void 0===t&&(t=new ti),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Xi,Yi,t),t},getWorldDirection:function(t){void 0===t&&(t=new ti),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=this.children,i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,n=0,a=r.length;n<a;n++)r[n].updateWorldMatrix(!1,!0)},toJSON:function(i){var t=void 0===i||"string"==typeof i,e={};t&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{}},e.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r,n,a,o={};function s(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(i)),e.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){o.geometry=s(i.geometries,this.geometry);var u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){var h=u.shapes;if(Array.isArray(h))for(var l=0,c=h.length;l<c;l++){var p=h[l];s(i.shapes,p)}else s(i.shapes,h)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var d=[],f=0,m=this.material.length;f<m;f++)d.push(s(i.materials,this.material[f]));o.material=d}else o.material=s(i.materials,this.material);if(0<this.children.length){o.children=[];for(var v=0;v<this.children.length;v++)o.children.push(this.children[v].toJSON(i).object)}return t&&(r=g(i.geometries),n=g(i.materials),a=g(i.textures),u=g(i.images),t=g(i.shapes),0<r.length&&(e.geometries=r),0<n.length&&(e.materials=n),0<a.length&&(e.textures=a),0<u.length&&(e.images=u),0<t.length&&(e.shapes=t)),e.object=o,e;function g(t){var e,i=[];for(e in t){var r=t[e];delete r.metadata,i.push(r)}return i}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var r=t.children[i];this.add(r.clone())}return this}});var tr=new ti,er=new ti,ir=new We,rr=function(){function i(t,e){B(this,i),Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new ti(1,0,0),this.constant=void 0!==e?e:0}return m(i,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,e,i){e=tr.subVectors(i,e).cross(er.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(e,t),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return(e=void 0===e?new ti:e).copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,e){void 0===e&&(e=new ti);var i=t.delta(tr),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;r=-(t.start.dot(this.normal)+this.constant)/r;return r<0||1<r?void 0:e.copy(i).multiplyScalar(r).add(t.start)}},{key:"intersectsLine",value:function(t){var e=this.distanceToPoint(t.start),t=this.distanceToPoint(t.end);return e<0&&0<t||t<0&&0<e}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return(t=void 0===t?new ti:t).copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){e=e||ir.getNormalMatrix(t),t=this.coplanarPoint(tr).applyMatrix4(t),e=this.normal.applyMatrix3(e).normalize();return this.constant=-t.dot(e),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}]),i}();i.Plane=rr;var nr=new ti,ar=new ti,or=new ti,sr=new ti,ur=new ti,hr=new ti,lr=new ti,cr=new ti,pr=new ti,dr=new ti,fr=function(){function a(t,e,i){B(this,a),this.a=void 0!==t?t:new ti,this.b=void 0!==e?e:new ti,this.c=void 0!==i?i:new ti}return m(a,[{key:"set",value:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}},{key:"setFromPointsAndIndices",value:function(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return nr.subVectors(this.c,this.b),ar.subVectors(this.a,this.b),.5*nr.cross(ar).length()}},{key:"getMidpoint",value:function(t){return(t=void 0===t?new ti:t).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return a.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(t){return(t=void 0===t?new rr:t).setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,e){return a.getBarycoord(t,this.a,this.b,this.c,e)}},{key:"getUV",value:function(t,e,i,r,n){return a.getUV(t,this.a,this.b,this.c,e,i,r,n)}},{key:"containsPoint",value:function(t){return a.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return a.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,e){void 0===e&&(e=new ti);var i=this.a,r=this.b,n=this.c;ur.subVectors(r,i),hr.subVectors(n,i),cr.subVectors(t,i);var a=ur.dot(cr),o=hr.dot(cr);if(a<=0&&o<=0)return e.copy(i);pr.subVectors(t,r);var s=ur.dot(pr),u=hr.dot(pr);if(0<=s&&u<=s)return e.copy(r);var h=a*u-s*o;if(h<=0&&0<=a&&s<=0)return c=a/(a-s),e.copy(i).addScaledVector(ur,c);dr.subVectors(t,n);var l=ur.dot(dr),t=hr.dot(dr);if(0<=t&&l<=t)return e.copy(n);a=l*o-a*t;if(a<=0&&0<=o&&t<=0)return p=o/(o-t),e.copy(i).addScaledVector(hr,p);o=s*t-l*u;if(o<=0&&0<=u-s&&0<=l-t)return lr.subVectors(n,r),p=(u-s)/(u-s+(l-t)),e.copy(r).addScaledVector(lr,p);var o=1/(o+a+h),c=a*o,p=h*o;return e.copy(i).addScaledVector(ur,c).addScaledVector(hr,p)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,e,i,r){(r=void 0===r?new ti:r).subVectors(i,e),nr.subVectors(t,e),r.cross(nr);e=r.lengthSq();return 0<e?r.multiplyScalar(1/Math.sqrt(e)):r.set(0,0,0)}},{key:"getBarycoord",value:function(t,e,i,r,n){nr.subVectors(r,e),ar.subVectors(i,e),or.subVectors(t,e);var a=nr.dot(nr),o=nr.dot(ar),r=nr.dot(or),i=ar.dot(ar),t=ar.dot(or),e=a*i-o*o;if(void 0===n&&(n=new ti),0==e)return n.set(-2,-1,-1);e=1/e,i=(i*r-o*t)*e,e*=a*t-o*r;return n.set(1-i-e,e,i)}},{key:"containsPoint",value:function(t,e,i,r){return this.getBarycoord(t,e,i,r,sr),0<=sr.x&&0<=sr.y&&sr.x+sr.y<=1}},{key:"getUV",value:function(t,e,i,r,n,a,o,s){return this.getBarycoord(t,e,i,r,sr),s.set(0,0),s.addScaledVector(n,sr.x),s.addScaledVector(a,sr.y),s.addScaledVector(o,sr.z),s}},{key:"isFrontFacing",value:function(t,e,i,r){return nr.subVectors(i,e),ar.subVectors(t,e),nr.cross(ar).dot(r)<0}}]),a}();i.Triangle=fr;var mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vr={h:0,s:0,l:0},gr={h:0,s:0,l:0};function _r(t,e,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}function yr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function xr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var br=function(){function r(t,e,i){return B(this,r),Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}return m(r,[{key:"set",value:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setRGB",value:function(t,e,i){return this.r=t,this.g=e,this.b=i,this}},{key:"setHSL",value:function(t,e,i){return t=He.euclideanModulo(t,1),e=He.clamp(e,0,1),i=He.clamp(i,0,1),0===e?this.r=this.g=this.b=i:(this.r=_r(e=2*i-(i=i<=.5?i*(1+e):i+e-i*e),i,t+1/3),this.g=_r(e,i,t),this.b=_r(e,i,t-1/3)),this}},{key:"setStyle",value:function(t){function e(t){void 0!==t&&parseFloat(t)}if(u=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=u[1],n=u[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){var a=parseFloat(i[1])/360,o=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(a,o,s)}}}else if(u=/^\#([A-Fa-f0-9]+)$/.exec(t)){var r=u[1],u=r.length;if(3===u)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&0<t.length?this.setColorName(t):this}},{key:"setColorName",value:function(t){t=mr[t];return void 0!==t&&this.setHex(t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copyGammaToLinear",value:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}},{key:"copyLinearToGamma",value:function(t,e){e=0<(e=void 0===e?2:e)?1/e:1;return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}},{key:"convertGammaToLinear",value:function(t){return this.copyGammaToLinear(this,t),this}},{key:"convertLinearToGamma",value:function(t){return this.copyLinearToGamma(this,t),this}},{key:"copySRGBToLinear",value:function(t){return this.r=yr(t.r),this.g=yr(t.g),this.b=yr(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=xr(t.r),this.g=xr(t.g),this.b=xr(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,i=this.r,r=this.g,n=this.b,a=Math.max(i,r,n),o=Math.min(i,r,n),s=(o+a)/2;if(o===a)h=e=0;else{var u=a-o,h=s<=.5?u/(a+o):u/(2-a-o);switch(a){case i:e=(r-n)/u+(r<n?6:0);break;case r:e=(n-i)/u+2;break;case n:e=(i-r)/u+4}e/=6}return t.h=e,t.s=h,t.l=s,t}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(t,e,i){return this.getHSL(vr),vr.h+=t,vr.s+=e,vr.l+=i,this.setHSL(vr.h,vr.s,vr.l),this}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(vr),t.getHSL(gr);var i=He.lerp(vr.h,gr.h,e),t=He.lerp(vr.s,gr.s,e),e=He.lerp(vr.l,gr.l,e);return this.setHSL(i,t,e),this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t,e){return this.r=t[e=void 0===e?0:e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(t,e){return(t=void 0===t?[]:t)[e=void 0===e?0:e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),r}();(i.Color=br).NAMES=mr,br.prototype.r=1,br.prototype.g=1,br.prototype.b=1;var Tr=function(){function o(t,e,i,r,n,a){B(this,o),this.a=t,this.b=e,this.c=i,this.normal=r&&r.isVector3?r:new ti,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new br,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==a?a:0}return m(o,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var r=0,n=t.vertexColors.length;r<n;r++)this.vertexColors[r]=t.vertexColors[r].clone();return this}}]),o}();i.Face3=Tr;var Er=0;function Sr(){Object.defineProperty(this,"id",{value:Er++}),this.uuid=He.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Z,this.side=v,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=ht,this.blendDst=lt,this.blendEquation=tt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=yt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ne,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Le,this.stencilZFail=Le,this.stencilZPass=Le,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Mr(t){Sr.call(this),this.type="MeshBasicMaterial",this.color=new br(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=T,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}Sr.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Sr,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var i,r=t[e];void 0!==r&&("shading"!==e?void 0!==(i=this[e])&&(i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[e]=r):this.flatShading=1===r)}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e,i=[];for(e in t){var r=t[e];delete r.metadata,i.push(r)}return i}return i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Z&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==v&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e&&(e=r(t.textures),t=r(t.images),0<e.length&&(i.textures=e),0<t.length&&(i.images=t)),i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,i=null;if(null!==e)for(var r=e.length,i=new Array(r),n=0;n!==r;++n)i[n]=e[n].clone();return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Sr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),((Mr.prototype=Object.create(Sr.prototype)).constructor=Mr).prototype.isMeshBasicMaterial=!0,Mr.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Ar=new ti,wr=new Ve;function Dr(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=Fe,this.updateRange={offset:0,count:-1},this.version=0}function Rr(t,e,i){Dr.call(this,new Int8Array(t),e,i)}function Or(t,e,i){Dr.call(this,new Uint8Array(t),e,i)}function Pr(t,e,i){Dr.call(this,new Uint8ClampedArray(t),e,i)}function Cr(t,e,i){Dr.call(this,new Int16Array(t),e,i)}function Ir(t,e,i){Dr.call(this,new Uint16Array(t),e,i)}function Lr(t,e,i){Dr.call(this,new Int32Array(t),e,i)}function Nr(t,e,i){Dr.call(this,new Uint32Array(t),e,i)}function Fr(t,e,i){Dr.call(this,new Float32Array(t),e,i)}function Br(t,e,i){Dr.call(this,new Float64Array(t),e,i)}Object.defineProperty(Dr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Dr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var a=t[r];void 0===a&&(a=new br),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var a=t[r];void 0===a&&(a=new Ve),e[i++]=a.x,e[i++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var a=t[r];void 0===a&&(a=new ti),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,r=0,n=t.length;r<n;r++){var a=t[r];void 0===a&&(a=new Je),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z,e[i++]=a.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,i=this.count;e<i;e++)wr.fromBufferAttribute(this,e),wr.applyMatrix3(t),this.setXY(e,wr.x,wr.y);else if(3===this.itemSize)for(var r=0,n=this.count;r<n;r++)Ar.fromBufferAttribute(this,r),Ar.applyMatrix3(t),this.setXYZ(r,Ar.x,Ar.y,Ar.z);return this},applyMatrix4:function(t){for(var e=0,i=this.count;e<i;e++)Ar.x=this.getX(e),Ar.y=this.getY(e),Ar.z=this.getZ(e),Ar.applyMatrix4(t),this.setXYZ(e,Ar.x,Ar.y,Ar.z);return this},applyNormalMatrix:function(t){for(var e=0,i=this.count;e<i;e++)Ar.x=this.getX(e),Ar.y=this.getY(e),Ar.z=this.getZ(e),Ar.applyNormalMatrix(t),this.setXYZ(e,Ar.x,Ar.y,Ar.z);return this},transformDirection:function(t){for(var e=0,i=this.count;e<i;e++)Ar.x=this.getX(e),Ar.y=this.getY(e),Ar.z=this.getZ(e),Ar.transformDirection(t),this.setXYZ(e,Ar.x,Ar.y,Ar.z);return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),(Rr.prototype=Object.create(Dr.prototype)).constructor=Rr,(Or.prototype=Object.create(Dr.prototype)).constructor=Or,(Pr.prototype=Object.create(Dr.prototype)).constructor=Pr,(Cr.prototype=Object.create(Dr.prototype)).constructor=Cr,Ir.prototype=Object.create(Dr.prototype),Ir.prototype.constructor=Ir,(Lr.prototype=Object.create(Dr.prototype)).constructor=Lr,Nr.prototype=Object.create(Dr.prototype),Nr.prototype.constructor=Nr,(Fr.prototype=Object.create(Dr.prototype)).constructor=Fr,(Br.prototype=Object.create(Dr.prototype)).constructor=Br;var Ur=function(){function t(){B(this,t),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return m(t,[{key:"computeGroups",value:function(t){for(var e,i=[],r=void 0,n=t.faces,a=0;a<n.length;a++){var o=n[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,i.push(e)),e={start:3*a,materialIndex:r})}void 0!==e&&(e.count=3*a-e.start,i.push(e)),this.groups=i}},{key:"fromGeometry",value:function(t){var e=t.faces,i=t.vertices,r=t.faceVertexUvs,n=r[0]&&0<r[0].length,a=r[1]&&0<r[1].length,o=t.morphTargets,s=o.length;if(0<s){for(var u=[],h=0;h<s;h++)u[h]={name:o[h].name,data:[]};this.morphTargets.position=u}var l=t.morphNormals,c=l.length;if(0<c){for(var p=[],d=0;d<c;d++)p[d]={name:l[d].name,data:[]};this.morphTargets.normal=p}var f=t.skinIndices,m=t.skinWeights,v=f.length===i.length,g=m.length===i.length;0<i.length&&e.length;for(var _=0;_<e.length;_++){var y=e[_];this.vertices.push(i[y.a],i[y.b],i[y.c]);var x=y.vertexNormals;3===x.length?this.normals.push(x[0],x[1],x[2]):(T=y.normal,this.normals.push(T,T,T));var b,T=y.vertexColors;3===T.length?this.colors.push(T[0],T[1],T[2]):(T=y.color,this.colors.push(T,T,T)),!0===n&&(void 0!==(b=r[0][_])?this.uvs.push(b[0],b[1],b[2]):this.uvs.push(new Ve,new Ve,new Ve)),!0===a&&(void 0!==(b=r[1][_])?this.uvs2.push(b[0],b[1],b[2]):this.uvs2.push(new Ve,new Ve,new Ve));for(var E=0;E<s;E++){var S=o[E].vertices;u[E].data.push(S[y.a],S[y.b],S[y.c])}for(var M=0;M<c;M++){var A=l[M].vertexNormals[_];p[M].data.push(A.a,A.b,A.c)}v&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}}]),t}();function Gr(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,r=t.length;i<r;++i)t[i]>e&&(e=t[i]);return e}var kr=1,zr=new Di,jr=new $i,Hr=new ti,Vr=new ri,Xr=new ri,Wr=new ti;function Yr(){Object.defineProperty(this,"id",{value:kr+=2}),this.uuid=He.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Yr.prototype=Object.assign(Object.create(Ge.prototype),{constructor:Yr,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(65535<Gr(t)?Nr:Ir)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&(e=(new We).getNormalMatrix(t),i.applyNormalMatrix(e),i.needsUpdate=!0);i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return zr.makeRotationX(t),this.applyMatrix4(zr),this},rotateY:function(t){return zr.makeRotationY(t),this.applyMatrix4(zr),this},rotateZ:function(t){return zr.makeRotationZ(t),this.applyMatrix4(zr),this},translate:function(t,e,i){return zr.makeTranslation(t,e,i),this.applyMatrix4(zr),this},scale:function(t,e,i){return zr.makeScale(t,e,i),this.applyMatrix4(zr),this},lookAt:function(t){return jr.lookAt(t),jr.updateMatrix(),this.applyMatrix4(jr.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hr).negate(),this.translate(Hr.x,Hr.y,Hr.z),this},setFromObject:function(t){var e,i,r=t.geometry;return t.isPoints||t.isLine?(e=new Fr(3*r.vertices.length,3),i=new Fr(3*r.colors.length,3),this.setAttribute("position",e.copyVector3sArray(r.vertices)),this.setAttribute("color",i.copyColorsArray(r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length&&(i=new Fr(r.lineDistances.length,1),this.setAttribute("lineDistance",i.copyArray(r.lineDistances))),null!==r.boundingSphere&&(this.boundingSphere=r.boundingSphere.clone()),null!==r.boundingBox&&(this.boundingBox=r.boundingBox.clone())):t.isMesh&&r&&r.isGeometry&&this.fromGeometry(r),this},setFromPoints:function(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Fr(e,3)),this},updateFromObject:function(t){var e,i,r=t.geometry;if(t.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(n=this.attributes.position)&&(n.copyVector3sArray(r.vertices),n.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(r.normals),e.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(r.colors),e.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(r.uvs),i.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(r.lineDistances),i.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(t.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Ur).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e,i,r,n,a=new Float32Array(3*t.vertices.length);for(r in this.setAttribute("position",new Dr(a,3).copyVector3sArray(t.vertices)),0<t.normals.length&&(e=new Float32Array(3*t.normals.length),this.setAttribute("normal",new Dr(e,3).copyVector3sArray(t.normals))),0<t.colors.length&&(e=new Float32Array(3*t.colors.length),this.setAttribute("color",new Dr(e,3).copyColorsArray(t.colors))),0<t.uvs.length&&(i=new Float32Array(2*t.uvs.length),this.setAttribute("uv",new Dr(i,2).copyVector2sArray(t.uvs))),0<t.uvs2.length&&(i=new Float32Array(2*t.uvs2.length),this.setAttribute("uv2",new Dr(i,2).copyVector2sArray(t.uvs2))),this.groups=t.groups,t.morphTargets){for(var o=[],s=t.morphTargets[r],u=0,h=s.length;u<h;u++){var l=s[u],c=new Fr(3*l.data.length,3);c.name=l.name,o.push(c.copyVector3sArray(l.data))}this.morphAttributes[r]=o}return 0<t.skinIndices.length&&(n=new Fr(4*t.skinIndices.length,4),this.setAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))),0<t.skinWeights.length&&(n=new Fr(4*t.skinWeights.length,4),this.setAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ri);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new ti(-1/0,-1/0,-1/0),new ti(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var n=e[i];Vr.setFromBufferAttribute(n),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,Vr.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,Vr.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(Vr.min),this.boundingBox.expandByPoint(Vr.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new yi);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new ti,1/0);else if(t){var i=this.boundingSphere.center;if(Vr.setFromBufferAttribute(t),e)for(var r=0,n=e.length;r<n;r++){var a=e[r];Xr.setFromBufferAttribute(a),this.morphTargetsRelative?(Wr.addVectors(Vr.min,Xr.min),Vr.expandByPoint(Wr),Wr.addVectors(Vr.max,Xr.max),Vr.expandByPoint(Wr)):(Vr.expandByPoint(Xr.min),Vr.expandByPoint(Xr.max))}Vr.getCenter(i);for(var o=0,s=0,u=t.count;s<u;s++)Wr.fromBufferAttribute(t,s),o=Math.max(o,i.distanceToSquared(Wr));if(e)for(var h=0,l=e.length;h<l;h++)for(var c=e[h],p=this.morphTargetsRelative,d=0,f=c.count;d<f;d++)Wr.fromBufferAttribute(c,d),p&&(Hr.fromBufferAttribute(t,d),Wr.add(Hr)),o=Math.max(o,i.distanceToSquared(Wr));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var i=this.getAttribute("normal");if(void 0===i)i=new Dr(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(var r=0,n=i.count;r<n;r++)i.setXYZ(r,0,0,0);var a=new ti,o=new ti,s=new ti,u=new ti,h=new ti,l=new ti,c=new ti,p=new ti;if(t)for(var d=0,f=t.count;d<f;d+=3){var m=t.getX(d+0),v=t.getX(d+1),g=t.getX(d+2);a.fromBufferAttribute(e,m),o.fromBufferAttribute(e,v),s.fromBufferAttribute(e,g),c.subVectors(s,o),p.subVectors(a,o),c.cross(p),u.fromBufferAttribute(i,m),h.fromBufferAttribute(i,v),l.fromBufferAttribute(i,g),u.add(c),h.add(c),l.add(c),i.setXYZ(m,u.x,u.y,u.z),i.setXYZ(v,h.x,h.y,h.z),i.setXYZ(g,l.x,l.y,l.z)}else for(var _=0,y=e.count;_<y;_+=3)a.fromBufferAttribute(e,_+0),o.fromBufferAttribute(e,_+1),s.fromBufferAttribute(e,_+2),c.subVectors(s,o),p.subVectors(a,o),c.cross(p),i.setXYZ(_+0,c.x,c.y,c.z),i.setXYZ(_+1,c.x,c.y,c.z),i.setXYZ(_+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0);var i,r=this.attributes;for(i in r)if(void 0!==t.attributes[i])for(var n=r[i].array,a=t.attributes[i],o=a.array,a=a.itemSize*e,s=Math.min(o.length,n.length-a),u=0,h=a;u<s;u++,h++)n[h]=o[u];return this}},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,i=t.count;e<i;e++)Wr.fromBufferAttribute(t,e),Wr.normalize(),t.setXYZ(e,Wr.x,Wr.y,Wr.z)},toNonIndexed:function(){function t(t,e){for(var i=t.array,r=t.itemSize,t=t.normalized,n=new i.constructor(e.length*r),a=0,o=0,s=0,u=e.length;s<u;s++)for(var a=e[s]*r,h=0;h<r;h++)n[o++]=i[a++];return new Dr(n,r,t)}if(null===this.index)return this;var e,i=new Yr,r=this.index.array,n=this.attributes;for(e in n){var a=t(n[e],r);i.setAttribute(e,a)}var o,s=this.morphAttributes;for(o in s){for(var u=[],h=s[o],l=0,c=h.length;l<c;l++){var p=t(h[l],r);u.push(p)}i.morphAttributes[o]=u}i.morphTargetsRelative=this.morphTargetsRelative;for(var d=this.groups,f=0,m=d.length;f<m;f++){var v=d[f];i.addGroup(v.start,v.count,v.materialIndex)}return i},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),0<Object.keys(this.userData).length&&(t.userData=this.userData),void 0!==this.parameters){var e,i=this.parameters;for(e in i)void 0!==i[e]&&(t[e]=i[e]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var n,a=this.attributes;for(n in a){var o=a[n],s=o.toJSON(t.data);""!==o.name&&(s.name=o.name),t.data.attributes[n]=s}var u,h={},l=!1;for(u in this.morphAttributes){for(var c=this.morphAttributes[u],p=[],d=0,f=c.length;d<f;d++){var m=c[d],v=m.toJSON(t.data);""!==m.name&&(v.name=m.name),p.push(v)}0<p.length&&(h[u]=p,l=!0)}l&&(t.data.morphAttributes=h,t.data.morphTargetsRelative=this.morphTargetsRelative);r=this.groups;0<r.length&&(t.data.groups=JSON.parse(JSON.stringify(r)));r=this.boundingSphere;return null!==r&&(t.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),t},clone:function(){return(new Yr).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone(e));var r,n=t.attributes;for(r in n){var a=n[r];this.setAttribute(r,a.clone(e))}var o,s=t.morphAttributes;for(o in s){for(var u=[],h=s[o],l=0,c=h.length;l<c;l++)u.push(h[l].clone(e));this.morphAttributes[o]=u}this.morphTargetsRelative=t.morphTargetsRelative;for(var p=t.groups,d=0,f=p.length;d<f;d++){var m=p[d];this.addGroup(m.start,m.count,m.materialIndex)}i=t.boundingBox;null!==i&&(this.boundingBox=i.clone());i=t.boundingSphere;return null!==i&&(this.boundingSphere=i.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var qr=new Di,Zr=new wi,Jr=new yi,Kr=new ti,Qr=new ti,$r=new ti,tn=new ti,en=new ti,rn=new ti,nn=new ti,an=new ti,on=new ti,sn=new Ve,un=new Ve,hn=new Ve,ln=new ti,cn=new ti;function pn(t,e){$i.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Yr,this.material=void 0!==e?e:new Mr,this.updateMorphTargets()}function dn(t,e,i,r,n,a,o,s){e=e.side===W?r.intersectTriangle(o,a,n,!0,s):r.intersectTriangle(n,a,o,e.side!==Y,s);if(null===e)return null;cn.copy(s),cn.applyMatrix4(t.matrixWorld);s=i.ray.origin.distanceTo(cn);return s<i.near||s>i.far?null:{distance:s,point:cn.clone(),object:t}}function fn(t,e,i,r,n,a,o,s,u,h,l,c){Kr.fromBufferAttribute(n,h),Qr.fromBufferAttribute(n,l),$r.fromBufferAttribute(n,c);var p=t.morphTargetInfluences;if(e.morphTargets&&a&&p){nn.set(0,0,0),an.set(0,0,0),on.set(0,0,0);for(var d=0,f=a.length;d<f;d++){var m=p[d],v=a[d];0!==m&&(tn.fromBufferAttribute(v,h),en.fromBufferAttribute(v,l),rn.fromBufferAttribute(v,c),o?(nn.addScaledVector(tn,m),an.addScaledVector(en,m),on.addScaledVector(rn,m)):(nn.addScaledVector(tn.sub(Kr),m),an.addScaledVector(en.sub(Qr),m),on.addScaledVector(rn.sub($r),m)))}Kr.add(nn),Qr.add(an),$r.add(on)}t.isSkinnedMesh&&(t.boneTransform(h,Kr),t.boneTransform(l,Qr),t.boneTransform(c,$r));r=dn(t,e,i,r,Kr,Qr,$r,ln);return r&&(s&&(sn.fromBufferAttribute(s,h),un.fromBufferAttribute(s,l),hn.fromBufferAttribute(s,c),r.uv=fr.getUV(ln,Kr,Qr,$r,sn,un,hn,new Ve)),u&&(sn.fromBufferAttribute(u,h),un.fromBufferAttribute(u,l),hn.fromBufferAttribute(u,c),r.uv2=fr.getUV(ln,Kr,Qr,$r,sn,un,hn,new Ve)),u=new Tr(h,l,c),fr.getNormal(Kr,Qr,$r,u.normal),r.face=u),r}pn.prototype=Object.assign(Object.create($i.prototype),{constructor:pn,isMesh:!0,copy:function(t){return $i.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,i=Object.keys(e);if(0<i.length){var r=e[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var n=0,a=r.length;n<a;n++){var o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}else{t=t.morphTargets;void 0!==t&&t.length}},raycast:function(t,e){var i=this.geometry,r=this.material,n=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),Jr.copy(i.boundingSphere),Jr.applyMatrix4(n),!1!==t.ray.intersectsSphere(Jr)&&(qr.getInverse(n),Zr.copy(t.ray).applyMatrix4(qr),null===i.boundingBox||!1!==Zr.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var a=i.index,o=i.attributes.position,s=i.morphAttributes.position,u=i.morphTargetsRelative,h=i.attributes.uv,l=i.attributes.uv2,c=i.groups,p=i.drawRange;if(null!==a)if(Array.isArray(r))for(var d=0,f=c.length;d<f;d++)for(var m=c[d],v=r[m.materialIndex],g=Math.max(m.start,p.start),_=Math.min(m.start+m.count,p.start+p.count);g<_;g+=3){var y,x=a.getX(g),b=a.getX(g+1),T=a.getX(g+2);(y=fn(this,v,t,Zr,o,s,u,h,l,x,b,T))&&(y.faceIndex=Math.floor(g/3),y.face.materialIndex=m.materialIndex,e.push(y))}else for(var E=Math.max(0,p.start),S=Math.min(a.count,p.start+p.count);E<S;E+=3){var M=a.getX(E),A=a.getX(E+1),w=a.getX(E+2);(y=fn(this,r,t,Zr,o,s,u,h,l,M,A,w))&&(y.faceIndex=Math.floor(E/3),e.push(y))}else if(void 0!==o)if(Array.isArray(r))for(var D=0,R=c.length;D<R;D++)for(var O=c[D],P=r[O.materialIndex],C=Math.max(O.start,p.start),I=Math.min(O.start+O.count,p.start+p.count);C<I;C+=3)(y=fn(this,P,t,Zr,o,s,u,h,l,C,C+1,C+2))&&(y.faceIndex=Math.floor(C/3),y.face.materialIndex=O.materialIndex,e.push(y));else for(var L=Math.max(0,p.start),N=Math.min(o.count,p.start+p.count);L<N;L+=3)(y=fn(this,r,t,Zr,o,s,u,h,l,L,L+1,L+2))&&(y.faceIndex=Math.floor(L/3),e.push(y))}else if(i.isGeometry){var F,B=Array.isArray(r),U=i.vertices,G=i.faces,i=i.faceVertexUvs[0];0<i.length&&(F=i);for(var k=0,z=G.length;k<z;k++){var j,H,V,X=G[k],W=B?r[X.materialIndex]:r;void 0!==W&&(j=U[X.a],H=U[X.b],V=U[X.c],(y=dn(this,W,t,Zr,j,H,V,ln))&&(F&&F[k]&&(W=F[k],sn.copy(W[0]),un.copy(W[1]),hn.copy(W[2]),y.uv=fr.getUV(ln,j,H,V,sn,un,hn,new Ve)),y.face=X,y.faceIndex=k,e.push(y)))}}}});var mn=0,vn=new Di,gn=new $i,_n=new ti;function yn(){Object.defineProperty(this,"id",{value:mn+=2}),this.uuid=He.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}yn.prototype=Object.assign(Object.create(Ge.prototype),{constructor:yn,isGeometry:!0,applyMatrix4:function(t){for(var e=(new We).getNormalMatrix(t),i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(t);for(var n=0,a=this.faces.length;n<a;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var s=0,u=o.vertexNormals.length;s<u;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return vn.makeRotationX(t),this.applyMatrix4(vn),this},rotateY:function(t){return vn.makeRotationY(t),this.applyMatrix4(vn),this},rotateZ:function(t){return vn.makeRotationZ(t),this.applyMatrix4(vn),this},translate:function(t,e,i){return vn.makeTranslation(t,e,i),this.applyMatrix4(vn),this},scale:function(t,e,i){return vn.makeScale(t,e,i),this.applyMatrix4(vn),this},lookAt:function(t){return gn.lookAt(t),gn.updateMatrix(),this.applyMatrix4(gn.matrix),this},fromBufferGeometry:function(t){var o=this,e=null!==t.index?t.index:void 0,i=t.attributes;if(void 0===i.position)return this;var r=i.position,s=i.normal,u=i.color,h=i.uv,l=i.uv2;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var n=0;n<r.count;n++)o.vertices.push((new ti).fromBufferAttribute(r,n)),void 0!==u&&o.colors.push((new br).fromBufferAttribute(u,n));function a(t,e,i,r){var n=void 0===u?[]:[o.colors[t].clone(),o.colors[e].clone(),o.colors[i].clone()],a=void 0===s?[]:[(new ti).fromBufferAttribute(s,t),(new ti).fromBufferAttribute(s,e),(new ti).fromBufferAttribute(s,i)],r=new Tr(t,e,i,a,n,r);o.faces.push(r),void 0!==h&&o.faceVertexUvs[0].push([(new Ve).fromBufferAttribute(h,t),(new Ve).fromBufferAttribute(h,e),(new Ve).fromBufferAttribute(h,i)]),void 0!==l&&o.faceVertexUvs[1].push([(new Ve).fromBufferAttribute(l,t),(new Ve).fromBufferAttribute(l,e),(new Ve).fromBufferAttribute(l,i)])}var c=t.groups;if(0<c.length)for(var p=0;p<c.length;p++)for(var d=c[p],f=d.start,m=f,v=f+d.count;m<v;m+=3)void 0!==e?a(e.getX(m),e.getX(m+1),e.getX(m+2),d.materialIndex):a(m,m+1,m+2,d.materialIndex);else if(void 0!==e)for(var g=0;g<e.count;g+=3)a(e.getX(g),e.getX(g+1),e.getX(g+2));else for(var _=0;_<r.count;_+=3)a(_,_+1,_+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_n).negate(),this.translate(_n.x,_n.y,_n.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,e=new Di;return e.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix4(e),this},computeFaceNormals:function(){for(var t=new ti,e=new ti,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),n.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=new Array(this.vertices.length),i=0,r=this.vertices.length;i<r;i++)e[i]=new ti;if(t)for(var n=new ti,a=new ti,o=0,s=this.faces.length;o<s;o++){var u=this.faces[o],h=this.vertices[u.a],l=this.vertices[u.b],c=this.vertices[u.c];n.subVectors(c,l),a.subVectors(h,l),n.cross(a),e[u.a].add(n),e[u.b].add(n),e[u.c].add(n)}else{this.computeFaceNormals();for(var p=0,d=this.faces.length;p<d;p++){var f=this.faces[p];e[f.a].add(f.normal),e[f.b].add(f.normal),e[f.c].add(f.normal)}}for(var m=0,v=this.vertices.length;m<v;m++)e[m].normalize();for(var g=0,_=this.faces.length;g<_;g++){var y=this.faces[g],x=y.vertexNormals;3===x.length?(x[0].copy(e[y.a]),x[1].copy(e[y.b]),x[2].copy(e[y.c])):(x[0]=e[y.a].clone(),x[1]=e[y.b].clone(),x[2]=e[y.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var i=this.faces[t],r=i.vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(var r=0,n=i.vertexNormals.length;r<n;r++)i.__originalVertexNormals[r]?i.__originalVertexNormals[r].copy(i.vertexNormals[r]):i.__originalVertexNormals[r]=i.vertexNormals[r].clone()}var a=new yn;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var u=this.morphNormals[o].faceNormals,h=this.morphNormals[o].vertexNormals,l=0,c=this.faces.length;l<c;l++){var p=new ti,d={a:new ti,b:new ti,c:new ti};u.push(p),h.push(d)}}var f=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var m=0,v=this.faces.length;m<v;m++){var g=this.faces[m],_=f.faceNormals[m],y=f.vertexNormals[m];_.copy(g.normal),y.a.copy(g.vertexNormals[0]),y.b.copy(g.vertexNormals[1]),y.c.copy(g.vertexNormals[2])}}for(var x=0,b=this.faces.length;x<b;x++){var T=this.faces[x];T.normal=T.__originalFaceNormal,T.vertexNormals=T.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ri),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new yi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(t&&t.isGeometry){var r,n=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,u=t.faces,h=this.colors,l=t.colors;void 0===i&&(i=0),void 0!==e&&(r=(new We).getNormalMatrix(e));for(var c=0,p=o.length;c<p;c++){var d=o[c].clone();void 0!==e&&d.applyMatrix4(e),a.push(d)}for(var f=0,m=l.length;f<m;f++)h.push(l[f].clone());for(var v=0,g=u.length;v<g;v++){var _=u[v],y=void 0,x=void 0,b=_.vertexNormals,T=_.vertexColors,E=new Tr(_.a+n,_.b+n,_.c+n);E.normal.copy(_.normal),void 0!==r&&E.normal.applyMatrix3(r).normalize();for(var S=0,M=b.length;S<M;S++)y=b[S].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),E.vertexNormals.push(y);E.color.copy(_.color);for(var A=0,w=T.length;A<w;A++)x=T[A],E.vertexColors.push(x.clone());E.materialIndex=_.materialIndex+i,s.push(E)}for(var D=0,R=t.faceVertexUvs.length;D<R;D++){var O=t.faceVertexUvs[D];void 0===this.faceVertexUvs[D]&&(this.faceVertexUvs[D]=[]);for(var P=0,C=O.length;P<C;P++){for(var I=O[P],L=[],N=0,F=I.length;N<F;N++)L.push(I[N].clone());this.faceVertexUvs[D].push(L)}}}},mergeMesh:function(t){t&&t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){for(var t={},e=[],i=[],r=Math.pow(10,4),n=0,a=this.vertices.length;n<a;n++){var o=this.vertices[n],o=Math.round(o.x*r)+"_"+Math.round(o.y*r)+"_"+Math.round(o.z*r);void 0===t[o]?(t[o]=n,e.push(this.vertices[n]),i[n]=e.length-1):i[n]=i[t[o]]}for(var s=[],u=0,h=this.faces.length;u<h;u++){var l=this.faces[u];l.a=i[l.a],l.b=i[l.b],l.c=i[l.c];for(var c=[l.a,l.b,l.c],p=0;p<3;p++)if(c[p]===c[(p+1)%3]){s.push(u);break}}for(var d=s.length-1;0<=d;d--){var f=s[d];this.faces.splice(f,1);for(var m=0,v=this.faceVertexUvs.length;m<v;m++)this.faceVertexUvs[m].splice(f,1)}var g=this.vertices.length-e.length;return this.vertices=e,g},setFromPoints:function(t){this.vertices=[];for(var e=0,i=t.length;e<i;e++){var r=t[e];this.vertices.push(new ti(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,i=0;i<e;i++)t[i]._id=i;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,n,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(r=[]),o&&o.length===e&&(n=[]);for(var s=0;s<e;s++){var u=t[s]._id;r&&r.push(a[u]),n&&n.push(o[u])}r&&(this.faceVertexUvs[0]=r),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e,i=this.parameters;for(e in i)void 0!==i[e]&&(t[e]=i[e]);return t}for(var r=[],n=0;n<this.vertices.length;n++){var a=this.vertices[n];r.push(a.x,a.y,a.z)}for(var o=[],s=[],u={},h=[],l={},c=[],p={},d=0;d<this.faces.length;d++){var f,m=this.faces[d],v=void 0!==this.faceVertexUvs[0][d],g=0<m.normal.length(),_=0<m.vertexNormals.length,y=1!==m.color.r||1!==m.color.g||1!==m.color.b,x=0<m.vertexColors.length;f=b(2,3,v),f=b(f,4,g),f=b(f,5,_),f=b(f,6,y),f=b(f,7,x),o.push(f),o.push(m.a,m.b,m.c),o.push(m.materialIndex),v&&(v=this.faceVertexUvs[0][d],o.push(S(v[0]),S(v[1]),S(v[2]))),g&&o.push(T(m.normal)),_&&(_=m.vertexNormals,o.push(T(_[0]),T(_[1]),T(_[2]))),y&&o.push(E(m.color)),x&&(m=m.vertexColors,o.push(E(m[0]),E(m[1]),E(m[2])))}function b(t,e,i){return i?t|1<<e:t&~(1<<e)}function T(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]||(u[e]=s.length/3,s.push(t.x,t.y,t.z)),u[e]}function E(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==l[e]||(l[e]=h.length,h.push(t.getHex())),l[e]}function S(t){var e=t.x.toString()+t.y.toString();return void 0!==p[e]||(p[e]=c.length/2,c.push(t.x,t.y)),p[e]}return t.data={},t.data.vertices=r,t.data.normals=s,0<h.length&&(t.data.colors=h),0<c.length&&(t.data.uvs=[c]),t.data.faces=o,t},clone:function(){return(new yn).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,i=0,r=e.length;i<r;i++)this.vertices.push(e[i].clone());for(var n=t.colors,a=0,o=n.length;a<o;a++)this.colors.push(n[a].clone());for(var s=t.faces,u=0,h=s.length;u<h;u++)this.faces.push(s[u].clone());for(var l=0,c=t.faceVertexUvs.length;l<c;l++){var p=t.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(var d=0,f=p.length;d<f;d++){for(var m=p[d],v=[],g=0,_=m.length;g<_;g++){var y=m[g];v.push(y.clone())}this.faceVertexUvs[l].push(v)}}for(var x=t.morphTargets,b=0,T=x.length;b<T;b++){var E={};if(E.name=x[b].name,void 0!==x[b].vertices){E.vertices=[];for(var S=0,M=x[b].vertices.length;S<M;S++)E.vertices.push(x[b].vertices[S].clone())}if(void 0!==x[b].normals){E.normals=[];for(var A=0,w=x[b].normals.length;A<w;A++)E.normals.push(x[b].normals[A].clone())}this.morphTargets.push(E)}for(var D=t.morphNormals,R=0,O=D.length;R<O;R++){var P={};if(void 0!==D[R].vertexNormals){P.vertexNormals=[];for(var C=0,I=D[R].vertexNormals.length;C<I;C++){var L=D[R].vertexNormals[C],N={};N.a=L.a.clone(),N.b=L.b.clone(),N.c=L.c.clone(),P.vertexNormals.push(N)}}if(void 0!==D[R].faceNormals){P.faceNormals=[];for(var F=0,B=D[R].faceNormals.length;F<B;F++)P.faceNormals.push(D[R].faceNormals[F].clone())}this.morphNormals.push(P)}for(var U=t.skinWeights,G=0,k=U.length;G<k;G++)this.skinWeights.push(U[G].clone());for(var z=t.skinIndices,j=0,H=z.length;j<H;j++)this.skinIndices.push(z[j].clone());for(var V=t.lineDistances,X=0,W=V.length;X<W;X++)this.lineDistances.push(V[X]);var Y=t.boundingBox;null!==Y&&(this.boundingBox=Y.clone());Y=t.boundingSphere;return null!==Y&&(this.boundingSphere=Y.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var xn=function(){p(u,yn);var s=_(u);function u(t,e,i,r,n,a){var o;return B(this,u),(o=s.call(this)).type="BoxGeometry",o.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:n,depthSegments:a},o.fromBufferGeometry(new bn(t,e,i,r,n,a)),o.mergeVertices(),o}return u}();i.CubeGeometry=i.BoxGeometry=xn;var bn=function(){p(h,Yr);var u=_(h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1;B(this,h),(t=u.call(this)).type="BoxBufferGeometry",t.parameters={width:e,height:i,depth:r,widthSegments:n,heightSegments:a,depthSegments:o};var O=l(t),n=Math.floor(n),a=Math.floor(a),o=Math.floor(o),P=[],C=[],I=[],L=[],N=0,F=0;function s(t,e,i,r,n,a,o,s,u,h,l){for(var c=a/u,p=o/h,d=a/2,f=o/2,m=s/2,v=u+1,g=h+1,_=0,y=0,x=new ti,b=0;b<g;b++)for(var T=b*p-f,E=0;E<v;E++)x[t]=(E*c-d)*r,x[e]=T*n,x[i]=m,C.push(x.x,x.y,x.z),x[t]=0,x[e]=0,x[i]=0<s?1:-1,I.push(x.x,x.y,x.z),L.push(E/u),L.push(1-b/h),_+=1;for(var S=0;S<h;S++)for(var M=0;M<u;M++){var A=N+M+v*S,w=N+M+v*(S+1),D=N+(M+1)+v*(S+1),R=N+(M+1)+v*S;P.push(A,w,R),P.push(w,D,R),y+=6}O.addGroup(F,y,l),F+=y,N+=_}return s("z","y","x",-1,-1,r,i,e,o,a,0),s("z","y","x",1,-1,r,i,-e,o,a,1),s("x","z","y",1,1,e,r,i,n,o,2),s("x","z","y",1,-1,e,r,-i,n,o,3),s("x","y","z",1,-1,e,i,r,n,a,4),s("x","y","z",-1,-1,e,i,-r,n,a,5),t.setIndex(P),t.setAttribute("position",new Fr(C,3)),t.setAttribute("normal",new Fr(I,3)),t.setAttribute("uv",new Fr(L,2)),t}return h}();function Tn(t){var e,i={};for(e in t)for(var r in i[e]={},t[e]){var n=t[e][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?i[e][r]=n.clone():Array.isArray(n)?i[e][r]=n.slice():i[e][r]=n}return i}function En(t){for(var e={},i=0;i<t.length;i++){var r,n=Tn(t[i]);for(r in n)e[r]=n[r]}return e}i.BoxBufferGeometry=bn;var Sn={clone:Tn,merge:En};i.UniformsUtils=Sn;var Mn="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",An="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function wn(t){Sr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Mn,this.fragmentShader=An,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(t.attributes,this.setValues(t))}function Dn(){$i.call(this),this.type="Camera",this.matrixWorldInverse=new Di,this.projectionMatrix=new Di,this.projectionMatrixInverse=new Di}function Rn(t,e,i,r){Dn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}((wn.prototype=Object.create(Sr.prototype)).constructor=wn).prototype.isShaderMaterial=!0,wn.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Tn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},wn.prototype.toJSON=function(t){var e,i=Sr.prototype.toJSON.call(this,t);for(e in i.glslVersion=this.glslVersion,i.uniforms={},this.uniforms){var r=this.uniforms[e].value;r&&r.isTexture?i.uniforms[e]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?i.uniforms[e]={type:"c",value:r.getHex()}:r&&r.isVector2?i.uniforms[e]={type:"v2",value:r.toArray()}:r&&r.isVector3?i.uniforms[e]={type:"v3",value:r.toArray()}:r&&r.isVector4?i.uniforms[e]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?i.uniforms[e]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?i.uniforms[e]={type:"m4",value:r.toArray()}:i.uniforms[e]={value:r}}0<Object.keys(this.defines).length&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;var n,a={};for(n in this.extensions)!0===this.extensions[n]&&(a[n]=!0);return 0<Object.keys(a).length&&(i.extensions=a),i},Dn.prototype=Object.assign(Object.create($i.prototype),{constructor:Dn,isCamera:!0,copy:function(t,e){return $i.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(t=new ti),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){$i.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){$i.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Rn.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Rn,isPerspectiveCamera:!0,copy:function(t,e){return Dn.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){t=.5*this.getFilmHeight()/t;this.fov=2*He.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*He.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*He.RAD2DEG*Math.atan(Math.tan(.5*He.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,r,n,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t,e=this.near,i=e*Math.tan(.5*He.DEG2RAD*this.fov)/this.zoom,r=2*i,n=this.aspect*r,a=-.5*n,o=this.view;null!==this.view&&this.view.enabled&&(t=o.fullWidth,s=o.fullHeight,a+=o.offsetX*n/t,i-=o.offsetY*r/s,n*=o.width/t,r*=o.height/s);var s=this.filmOffset;0!==s&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+n,i,i-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){t=$i.prototype.toJSON.call(this,t);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var On=90,Pn=1;function Cn(t,e,o){var a,s,u,h,l,c;$i.call(this),this.type="CubeCamera",!0===o.isWebGLCubeRenderTarget&&(this.renderTarget=o,(a=new Rn(On,Pn,t,e)).layers=this.layers,a.up.set(0,-1,0),a.lookAt(new ti(1,0,0)),this.add(a),(s=new Rn(On,Pn,t,e)).layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ti(-1,0,0)),this.add(s),(u=new Rn(On,Pn,t,e)).layers=this.layers,u.up.set(0,0,1),u.lookAt(new ti(0,1,0)),this.add(u),(h=new Rn(On,Pn,t,e)).layers=this.layers,h.up.set(0,0,-1),h.lookAt(new ti(0,-1,0)),this.add(h),(l=new Rn(On,Pn,t,e)).layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ti(0,0,1)),this.add(l),(c=new Rn(On,Pn,t,e)).layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ti(0,0,-1)),this.add(c),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var i=t.xr.enabled,r=t.getRenderTarget();t.xr.enabled=!1;var n=o.texture.generateMipmaps;o.texture.generateMipmaps=!1,t.setRenderTarget(o,0),t.render(e,a),t.setRenderTarget(o,1),t.render(e,s),t.setRenderTarget(o,2),t.render(e,u),t.setRenderTarget(o,3),t.render(e,h),t.setRenderTarget(o,4),t.render(e,l),o.texture.generateMipmaps=n,t.setRenderTarget(o,5),t.render(e,c),t.setRenderTarget(r),t.xr.enabled=i},this.clear=function(t,e,i,r){for(var n=t.getRenderTarget(),a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,i,r);t.setRenderTarget(n)})}function In(t,e,i){Number.isInteger(e)&&(e=i),Ke.call(this,t,t,e),this.texture.isWebGLCubeRenderTargetTexture=!0}function Ln(t,e,i,r,n,a,o,s,u,h,l,c){Ze.call(this,null,a,o,s,u,h,r,n,l,c),this.image={data:t||null,width:e||1,height:i||1},this.magFilter=void 0!==u?u:St,this.minFilter=void 0!==h?h:St,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}(Cn.prototype=Object.create($i.prototype)).constructor=Cn,((In.prototype=Object.create(Ke.prototype)).constructor=In).prototype.isWebGLCubeRenderTarget=!0,In.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Ut,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var i={tEquirect:{value:null}},r="\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",n="\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",a=new bn(5,5,5),n=new wn({name:"CubemapFromEquirect",uniforms:Tn(i),vertexShader:r,fragmentShader:n,side:W,blending:q});n.uniforms.tEquirect.value=e;a=new pn(a,n),n=e.minFilter;return e.minFilter===Ot&&(e.minFilter=Dt),new Cn(1,10,this).update(t,a),e.minFilter=n,a.geometry.dispose(),a.material.dispose(),this},((Ln.prototype=Object.create(Ze.prototype)).constructor=Ln).prototype.isDataTexture=!0;var Nn=new yi,Fn=new ti,Bn=function(){function o(t,e,i,r,n,a){B(this,o),this.planes=[void 0!==t?t:new rr,void 0!==e?e:new rr,void 0!==i?i:new rr,void 0!==r?r:new rr,void 0!==n?n:new rr,void 0!==a?a:new rr]}return m(o,[{key:"set",value:function(t,e,i,r,n,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(r),o[4].copy(n),o[5].copy(a),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=this.planes,i=t.elements,r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],h=i[6],l=i[7],c=i[8],p=i[9],d=i[10],f=i[11],m=i[12],v=i[13],t=i[14],i=i[15];return e[0].setComponents(o-r,l-s,f-c,i-m).normalize(),e[1].setComponents(o+r,l+s,f+c,i+m).normalize(),e[2].setComponents(o+n,l+u,f+p,i+v).normalize(),e[3].setComponents(o-n,l-u,f-p,i-v).normalize(),e[4].setComponents(o-a,l-h,f-d,i-t).normalize(),e[5].setComponents(o+a,l+h,f+d,i+t).normalize(),this}},{key:"intersectsObject",value:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Nn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Nn)}},{key:"intersectsSprite",value:function(t){return Nn.center.set(0,0,0),Nn.radius=.7071067811865476,Nn.applyMatrix4(t.matrixWorld),this.intersectsSphere(Nn)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,i=t.center,r=-t.radius,n=0;n<6;n++)if(e[n].distanceToPoint(i)<r)return!1;return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,i=0;i<6;i++){var r=e[i];if(Fn.x=(0<r.normal.x?t.max:t.min).x,Fn.y=(0<r.normal.y?t.max:t.min).y,Fn.z=(0<r.normal.z?t.max:t.min).z,r.distanceToPoint(Fn)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}}]),o}();function Un(){var i=null,t=!1,r=null,n=null;function a(t,e){r(t,e),n=i.requestAnimationFrame(a)}return{start:function(){!0!==t&&null!==r&&(n=i.requestAnimationFrame(a),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(t){r=t},setContext:function(t){i=t}}}function Gn(u,t){var h=t.isWebGL2,l=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),l.get(t)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var e=l.get(t);e&&(u.deleteBuffer(e.buffer),l.delete(t))},update:function(t,e){var i,r,n,a,o,s;t.isGLBufferAttribute?(!(s=l.get(t))||s.version<t.version)&&l.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}):(t.isInterleavedBufferAttribute&&(t=t.data),void 0===(i=l.get(t))?l.set(t,(n=e,a=(r=t).array,o=r.usage,s=u.createBuffer(),u.bindBuffer(n,s),u.bufferData(n,a,o),r.onUploadCallback(),o=5126,a instanceof Float32Array?o=5126:a instanceof Float64Array||(a instanceof Uint16Array?o=5123:a instanceof Int16Array?o=5122:a instanceof Uint32Array?o=5125:a instanceof Int32Array?o=5124:a instanceof Int8Array?o=5120:a instanceof Uint8Array&&(o=5121)),{buffer:s,type:o,bytesPerElement:a.BYTES_PER_ELEMENT,version:r.version})):i.version<t.version&&(o=i.buffer,a=e,e=(r=t).array,r=r.updateRange,u.bindBuffer(a,o),-1===r.count?u.bufferSubData(a,0,e):(h?u.bufferSubData(a,r.offset*e.BYTES_PER_ELEMENT,e,r.offset,r.count):u.bufferSubData(a,r.offset*e.BYTES_PER_ELEMENT,e.subarray(r.offset,r.offset+r.count)),r.count=-1),i.version=t.version))}}}i.Frustum=Bn;var kn=function(){p(o,yn);var a=_(o);function o(t,e,i,r){var n;return B(this,o),(n=a.call(this)).type="PlaneGeometry",n.parameters={width:t,height:e,widthSegments:i,heightSegments:r},n.fromBufferGeometry(new zn(t,e,i,r)),n.mergeVertices(),n}return o}();i.PlaneGeometry=kn;var zn=function(){p(A,Yr);var M=_(A);function A(t,e,i,r){var n;B(this,A),(n=M.call(this)).type="PlaneBufferGeometry",n.parameters={width:t,height:e,widthSegments:i,heightSegments:r};for(var a=(t=t||1)/2,o=(e=e||1)/2,s=Math.floor(i)||1,u=Math.floor(r)||1,h=s+1,l=u+1,c=t/s,p=e/u,d=[],f=[],m=[],v=[],g=0;g<l;g++)for(var _=g*p-o,y=0;y<h;y++)f.push(y*c-a,-_,0),m.push(0,0,1),v.push(y/s),v.push(1-g/u);for(var x=0;x<u;x++)for(var b=0;b<s;b++){var T=b+h*(x+1),E=b+1+h*(x+1),S=b+1+h*x;d.push(b+h*x,T,S),d.push(T,E,S)}return n.setIndex(d),n.setAttribute("position",new Fr(f,3)),n.setAttribute("normal",new Fr(m,3)),n.setAttribute("uv",new Fr(v,2)),n}return A}();i.PlaneBufferGeometry=zn;var jn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};i.ShaderChunk=jn;var Hn={common:{diffuse:{value:new br(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new We},uv2Transform:{value:new We},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new br(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new br(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new We}},sprite:{diffuse:{value:new br(15658734)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new We}}},Vn={basic:{uniforms:En([(i.UniformsLib=Hn).common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.fog]),vertexShader:jn.meshbasic_vert,fragmentShader:jn.meshbasic_frag},lambert:{uniforms:En([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.fog,Hn.lights,{emissive:{value:new br(0)}}]),vertexShader:jn.meshlambert_vert,fragmentShader:jn.meshlambert_frag},phong:{uniforms:En([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,Hn.lights,{emissive:{value:new br(0)},specular:{value:new br(1118481)},shininess:{value:30}}]),vertexShader:jn.meshphong_vert,fragmentShader:jn.meshphong_frag},standard:{uniforms:En([Hn.common,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.roughnessmap,Hn.metalnessmap,Hn.fog,Hn.lights,{emissive:{value:new br(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jn.meshphysical_vert,fragmentShader:jn.meshphysical_frag},toon:{uniforms:En([Hn.common,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.gradientmap,Hn.fog,Hn.lights,{emissive:{value:new br(0)}}]),vertexShader:jn.meshtoon_vert,fragmentShader:jn.meshtoon_frag},matcap:{uniforms:En([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,{matcap:{value:null}}]),vertexShader:jn.meshmatcap_vert,fragmentShader:jn.meshmatcap_frag},points:{uniforms:En([Hn.points,Hn.fog]),vertexShader:jn.points_vert,fragmentShader:jn.points_frag},dashed:{uniforms:En([Hn.common,Hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jn.linedashed_vert,fragmentShader:jn.linedashed_frag},depth:{uniforms:En([Hn.common,Hn.displacementmap]),vertexShader:jn.depth_vert,fragmentShader:jn.depth_frag},normal:{uniforms:En([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,{opacity:{value:1}}]),vertexShader:jn.normal_vert,fragmentShader:jn.normal_frag},sprite:{uniforms:En([Hn.sprite,Hn.fog]),vertexShader:jn.sprite_vert,fragmentShader:jn.sprite_frag},background:{uniforms:{uvTransform:{value:new We},t2D:{value:null}},vertexShader:jn.background_vert,fragmentShader:jn.background_frag},cube:{uniforms:En([Hn.envmap,{opacity:{value:1}}]),vertexShader:jn.cube_vert,fragmentShader:jn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jn.equirect_vert,fragmentShader:jn.equirect_frag},distanceRGBA:{uniforms:En([Hn.common,Hn.displacementmap,{referencePosition:{value:new ti},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jn.distanceRGBA_vert,fragmentShader:jn.distanceRGBA_frag},shadow:{uniforms:En([Hn.lights,Hn.fog,{color:{value:new br(0)},opacity:{value:1}}]),vertexShader:jn.shadow_vert,fragmentShader:jn.shadow_frag}};function Xn(a,o,i,s,r){var u,h,l=new br(0),c=0,p=null,d=0,f=null;function m(t,e){i.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return l},setClearColor:function(t,e){l.set(t),m(l,c=void 0!==e?e:1)},getClearAlpha:function(){return c},setClearAlpha:function(t){m(l,c=t)},render:function(t,e,i,r){var n=!0===e.isScene?e.background:null;n&&n.isTexture&&(n=o.get(n)),e=(e=a.xr).getSession&&e.getSession(),null===(n=e&&"additive"===e.environmentBlendMode?null:n)?m(l,c):n&&n.isColor&&(m(n,1),r=!0),(a.autoClear||r)&&a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil),n&&(n.isCubeTexture||n.isWebGLCubeRenderTarget||n.isWebGLCubeRenderTargetTexture||n.mapping===M)?(void 0===h&&((h=new pn(new bn(1,1,1),new wn({name:"BackgroundCubeMaterial",uniforms:Tn(Vn.cube.uniforms),vertexShader:Vn.cube.vertexShader,fragmentShader:Vn.cube.fragmentShader,side:W,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(h)),n.isWebGLCubeRenderTarget&&(n=n.texture),h.material.uniforms.envMap.value=n,h.material.uniforms.flipEnvMap.value=n.isCubeTexture?-1:1,p===n&&d===n.version&&f===a.toneMapping||(h.material.needsUpdate=!0,d=(p=n).version,f=a.toneMapping),t.unshift(h,h.geometry,h.material,0,0,null)):n&&n.isTexture&&(void 0===u&&((u=new pn(new zn(2,2),new wn({name:"BackgroundMaterial",uniforms:Tn(Vn.background.uniforms),vertexShader:Vn.background.vertexShader,fragmentShader:Vn.background.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(u)),!0===(u.material.uniforms.t2D.value=n).matrixAutoUpdate&&n.updateMatrix(),u.material.uniforms.uvTransform.value.copy(n.matrix),p===n&&d===n.version&&f===a.toneMapping||(u.material.needsUpdate=!0,d=(p=n).version,f=a.toneMapping),t.unshift(u,u.geometry,u.material,0,0,null))}}}function Wn(b,T,E,S){var a=b.getParameter(34921),s=S.isWebGL2?null:T.get("OES_vertex_array_object"),u=S.isWebGL2||null!==s,h={},t=p(null),l=t;function c(t){return S.isWebGL2?b.bindVertexArray(t):s.bindVertexArrayOES(t)}function o(t){return S.isWebGL2?b.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(t){for(var e=[],i=[],r=[],n=0;n<a;n++)e[n]=0,i[n]=0,r[n]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:r,object:t,attributes:{},index:null}}function M(){for(var t=l.newAttributes,e=0,i=t.length;e<i;e++)t[e]=0}function A(t){w(t,0)}function w(t,e){var i=l.newAttributes,r=l.enabledAttributes,n=l.attributeDivisors;i[t]=1,0===r[t]&&(b.enableVertexAttribArray(t),r[t]=1),n[t]!==e&&((S.isWebGL2?b:T.get("ANGLE_instanced_arrays"))[S.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](t,e),n[t]=e)}function D(){for(var t=l.newAttributes,e=l.enabledAttributes,i=0,r=e.length;i<r;i++)e[i]!==t[i]&&(b.disableVertexAttribArray(i),e[i]=0)}function R(t,e,i,r,n,a){!0!==S.isWebGL2||5124!==i&&5125!==i?b.vertexAttribPointer(t,e,i,r,n,a):b.vertexAttribIPointer(t,e,i,n,a)}function d(){e(),l!==t&&c((l=t).object)}function e(){t.geometry=null,t.program=null,t.wireframe=!1}return{setup:function(t,e,i,r,n){var a,o=!1;u?(a=function(t,e,i){var r=!0===i.wireframe,i=h[t.id];void 0===i&&(i={},h[t.id]=i);t=i[e.id];void 0===t&&(t={},i[e.id]=t);e=t[r];void 0===e&&(e=p(S.isWebGL2?b.createVertexArray():s.createVertexArrayOES()),t[r]=e);return e}(r,i,e),l!==a&&c((l=a).object),(o=function(t,e){var i,r=l.attributes,n=t.attributes;if(Object.keys(r).length!==Object.keys(n).length)return!0;for(i in n){var a=r[i],o=n[i];if(void 0===a)return!0;if(a.attribute!==o)return!0;if(a.data!==o.data)return!0}return l.index!==e}(r,n))&&function(t,e){var i,r={},n=t.attributes;for(i in n){var a=n[i],o={};(o.attribute=a).data&&(o.data=a.data),r[i]=o}l.attributes=r,l.index=e}(r,n)):(a=!0===e.wireframe,l.geometry===r.id&&l.program===i.id&&l.wireframe===a||(l.geometry=r.id,l.program=i.id,l.wireframe=a,o=!0)),!0===t.isInstancedMesh&&(o=!0),null!==n&&E.update(n,34963),o&&(function(t,e,i,r){if(!1===S.isWebGL2&&(t.isInstancedMesh||r.isInstancedBufferGeometry)&&null===T.get("ANGLE_instanced_arrays"))return;M();var n,a=r.attributes,o=i.getAttributes(),s=e.defaultAttributeValues;for(n in o){var u=o[n];if(0<=u){var h=a[n];if(void 0!==h){var l,c,p,d,f,m=h.normalized,v=h.itemSize,g=E.get(h);void 0!==g&&(l=g.buffer,c=g.type,p=g.bytesPerElement,h.isInterleavedBufferAttribute?(d=h.data,f=d.stride,g=h.offset,d&&d.isInstancedInterleavedBuffer?(w(u,d.meshPerAttribute),void 0===r._maxInstanceCount&&(r._maxInstanceCount=d.meshPerAttribute*d.count)):A(u),b.bindBuffer(34962,l),R(u,v,c,m,f*p,g*p)):(h.isInstancedBufferAttribute?(w(u,h.meshPerAttribute),void 0===r._maxInstanceCount&&(r._maxInstanceCount=h.meshPerAttribute*h.count)):A(u),b.bindBuffer(34962,l),R(u,v,c,m,0,0)))}else if("instanceMatrix"===n){m=E.get(t.instanceMatrix);void 0!==m&&(y=m.buffer,_=m.type,w(u+0,1),w(u+1,1),w(u+2,1),w(u+3,1),b.bindBuffer(34962,y),b.vertexAttribPointer(u+0,4,_,!1,64,0),b.vertexAttribPointer(u+1,4,_,!1,64,16),b.vertexAttribPointer(u+2,4,_,!1,64,32),b.vertexAttribPointer(u+3,4,_,!1,64,48))}else if("instanceColor"===n){var _,y=E.get(t.instanceColor);void 0!==y&&(_=y.buffer,y=y.type,w(u,1),b.bindBuffer(34962,_),b.vertexAttribPointer(u,3,y,!1,12,0))}else if(void 0!==s){var x=s[n];if(void 0!==x)switch(x.length){case 2:b.vertexAttrib2fv(u,x);break;case 3:b.vertexAttrib3fv(u,x);break;case 4:b.vertexAttrib4fv(u,x);break;default:b.vertexAttrib1fv(u,x)}}}}D()}(t,e,i,r),null!==n&&b.bindBuffer(34963,E.get(n).buffer))},reset:d,resetDefaultState:e,dispose:function(){for(var t in d(),h){var e,i=h[t];for(e in i){var r,n=i[e];for(r in n)o(n[r].object),delete n[r];delete i[e]}delete h[t]}},releaseStatesOfGeometry:function(t){if(void 0!==h[t.id]){var e,i=h[t.id];for(e in i){var r,n=i[e];for(r in n)o(n[r].object),delete n[r];delete i[e]}delete h[t.id]}},releaseStatesOfProgram:function(t){for(var e in h){e=h[e];if(void 0!==e[t.id]){var i,r=e[t.id];for(i in r)o(r[i].object),delete r[i];delete e[t.id]}}},initAttributes:M,enableAttribute:A,disableUnusedAttributes:D}}function Yn(a,o,s,t){var u,h=t.isWebGL2;this.setMode=function(t){u=t},this.render=function(t,e){a.drawArrays(u,t,e),s.update(e,u,1)},this.renderInstances=function(t,e,i){if(0!==i){var r,n;if(h)r=a,n="drawArraysInstanced";else if(n="drawArraysInstancedANGLE",null===(r=o.get("ANGLE_instanced_arrays")))return;r[n](u,t,e,i),s.update(e,u,i)}}}function qn(e,i,t){var r;function n(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==t.precision?t.precision:"highp",s=n(o);s!==o&&(o=s);var u=!0===t.logarithmicDepthBuffer,h=e.getParameter(34930),l=e.getParameter(35660),c=e.getParameter(3379),p=e.getParameter(34076),d=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),s=0<l,t=a||!!i.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var t=i.get("EXT_texture_filter_anisotropic");return r=null!==t?e.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:s,floatFragmentTextures:t,floatVertexTextures:s&&t,maxSamples:a?e.getParameter(36183):0}}function Zn(h){var l=this,c=null,p=0,d=!1,f=!1,m=new rr,v=new We,g={value:null,needsUpdate:!1};function _(){g.value!==c&&(g.value=c,g.needsUpdate=0<p),l.numPlanes=p,l.numIntersection=0}function y(t,e,i,r){var n=null!==t?t.length:0,a=null;if(0!==n){if(a=g.value,!0!==r||null===a){var r=i+4*n,o=e.matrixWorldInverse;v.getNormalMatrix(o),(null===a||a.length<r)&&(a=new Float32Array(r));for(var s=0,u=i;s!==n;++s,u+=4)m.copy(t[s]).applyMatrix4(o,v),m.normal.toArray(a,u),a[u+3]=m.constant}g.value=a,g.needsUpdate=!0}return l.numPlanes=n,l.numIntersection=0,a}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,i){var r=0!==t.length||e||0!==p||d;return d=e,c=y(t,i,0),p=t.length,r},this.beginShadows=function(){f=!0,y(null)},this.endShadows=function(){f=!1,_()},this.setState=function(t,e,i){var r=t.clippingPlanes,n=t.clipIntersection,a=t.clipShadows,t=h.get(t);if(!d||null===r||0===r.length||f&&!a)f?y(null):_();else{var a=f?0:p,o=4*a,s=t.clippingState||null;g.value=s;for(var s=y(r,e,o,i),u=0;u!==o;++u)s[u]=c[u];t.clippingState=s,this.numIntersection=n?this.numPlanes:0,this.numPlanes+=a}}}function Jn(a){var o=new WeakMap;function s(t,e){return e===u?t.mapping=E:e===c&&(t.mapping=S),t}return{get:function(t){if(t&&t.isTexture){var e=t.mapping;if(e===u||e===c){if(o.has(t))return s(o.get(t).texture,t.mapping);var i=t.image;if(i&&0<i.height){var r=a.getRenderList(),n=a.getRenderTarget(),e=a.getRenderState(),i=new In(i.height/2);return i.fromEquirectangularTexture(a,t),o.set(t,i),a.setRenderTarget(n),a.setRenderList(r),a.setRenderState(e),s(i.texture,t.mapping)}return null}}return t},dispose:function(){o=new WeakMap}}}function Kn(i){var r={};return{has:function(t){if(void 0!==r[t])return null!==r[t];var e;switch(t){case"WEBGL_depth_texture":e=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":e=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":e=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":e=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:e=i.getExtension(t)}return null!==(r[t]=e)},get:function(t){return this.has(t),r[t]}}}function Qn(t,g,n,a){var o=new WeakMap,_=new WeakMap;function s(t){var e,i=t.target,r=o.get(i);for(e in null!==r.index&&g.remove(r.index),r.attributes)g.remove(r.attributes[e]);i.removeEventListener("dispose",s),o.delete(i);t=_.get(r);t&&(g.remove(t),_.delete(r)),a.releaseStatesOfGeometry(i),!0===i.isInstancedBufferGeometry&&delete i._maxInstanceCount,n.memory.geometries--}function r(t){var e=[],i=t.index,r=t.attributes.position,n=0;if(null!==i)for(var a=i.array,n=i.version,o=0,s=a.length;o<s;o+=3){var u=a[o+0],h=a[o+1],l=a[o+2];e.push(u,h,h,l,l,u)}else{var c=r.array;n=r.version;for(var p=0,d=c.length/3-1;p<d;p+=3){var f=p+0,m=p+1,v=p+2;e.push(f,m,m,v,v,f)}}c=new(65535<Gr(e)?Nr:Ir)(e,1);c.version=n;n=_.get(t);n&&g.remove(n),_.set(t,c)}return{get:function(t,e){var i=o.get(e);return i||(e.addEventListener("dispose",s),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Yr).setFromObject(t)),i=e._bufferGeometry),o.set(e,i),n.memory.geometries++,i)},update:function(t){var e,i=t.attributes;for(e in i)g.update(i[e],34962);var r,n=t.morphAttributes;for(r in n)for(var a=n[r],o=0,s=a.length;o<s;o++)g.update(a[o],34962)},getWireframeAttribute:function(t){var e,i=_.get(t);return(!i||null!==(e=t.index)&&i.version<e.version)&&r(t),_.get(t)}}}function $n(a,o,s,t){var u,h,l,c=t.isWebGL2;this.setMode=function(t){u=t},this.setIndex=function(t){h=t.type,l=t.bytesPerElement},this.render=function(t,e){a.drawElements(u,e,h,t*l),s.update(e,u,1)},this.renderInstances=function(t,e,i){if(0!==i){var r,n;if(c)r=a,n="drawElementsInstanced";else if(n="drawElementsInstancedANGLE",null===(r=o.get("ANGLE_instanced_arrays")))return;r[n](u,e,h,t*l,i),s.update(e,u,i)}}}function ta(t){var r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:r,programs:null,autoReset:!0,reset:function(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0},update:function(t,e,i){switch(r.calls++,e){case 4:r.triangles+=i*(t/3);break;case 1:r.lines+=i*(t/2);break;case 3:r.lines+=i*(t-1);break;case 2:r.lines+=i*t;break;case 0:r.points+=i*t}}}}function ea(t,e){return t[0]-e[0]}function ia(t,e){return Math.abs(e[1])-Math.abs(t[1])}function ra(g){for(var _={},y=new Float32Array(8),x=[],t=0;t<8;t++)x[t]=[t,0];return{update:function(t,e,i,r){var n=t.morphTargetInfluences,a=void 0===n?0:n.length;if(void 0===(o=_[e.id])){for(var o=[],s=0;s<a;s++)o[s]=[s,0];_[e.id]=o}for(var u=0;u<a;u++){var h=o[u];h[0]=u,h[1]=n[u]}o.sort(ia);for(var l=0;l<8;l++)l<a&&o[l][1]?(x[l][0]=o[l][0],x[l][1]=o[l][1]):(x[l][0]=Number.MAX_SAFE_INTEGER,x[l][1]=0);x.sort(ea);for(var c=i.morphTargets&&e.morphAttributes.position,p=i.morphNormals&&e.morphAttributes.normal,d=0,f=0;f<8;f++){var m=x[f],v=m[0],m=m[1];v!==Number.MAX_SAFE_INTEGER&&m?(c&&e.getAttribute("morphTarget"+f)!==c[v]&&e.setAttribute("morphTarget"+f,c[v]),p&&e.getAttribute("morphNormal"+f)!==p[v]&&e.setAttribute("morphNormal"+f,p[v]),d+=y[f]=m):(c&&void 0!==e.getAttribute("morphTarget"+f)&&e.deleteAttribute("morphTarget"+f),p&&void 0!==e.getAttribute("morphNormal"+f)&&e.deleteAttribute("morphNormal"+f),y[f]=0)}i=e.morphTargetsRelative?1:1-d,r.getUniforms().setValue(g,"morphTargetBaseInfluence",i),r.getUniforms().setValue(g,"morphTargetInfluences",y)}}}function na(t,n,a,o){var s=new WeakMap;return{update:function(t){var e=o.render.frame,i=t.geometry,r=n.get(t,i);return s.get(r)!==e&&(i.isGeometry&&r.updateFromObject(t),n.update(r),s.set(r,e)),t.isInstancedMesh&&(a.update(t.instanceMatrix,34962),null!==t.instanceColor&&a.update(t.instanceColor,34962)),r},dispose:function(){s=new WeakMap}}}function aa(t,e,i,r,n,a,o,s,u,h){Ze.call(this,t=void 0!==t?t:[],e=void 0!==e?e:E,i,r,n,a,o=void 0!==o?o:Bt,s,u,h),this.flipY=!1}function oa(t,e,i,r){Ze.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:r||1},this.magFilter=St,this.minFilter=St,this.wrapR=k,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function sa(t,e,i,r){Ze.call(this,null),this.image={data:t||null,width:e||1,height:i||1,depth:r||1},this.magFilter=St,this.minFilter=St,this.wrapR=k,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}(i.ShaderLib=Vn).physical={uniforms:En([Vn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new br(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:jn.meshphysical_vert,fragmentShader:jn.meshphysical_frag},((aa.prototype=Object.create(Ze.prototype)).constructor=aa).prototype.isCubeTexture=!0,Object.defineProperty(aa.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),((oa.prototype=Object.create(Ze.prototype)).constructor=oa).prototype.isDataTexture2DArray=!0,((sa.prototype=Object.create(Ze.prototype)).constructor=sa).prototype.isDataTexture3D=!0;var ua=new Ze,ha=new oa,la=new sa,ca=new aa,pa=[],da=[],fa=new Float32Array(16),ma=new Float32Array(9),va=new Float32Array(4);function ga(t,e,i){var r=t[0];if(r<=0||0<r)return t;var n=e*i,a=pa[n];if(void 0===a&&(a=new Float32Array(n),pa[n]=a),0!==e){r.toArray(a,0);for(var o=1,s=0;o!==e;++o)t[o].toArray(a,s+=i)}return a}function _a(t,e){if(t.length===e.length){for(var i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return;return 1}}function ya(t,e){for(var i=0,r=e.length;i<r;i++)t[i]=e[i]}function xa(t,e){var i=da[e];void 0===i&&(i=new Int32Array(e),da[e]=i);for(var r=0;r!==e;++r)i[r]=t.allocateTextureUnit();return i}function ba(t,e){var i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function Ta(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y):_a(i,e)||(t.uniform2fv(this.addr,e),ya(i,e))}function Ea(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z):void 0!==e.r?i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b):_a(i,e)||(t.uniform3fv(this.addr,e),ya(i,e))}function Sa(t,e){var i=this.cache;void 0!==e.x?i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w):_a(i,e)||(t.uniform4fv(this.addr,e),ya(i,e))}function Ma(t,e){var i=this.cache,r=e.elements;void 0===r?_a(i,e)||(t.uniformMatrix2fv(this.addr,!1,e),ya(i,e)):_a(i,r)||(va.set(r),t.uniformMatrix2fv(this.addr,!1,va),ya(i,r))}function Aa(t,e){var i=this.cache,r=e.elements;void 0===r?_a(i,e)||(t.uniformMatrix3fv(this.addr,!1,e),ya(i,e)):_a(i,r)||(ma.set(r),t.uniformMatrix3fv(this.addr,!1,ma),ya(i,r))}function wa(t,e){var i=this.cache,r=e.elements;void 0===r?_a(i,e)||(t.uniformMatrix4fv(this.addr,!1,e),ya(i,e)):_a(i,r)||(fa.set(r),t.uniformMatrix4fv(this.addr,!1,fa),ya(i,r))}function Da(t,e,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.safeSetTexture2D(e||ua,n)}function Ra(t,e,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(e||ha,n)}function Oa(t,e,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(e||la,n)}function Pa(t,e,i){var r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.safeSetTextureCube(e||ca,n)}function Ca(t,e){var i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function Ia(t,e){var i=this.cache;_a(i,e)||(t.uniform2iv(this.addr,e),ya(i,e))}function La(t,e){var i=this.cache;_a(i,e)||(t.uniform3iv(this.addr,e),ya(i,e))}function Na(t,e){var i=this.cache;_a(i,e)||(t.uniform4iv(this.addr,e),ya(i,e))}function Fa(t,e){var i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function Ba(t,e){t.uniform1fv(this.addr,e)}function Ua(t,e){t.uniform1iv(this.addr,e)}function Ga(t,e){t.uniform2iv(this.addr,e)}function ka(t,e){t.uniform3iv(this.addr,e)}function za(t,e){t.uniform4iv(this.addr,e)}function ja(t,e){e=ga(e,this.size,2);t.uniform2fv(this.addr,e)}function Ha(t,e){e=ga(e,this.size,3);t.uniform3fv(this.addr,e)}function Va(t,e){e=ga(e,this.size,4);t.uniform4fv(this.addr,e)}function Xa(t,e){e=ga(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,e)}function Wa(t,e){e=ga(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,e)}function Ya(t,e){e=ga(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,e)}function qa(t,e,i){var r=e.length,n=xa(i,r);t.uniform1iv(this.addr,n);for(var a=0;a!==r;++a)i.safeSetTexture2D(e[a]||ua,n[a])}function Za(t,e,i){var r=e.length,n=xa(i,r);t.uniform1iv(this.addr,n);for(var a=0;a!==r;++a)i.safeSetTextureCube(e[a]||ca,n[a])}function Ja(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=function(t){switch(t){case 5126:return ba;case 35664:return Ta;case 35665:return Ea;case 35666:return Sa;case 35674:return Ma;case 35675:return Aa;case 35676:return wa;case 5124:case 35670:return Ca;case 35667:case 35671:return Ia;case 35668:case 35672:return La;case 35669:case 35673:return Na;case 5125:return Fa;case 35678:case 36198:case 36298:case 36306:case 35682:return Da;case 35679:case 36299:case 36307:return Oa;case 35680:case 36300:case 36308:case 36293:return Pa;case 36289:case 36303:case 36311:case 36292:return Ra}}(e.type)}function Ka(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ba;case 35664:return ja;case 35665:return Ha;case 35666:return Va;case 35674:return Xa;case 35675:return Wa;case 35676:return Ya;case 5124:case 35670:return Ua;case 35667:case 35671:return Ga;case 35668:case 35672:return ka;case 35669:case 35673:return za;case 35678:case 36198:case 36298:case 36306:case 35682:return qa;case 35680:case 36300:case 36308:case 36293:return Za}}(e.type)}function Qa(t){this.id=t,this.seq=[],this.map={}}Ka.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),ya(e,t)},Qa.prototype.setValue=function(t,e,i){for(var r=this.seq,n=0,a=r.length;n!==a;++n){var o=r[n];o.setValue(t,e[o.id],i)}};var $a=/([\w\d_]+)(\])?(\[|\.)?/g;function to(t,e){t.seq.push(e),t.map[e.id]=e}function eo(t,e){this.seq=[],this.map={};for(var i=t.getProgramParameter(e,35718),r=0;r<i;++r){var n=t.getActiveUniform(e,r);!function(t,e,i){var r=t.name,n=r.length;for($a.lastIndex=0;;){var a=$a.exec(r),o=$a.lastIndex,s=a[1],u="]"===a[2],a=a[3];if(u&&(s|=0),void 0===a||"["===a&&o+2===n){to(i,new(void 0===a?Ja:Ka)(s,t,e));break}a=i.map[s];void 0===a&&to(i,a=new Qa(s)),i=a}}(n,t.getUniformLocation(e,n.name),this)}}function io(t,e,i){e=t.createShader(e);return t.shaderSource(e,i),t.compileShader(e),e}eo.prototype.setValue=function(t,e,i,r){e=this.map[e];void 0!==e&&e.setValue(t,i,r)},eo.prototype.setOptional=function(t,e,i){e=e[i];void 0!==e&&this.setValue(t,i,e)},eo.upload=function(t,e,i,r){for(var n=0,a=e.length;n!==a;++n){var o=e[n],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,r)}},eo.seqWithValue=function(t,e){for(var i=[],r=0,n=t.length;r!==n;++r){var a=t[r];a.id in e&&i.push(a)}return i};var ro=0;function no(t){switch(t){case Re:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return["Linear","( value )"]}}function ao(t,e,i){var r=t.getShaderParameter(e,35713),n=t.getShaderInfoLog(e).trim();return r&&""===n?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+i+"\n"+n+function(t){for(var e=t.split("\n"),i=0;i<e.length;i++)e[i]=i+1+": "+e[i];return e.join("\n")}(t.getShaderSource(e))}function oo(t,e){e=no(e);return"vec4 "+t+"( vec4 value ) { return "+e[0]+"ToLinear"+e[1]+"; }"}function so(t){return""!==t}function uo(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ho(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var lo=/^[ \t]*#include +<([\w\d./]+)>/gm;function co(t){return t.replace(lo,po)}function po(t,e){var i=jn[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return co(i)}var fo=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,mo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vo(t){return t.replace(mo,_o).replace(fo,go)}function go(t,e,i,r){return _o(0,e,i,r)}function _o(t,e,i,r){for(var n="",a=parseInt(e);a<parseInt(i);a++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return n}function yo(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function xo(t,e,i,r){var n,a,o=t.getContext(),s=i.defines,u=i.vertexShader,h=i.fragmentShader,l=(m="SHADOWMAP_TYPE_BASIC",(f=i).shadowMapType===R?m="SHADOWMAP_TYPE_PCF":2===f.shadowMapType?m="SHADOWMAP_TYPE_PCF_SOFT":f.shadowMapType===O&&(m="SHADOWMAP_TYPE_VSM"),m),c=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case E:case S:e="ENVMAP_TYPE_CUBE";break;case M:case A:e="ENVMAP_TYPE_CUBE_UV"}return e}(i),p=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case S:case A:e="ENVMAP_MODE_REFRACTION"}return e}(i),d=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case T:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(i),f=0<t.gammaFactor?t.gammaFactor:1,m=i.isWebGL2?"":[(v=i).extensionDerivatives||v.envMapCubeUV||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||"physical"===v.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(so).join("\n"),v=function(t){var e,i=[];for(e in t){var r=t[e];!1!==r&&i.push("#define "+e+" "+r)}return i.join("\n")}(s),g=o.createProgram(),s=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(0<(n=[v].filter(so).join("\n")).length&&(n+="\n"),0<(a=[m,v].filter(so).join("\n")).length&&(a+="\n")):(n=[yo(i),"#define SHADER_NAME "+i.shaderName,v,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+i.maxBones,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(so).join("\n"),a=[m,yo(i),"#define SHADER_NAME "+i.shaderName,v,i.alphaTest?"#define ALPHATEST "+i.alphaTest+(i.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+p:"",i.envMap?"#define "+d:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.sheen?"#define USE_SHEEN":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(i.extensionShaderTextureLOD||i.envMap)&&i.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Mt?"#define TONE_MAPPING":"",i.toneMapping!==Mt?jn.tonemapping_pars_fragment:"",i.toneMapping!==Mt?function(t,e){var i;switch(e){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="OptimizedCineon";break;case 4:i="ACESFilmic";break;case 5:i="Custom";break;default:i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",jn.encodings_pars_fragment,i.map?oo("mapTexelToLinear",i.mapEncoding):"",i.matcap?oo("matcapTexelToLinear",i.matcapEncoding):"",i.envMap?oo("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMap?oo("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.lightMap?oo("lightMapTexelToLinear",i.lightMapEncoding):"",(x="linearToOutputTexel",b=no(b=i.outputEncoding),"vec4 "+x+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"),i.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(so).join("\n")),u=ho(u=uo(u=co(u),i),i),h=ho(h=uo(h=co(h),i),i),u=vo(u),h=vo(h),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(s="#version 300 es\n",n=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+n,a=["#define varying in",i.glslVersion===Ue?"":"out highp vec4 pc_fragColor;",i.glslVersion===Ue?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var _,y,l=s+a+h,x=io(o,35633,s+n+u),b=io(o,35632,l);return o.attachShader(g,x),o.attachShader(g,b),void 0!==i.index0AttributeName?o.bindAttribLocation(g,0,i.index0AttributeName):!0===i.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),t.debug.checkShaderErrors&&(h=o.getProgramInfoLog(g).trim(),s=o.getShaderInfoLog(x).trim(),u=o.getShaderInfoLog(b).trim(),!(t=l=!0)===o.getProgramParameter(g,35714)?(l=!1,ao(o,x,"vertex"),ao(o,b,"fragment")):""!==h||""!==s&&""!==u||(t=!1),t&&(this.diagnostics={runnable:l,programLog:h,vertexShader:{log:s,prefix:n},fragmentShader:{log:u,prefix:a}})),o.deleteShader(x),o.deleteShader(b),this.getUniforms=function(){return _=void 0===_?new eo(o,g):_},this.getAttributes=function(){return y=void 0===y?function(t,e){for(var i={},r=t.getProgramParameter(e,35721),n=0;n<r;n++){var a=t.getActiveAttrib(e,n).name;i[a]=t.getAttribLocation(e,a)}return i}(o,g):y},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=i.shaderName,this.id=ro++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=x,this.fragmentShader=b,this}function bo(c,p,d,f,o,m){var s=[],v=f.isWebGL2,g=f.logarithmicDepthBuffer,_=f.floatVertexTextures,y=f.maxVertexUniforms,x=f.vertexTextures,b=f.precision,T={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},n=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function E(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(e=t.texture.encoding):e=Re,e}return{getParameters:function(t,e,i,r,n){var a,o,s=r.fog,u=t.isMeshStandardMaterial?r.environment:null,r=p.get(t.envMap||u),u=T[t.type],h=n.isSkinnedMesh?(h=(o=n).skeleton.bones,_?1024:(o=Math.floor((y-20)/4),(o=Math.min(o,h.length))<h.length?0:o)):0;null!==t.precision&&(b=f.getMaxPrecision(t.precision),t.precision),o=u?(a=(l=Vn[u]).vertexShader,l.fragmentShader):(a=t.vertexShader,t.fragmentShader);var l=c.getRenderTarget();return{isWebGL2:v,shaderID:u,shaderName:t.type,vertexShader:a,fragmentShader:o,defines:t.defines,isRawShaderMaterial:!0===t.isRawShaderMaterial,glslVersion:t.glslVersion,precision:b,instancing:!0===n.isInstancedMesh,instancingColor:!0===n.isInstancedMesh&&null!==n.instanceColor,supportsVertexTextures:x,outputEncoding:null!==l?E(l.texture):c.outputEncoding,map:!!t.map,mapEncoding:E(t.map),matcap:!!t.matcap,matcapEncoding:E(t.matcap),envMap:!!r,envMapMode:r&&r.mapping,envMapEncoding:E(r),envMapCubeUV:!!r&&(r.mapping===M||r.mapping===A),lightMap:!!t.lightMap,lightMapEncoding:E(t.lightMap),aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:E(t.emissiveMap),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Ie,tangentSpaceNormalMap:t.normalMapType===Ce,clearcoatMap:!!t.clearcoatMap,clearcoatRoughnessMap:!!t.clearcoatRoughnessMap,clearcoatNormalMap:!!t.clearcoatNormalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,sheen:!!t.sheen,transmissionMap:!!t.transmissionMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,vertexUvs:!!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatMap||t.clearcoatRoughnessMap||t.clearcoatNormalMap||t.displacementMap||t.transmissionMap),uvsVertexOnly:!(t.map||t.bumpMap||t.normalMap||t.specularMap||t.alphaMap||t.emissiveMap||t.roughnessMap||t.metalnessMap||t.clearcoatNormalMap||t.transmissionMap||!t.displacementMap),fog:!!s,useFog:t.fog,fogExp2:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:g,skinning:t.skinning&&0<h,maxBones:h,useVertexTexture:_,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:c.maxMorphTargets,maxMorphNormals:c.maxMorphNormals,numDirLights:e.directional.length,numPointLights:e.point.length,numSpotLights:e.spot.length,numRectAreaLights:e.rectArea.length,numHemiLights:e.hemi.length,numDirLightShadows:e.directionalShadowMap.length,numPointLightShadows:e.pointShadowMap.length,numSpotLightShadows:e.spotShadowMap.length,numClippingPlanes:m.numPlanes,numClipIntersection:m.numIntersection,dithering:t.dithering,shadowMapEnabled:c.shadowMap.enabled&&0<i.length,shadowMapType:c.shadowMap.type,toneMapping:t.toneMapped?c.toneMapping:Mt,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Y,flipSided:t.side===W,depthPacking:void 0!==t.depthPacking&&t.depthPacking,index0AttributeName:t.index0AttributeName,extensionDerivatives:t.extensions&&t.extensions.derivatives,extensionFragDepth:t.extensions&&t.extensions.fragDepth,extensionDrawBuffers:t.extensions&&t.extensions.drawBuffers,extensionShaderTextureLOD:t.extensions&&t.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||d.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||d.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||d.has("EXT_shader_texture_lod"),customProgramCacheKey:t.customProgramCacheKey()}},getProgramCacheKey:function(t){var e=[];if(t.shaderID?e.push(t.shaderID):(e.push(t.fragmentShader),e.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)e.push(i),e.push(t.defines[i]);if(!1===t.isRawShaderMaterial){for(var r=0;r<n.length;r++)e.push(t[n[r]]);e.push(c.outputEncoding),e.push(c.gammaFactor)}return e.push(t.customProgramCacheKey),e.join()},getUniforms:function(t){var e=T[t.type];return e?(e=Vn[e],Sn.clone(e.uniforms)):t.uniforms},acquireProgram:function(t,e){for(var i,r=0,n=s.length;r<n;r++){var a=s[r];if(a.cacheKey===e){++(i=a).usedTimes;break}}return void 0===i&&(i=new xo(c,e,t,o),s.push(i)),i},releaseProgram:function(t){var e;0==--t.usedTimes&&(e=s.indexOf(t),s[e]=s[s.length-1],s.pop(),t.destroy())},programs:s}}function To(){var r=new WeakMap;return{get:function(t){var e=r.get(t);return void 0===e&&r.set(t,e={}),e},remove:function(t){r.delete(t)},update:function(t,e,i){r.get(t)[e]=i},dispose:function(){r=new WeakMap}}}function Eo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function So(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Mo(u){var h=[],l=0,o=[],s=[],c={id:-1};function p(t,e,i,r,n,a){var o=h[l],s=u.get(i);return void 0===o?(o={id:t.id,object:t,geometry:e,material:i,program:s.program||c,groupOrder:r,renderOrder:t.renderOrder,z:n,group:a},h[l]=o):(o.id=t.id,o.object=t,o.geometry=e,o.material=i,o.program=s.program||c,o.groupOrder=r,o.renderOrder=t.renderOrder,o.z=n,o.group=a),l++,o}return{opaque:o,transparent:s,init:function(){l=0,o.length=0,s.length=0},push:function(t,e,i,r,n,a){a=p(t,e,i,r,n,a),(!0===i.transparent?s:o).push(a)},unshift:function(t,e,i,r,n,a){a=p(t,e,i,r,n,a),(!0===i.transparent?s:o).unshift(a)},finish:function(){for(var t=l,e=h.length;t<e;t++){var i=h[t];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){1<o.length&&o.sort(t||Eo),1<s.length&&s.sort(e||So)}}}function Ao(n){var a=new WeakMap;return{get:function(t,e){var i,r=a.get(t);return void 0===r?(i=new Mo(n),a.set(t,new WeakMap),a.get(t).set(e,i)):void 0===(i=r.get(e))&&(i=new Mo(n),r.set(e,i)),i},dispose:function(){a=new WeakMap}}}function wo(){var i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];var e;switch(t.type){case"DirectionalLight":e={direction:new ti,color:new br};break;case"SpotLight":e={position:new ti,direction:new ti,color:new br,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new ti,color:new br,distance:0,decay:0};break;case"HemisphereLight":e={direction:new ti,skyColor:new br,groundColor:new br};break;case"RectAreaLight":e={color:new br,position:new ti,halfWidth:new ti,halfHeight:new ti}}return i[t.id]=e}}}var Do=0;function Ro(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Oo(){for(var i,R=new wo,O=(i={},{get:function(t){if(void 0!==i[t.id])return i[t.id];var e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e}}),P={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},t=0;t<9;t++)P.probe.push(new ti);var C=new ti,I=new Di,L=new Di;return{setup:function(t,e,i){for(var r=0,n=0,a=0,o=0;o<9;o++)P.probe[o].set(0,0,0);var s=0,u=0,h=0,l=0,c=0,p=0,d=0,f=0,m=i.matrixWorldInverse;t.sort(Ro);for(var v=0,g=t.length;v<g;v++){var _,y,x,b,T,E=t[v],S=E.color,M=E.intensity,A=E.distance,w=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)r+=S.r*M,n+=S.g*M,a+=S.b*M;else if(E.isLightProbe)for(var D=0;D<9;D++)P.probe[D].addScaledVector(E.sh.coefficients[D],M);else E.isDirectionalLight?((x=R.get(E)).color.copy(E.color).multiplyScalar(E.intensity),x.direction.setFromMatrixPosition(E.matrixWorld),C.setFromMatrixPosition(E.target.matrixWorld),x.direction.sub(C),x.direction.transformDirection(m),E.castShadow&&(_=E.shadow,(y=O.get(E)).shadowBias=_.bias,y.shadowNormalBias=_.normalBias,y.shadowRadius=_.radius,y.shadowMapSize=_.mapSize,P.directionalShadow[s]=y,P.directionalShadowMap[s]=w,P.directionalShadowMatrix[s]=E.shadow.matrix,p++),P.directional[s]=x,s++):E.isSpotLight?((y=R.get(E)).position.setFromMatrixPosition(E.matrixWorld),y.position.applyMatrix4(m),y.color.copy(S).multiplyScalar(M),y.distance=A,y.direction.setFromMatrixPosition(E.matrixWorld),C.setFromMatrixPosition(E.target.matrixWorld),y.direction.sub(C),y.direction.transformDirection(m),y.coneCos=Math.cos(E.angle),y.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),y.decay=E.decay,E.castShadow&&(x=E.shadow,(A=O.get(E)).shadowBias=x.bias,A.shadowNormalBias=x.normalBias,A.shadowRadius=x.radius,A.shadowMapSize=x.mapSize,P.spotShadow[h]=A,P.spotShadowMap[h]=w,P.spotShadowMatrix[h]=E.shadow.matrix,f++),P.spot[h]=y,h++):E.isRectAreaLight?((b=R.get(E)).color.copy(S).multiplyScalar(M),b.position.setFromMatrixPosition(E.matrixWorld),b.position.applyMatrix4(m),L.identity(),I.copy(E.matrixWorld),I.premultiply(m),L.extractRotation(I),b.halfWidth.set(.5*E.width,0,0),b.halfHeight.set(0,.5*E.height,0),b.halfWidth.applyMatrix4(L),b.halfHeight.applyMatrix4(L),P.rectArea[l]=b,l++):E.isPointLight?((T=R.get(E)).position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(m),T.color.copy(E.color).multiplyScalar(E.intensity),T.distance=E.distance,T.decay=E.decay,E.castShadow&&(S=E.shadow,(b=O.get(E)).shadowBias=S.bias,b.shadowNormalBias=S.normalBias,b.shadowRadius=S.radius,b.shadowMapSize=S.mapSize,b.shadowCameraNear=S.camera.near,b.shadowCameraFar=S.camera.far,P.pointShadow[u]=b,P.pointShadowMap[u]=w,P.pointShadowMatrix[u]=E.shadow.matrix,d++),P.point[u]=T,u++):E.isHemisphereLight&&((T=R.get(E)).direction.setFromMatrixPosition(E.matrixWorld),T.direction.transformDirection(m),T.direction.normalize(),T.skyColor.copy(E.color).multiplyScalar(M),T.groundColor.copy(E.groundColor).multiplyScalar(M),P.hemi[c]=T,c++)}0<l&&(P.rectAreaLTC1=Hn.LTC_1,P.rectAreaLTC2=Hn.LTC_2),P.ambient[0]=r,P.ambient[1]=n,P.ambient[2]=a,(i=P.hash).directionalLength===s&&i.pointLength===u&&i.spotLength===h&&i.rectAreaLength===l&&i.hemiLength===c&&i.numDirectionalShadows===p&&i.numPointShadows===d&&i.numSpotShadows===f||(P.directional.length=s,P.spot.length=h,P.rectArea.length=l,P.point.length=u,P.hemi.length=c,P.directionalShadow.length=p,P.directionalShadowMap.length=p,P.pointShadow.length=d,P.pointShadowMap.length=d,P.spotShadow.length=f,P.spotShadowMap.length=f,P.directionalShadowMatrix.length=p,P.pointShadowMatrix.length=d,P.spotShadowMatrix.length=f,i.directionalLength=s,i.pointLength=u,i.spotLength=h,i.rectAreaLength=l,i.hemiLength=c,i.numDirectionalShadows=p,i.numPointShadows=d,i.numSpotShadows=f,P.version=Do++)},state:P}}function Po(){var e=new Oo,i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:e},setupLights:function(t){e.setup(i,r,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function Co(){var r=new WeakMap;return{get:function(t,e){var i;return!1===r.has(t)?(i=new Po,r.set(t,new WeakMap),r.get(t).set(e,i)):!1===r.get(t).has(e)?(i=new Po,r.get(t).set(e,i)):i=r.get(t).get(e),i},dispose:function(){r=new WeakMap}}}function Io(t){Sr.call(this),this.type="MeshDepthMaterial",this.depthPacking=Oe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Lo(t){Sr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new ti,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}((Io.prototype=Object.create(Sr.prototype)).constructor=Io).prototype.isMeshDepthMaterial=!0,Io.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},((Lo.prototype=Object.create(Sr.prototype)).constructor=Lo).prototype.isMeshDistanceMaterial=!0,Lo.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var No="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",Fo="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function Bo(g,_,y){var x=new Bn,b=new Ve,T=new Ve,E=new Je,n=[],a=[],c={},p={0:W,1:v,2:Y},S=new wn({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:Fo,fragmentShader:No}),M=S.clone();M.defines.HORIZONAL_PASS=1;var t=new Yr;t.setAttribute("position",new Dr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var A=new pn(t,S),w=this;function d(t,e,i){var r=t<<0|e<<1|i<<2,i=n[r];return void 0===i&&(i=new Io({depthPacking:Pe,morphTargets:t,skinning:e}),n[r]=i),i}function f(t,e,i){var r=t<<0|e<<1|i<<2,i=a[r];return void 0===i&&(i=new Lo({morphTargets:t,skinning:e}),a[r]=i),i}function D(t,e,i,r,n,a,o){var s,u=null,h=d,l=t.customDepthMaterial;return!0===r.isPointLight&&(h=f,l=t.customDistanceMaterial),u=void 0===l?h(h=!(s=h=!1)===i.morphTargets?e.morphAttributes&&e.morphAttributes.position&&0<e.morphAttributes.position.length:h,s=!0===t.isSkinnedMesh&&!0===i.skinning?!0:s,!0===t.isInstancedMesh):l,g.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(s=u.uuid,t=i.uuid,void 0===(l=c[s])&&(c[s]=l={}),void 0===(s=l[t])&&(s=u.clone(),l[t]=s),u=s),u.visible=i.visible,u.wireframe=i.wireframe,u.side=o===O?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:p[i.side],u.clipShadows=i.clipShadows,u.clippingPlanes=i.clippingPlanes,u.clipIntersection=i.clipIntersection,u.wireframeLinewidth=i.wireframeLinewidth,u.linewidth=i.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=n,u.farDistance=a),u}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=R,this.render=function(t,e,i){if(!1!==w.enabled&&(!1!==w.autoUpdate||!1!==w.needsUpdate)&&0!==t.length){var r=g.getRenderTarget(),n=g.getActiveCubeFace(),a=g.getActiveMipmapLevel(),o=g.state;o.setBlending(q),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var s,u=0,h=t.length;u<h;u++){var l=t[u],c=l.shadow;if((!1!==c.autoUpdate||!1!==c.needsUpdate)&&void 0!==c){b.copy(c.mapSize);var p,d=c.getFrameExtents();b.multiply(d),T.copy(c.mapSize),(b.x>y||b.y>y)&&(b.x>y&&(T.x=Math.floor(y/d.x),b.x=T.x*d.x,c.mapSize.x=T.x),b.y>y&&(T.y=Math.floor(y/d.y),b.y=T.y*d.y,c.mapSize.y=T.y)),null!==c.map||c.isPointLightShadow||this.type!==O||(c.map=new Ke(b.x,b.y,p={minFilter:Dt,magFilter:Dt,format:Ut}),c.map.texture.name=l.name+".shadowMap",c.mapPass=new Ke(b.x,b.y,p),c.camera.updateProjectionMatrix()),null===c.map&&(c.map=new Ke(b.x,b.y,{minFilter:St,magFilter:St,format:Ut}),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()),g.setRenderTarget(c.map),g.clear();for(var f=c.getViewportCount(),m=0;m<f;m++){var v=c.getViewport(m);E.set(T.x*v.x,T.y*v.y,T.x*v.z,T.y*v.w),o.viewport(E),c.updateMatrices(l,m),x=c.getFrustum(),function t(e,i,r,n,a){if(!1===e.visible)return;var o=e.layers.test(i.layers);if(o&&(e.isMesh||e.isLine||e.isPoints)&&(e.castShadow||e.receiveShadow&&a===O)&&(!e.frustumCulled||x.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld);var s=_.update(e),u=e.material;if(Array.isArray(u))for(var h=s.groups,l=0,c=h.length;l<c;l++){var p=h[l],d=u[p.materialIndex];d&&d.visible&&(d=D(e,s,d,n,r.near,r.far,a),g.renderBufferDirect(r,null,s,d,e,p))}else u.visible&&(o=D(e,s,u,n,r.near,r.far,a),g.renderBufferDirect(r,null,s,o,e,null))}var f=e.children;for(var m=0,v=f.length;m<v;m++)t(f[m],i,r,n,a)}(e,i,c.camera,l,this.type)}c.isPointLightShadow||this.type!==O||(s=c,d=i,p=void 0,p=_.update(A),S.uniforms.shadow_pass.value=s.map.texture,S.uniforms.resolution.value=s.mapSize,S.uniforms.radius.value=s.radius,g.setRenderTarget(s.mapPass),g.clear(),g.renderBufferDirect(d,null,p,S,A,null),M.uniforms.shadow_pass.value=s.mapPass.texture,M.uniforms.resolution.value=s.mapSize,M.uniforms.radius.value=s.radius,g.setRenderTarget(s.map),g.clear(),g.renderBufferDirect(d,null,p,M,A,null)),c.needsUpdate=!1}}w.needsUpdate=!1,g.setRenderTarget(r,n,a)}}}function Uo(l,t,e){var i=e.isWebGL2;var r=new function(){var e=!1,a=new Je,i=null,o=new Je(0,0,0,0);return{setMask:function(t){i===t||e||(l.colorMask(t,t,t,t),i=t)},setLocked:function(t){e=t},setClear:function(t,e,i,r,n){!0===n&&(t*=r,e*=r,i*=r),a.set(t,e,i,r),!1===o.equals(a)&&(l.clearColor(t,e,i,r),o.copy(a))},reset:function(){e=!1,i=null,o.set(-1,0,0,0)}}},n=new function(){var e=!1,i=null,r=null,n=null;return{setTest:function(t){(t?C:I)(2929)},setMask:function(t){i===t||e||(l.depthMask(t),i=t)},setFunc:function(t){if(r!==t){if(t)switch(t){case vt:l.depthFunc(512);break;case gt:l.depthFunc(519);break;case _t:l.depthFunc(513);break;case yt:l.depthFunc(515);break;case xt:l.depthFunc(514);break;case bt:l.depthFunc(518);break;case Tt:l.depthFunc(516);break;case Et:l.depthFunc(517);break;default:l.depthFunc(515)}else l.depthFunc(515);r=t}},setLocked:function(t){e=t},setClear:function(t){n!==t&&(l.clearDepth(t),n=t)},reset:function(){e=!1,n=r=i=null}}},a=new function(){var e=!1,i=null,r=null,n=null,a=null,o=null,s=null,u=null,h=null;return{setTest:function(t){e||(t?C:I)(2960)},setMask:function(t){i===t||e||(l.stencilMask(t),i=t)},setFunc:function(t,e,i){r===t&&n===e&&a===i||(l.stencilFunc(t,e,i),r=t,n=e,a=i)},setOp:function(t,e,i){o===t&&s===e&&u===i||(l.stencilOp(t,e,i),o=t,s=e,u=i)},setLocked:function(t){e=t},setClear:function(t){h!==t&&(l.clearStencil(t),h=t)},reset:function(){e=!1,h=u=s=o=a=n=r=i=null}}},o={},s=null,u=null,h=null,c=null,p=null,d=null,f=null,m=null,v=null,g=!1,_=null,y=null,x=null,b=null,T=null,E=l.getParameter(35661),S=!1,M=0,e=l.getParameter(7938);-1!==e.indexOf("WebGL")?(M=parseFloat(/^WebGL\ ([0-9])/.exec(e)[1]),S=1<=M):-1!==e.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(e)[1]),S=2<=M);var A=null,w={},D=new Je,R=new Je;function O(t,e,i){var r=new Uint8Array(4),n=l.createTexture();l.bindTexture(t,n),l.texParameteri(t,10241,9728),l.texParameteri(t,10240,9728);for(var a=0;a<i;a++)l.texImage2D(e+a,0,6408,1,1,0,6408,5121,r);return n}var P={};function C(t){!0!==o[t]&&(l.enable(t),o[t]=!0)}function I(t){!1!==o[t]&&(l.disable(t),o[t]=!1)}P[3553]=O(3553,3553,1),P[34067]=O(34067,34069,6),r.setClear(0,0,0,1),n.setClear(1),a.setClear(0),C(2929),n.setFunc(yt),U(!1),G(V),C(2884),B(q);var L,N=(j(M={},tt,32774),j(M,et,32778),j(M,it,32779),M);i?(N[rt]=32775,N[nt]=32776):null!==(L=t.get("EXT_blend_minmax"))&&(N[rt]=L.MIN_EXT,N[nt]=L.MAX_EXT);var F=(j(L={},at,0),j(L,ot,1),j(L,st,768),j(L,ht,770),j(L,mt,776),j(L,dt,774),j(L,ct,772),j(L,ut,769),j(L,lt,771),j(L,ft,775),j(L,pt,773),L);function B(t,e,i,r,n,a,o,s){if(t!==q){if(u||(C(3042),u=!0),t===$)n=n||e,a=a||i,o=o||r,e===c&&n===f||(l.blendEquationSeparate(N[e],N[n]),c=e,f=n),i===p&&r===d&&a===m&&o===v||(l.blendFuncSeparate(F[i],F[r],F[a],F[o]),p=i,d=r,m=a,v=o),h=t,g=null;else if(t!==h||s!==g){if(c===tt&&f===tt||(l.blendEquation(32774),f=c=tt),s)switch(t){case Z:l.blendFuncSeparate(1,771,1,771);break;case J:l.blendFunc(1,1);break;case K:l.blendFuncSeparate(0,0,769,771);break;case Q:l.blendFuncSeparate(0,768,0,770)}else switch(t){case Z:l.blendFuncSeparate(770,771,1,771);break;case J:l.blendFunc(770,1);break;case K:l.blendFunc(0,769);break;case Q:l.blendFunc(0,768)}v=m=d=p=null,h=t,g=s}}else u&&(I(3042),u=!1)}function U(t){_!==t&&(t?l.frontFace(2304):l.frontFace(2305),_=t)}function G(t){t!==H?(C(2884),t!==y&&(t===V?l.cullFace(1029):t===X?l.cullFace(1028):l.cullFace(1032))):I(2884),y=t}function k(t,e,i){t?(C(32823),b===e&&T===i||(l.polygonOffset(e,i),b=e,T=i)):I(32823)}function z(t){A!==(t=void 0===t?33984+E-1:t)&&(l.activeTexture(t),A=t)}return{buffers:{color:r,depth:n,stencil:a},enable:C,disable:I,useProgram:function(t){return s!==t&&(l.useProgram(t),s=t,!0)},setBlending:B,setMaterial:function(t,e){(t.side===Y?I:C)(2884);var i=t.side===W;U(i=e?!i:i),t.blending===Z&&!1===t.transparent?B(q):B(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),n.setFunc(t.depthFunc),n.setTest(t.depthTest),n.setMask(t.depthWrite),r.setMask(t.colorWrite),i=t.stencilWrite,a.setTest(i),i&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),k(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:U,setCullFace:G,setLineWidth:function(t){t!==x&&(S&&l.lineWidth(t),x=t)},setPolygonOffset:k,setScissorTest:function(t){(t?C:I)(3089)},activeTexture:z,bindTexture:function(t,e){null===A&&z();var i=w[A];void 0===i&&(w[A]=i={type:void 0,texture:void 0}),i.type===t&&i.texture===e||(l.bindTexture(t,e||P[t]),i.type=t,i.texture=e)},unbindTexture:function(){var t=w[A];void 0!==t&&void 0!==t.type&&(l.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{l.compressedTexImage2D.apply(l,arguments)}catch(t){}},texImage2D:function(){try{l.texImage2D.apply(l,arguments)}catch(t){}},texImage3D:function(){try{l.texImage3D.apply(l,arguments)}catch(t){}},scissor:function(t){!1===D.equals(t)&&(l.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===R.equals(t)&&(l.viewport(t.x,t.y,t.z,t.w),R.copy(t))},reset:function(){o={},w={},y=_=h=s=A=null,r.reset(),n.reset(),a.reset()}}}function Go(b,r,T,E,n,S,h){var t,a,M=n.isWebGL2,A=(n.maxTextures,n.maxCubemapSize),v=n.maxTextureSize,e=n.maxSamples,o=new WeakMap,i=!1;try{i="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function s(t,e){return i?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function w(t,e,i,r){var n=1;if((n=t.width>r||t.height>r?r/Math.max(t.width,t.height):n)<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){r=e?He.floorPowerOfTwo:Math.floor,e=r(n*t.width),n=r(n*t.height);void 0===a&&(a=s(e,n));i=i?s(e,n):a;return i.width=e,i.height=n,i.getContext("2d").drawImage(t,0,0,e,n),i}return 0 in t,t}return t}function D(t){return He.isPowerOfTwo(t.width)&&He.isPowerOfTwo(t.height)}function R(t,e){return t.generateMipmaps&&e&&t.minFilter!==St&&t.minFilter!==Dt}function O(t,e,i,r){b.generateMipmap(t),E.get(e).__maxMipLevel=Math.log(Math.max(i,r))*Math.LOG2E}function P(t,e,i){if(!1===M)return e;if(null!==t&&void 0!==b[t])return b[t];t=e;return 6403===e&&(5126===i&&(t=33326),5131===i&&(t=33325),5121===i&&(t=33321)),6407===e&&(5126===i&&(t=34837),5131===i&&(t=34843),5121===i&&(t=32849)),6408===e&&(5126===i&&(t=34836),5131===i&&(t=34842),5121===i&&(t=32856)),33325!==t&&33326!==t&&34842!==t&&34836!==t||r.get("EXT_color_buffer_float"),t}function u(t){return t===St||t===At||t===wt?9728:9729}function l(t){var e,i=t.target;i.removeEventListener("dispose",l),e=i,void 0!==(t=E.get(e)).__webglInit&&(b.deleteTexture(t.__webglTexture),E.remove(e)),i.isVideoTexture&&o.delete(i),h.memory.textures--}function c(t){t=t.target;t.removeEventListener("dispose",c),function(t){var e=E.get(t),i=E.get(t.texture);if(t){if(void 0!==i.__webglTexture&&b.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var r=0;r<6;r++)b.deleteFramebuffer(e.__webglFramebuffer[r]),e.__webglDepthbuffer&&b.deleteRenderbuffer(e.__webglDepthbuffer[r]);else b.deleteFramebuffer(e.__webglFramebuffer),e.__webglDepthbuffer&&b.deleteRenderbuffer(e.__webglDepthbuffer),e.__webglMultisampledFramebuffer&&b.deleteFramebuffer(e.__webglMultisampledFramebuffer),e.__webglColorRenderbuffer&&b.deleteRenderbuffer(e.__webglColorRenderbuffer),e.__webglDepthRenderbuffer&&b.deleteRenderbuffer(e.__webglDepthRenderbuffer);E.remove(t.texture),E.remove(t)}}(t),h.memory.textures--}var p=0;function d(t,e){var i,r=E.get(t);if(t.isVideoTexture&&(n=t,i=h.render.frame,o.get(n)!==i&&(o.set(n,i),n.update())),0<t.version&&r.__version!==t.version){var n=t.image;if(void 0!==n&&!1!==n.complete)return void y(r,t,e)}T.activeTexture(33984+e),T.bindTexture(3553,r.__webglTexture)}function f(t,e){if(6===t.image.length){var i=E.get(t);if(0<t.version&&i.__version!==t.version){I(i,t),T.activeTexture(33984+e),T.bindTexture(34067,i.__webglTexture),b.pixelStorei(37440,t.flipY);for(var r=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),n=t.image[0]&&t.image[0].isDataTexture,a=[],o=0;o<6;o++)a[o]=r||n?n?t.image[o].image:t.image[o]:w(t.image[o],!1,!0,A);var s=a[0],u=D(s)||M,h=S.convert(t.format),l=S.convert(t.type),c=P(t.internalFormat,h,l);if(C(34067,t,u),r){for(var p=0;p<6;p++)for(var d=a[p].mipmaps,f=0;f<d.length;f++){var m=d[f];t.format!==Ut&&t.format!==Bt?null!==h&&T.compressedTexImage2D(34069+p,f,c,m.width,m.height,0,m.data):T.texImage2D(34069+p,f,c,m.width,m.height,0,h,l,m.data)}i.__maxMipLevel=d.length-1}else{d=t.mipmaps;for(var v=0;v<6;v++)if(n){T.texImage2D(34069+v,0,c,a[v].width,a[v].height,0,h,l,a[v].data);for(var g=0;g<d.length;g++){var _=d[g].image[v].image;T.texImage2D(34069+v,g+1,c,_.width,_.height,0,h,l,_.data)}}else{T.texImage2D(34069+v,0,c,h,l,a[v]);for(var y=0;y<d.length;y++){var x=d[y];T.texImage2D(34069+v,y+1,c,h,l,x.image[v])}}i.__maxMipLevel=d.length}R(t,u)&&O(34067,t,s.width,s.height),i.__version=t.version,t.onUpdate&&t.onUpdate(t)}else T.activeTexture(33984+e),T.bindTexture(34067,i.__webglTexture)}}function m(t,e){T.activeTexture(33984+e),T.bindTexture(34067,E.get(t).__webglTexture)}var g=(j(t={},G,10497),j(t,k,33071),j(t,z,33648),t),_=(j(t={},St,9728),j(t,At,9984),j(t,wt,9986),j(t,Dt,9729),j(t,Rt,9985),j(t,Ot,9987),t);function C(t,e,i){i?(b.texParameteri(t,10242,g[e.wrapS]),b.texParameteri(t,10243,g[e.wrapT]),32879!==t&&35866!==t||b.texParameteri(t,32882,g[e.wrapR]),b.texParameteri(t,10240,_[e.magFilter]),b.texParameteri(t,10241,_[e.minFilter])):(b.texParameteri(t,10242,33071),b.texParameteri(t,10243,33071),32879!==t&&35866!==t||b.texParameteri(t,32882,33071),e.wrapS!==k||e.wrapT,b.texParameteri(t,10240,u(e.magFilter)),b.texParameteri(t,10241,u(e.minFilter)),e.minFilter!==St&&e.minFilter);i=r.get("EXT_texture_filter_anisotropic");i&&(e.type===Lt&&null===r.get("OES_texture_float_linear")||e.type===Nt&&null===(M||r.get("OES_texture_half_float_linear"))||(1<e.anisotropy||E.get(e).__currentAnisotropy)&&(b.texParameterf(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,n.getMaxAnisotropy())),E.get(e).__currentAnisotropy=e.anisotropy))}function I(t,e){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",l),t.__webglTexture=b.createTexture(),h.memory.textures++)}function y(t,e,i){var r=3553;e.isDataTexture2DArray&&(r=35866),e.isDataTexture3D&&(r=32879),I(t,e),T.activeTexture(33984+i),T.bindTexture(r,t.__webglTexture),b.pixelStorei(37440,e.flipY),b.pixelStorei(37441,e.premultiplyAlpha),b.pixelStorei(3317,e.unpackAlignment);var n,i=(a=e,!M&&(a.wrapS!==k||a.wrapT!==k||a.minFilter!==St&&a.minFilter!==Dt)&&!1===D(e.image)),a=w(e.image,i,!1,v),i=D(a)||M,o=S.convert(e.format),s=S.convert(e.type),u=P(e.internalFormat,o,s);C(r,e,i);var h=e.mipmaps;if(e.isDepthTexture)u=6402,M?u=e.type===Lt?36012:e.type===It?33190:e.type===Ft?35056:33189:e.type,e.format===Gt&&6402===u&&e.type!==Ct&&e.type!==It&&(e.type=Ct,s=S.convert(e.type)),e.format===kt&&6402===u&&(u=34041,e.type!==Ft&&(e.type=Ft,s=S.convert(e.type))),T.texImage2D(3553,0,u,a.width,a.height,0,o,s,null);else if(e.isDataTexture)if(0<h.length&&i){for(var l=0,c=h.length;l<c;l++)n=h[l],T.texImage2D(3553,l,u,n.width,n.height,0,o,s,n.data);e.generateMipmaps=!1,t.__maxMipLevel=h.length-1}else T.texImage2D(3553,0,u,a.width,a.height,0,o,s,a.data),t.__maxMipLevel=0;else if(e.isCompressedTexture){for(var p=0,d=h.length;p<d;p++)n=h[p],e.format!==Ut&&e.format!==Bt?null!==o&&T.compressedTexImage2D(3553,p,u,n.width,n.height,0,n.data):T.texImage2D(3553,p,u,n.width,n.height,0,o,s,n.data);t.__maxMipLevel=h.length-1}else if(e.isDataTexture2DArray)T.texImage3D(35866,0,u,a.width,a.height,a.depth,0,o,s,a.data),t.__maxMipLevel=0;else if(e.isDataTexture3D)T.texImage3D(32879,0,u,a.width,a.height,a.depth,0,o,s,a.data),t.__maxMipLevel=0;else if(0<h.length&&i){for(var f=0,m=h.length;f<m;f++)n=h[f],T.texImage2D(3553,f,u,o,s,n);e.generateMipmaps=!1,t.__maxMipLevel=h.length-1}else T.texImage2D(3553,0,u,o,s,a),t.__maxMipLevel=0;R(e,i)&&O(r,e,a.width,a.height),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function x(t,e,i,r){var n=S.convert(e.texture.format),a=S.convert(e.texture.type),o=P(e.texture.internalFormat,n,a);T.texImage2D(r,0,o,e.width,e.height,0,n,a,null),b.bindFramebuffer(36160,t),b.framebufferTexture2D(36160,i,r,E.get(e.texture).__webglTexture,0),b.bindFramebuffer(36160,null)}function L(t,e,i){var r,n,a;b.bindRenderbuffer(36161,t),e.depthBuffer&&!e.stencilBuffer?(r=33189,i?((n=e.depthTexture)&&n.isDepthTexture&&(n.type===Lt?r=36012:n.type===It&&(r=33190)),n=F(e),b.renderbufferStorageMultisample(36161,n,r,e.width,e.height)):b.renderbufferStorage(36161,r,e.width,e.height),b.framebufferRenderbuffer(36160,36096,36161,t)):e.depthBuffer&&e.stencilBuffer?(i?(a=F(e),b.renderbufferStorageMultisample(36161,a,35056,e.width,e.height)):b.renderbufferStorage(36161,34041,e.width,e.height),b.framebufferRenderbuffer(36160,33306,36161,t)):(a=S.convert(e.texture.format),t=S.convert(e.texture.type),t=P(e.texture.internalFormat,a,t),i?(i=F(e),b.renderbufferStorageMultisample(36161,i,t,e.width,e.height)):b.renderbufferStorage(36161,t,e.width,e.height)),b.bindRenderbuffer(36161,null)}function N(t){var e=E.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,e){if(e&&e.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(b.bindFramebuffer(36160,t),!e.depthTexture||!e.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(E.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),d(e.depthTexture,0),t=E.get(e.depthTexture).__webglTexture,e.depthTexture.format===Gt)b.framebufferTexture2D(36160,36096,3553,t,0);else{if(e.depthTexture.format!==kt)throw new Error("Unknown depthTexture format");b.framebufferTexture2D(36160,33306,3553,t,0)}}(e.__webglFramebuffer,t)}else if(i){e.__webglDepthbuffer=[];for(var r=0;r<6;r++)b.bindFramebuffer(36160,e.__webglFramebuffer[r]),e.__webglDepthbuffer[r]=b.createRenderbuffer(),L(e.__webglDepthbuffer[r],t,!1)}else b.bindFramebuffer(36160,e.__webglFramebuffer),e.__webglDepthbuffer=b.createRenderbuffer(),L(e.__webglDepthbuffer,t,!1);b.bindFramebuffer(36160,null)}function F(t){return M&&t.isWebGLMultisampleRenderTarget?Math.min(e,t.samples):0}var B=!1,U=!1;this.allocateTextureUnit=function(){var t=p;return p+=1,t},this.resetTextureUnits=function(){p=0},this.setTexture2D=d,this.setTexture2DArray=function(t,e){var i=E.get(t);0<t.version&&i.__version!==t.version?y(i,t,e):(T.activeTexture(33984+e),T.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=E.get(t);0<t.version&&i.__version!==t.version?y(i,t,e):(T.activeTexture(33984+e),T.bindTexture(32879,i.__webglTexture))},this.setTextureCube=f,this.setTextureCubeDynamic=m,this.setupRenderTarget=function(t){var e=E.get(t),i=E.get(t.texture);t.addEventListener("dispose",c),i.__webglTexture=b.createTexture(),h.memory.textures++;var r,n=!0===t.isWebGLCubeRenderTarget,a=!0===t.isWebGLMultisampleRenderTarget,o=D(t)||M;if(!M||t.texture.format!==Bt||t.texture.type!==Lt&&t.texture.type!==Nt||(t.texture.format=Ut),n){e.__webglFramebuffer=[];for(var s=0;s<6;s++)e.__webglFramebuffer[s]=b.createFramebuffer()}else e.__webglFramebuffer=b.createFramebuffer(),a&&M&&(e.__webglMultisampledFramebuffer=b.createFramebuffer(),e.__webglColorRenderbuffer=b.createRenderbuffer(),b.bindRenderbuffer(36161,e.__webglColorRenderbuffer),r=S.convert(t.texture.format),a=S.convert(t.texture.type),r=P(t.texture.internalFormat,r,a),a=F(t),b.renderbufferStorageMultisample(36161,a,r,t.width,t.height),b.bindFramebuffer(36160,e.__webglMultisampledFramebuffer),b.framebufferRenderbuffer(36160,36064,36161,e.__webglColorRenderbuffer),b.bindRenderbuffer(36161,null),t.depthBuffer&&(e.__webglDepthRenderbuffer=b.createRenderbuffer(),L(e.__webglDepthRenderbuffer,t,!0)),b.bindFramebuffer(36160,null));if(n){T.bindTexture(34067,i.__webglTexture),C(34067,t.texture,o);for(var u=0;u<6;u++)x(e.__webglFramebuffer[u],t,36064,34069+u);R(t.texture,o)&&O(34067,t.texture,t.width,t.height),T.bindTexture(34067,null)}else T.bindTexture(3553,i.__webglTexture),C(3553,t.texture,o),x(e.__webglFramebuffer,t,36064,3553),R(t.texture,o)&&O(3553,t.texture,t.width,t.height),T.bindTexture(3553,null);t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(t){var e,i,r=t.texture;R(r,D(t)||M)&&(e=t.isWebGLCubeRenderTarget?34067:3553,i=E.get(r).__webglTexture,T.bindTexture(e,i),O(e,r,t.width,t.height),T.bindTexture(e,null))},this.updateMultisampleRenderTarget=function(t){var e,i,r,n;t.isWebGLMultisampleRenderTarget&&M&&(e=E.get(t),b.bindFramebuffer(36008,e.__webglMultisampledFramebuffer),b.bindFramebuffer(36009,e.__webglFramebuffer),i=t.width,r=t.height,n=16384,t.depthBuffer&&(n|=256),t.stencilBuffer&&(n|=1024),b.blitFramebuffer(0,0,i,r,0,0,i,r,n,9728),b.bindFramebuffer(36160,e.__webglMultisampledFramebuffer))},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===B&&(B=!0),t=t.texture),d(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===U&&(U=!0),t=t.texture),(t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?f:m)(t,e)}}function ko(t,i,e){var r=e.isWebGL2;return{convert:function(t){var e;if(t===Pt)return 5121;if(t===y)return 32819;if(t===x)return 32820;if(t===b)return 33635;if(t===s)return 5120;if(t===f)return 5122;if(t===Ct)return 5123;if(t===g)return 5124;if(t===It)return 5125;if(t===Lt)return 5126;if(t===Nt)return r?5131:null!==(e=i.get("OES_texture_half_float"))?e.HALF_FLOAT_OES:null;if(t===w)return 6406;if(t===Bt)return 6407;if(t===Ut)return 6408;if(t===D)return 6409;if(t===P)return 6410;if(t===Gt)return 6402;if(t===kt)return 34041;if(t===I)return 6403;if(t===L)return 36244;if(t===N)return 33319;if(t===F)return 33320;if(t===U)return 36248;if(t===zt)return 36249;if(t===jt||t===Ht||t===Vt||t===Xt){if(null===(e=i.get("WEBGL_compressed_texture_s3tc")))return null;if(t===jt)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Ht)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Vt)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Xt)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Wt||t===Yt||t===qt||t===Zt){if(null===(e=i.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===Wt)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Yt)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===qt)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Zt)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Jt)return null!==(e=i.get("WEBGL_compressed_texture_etc1"))?e.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===Kt||t===Qt)&&null!==(e=i.get("WEBGL_compressed_texture_etc"))){if(t===Kt)return e.COMPRESSED_RGB8_ETC2;if(t===Qt)return e.COMPRESSED_RGBA8_ETC2_EAC}return t===$t||t===te||t===ee||t===ie||t===re||t===ne||t===ae||t===oe||t===se||t===ue||t===he||t===le||t===ce||t===pe||t===fe||t===me||t===ve||t===ge||t===_e||t===ye||t===xe||t===be||t===Te||t===Ee||t===Se||t===Me||t===Ae||t===we?null!==(e=i.get("WEBGL_compressed_texture_astc"))?t:null:t===de?null!==(e=i.get("EXT_texture_compression_bptc"))?t:null:t===Ft?r?34042:null!==(e=i.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function zo(t){Rn.call(this),this.cameras=t||[]}function jo(){$i.call(this),this.type="Group"}function Ho(){this._targetRay=null,this._grip=null,this._hand=null}function Vo(d,e){var i=this,f=null,r=1,m=null,n="local-floor",v=null,g=[],h=new Map,s=new Rn;s.layers.enable(1),s.viewport=new Je;var u=new Rn;u.layers.enable(2),u.viewport=new Je;var _=[s,u],y=new zo;y.layers.enable(1),y.layers.enable(2);var l=null,c=null;function a(t){var e=h.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function o(){h.forEach(function(t,e){t.disconnect(e)}),h.clear(),d.setFramebuffer(null),d.setRenderTarget(d.getRenderTarget()),M.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function p(t){m=t,M.setContext(f),M.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}function x(t){for(var e=f.inputSources,i=0;i<g.length;i++)h.set(e[i],g[i]);for(var r=0;r<t.removed.length;r++){var n=t.removed[r],a=h.get(n);a&&(a.dispatchEvent({type:"disconnected",data:n}),h.delete(n))}for(var o=0;o<t.added.length;o++){var s=t.added[o],u=h.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var e=g[t];return void 0===e&&(e=new Ho,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=g[t];return void 0===e&&(e=new Ho,g[t]=e),e.getGripSpace()},this.getHand=function(t){var e=g[t];return void 0===e&&(e=new Ho,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,i.isPresenting},this.setReferenceSpaceType=function(t){n=t,i.isPresenting},this.getReferenceSpace=function(){return m},this.getSession=function(){return f},this.setSession=function(t){null!==(f=t)&&(f.addEventListener("select",a),f.addEventListener("selectstart",a),f.addEventListener("selectend",a),f.addEventListener("squeeze",a),f.addEventListener("squeezestart",a),f.addEventListener("squeezeend",a),f.addEventListener("end",o),!0!==(t=e.getContextAttributes()).xrCompatible&&e.makeXRCompatible(),t={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:r},t=new XRWebGLLayer(f,e,t),f.updateRenderState({baseLayer:t}),f.requestReferenceSpace(n).then(p),f.addEventListener("inputsourceschange",x))};var b=new ti,T=new ti;function E(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){y.near=u.near=s.near=t.near,y.far=u.far=s.far=t.far,l===y.near&&c===y.far||(f.updateRenderState({depthNear:y.near,depthFar:y.far}),l=y.near,c=y.far);var e=t.parent,i=y.cameras;E(y,e);for(var r=0;r<i.length;r++)E(i[r],e);t.matrixWorld.copy(y.matrixWorld);for(var n=t.children,a=0,o=n.length;a<o;a++)n[a].updateMatrixWorld(!0);return 2===i.length?function(t,e,i){b.setFromMatrixPosition(e.matrixWorld),T.setFromMatrixPosition(i.matrixWorld);var r=b.distanceTo(T),n=e.projectionMatrix.elements,a=i.projectionMatrix.elements,o=n[14]/(n[10]-1),s=n[14]/(n[10]+1),u=(n[9]+1)/n[5],h=(n[9]-1)/n[5],l=(n[8]-1)/n[0],i=(a[8]+1)/a[0],n=o*l,a=o*i,l=(i=r/(i-l))*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(l),t.translateZ(i),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld),o+=i,i=s+i,t.projectionMatrix.makePerspective(n-l,r-l+a,u*s/i*o,h*s/i*o,o,i)}(y,s,u):y.projectionMatrix.copy(s.projectionMatrix),y};var S=null;var M=new Un;M.setAnimationLoop(function(t,e){if(null!==(v=e.getViewerPose(m))){var i=v.views,r=f.renderState.baseLayer;d.setFramebuffer(r.framebuffer);var n=!1;i.length!==y.cameras.length&&(n=!(y.cameras.length=0));for(var a=0;a<i.length;a++){var o=i[a],s=r.getViewport(o),u=_[a];u.matrix.fromArray(o.transform.matrix),u.projectionMatrix.fromArray(o.projectionMatrix),u.viewport.set(s.x,s.y,s.width,s.height),0===a&&y.matrix.copy(u.matrix),!0===n&&y.cameras.push(u)}}for(var h=f.inputSources,l=0;l<g.length;l++){var c=g[l],p=h[l];c.update(p,e,m)}S&&S(t,e)}),this.setAnimationLoop=function(t){S=t},this.dispose=function(){}}function Xo(a){function u(t,e){t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap);var i,r,n=a.get(e).envMap;n&&(t.envMap.value=n,t.flipEnvMap.value=n.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,void 0!==(n=a.get(n).__maxMipLevel)&&(t.maxMipLevel.value=n)),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap?i=e.emissiveMap:e.clearcoatMap?i=e.clearcoatMap:e.clearcoatNormalMap?i=e.clearcoatNormalMap:e.clearcoatRoughnessMap&&(i=e.clearcoatRoughnessMap),void 0!==i&&(!0===(i=i.isWebGLRenderTarget?i.texture:i).matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),e.aoMap?r=e.aoMap:e.lightMap&&(r=e.lightMap),void 0!==r&&(!0===(r=r.isWebGLRenderTarget?r.texture:r).matrixAutoUpdate&&r.updateMatrix(),t.uv2Transform.value.copy(r.matrix))}function h(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===W&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===W&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),a.get(e).envMap&&(t.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,e,i,r){var n,a,o,s;e.isMeshBasicMaterial?u(t,e):e.isMeshLambertMaterial?(u(t,e),o=t,(s=e).emissiveMap&&(o.emissiveMap.value=s.emissiveMap)):e.isMeshToonMaterial?(u(t,e),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===W&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===W&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,e)):e.isMeshPhongMaterial?(u(t,e),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===W&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===W&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,e)):e.isMeshStandardMaterial?(u(t,e),(e.isMeshPhysicalMaterial?function(t,e){h(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen);e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap);e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap);e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===W&&t.clearcoatNormalScale.value.negate());t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}:h)(t,e)):e.isMeshMatcapMaterial?(u(t,e),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===W&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===W&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,e)):e.isMeshDepthMaterial?(u(t,e),n=t,(a=e).displacementMap&&(n.displacementMap.value=a.displacementMap,n.displacementScale.value=a.displacementScale,n.displacementBias.value=a.displacementBias)):e.isMeshDistanceMaterial?(u(t,e),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,e)):e.isMeshNormalMaterial?(u(t,e),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===W&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===W&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,e)):e.isLineBasicMaterial?(n=e,(a=t).diffuse.value.copy(n.color),a.opacity.value=n.opacity,e.isLineDashedMaterial&&(a=e,(n=t).dashSize.value=a.dashSize,n.totalSize.value=a.dashSize+a.gapSize,n.scale.value=a.scale)):e.isPointsMaterial?function(t,e,i,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,e,i,r):e.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);var i;e.map?i=e.map:e.alphaMap&&(i=e.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix))}(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}}}function Wo(t){var n=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,h=void 0!==t.powerPreference?t.powerPreference:"default",l=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,g=null,_=null;this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Re,this.physicallyCorrectLights=!1,this.toneMapping=Mt,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d=this,c=!1,p=null,f=0,m=0,v=null,y=null,x=-1,b=null,T=null,E=new Je,S=new Je,M=null,A=n.width,w=n.height,D=1,R=null,O=null,P=new Je(0,0,A,w),C=new Je(0,0,A,w),I=!1,L=new Bn,N=!1,F=!1,B=new Di,U=new ti,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function k(){return null===v?D:1}var z,j,H,V,X,W,Y,q,Z,J,K,Q,$,tt,et,it,rt,nt,at,ot,st,ut=e;function ht(t,e){for(var i=0;i<t.length;i++){var r=t[i],r=n.getContext(r,e);if(null!==r)return r}return null}try{var lt={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:l};if(n.addEventListener("webglcontextlost",mt,!1),n.addEventListener("webglcontextrestored",vt,!1),null===ut){var ct=["webgl2","webgl","experimental-webgl"];if(!0===d.isWebGL1Renderer&&ct.shift(),null===(ut=ht(ct,lt)))throw ht(ct)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ut.getShaderPrecisionFormat&&(ut.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw t}function pt(){z=new Kn(ut),!1===(j=new qn(ut,z,t)).isWebGL2&&(z.get("WEBGL_depth_texture"),z.get("OES_texture_float"),z.get("OES_texture_half_float"),z.get("OES_texture_half_float_linear"),z.get("OES_standard_derivatives"),z.get("OES_element_index_uint"),z.get("OES_vertex_array_object"),z.get("ANGLE_instanced_arrays")),z.get("OES_texture_float_linear"),ot=new ko(0,z,j),(H=new Uo(ut,z,j)).scissor(S.copy(C).multiplyScalar(D).floor()),H.viewport(E.copy(P).multiplyScalar(D).floor()),V=new ta,X=new To,W=new Go(ut,z,H,X,j,ot,V),Y=new Jn(d),q=new Gn(ut,j),st=new Wn(ut,z,q,j),Z=new Qn(0,q,V,st),J=new na(0,Z,q,V),rt=new ra(ut),et=new Zn(X),K=new bo(d,Y,z,j,st,et),Q=new Xo(X),$=new Ao(X),tt=new Co,it=new Xn(d,Y,H,J,s),nt=new Yn(ut,z,V,j),at=new $n(ut,z,V,j),V.programs=K.programs,d.capabilities=j,d.extensions=z,d.properties=X,d.renderLists=$,d.state=H,d.info=V}pt();var dt=new Vo(d,ut);this.xr=dt;var ft=new Bo(d,J,j.maxTextureSize);function mt(t){t.preventDefault(),c=!0}function vt(){c=!1,pt()}function gt(t){t=t.target;t.removeEventListener("dispose",gt),_t(t=t),X.remove(t)}function _t(t){t=X.get(t).program;void 0!==t&&K.releaseProgram(t)}this.shadowMap=ft,this.getContext=function(){return ut},this.getContextAttributes=function(){return ut.getContextAttributes()},this.forceContextLoss=function(){var t=z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(t){void 0!==t&&(D=t,this.setSize(A,w,!1))},this.getSize=function(t){return(t=void 0===t?new Ve:t).set(A,w)},this.setSize=function(t,e,i){dt.isPresenting||(A=t,w=e,n.width=Math.floor(t*D),n.height=Math.floor(e*D),!1!==i&&(n.style.width=t+"px",n.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return(t=void 0===t?new Ve:t).set(A*D,w*D).floor()},this.setDrawingBufferSize=function(t,e,i){A=t,w=e,D=i,n.width=Math.floor(t*i),n.height=Math.floor(e*i),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return(t=void 0===t?new Je:t).copy(E)},this.getViewport=function(t){return t.copy(P)},this.setViewport=function(t,e,i,r){t.isVector4?P.set(t.x,t.y,t.z,t.w):P.set(t,e,i,r),H.viewport(E.copy(P).multiplyScalar(D).floor())},this.getScissor=function(t){return t.copy(C)},this.setScissor=function(t,e,i,r){t.isVector4?C.set(t.x,t.y,t.z,t.w):C.set(t,e,i,r),H.scissor(S.copy(C).multiplyScalar(D).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(t){H.setScissorTest(I=t)},this.setOpaqueSort=function(t){R=t},this.setTransparentSort=function(t){O=t},this.getClearColor=function(){return it.getClearColor()},this.setClearColor=function(){it.setClearColor.apply(it,arguments)},this.getClearAlpha=function(){return it.getClearAlpha()},this.setClearAlpha=function(){it.setClearAlpha.apply(it,arguments)},this.clear=function(t,e,i){var r=0;void 0!==t&&!t||(r|=16384),void 0!==e&&!e||(r|=256),void 0!==i&&!i||(r|=1024),ut.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",mt,!1),n.removeEventListener("webglcontextrestored",vt,!1),$.dispose(),tt.dispose(),X.dispose(),Y.dispose(),J.dispose(),st.dispose(),dt.dispose(),xt.stop()},this.renderBufferImmediate=function(t,e){st.initAttributes();var i=X.get(t);t.hasPositions&&!i.position&&(i.position=ut.createBuffer()),t.hasNormals&&!i.normal&&(i.normal=ut.createBuffer()),t.hasUvs&&!i.uv&&(i.uv=ut.createBuffer()),t.hasColors&&!i.color&&(i.color=ut.createBuffer());e=e.getAttributes();t.hasPositions&&(ut.bindBuffer(34962,i.position),ut.bufferData(34962,t.positionArray,35048),st.enableAttribute(e.position),ut.vertexAttribPointer(e.position,3,5126,!1,0,0)),t.hasNormals&&(ut.bindBuffer(34962,i.normal),ut.bufferData(34962,t.normalArray,35048),st.enableAttribute(e.normal),ut.vertexAttribPointer(e.normal,3,5126,!1,0,0)),t.hasUvs&&(ut.bindBuffer(34962,i.uv),ut.bufferData(34962,t.uvArray,35048),st.enableAttribute(e.uv),ut.vertexAttribPointer(e.uv,2,5126,!1,0,0)),t.hasColors&&(ut.bindBuffer(34962,i.color),ut.bufferData(34962,t.colorArray,35048),st.enableAttribute(e.color),ut.vertexAttribPointer(e.color,3,5126,!1,0,0)),st.disableUnusedAttributes(),ut.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,i,r,n,a){null===e&&(e=G);var o=n.isMesh&&n.matrixWorld.determinant()<0,s=St(t,e,r,n);H.setMaterial(r,o);var u=i.index,t=i.attributes.position;if(null===u){if(void 0===t||0===t.count)return}else if(0===u.count)return;e=1;!0===r.wireframe&&(u=Z.getWireframeAttribute(i),e=2),(r.morphTargets||r.morphNormals)&&rt.update(n,i,r,s),st.setup(n,r,s,i,u);o=nt;null!==u&&(h=q.get(u),(o=at).setIndex(h));var s=(null!==u?u:t).count,h=i.drawRange.start*e,u=i.drawRange.count*e,t=null!==a?a.start*e:0,a=null!==a?a.count*e:1/0,e=Math.max(h,t),a=Math.min(s,h+u,t+a)-1,a=Math.max(0,a-e+1);0!==a&&(n.isMesh?!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*k()),o.setMode(1)):o.setMode(4):n.isLine?(r=r.linewidth,H.setLineWidth((r=void 0===r?1:r)*k()),n.isLineSegments?o.setMode(1):n.isLineLoop?o.setMode(2):o.setMode(3)):n.isPoints?o.setMode(0):n.isSprite&&o.setMode(4),n.isInstancedMesh?o.renderInstances(e,a,n.count):i.isInstancedBufferGeometry?(i=Math.min(i.instanceCount,i._maxInstanceCount),o.renderInstances(e,a,i)):o.render(e,a))},this.compile=function(n,t){(_=tt.get(n,t)).init(),n.traverse(function(t){t.isLight&&(_.pushLight(t),t.castShadow&&_.pushShadow(t))}),_.setupLights(t);var a=new WeakMap;n.traverse(function(t){var e=t.material;if(e)if(Array.isArray(e))for(var i=0;i<e.length;i++){var r=e[i];!1===a.has(r)&&(Et(r,n,t),a.set(r))}else!1===a.has(e)&&(Et(e,n,t),a.set(e))})};var yt=null;var xt=new Un;function bt(t,e,i){for(var r=!0===e.isScene?e.overrideMaterial:null,n=0,a=t.length;n<a;n++){var o=t[n],s=o.object,u=o.geometry,h=null===r?o.material:r,l=o.group;if(i.isArrayCamera)for(var c=(T=i).cameras,p=0,d=c.length;p<d;p++){var f=c[p];s.layers.test(f.layers)&&(H.viewport(E.copy(f.viewport)),_.setupLights(f),Tt(s,e,f,u,h,l))}else T=null,Tt(s,e,i,u,h,l)}}function Tt(t,e,i,r,n,a){var o,s;t.onBeforeRender(d,e,i,r,n,a),_=tt.get(e,T||i),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject?(o=St(i,e,n,t),H.setMaterial(n),st.reset(),s=o,t.render(function(t){d.renderBufferImmediate(t,s)})):d.renderBufferDirect(i,e,r,n,t,a),t.onAfterRender(d,e,i,r,n,a),_=tt.get(e,T||i)}function Et(t,e,i){!0!==e.isScene&&(e=G);var r=X.get(t),n=_.state.lights,a=_.state.shadowsArray,o=n.state.version,s=K.getParameters(t,n.state,a,e,i),u=K.getProgramCacheKey(s),h=r.program,a=!0;if(void 0===h)t.addEventListener("dispose",gt);else if(h.cacheKey!==u)_t(t);else if(r.lightsStateVersion!==o)a=!1;else{if(void 0!==s.shaderID){i=t.isMeshStandardMaterial?e.environment:null;return void(r.envMap=Y.get(t.envMap||i))}a=!1}a&&(s.uniforms=K.getUniforms(t),t.onBeforeCompile(s,d),h=K.acquireProgram(s,u),r.program=h,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding);s=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=et.numPlanes,r.numIntersection=et.numIntersection,s.clippingPlanes=et.uniform),r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=Y.get(t.envMap||r.environment),r.needsLights=(t=t).isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights,r.lightsStateVersion=o,r.needsLights&&(s.ambientLightColor.value=n.state.ambient,s.lightProbe.value=n.state.probe,s.directionalLights.value=n.state.directional,s.directionalLightShadows.value=n.state.directionalShadow,s.spotLights.value=n.state.spot,s.spotLightShadows.value=n.state.spotShadow,s.rectAreaLights.value=n.state.rectArea,s.ltc_1.value=n.state.rectAreaLTC1,s.ltc_2.value=n.state.rectAreaLTC2,s.pointLights.value=n.state.point,s.pointLightShadows.value=n.state.pointShadow,s.hemisphereLights.value=n.state.hemi,s.directionalShadowMap.value=n.state.directionalShadowMap,s.directionalShadowMatrix.value=n.state.directionalShadowMatrix,s.spotShadowMap.value=n.state.spotShadowMap,s.spotShadowMatrix.value=n.state.spotShadowMatrix,s.pointShadowMap.value=n.state.pointShadowMap,s.pointShadowMatrix.value=n.state.pointShadowMatrix);n=r.program.getUniforms(),s=eo.seqWithValue(n.seq,s);r.uniformsList=s}function St(t,e,i,r){!0!==e.isScene&&(e=G),W.resetTextureUnits();var n=e.fog,a=i.isMeshStandardMaterial?e.environment:null,o=null===v?d.outputEncoding:v.texture.encoding,s=Y.get(i.envMap||a),u=X.get(i),h=_.state.lights;!0===N&&(!0!==F&&t===b||(p=t===b&&i.id===x,et.setState(i,t,p))),i.version===u.__version?(i.fog&&u.fog!==n||u.environment!==a||u.needsLights&&u.lightsStateVersion!==h.state.version||void 0!==u.numClippingPlanes&&(u.numClippingPlanes!==et.numPlanes||u.numIntersection!==et.numIntersection)||u.outputEncoding!==o||u.envMap!==s)&&Et(i,e,r):(Et(i,e,r),u.__version=i.version);var l,c=!1,p=!1,a=!1,h=u.program,o=h.getUniforms(),s=u.uniforms;return H.useProgram(h.program)&&(a=p=c=!0),i.id!==x&&(x=i.id,p=!0),!c&&b===t||(o.setValue(ut,"projectionMatrix",t.projectionMatrix),j.logarithmicDepthBuffer&&o.setValue(ut,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),b!==t&&(b=t,a=p=!0),!(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap)||void 0!==(l=o.map.cameraPosition)&&l.setValue(ut,U.setFromMatrixPosition(t.matrixWorld)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&o.setValue(ut,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||i.skinning)&&o.setValue(ut,"viewMatrix",t.matrixWorldInverse)),i.skinning&&(o.setOptional(ut,r,"bindMatrix"),o.setOptional(ut,r,"bindMatrixInverse"),(e=r.skeleton)&&(c=e.bones,j.floatVertexTextures?(void 0===e.boneTexture&&(l=Math.sqrt(4*c.length),l=He.ceilPowerOfTwo(l),l=Math.max(l,4),(t=new Float32Array(l*l*4)).set(e.boneMatrices),c=new Ln(t,l,l,Ut,Lt),e.boneMatrices=t,e.boneTexture=c,e.boneTextureSize=l),o.setValue(ut,"boneTexture",e.boneTexture,W),o.setValue(ut,"boneTextureSize",e.boneTextureSize)):o.setOptional(ut,e,"boneMatrices"))),!p&&u.receiveShadow===r.receiveShadow||(u.receiveShadow=r.receiveShadow,o.setValue(ut,"receiveShadow",r.receiveShadow)),p&&(o.setValue(ut,"toneMappingExposure",d.toneMappingExposure),u.needsLights&&(p=a,(a=s).ambientLightColor.needsUpdate=p,a.lightProbe.needsUpdate=p,a.directionalLights.needsUpdate=p,a.directionalLightShadows.needsUpdate=p,a.pointLights.needsUpdate=p,a.pointLightShadows.needsUpdate=p,a.spotLights.needsUpdate=p,a.spotLightShadows.needsUpdate=p,a.rectAreaLights.needsUpdate=p,a.hemisphereLights.needsUpdate=p),n&&i.fog&&Q.refreshFogUniforms(s,n),Q.refreshMaterialUniforms(s,i,D,w),eo.upload(ut,u.uniformsList,s,W)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(eo.upload(ut,u.uniformsList,s,W),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&o.setValue(ut,"center",r.center),o.setValue(ut,"modelViewMatrix",r.modelViewMatrix),o.setValue(ut,"normalMatrix",r.normalMatrix),o.setValue(ut,"modelMatrix",r.matrixWorld),h}xt.setAnimationLoop(function(t){dt.isPresenting||yt&&yt(t)}),"undefined"!=typeof window&&xt.setContext(window),this.setAnimationLoop=function(t){yt=t,dt.setAnimationLoop(t),null===t?xt.stop():xt.start()},this.render=function(t,e){var i,r,n;void 0!==arguments[2]&&(r=arguments[2]),void 0!==arguments[3]&&(n=arguments[3]),void 0!==e&&!0!==e.isCamera||!0!==c&&(st.resetDefaultState(),x=-1,!(b=null)===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===dt.enabled&&!0===dt.isPresenting&&(e=dt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(d,t,e,r||v),(_=tt.get(t,e)).init(),B.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),L.setFromProjectionMatrix(B),F=this.localClippingEnabled,N=et.init(this.clippingPlanes,F,e),(g=$.get(t,e)).init(),function t(e,i,r,n){if(!1===e.visible)return;var a=e.layers.test(i.layers);if(a)if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(i);else if(e.isLight)_.pushLight(e),e.castShadow&&_.pushShadow(e);else if(e.isSprite){var o;e.frustumCulled&&!L.intersectsSprite(e)||(n&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B),o=J.update(e),(a=e.material).visible&&g.push(e,o,a,r,U.z,null))}else if(e.isImmediateRenderObject)n&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B),g.push(e,null,e.material,r,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==V.render.frame&&(e.skeleton.update(),e.skeleton.frame=V.render.frame),!e.frustumCulled||L.intersectsObject(e))){n&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(B);var s=J.update(e),u=e.material;if(Array.isArray(u))for(var h=s.groups,l=0,c=h.length;l<c;l++){var p=h[l],d=u[p.materialIndex];d&&d.visible&&g.push(e,s,d,r,U.z,p)}else u.visible&&g.push(e,s,u,r,U.z,null)}var f=e.children;for(var m=0,v=f.length;m<v;m++)t(f[m],i,r,n)}(t,e,0,d.sortObjects),g.finish(),!0===d.sortObjects&&g.sort(R,O),!0===N&&et.beginShadows(),i=_.state.shadowsArray,ft.render(i,t,e),_.setupLights(e),!0===N&&et.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),it.render(g,t,e,n),r=g.opaque,n=g.transparent,0<r.length&&bt(r,t,e),0<n.length&&bt(n,t,e),!0===t.isScene&&t.onAfterRender(d,t,e),null!==v&&(W.updateRenderTargetMipmap(v),W.updateMultisampleRenderTarget(v)),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),_=g=null)},this.setFramebuffer=function(t){p!==t&&null===v&&ut.bindFramebuffer(36160,t),p=t},this.getActiveCubeFace=function(){return f},this.getActiveMipmapLevel=function(){return m},this.getRenderList=function(){return g},this.setRenderList=function(t){g=t},this.getRenderState=function(){return _},this.setRenderState=function(t){_=t},this.getRenderTarget=function(){return v},this.setRenderTarget=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;f=e,m=i,(v=t)&&void 0===X.get(t).__webglFramebuffer&&W.setupRenderTarget(t);var r,n=p,a=!1;M=t?(r=X.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget?(n=r[e],a=!0):n=t.isWebGLMultisampleRenderTarget?X.get(t).__webglMultisampledFramebuffer:r,E.copy(t.viewport),S.copy(t.scissor),t.scissorTest):(E.copy(P).multiplyScalar(D).floor(),S.copy(C).multiplyScalar(D).floor(),I),y!==n&&(ut.bindFramebuffer(36160,n),y=n),H.viewport(E),H.scissor(S),H.setScissorTest(M),a&&(t=X.get(t.texture),ut.framebufferTexture2D(36160,36064,34069+e,t.__webglTexture,i))},this.readRenderTargetPixels=function(t,e,i,r,n,a,o){if(t&&t.isWebGLRenderTarget){var s=X.get(t).__webglFramebuffer;if(s=t.isWebGLCubeRenderTarget&&void 0!==o?s[o]:s){o=!1;s!==y&&(ut.bindFramebuffer(36160,s),o=!0);try{var u=t.texture,h=u.format,l=u.type;if(h!==Ut&&ot.convert(h)!==ut.getParameter(35739))return;if(!(l===Pt||ot.convert(l)===ut.getParameter(35738)||l===Lt&&(j.isWebGL2||z.get("OES_texture_float")||z.get("WEBGL_color_buffer_float"))||l===Nt&&(j.isWebGL2?z.get("EXT_color_buffer_float"):z.get("EXT_color_buffer_half_float"))))return;36053===ut.checkFramebufferStatus(36160)&&0<=e&&e<=t.width-r&&0<=i&&i<=t.height-n&&ut.readPixels(e,i,r,n,ot.convert(h),ot.convert(l),a)}finally{o&&ut.bindFramebuffer(36160,y)}}}},this.copyFramebufferToTexture=function(t,e,i){void 0===i&&(i=0);var r=Math.pow(2,-i),n=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r),r=ot.convert(e.format);W.setTexture2D(e,0),ut.copyTexImage2D(3553,i,r,t.x,t.y,n,a,0),H.unbindTexture()},this.copyTextureToTexture=function(t,e,i,r){void 0===r&&(r=0);var n=e.image.width,a=e.image.height,o=ot.convert(i.format),s=ot.convert(i.type);W.setTexture2D(i,0),ut.pixelStorei(37440,i.flipY),ut.pixelStorei(37441,i.premultiplyAlpha),ut.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?ut.texSubImage2D(3553,r,t.x,t.y,n,a,o,s,e.image.data):e.isCompressedTexture?ut.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):ut.texSubImage2D(3553,r,t.x,t.y,o,s,e.image),0===r&&i.generateMipmaps&&ut.generateMipmap(3553),H.unbindTexture()},this.initTexture=function(t){W.setTexture2D(t,0),H.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Yo(t){Wo.call(this,t)}zo.prototype=Object.assign(Object.create(Rn.prototype),{constructor:zo,isArrayCamera:!0}),jo.prototype=Object.assign(Object.create($i.prototype),{constructor:jo,isGroup:!0}),Object.assign(Ho.prototype,{constructor:Ho,getHandSpace:function(){if(null===this._hand&&(this._hand=new jo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new jo;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new jo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new jo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,i){var r=null,n=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(t)if(u&&t.hand)for(var h,l,a=!0,c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)t.hand[c]&&(l=e.getJointPose(t.hand[c],i),h=u.joints[c],null!==l&&(h.matrix.fromArray(l.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=l.radius),h.visible=null!==l,h=u.joints[window.XRHand.INDEX_PHALANX_TIP],l=u.joints[window.XRHand.THUMB_PHALANX_TIP],l=h.position.distanceTo(l.position),u.inputState.pinching&&.025<l?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&l<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this})));else null!==o&&null!==(r=e.getPose(t.targetRaySpace,i))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==s&&t.gripSpace&&null!==(n=e.getPose(t.gripSpace,i))&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale));return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==n),null!==u&&(u.visible=null!==a),this}}),Object.assign(Vo.prototype,Ge.prototype),Yo.prototype=Object.assign(Object.create(Wo.prototype),{constructor:Yo,isWebGL1Renderer:!0});var qo=function(){function i(t,e){B(this,i),Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new br(t),this.density=void 0!==e?e:25e-5}return m(i,[{key:"clone",value:function(){return new i(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),i}();i.FogExp2=qo;var Zo=function(){function r(t,e,i){B(this,r),Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new br(t),this.near=void 0!==e?e:1,this.far=void 0!==i?i:1e3}return m(r,[{key:"clone",value:function(){return new r(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),r}();i.Fog=Zo;var Jo=function(){p(i,$i);var e=_(i);function i(){var t;return B(this,i),t=e.call(this),Object.defineProperty(l(t),"isScene",{value:!0}),t.type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:l(t)})),t}return m(i,[{key:"copy",value:function(t,e){return h(d(i.prototype),"copy",this).call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}},{key:"toJSON",value:function(t){var e=h(d(i.prototype),"toJSON",this).call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}]),i}();function Ko(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Fe,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=He.generateUUID()}i.Scene=Jo,Object.defineProperty(Ko.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ko.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,i){t*=this.stride,i*=e.stride;for(var r=0,n=this.stride;r<n;r++)this.array[t+r]=e.array[i+r];return this},set:function(t,e){return this.array.set(t,e=void 0===e?0:e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=He.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);t=new Ko(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=He.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var Qo,$o=new ti;function ts(t,e,i,r){this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=!0===r}function es(t){Sr.call(this),this.type="SpriteMaterial",this.color=new br(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.defineProperties(ts.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(ts.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,i=this.data.count;e<i;e++)$o.x=this.getX(e),$o.y=this.getY(e),$o.z=this.getZ(e),$o.applyMatrix4(t),this.setXYZ(e,$o.x,$o.y,$o.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this},setXYZ:function(t,e,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this},setXYZW:function(t,e,i,r,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=r,this.data.array[t+3]=n,this},clone:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ts(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);for(var e=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,n=0;n<this.itemSize;n++)e.push(this.data.array[r+n]);return new Dr(new this.array.constructor(e),this.itemSize,this.normalized)},toJSON:function(t){if(void 0!==t)return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};for(var e=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,n=0;n<this.itemSize;n++)e.push(this.data.array[r+n]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}),((es.prototype=Object.create(Sr.prototype)).constructor=es).prototype.isSpriteMaterial=!0,es.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var is=new ti,rs=new ti,ns=new ti,as=new Ve,os=new Ve,ss=new Di,us=new ti,hs=new ti,ls=new ti,cs=new Ve,ps=new Ve,ds=new Ve;function fs(t){var e;$i.call(this),this.type="Sprite",void 0===Qo&&(Qo=new Yr,e=new Ko(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5),Qo.setIndex([0,1,2,0,2,3]),Qo.setAttribute("position",new ts(e,3,0,!1)),Qo.setAttribute("uv",new ts(e,2,3,!1))),this.geometry=Qo,this.material=void 0!==t?t:new es,this.center=new Ve(.5,.5)}function ms(t,e,i,r,n,a){as.subVectors(t,i).addScalar(.5).multiply(r),void 0!==n?(os.x=a*as.x-n*as.y,os.y=n*as.x+a*as.y):os.copy(as),t.copy(e),t.x+=os.x,t.y+=os.y,t.applyMatrix4(ss)}fs.prototype=Object.assign(Object.create($i.prototype),{constructor:fs,isSprite:!0,raycast:function(t,e){t.camera,rs.setFromMatrixScale(this.matrixWorld),ss.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ns.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&rs.multiplyScalar(-ns.z);var i,r=this.material.rotation;0!==r&&(n=Math.cos(r),i=Math.sin(r));var n,r=this.center;ms(us.set(-.5,-.5,0),ns,r,rs,i,n),ms(hs.set(.5,-.5,0),ns,r,rs,i,n),ms(ls.set(.5,.5,0),ns,r,rs,i,n),cs.set(0,0),ps.set(1,0),ds.set(1,1),null===t.ray.intersectTriangle(us,hs,ls,!1,is)&&(ms(hs.set(-.5,.5,0),ns,r,rs,i,n),ps.set(0,1),null===t.ray.intersectTriangle(us,ls,hs,!1,is))||((n=t.ray.origin.distanceTo(is))<t.near||n>t.far||e.push({distance:n,point:is.clone(),uv:fr.getUV(is,us,hs,ls,cs,ps,ds,new Ve),face:null,object:this}))},copy:function(t){return $i.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});var vs,gs,_s,ys,xs,bs=new ti,Ts=new ti;function Es(){$i.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Ss(t,e){t&&t.isGeometry,pn.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Di,this.bindMatrixInverse=new Di}Es.prototype=Object.assign(Object.create($i.prototype),{constructor:Es,isLOD:!0,copy:function(t){$i.prototype.copy.call(this,t,!1);for(var e=t.levels,i=0,r=e.length;i<r;i++){var n=e[i];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var i=this.levels,r=0;r<i.length&&!(e<i[r].distance);r++);return i.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(0<e.length){for(var i=1,r=e.length;i<r&&!(t<e[i].distance);i++);return e[i-1].object}return null},raycast:function(t,e){var i;0<this.levels.length&&(bs.setFromMatrixPosition(this.matrixWorld),i=t.ray.origin.distanceTo(bs),this.getObjectForDistance(i).raycast(t,e))},update:function(t){var e=this.levels;if(1<e.length){bs.setFromMatrixPosition(t.matrixWorld),Ts.setFromMatrixPosition(this.matrixWorld);var i,r,n=bs.distanceTo(Ts)/t.zoom;for(e[0].object.visible=!0,i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){var e=$i.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var i=this.levels,r=0,n=i.length;r<n;r++){var a=i[r];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),Ss.prototype=Object.assign(Object.create(pn.prototype),{constructor:Ss,isSkinnedMesh:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Je,e=this.geometry.attributes.skinWeight,i=0,r=e.count;i<r;i++){t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.w=e.getW(i);var n=1/t.manhattanLength();n!=1/0?t.multiplyScalar(n):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){pn.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},boneTransform:(vs=new ti,gs=new Je,_s=new Je,ys=new ti,xs=new Di,function(t,e){var i=this.skeleton,r=this.geometry;gs.fromBufferAttribute(r.attributes.skinIndex,t),_s.fromBufferAttribute(r.attributes.skinWeight,t),vs.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var n=0;n<4;n++){var a,o=_s.getComponent(n);0!==o&&(a=gs.getComponent(n),xs.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),e.addScaledVector(ys.copy(vs).applyMatrix4(xs),o))}return e.applyMatrix4(this.bindMatrixInverse)})});var Ms=new Di,As=new Di;function ws(t,e){if(this.bones=(t=t||[]).slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{this.boneInverses=[];for(var i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Di)}}function Ds(){$i.call(this),this.type="Bone"}Object.assign(ws.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var i=new Di;this.bones[t]&&i.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(i)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var i=this.bones[t];i&&i.matrixWorld.getInverse(this.boneInverses[t])}for(var r=0,n=this.bones.length;r<n;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,i=this.boneMatrices,r=this.boneTexture,n=0,a=t.length;n<a;n++){var o=t[n]?t[n].matrixWorld:As;Ms.multiplyMatrices(o,e[n]),Ms.toArray(i,16*n)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new ws(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,i=this.bones.length;e<i;e++){var r=this.bones[e];if(r.name===t)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),Ds.prototype=Object.assign(Object.create($i.prototype),{constructor:Ds,isBone:!0});var Rs=new Di,Os=new Di,Ps=[],Cs=new pn;function Is(t,e,i){pn.call(this,t,e),this.instanceMatrix=new Dr(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}function Ls(t){Sr.call(this),this.type="LineBasicMaterial",this.color=new br(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}Is.prototype=Object.assign(Object.create(pn.prototype),{constructor:Is,isInstancedMesh:!0,copy:function(t){return pn.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Dr(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var i=this.matrixWorld,r=this.count;if(Cs.geometry=this.geometry,Cs.material=this.material,void 0!==Cs.material)for(var n=0;n<r;n++){this.getMatrixAt(n,Rs),Os.multiplyMatrices(i,Rs),Cs.matrixWorld=Os,Cs.raycast(t,Ps);for(var a=0,o=Ps.length;a<o;a++){var s=Ps[a];s.instanceId=n,s.object=this,e.push(s)}Ps.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),((Ls.prototype=Object.create(Sr.prototype)).constructor=Ls).prototype.isLineBasicMaterial=!0,Ls.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var Ns=new ti,Fs=new ti,Bs=new Di,Us=new wi,Gs=new yi;function ks(t,e,i){$i.call(this),this.type="Line",this.geometry=void 0!==t?t:new Yr,this.material=void 0!==e?e:new Ls,this.updateMorphTargets()}ks.prototype=Object.assign(Object.create($i.prototype),{constructor:ks,isLine:!0,copy:function(t){return $i.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,i=[0],r=1,n=e.count;r<n;r++)Ns.fromBufferAttribute(e,r-1),Fs.fromBufferAttribute(e,r),i[r]=i[r-1],i[r]+=Ns.distanceTo(Fs);t.setAttribute("lineDistance",new Fr(i,1))}}else if(t.isGeometry){var a=t.vertices,o=t.lineDistances;o[0]=0;for(var s=1,u=a.length;s<u;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(t,e){var i=this.geometry,r=this.matrixWorld,n=t.params.Line.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),Gs.copy(i.boundingSphere),Gs.applyMatrix4(r),Gs.radius+=n,!1!==t.ray.intersectsSphere(Gs)){Bs.getInverse(r),Us.copy(t.ray).applyMatrix4(Bs);var n=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=n*n,o=new ti,s=new ti,u=new ti,h=new ti,l=this&&this.isLineSegments?2:1;if(i.isBufferGeometry){var n=i.index,c=i.attributes.position.array;if(null!==n)for(var p=n.array,d=0,f=p.length-1;d<f;d+=l){var m=p[d],v=p[d+1];o.fromArray(c,3*m),s.fromArray(c,3*v),a<Us.distanceSqToSegment(o,s,h,u)||(h.applyMatrix4(this.matrixWorld),(v=t.ray.origin.distanceTo(h))<t.near||v>t.far||e.push({distance:v,point:u.clone().applyMatrix4(this.matrixWorld),index:d,face:null,faceIndex:null,object:this}))}else for(var g,_=0,y=c.length/3-1;_<y;_+=l)o.fromArray(c,3*_),s.fromArray(c,3*_+3),a<Us.distanceSqToSegment(o,s,h,u)||(h.applyMatrix4(this.matrixWorld),(g=t.ray.origin.distanceTo(h))<t.near||g>t.far||e.push({distance:g,point:u.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this}))}else if(i.isGeometry)for(var x,b=i.vertices,T=b.length,E=0;E<T-1;E+=l)a<Us.distanceSqToSegment(b[E],b[E+1],h,u)||(h.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(h))<t.near||x>t.far||e.push({distance:x,point:u.clone().applyMatrix4(this.matrixWorld),index:E,face:null,faceIndex:null,object:this}))}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,i=Object.keys(e);if(0<i.length){var r=e[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var n=0,a=r.length;n<a;n++){var o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}else{t=t.morphTargets;void 0!==t&&t.length}}});var zs=new ti,js=new ti;function Hs(t,e){ks.call(this,t,e),this.type="LineSegments"}function Vs(t,e){ks.call(this,t,e),this.type="LineLoop"}function Xs(t){Sr.call(this),this.type="PointsMaterial",this.color=new br(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Hs.prototype=Object.assign(Object.create(ks.prototype),{constructor:Hs,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,i=[],r=0,n=e.count;r<n;r+=2)zs.fromBufferAttribute(e,r),js.fromBufferAttribute(e,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+zs.distanceTo(js);t.setAttribute("lineDistance",new Fr(i,1))}}else if(t.isGeometry)for(var a=t.vertices,o=t.lineDistances,s=0,u=a.length;s<u;s+=2)zs.copy(a[s]),js.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+zs.distanceTo(js);return this}}),Vs.prototype=Object.assign(Object.create(ks.prototype),{constructor:Vs,isLineLoop:!0}),((Xs.prototype=Object.create(Sr.prototype)).constructor=Xs).prototype.isPointsMaterial=!0,Xs.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Ws=new Di,Ys=new wi,qs=new yi,Zs=new ti;function Js(t,e){$i.call(this),this.type="Points",this.geometry=void 0!==t?t:new Yr,this.material=void 0!==e?e:new Xs,this.updateMorphTargets()}function Ks(t,e,i,r,n,a,o){var s=Ys.distanceSqToPoint(t);s<i&&(i=new ti,Ys.closestPointToPoint(t,i),i.applyMatrix4(r),(r=n.ray.origin.distanceTo(i))<n.near||r>n.far||a.push({distance:r,distanceToRay:Math.sqrt(s),point:i,index:e,face:null,object:o}))}function Qs(e,t,i,r,n,a,o,s,u){Ze.call(this,e,t,i,r,n,a,o,s,u),this.format=void 0!==o?o:Bt,this.minFilter=void 0!==a?a:Dt,this.magFilter=void 0!==n?n:Dt,this.generateMipmaps=!1;var h=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){h.needsUpdate=!0,e.requestVideoFrameCallback(t)})}function $s(t,e,i,r,n,a,o,s,u,h,l,c){Ze.call(this,null,a,o,s,u,h,r,n,l,c),this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function tu(t,e,i,r,n,a,o,s,u){Ze.call(this,t,e,i,r,n,a,o,s,u),this.needsUpdate=!0}function eu(t,e,i,r,n,a,o,s,u,h){if((h=void 0!==h?h:Gt)!==Gt&&h!==kt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");Ze.call(this,null,r,n,a,o,s,h,i=void 0===(i=void 0===i&&h===Gt?Ct:i)&&h===kt?Ft:i,u),this.image={width:t,height:e},this.magFilter=void 0!==o?o:St,this.minFilter=void 0!==s?s:St,this.flipY=!1,this.generateMipmaps=!1}Js.prototype=Object.assign(Object.create($i.prototype),{constructor:Js,isPoints:!0,copy:function(t){return $i.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var i=this.geometry,r=this.matrixWorld,n=t.params.Points.threshold;if(null===i.boundingSphere&&i.computeBoundingSphere(),qs.copy(i.boundingSphere),qs.applyMatrix4(r),qs.radius+=n,!1!==t.ray.intersectsSphere(qs)){Ws.getInverse(r),Ys.copy(t.ray).applyMatrix4(Ws);var n=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=n*n;if(i.isBufferGeometry){var n=i.index,o=i.attributes.position.array;if(null!==n)for(var s=n.array,u=0,h=s.length;u<h;u++){var l=s[u];Zs.fromArray(o,3*l),Ks(Zs,l,a,r,t,e,this)}else for(var c=0,p=o.length/3;c<p;c++)Zs.fromArray(o,3*c),Ks(Zs,c,a,r,t,e,this)}else for(var d=i.vertices,f=0,m=d.length;f<m;f++)Ks(d[f],f,a,r,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,i=Object.keys(e);if(0<i.length){var r=e[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var n=0,a=r.length;n<a;n++){var o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}else{t=t.morphTargets;void 0!==t&&t.length}}}),Qs.prototype=Object.assign(Object.create(Ze.prototype),{constructor:Qs,isVideoTexture:!0,update:function(){var t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),(($s.prototype=Object.create(Ze.prototype)).constructor=$s).prototype.isCompressedTexture=!0,((tu.prototype=Object.create(Ze.prototype)).constructor=tu).prototype.isCanvasTexture=!0,((eu.prototype=Object.create(Ze.prototype)).constructor=eu).prototype.isDepthTexture=!0;var iu=function(){p(F,Yr);var N=_(F);function F(t){var e;B(this,F),(e=N.call(this)).type="WireframeGeometry";var i=[],r=[0,0],n={},a=["a","b","c"];if(t&&t.isGeometry){for(var o,s=t.faces,u=0,h=s.length;u<h;u++)for(var l=s[u],c=0;c<3;c++){var p=l[a[c]],d=l[a[(c+1)%3]];r[0]=Math.min(p,d),r[1]=Math.max(p,d);d=r[0]+","+r[1];void 0===n[d]&&(n[d]={index1:r[0],index2:r[1]})}for(o in n){var f=n[o],m=t.vertices[f.index1];i.push(m.x,m.y,m.z),m=t.vertices[f.index2],i.push(m.x,m.y,m.z)}}else if(t&&t.isBufferGeometry){var v=new ti;if(null!==t.index){for(var g,_=t.attributes.position,y=t.index,x=t.groups,b=0,T=(x=0===x.length?[{start:0,count:y.count,materialIndex:0}]:x).length;b<T;++b)for(var E=x[b],S=E.start,M=S,A=S+E.count;M<A;M+=3)for(var w=0;w<3;w++){var D=y.getX(M+w),R=y.getX(M+(w+1)%3);r[0]=Math.min(D,R),r[1]=Math.max(D,R);R=r[0]+","+r[1];void 0===n[R]&&(n[R]={index1:r[0],index2:r[1]})}for(g in n){var O=n[g];v.fromBufferAttribute(_,O.index1),i.push(v.x,v.y,v.z),v.fromBufferAttribute(_,O.index2),i.push(v.x,v.y,v.z)}}else for(var P=t.attributes.position,C=0,I=P.count/3;C<I;C++)for(var L=0;L<3;L++)v.fromBufferAttribute(P,3*C+L),i.push(v.x,v.y,v.z),v.fromBufferAttribute(P,3*C+(L+1)%3),i.push(v.x,v.y,v.z)}return e.setAttribute("position",new Fr(i,3)),e}return F}();function ru(t,e,i){yn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:i},this.fromBufferGeometry(new nu(t,e,i)),this.mergeVertices()}function nu(t,e,i){Yr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:i};var r=[],n=[],a=[],o=[],s=new ti,u=new ti,h=new ti,l=new ti,c=new ti;t.length;for(var p=e+1,d=0;d<=i;d++)for(var f=d/i,m=0;m<=e;m++){var v=m/e;t(v,f,u),n.push(u.x,u.y,u.z),0<=v-1e-5?(t(v-1e-5,f,h),l.subVectors(u,h)):(t(1e-5+v,f,h),l.subVectors(h,u)),0<=f-1e-5?(t(v,f-1e-5,h),c.subVectors(u,h)):(t(v,1e-5+f,h),c.subVectors(h,u)),s.crossVectors(l,c).normalize(),a.push(s.x,s.y,s.z),o.push(v,f)}for(var g=0;g<i;g++)for(var _=0;_<e;_++){var y=g*p+_+1,x=(g+1)*p+_+1,b=(g+1)*p+_;r.push(g*p+_,y,b),r.push(y,x,b)}this.setIndex(r),this.setAttribute("position",new Fr(n,3)),this.setAttribute("normal",new Fr(a,3)),this.setAttribute("uv",new Fr(o,2))}i.WireframeGeometry=iu,(ru.prototype=Object.create(yn.prototype)).constructor=ru,(nu.prototype=Object.create(Yr.prototype)).constructor=nu;var au=function(){p(o,yn);var a=_(o);function o(t,e,i,r){var n;return B(this,o),(n=a.call(this)).type="PolyhedronGeometry",n.parameters={vertices:t,indices:e,radius:i,detail:r},n.fromBufferGeometry(new ou(t,e,i,r)),n.mergeVertices(),n}return o}();i.PolyhedronGeometry=au;var ou=function(){p(s,Yr);var n=_(s);function s(i,a,t,e){var r;B(this,s),(r=n.call(this)).type="PolyhedronBufferGeometry",r.parameters={vertices:i,indices:a,radius:t,detail:e},t=t||1;var l=[],c=[];function f(t){l.push(t.x,t.y,t.z)}function o(t,e){t*=3;e.x=i[0+t],e.y=i[1+t],e.z=i[2+t]}function p(t,e,i,r){r<0&&1===t.x&&(c[e]=t.x-1),0===i.x&&0===i.z&&(c[e]=r/2/Math.PI+.5)}function d(t){return Math.atan2(t.z,-t.x)}return function(t){for(var e=new ti,i=new ti,r=new ti,n=0;n<a.length;n+=3)o(a[n+0],e),o(a[n+1],i),o(a[n+2],r),function(t,e,i,r){for(var n=Math.pow(2,r),a=[],o=0;o<=n;o++){a[o]=[];for(var s=t.clone().lerp(i,o/n),u=e.clone().lerp(i,o/n),h=n-o,l=0;l<=h;l++)a[o][l]=0===l&&o===n?s:s.clone().lerp(u,l/h)}for(var c=0;c<n;c++)for(var p=0;p<2*(n-c)-1;p++){var d=Math.floor(p/2);p%2==0?(f(a[c][d+1]),f(a[c+1][d]),f(a[c][d])):(f(a[c][d+1]),f(a[c+1][d+1]),f(a[c+1][d]))}}(e,i,r,t)}(e=e||0),function(t){for(var e=new ti,i=0;i<l.length;i+=3)e.x=l[i+0],e.y=l[i+1],e.z=l[i+2],e.normalize().multiplyScalar(t),l[i+0]=e.x,l[i+1]=e.y,l[i+2]=e.z}(t),function(){for(var t=new ti,e=0;e<l.length;e+=3){t.x=l[e+0],t.y=l[e+1],t.z=l[e+2];var i=d(t)/2/Math.PI+.5,r=function(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}(t)/Math.PI+.5;c.push(i,1-r)}(function(){for(var t=new ti,e=new ti,i=new ti,r=new ti,n=new Ve,a=new Ve,o=new Ve,s=0,u=0;s<l.length;s+=9,u+=6){t.set(l[s+0],l[s+1],l[s+2]),e.set(l[s+3],l[s+4],l[s+5]),i.set(l[s+6],l[s+7],l[s+8]),n.set(c[u+0],c[u+1]),a.set(c[u+2],c[u+3]),o.set(c[u+4],c[u+5]),r.copy(t).add(e).add(i).divideScalar(3);var h=d(r);p(n,u+0,t,h),p(a,u+2,e,h),p(o,u+4,i,h)}})(),function(){for(var t=0;t<c.length;t+=6){var e=c[t+0],i=c[t+2],r=c[t+4],n=Math.max(e,i,r),a=Math.min(e,i,r);.9<n&&a<.1&&(e<.2&&(c[t+0]+=1),i<.2&&(c[t+2]+=1),r<.2&&(c[t+4]+=1))}}()}(),r.setAttribute("position",new Fr(l,3)),r.setAttribute("normal",new Fr(l.slice(),3)),r.setAttribute("uv",new Fr(c,2)),0===e?r.computeVertexNormals():r.normalizeNormals(),r}return s}();i.PolyhedronBufferGeometry=ou;var su=function(){p(n,yn);var r=_(n);function n(t,e){var i;return B(this,n),(i=r.call(this)).type="TetrahedronGeometry",i.parameters={radius:t,detail:e},i.fromBufferGeometry(new uu(t,e)),i.mergeVertices(),i}return n}();i.TetrahedronGeometry=su;var uu=function(){p(n,ou);var r=_(n);function n(t,e){B(this,n);var i;return(i=r.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e)).type="TetrahedronBufferGeometry",i.parameters={radius:t,detail:e},i}return n}();i.TetrahedronBufferGeometry=uu;var hu=function(){p(n,yn);var r=_(n);function n(t,e){var i;return B(this,n),(i=r.call(this)).type="OctahedronGeometry",i.parameters={radius:t,detail:e},i.fromBufferGeometry(new lu(t,e)),i.mergeVertices(),i}return n}();i.OctahedronGeometry=hu;var lu=function(){p(n,ou);var r=_(n);function n(t,e){B(this,n);var i;return(i=r.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e)).type="OctahedronBufferGeometry",i.parameters={radius:t,detail:e},i}return n}();i.OctahedronBufferGeometry=lu;var cu=function(){p(n,yn);var r=_(n);function n(t,e){var i;return B(this,n),(i=r.call(this)).type="IcosahedronGeometry",i.parameters={radius:t,detail:e},i.fromBufferGeometry(new pu(t,e)),i.mergeVertices(),i}return n}();i.IcosahedronGeometry=cu;var pu=function(){p(n,ou);var r=_(n);function n(t,e){B(this,n);var i=(1+Math.sqrt(5))/2;return(i=r.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e)).type="IcosahedronBufferGeometry",i.parameters={radius:t,detail:e},i}return n}();i.IcosahedronBufferGeometry=pu;var du=function(){p(n,yn);var r=_(n);function n(t,e){var i;return B(this,n),(i=r.call(this)).type="DodecahedronGeometry",i.parameters={radius:t,detail:e},i.fromBufferGeometry(new fu(t,e)),i.mergeVertices(),i}return n}();i.DodecahedronGeometry=du;var fu=function(){p(a,ou);var n=_(a);function a(t,e){B(this,a);var i=(1+Math.sqrt(5))/2,r=1/i;return(r=n.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e)).type="DodecahedronBufferGeometry",r.parameters={radius:t,detail:e},r}return a}();i.DodecahedronBufferGeometry=fu;var mu=function(){p(u,yn);var s=_(u);function u(t,e,i,r,n,a){var o;B(this,u),(o=s.call(this)).type="TubeGeometry",o.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:n};n=new vu(t,e,i,r,n);return o.tangents=n.tangents,o.normals=n.normals,o.binormals=n.binormals,o.fromBufferGeometry(n),o.mergeVertices(),o}return u}();i.TubeGeometry=mu;var vu=function(){p(g,Yr);var a=_(g);function g(o,s,u,h,e){var t;B(this,g),(t=a.call(this)).type="TubeBufferGeometry",t.parameters={path:o,tubularSegments:s,radius:u,radialSegments:h,closed:e},s=s||64,u=u||1,h=h||8,e=e||!1;var l=o.computeFrenetFrames(s,e);t.tangents=l.tangents,t.normals=l.normals,t.binormals=l.binormals;var c=new ti,p=new ti,i=new Ve,d=new ti,f=[],m=[],r=[],v=[];function n(t){d=o.getPointAt(t/s,d);for(var e=l.normals[t],i=l.binormals[t],r=0;r<=h;r++){var n=r/h*Math.PI*2,a=Math.sin(n),n=-Math.cos(n);p.x=n*e.x+a*i.x,p.y=n*e.y+a*i.y,p.z=n*e.z+a*i.z,p.normalize(),m.push(p.x,p.y,p.z),c.x=d.x+u*p.x,c.y=d.y+u*p.y,c.z=d.z+u*p.z,f.push(c.x,c.y,c.z)}}return function(){for(var t=0;t<s;t++)n(t);n(!1===e?s:0),function(){for(var t=0;t<=s;t++)for(var e=0;e<=h;e++)i.x=t/s,i.y=e/h,r.push(i.x,i.y)}(),function(){for(var t=1;t<=s;t++)for(var e=1;e<=h;e++){var i=(h+1)*(t-1)+(e-1),r=(h+1)*t+(e-1),n=(h+1)*t+e,a=(h+1)*(t-1)+e;v.push(i,r,a),v.push(r,n,a)}}()}(),t.setIndex(v),t.setAttribute("position",new Fr(f,3)),t.setAttribute("normal",new Fr(m,3)),t.setAttribute("uv",new Fr(r,2)),t}return m(g,[{key:"toJSON",value:function(){var t=Yr.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}]),g}();i.TubeBufferGeometry=vu;var gu=function(){p(h,yn);var u=_(h);function h(t,e,i,r,n,a,o){var s;return B(this,h),(s=u.call(this)).type="TorusKnotGeometry",s.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:n,q:a},s.fromBufferGeometry(new _u(t,e,i,r,n,a)),s.mergeVertices(),s}return h}();i.TorusKnotGeometry=gu;var _u=function(){p(O,Yr);var R=_(O);function O(t,e,i,r,n,a){var o;B(this,O),(o=R.call(this)).type="TorusKnotBufferGeometry",o.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:r,p:n,q:a},t=t||1,e=e||.4,i=Math.floor(i)||64,r=Math.floor(r)||8,n=n||2,a=a||3;for(var s=[],u=[],h=[],l=[],c=new ti,p=new ti,d=new ti,f=new ti,m=new ti,v=new ti,g=new ti,_=0;_<=i;++_){var y=_/i*n*Math.PI*2;D(y,n,a,t,d),D(.01+y,n,a,t,f),v.subVectors(f,d),g.addVectors(f,d),m.crossVectors(v,g),g.crossVectors(m,v),m.normalize(),g.normalize();for(var x=0;x<=r;++x){var b=x/r*Math.PI*2,T=-e*Math.cos(b),b=e*Math.sin(b);c.x=d.x+(T*g.x+b*m.x),c.y=d.y+(T*g.y+b*m.y),c.z=d.z+(T*g.z+b*m.z),u.push(c.x,c.y,c.z),p.subVectors(c,d).normalize(),h.push(p.x,p.y,p.z),l.push(_/i),l.push(x/r)}}for(var E=1;E<=i;E++)for(var S=1;S<=r;S++){var M=(r+1)*E+(S-1),A=(r+1)*E+S,w=(r+1)*(E-1)+S;s.push((r+1)*(E-1)+(S-1),M,w),s.push(M,A,w)}function D(t,e,i,r,n){var a=Math.cos(t),o=Math.sin(t),e=i/e*t,t=Math.cos(e);n.x=r*(2+t)*.5*a,n.y=r*(2+t)*o*.5,n.z=r*Math.sin(e)*.5}return o.setIndex(s),o.setAttribute("position",new Fr(u,3)),o.setAttribute("normal",new Fr(h,3)),o.setAttribute("uv",new Fr(l,2)),o}return O}();i.TorusKnotBufferGeometry=_u;var yu=function(){p(s,yn);var o=_(s);function s(t,e,i,r,n){var a;return B(this,s),(a=o.call(this)).type="TorusGeometry",a.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:r,arc:n},a.fromBufferGeometry(new xu(t,e,i,r,n)),a.mergeVertices(),a}return s}();i.TorusGeometry=yu;var xu=function(){p(E,Yr);var T=_(E);function E(t,e,i,r,n){var a;B(this,E),(a=T.call(this)).type="TorusBufferGeometry",a.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:r,arc:n},t=t||1,e=e||.4,i=Math.floor(i)||8,r=Math.floor(r)||6,n=n||2*Math.PI;for(var o=[],s=[],u=[],h=[],l=new ti,c=new ti,p=new ti,d=0;d<=i;d++)for(var f=0;f<=r;f++){var m=f/r*n,v=d/i*Math.PI*2;c.x=(t+e*Math.cos(v))*Math.cos(m),c.y=(t+e*Math.cos(v))*Math.sin(m),c.z=e*Math.sin(v),s.push(c.x,c.y,c.z),l.x=t*Math.cos(m),l.y=t*Math.sin(m),p.subVectors(c,l).normalize(),u.push(p.x,p.y,p.z),h.push(f/r),h.push(d/i)}for(var g=1;g<=i;g++)for(var _=1;_<=r;_++){var y=(r+1)*(g-1)+_-1,x=(r+1)*(g-1)+_,b=(r+1)*g+_;o.push((r+1)*g+_-1,y,b),o.push(y,x,b)}return a.setIndex(o),a.setAttribute("position",new Fr(s,3)),a.setAttribute("normal",new Fr(u,3)),a.setAttribute("uv",new Fr(h,2)),a}return E}();i.TorusBufferGeometry=xu;var bu=function(t,e,i){i=i||2;var r,n,a,o,s,u=e&&e.length,h=u?e[0]*i:t.length,l=Tu(t,0,h,i,!0),c=[];if(!l||l.next===l.prev)return c;if(u&&(l=function(t,e,i,r){var n,a,o,s,u=[];for(n=0,a=e.length;n<a;n++)o=e[n]*r,s=n<a-1?e[n+1]*r:t.length,(s=Tu(t,o,s,r,!1))===s.next&&(s.steiner=!0),u.push(function(t){var e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next,e!==t;);return i}(s));for(u.sort(Mu),n=0;n<u.length;n++)!function(t,e){(e=function(t,e){var i,r=e,n=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&o<s){if((o=s)===n){if(a===r.y)return r;if(a===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}}while(r=r.next,r!==e);if(!i)return null;if(n===o)return i;var u,h=i,l=i.x,c=i.y,p=1/0;r=i;for(;n>=r.x&&r.x>=l&&n!==r.x&&wu(a<c?n:o,a,l,c,a<c?o:n,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(n-r.x),Iu(r,t)&&(u<p||u===p&&(r.x>i.x||r.x===i.x&&function(t,e){return Du(t.prev,t,e.prev)<0&&Du(e.next,t,t.next)<0}(i,r)))&&(i=r,p=u)),r=r.next,r!==h;);return i}(t,e))&&(t=Lu(e,t),Eu(e,e.next),Eu(t,t.next))}(u[n],i),i=Eu(i,i.next);return i}(t,e,l,i)),t.length>80*i){for(var p=r=t[0],d=n=t[1],f=i;f<h;f+=i)(a=t[f])<p&&(p=a),(o=t[f+1])<d&&(d=o),r<a&&(r=a),n<o&&(n=o);s=0!==(s=Math.max(r-p,n-d))?1/s:0}return Su(l,c,i,p,d,s),c};function Tu(t,e,i,r,n){var a,o;if(n===0<function(t,e,i,r){for(var n=0,a=e,o=i-r;a<i;a+=r)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}(t,e,i,r))for(a=e;a<i;a+=r)o=Nu(a,t[a],t[a+1],o);else for(a=i-r;e<=a;a-=r)o=Nu(a,t[a],t[a+1],o);return o&&Ru(o,o.next)&&(Fu(o),o=o.next),o}function Eu(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!Ru(r,r.next)&&0!==Du(r.prev,r,r.next))r=r.next;else{if(Fu(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function Su(t,e,i,r,n,a,o){if(t){!o&&a&&function(t,e,i,r){var n=t;for(;null===n.z&&(n.z=Au(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,a,o,s,u,h=1;do{for(i=t,a=t=null,o=0;i;){for(o++,r=i,e=s=0;e<h&&(s++,r=r.nextZ);e++);for(u=h;0<s||0<u&&r;)0!==s&&(0===u||!r||i.z<=r.z)?(i=(n=i).nextZ,s--):(r=(n=r).nextZ,u--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;i=r}}while(a.nextZ=null,h*=2,1<o)}(n)}(t,r,n,a);for(var s,u,h=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?function(t,e,i,r){var n=t.prev,a=t,o=t.next;if(0<=Du(n,a,o))return!1;var s=(n.x<a.x?n.x<o.x?n:o:a.x<o.x?a:o).x,u=(n.y<a.y?n.y<o.y?n:o:a.y<o.y?a:o).y,h=(n.x>a.x?n.x>o.x?n:o:a.x>o.x?a:o).x,l=(n.y>a.y?n.y>o.y?n:o:a.y>o.y?a:o).y,c=Au(s,u,e,i,r),p=Au(h,l,e,i,r),d=t.prevZ,f=t.nextZ;for(;d&&d.z>=c&&f&&f.z<=p;){if(d!==t.prev&&d!==t.next&&wu(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=Du(d.prev,d,d.next))return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&wu(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=Du(f.prev,f,f.next))return!1;f=f.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&wu(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=Du(d.prev,d,d.next))return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&wu(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&0<=Du(f.prev,f,f.next))return!1;f=f.nextZ}return!0}(t,r,n,a):function(t){var e=t.prev,i=t,r=t.next;if(0<=Du(e,i,r))return!1;var n=t.next.next;for(;n!==t.prev;){if(wu(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=Du(n.prev,n,n.next))return!1;n=n.next}return!0}(t))e.push(s.i/i),e.push(t.i/i),e.push(u.i/i),Fu(t),t=u.next,h=u.next;else if((t=u)===h){o?1===o?Su(t=function(t,e,i){var r=t;do{var n=r.prev,a=r.next.next}while(!Ru(n,a)&&Ou(n,r,r.next,a)&&Iu(n,a)&&Iu(a,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(a.i/i),Fu(r),Fu(r.next),r=t=a),r=r.next,r!==t);return Eu(r)}(Eu(t),e,i),e,i,r,n,a,2):2===o&&function(t,e,i,r,n,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Ou(i,i.next,t,e))return!0}while(i=i.next,i!==t);return!1}(t,e)&&(Iu(t,e)&&Iu(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;for(;i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next,i!==t;);return r}(t,e)&&(Du(t.prev,t,e.prev)||Du(t,e.prev,e))||Ru(t,e)&&0<Du(t.prev,t,t.next)&&0<Du(e.prev,e,e.next))}(o,s)){var u=Lu(o,s);return o=Eu(o,o.next),u=Eu(u,u.next),Su(o,e,i,r,n,a),Su(u,e,i,r,n,a)}s=s.next}}while(o=o.next,o!==t)}(t,e,i,r,n,a):Su(Eu(t),e,i,r,n,a,1);break}}}function Mu(t,e){return t.x-e.x}function Au(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function wu(t,e,i,r,n,a,o,s){return 0<=(n-o)*(e-s)-(t-o)*(a-s)&&0<=(t-o)*(r-s)-(i-o)*(e-s)&&0<=(i-o)*(a-s)-(n-o)*(r-s)}function Du(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function Ru(t,e){return t.x===e.x&&t.y===e.y}function Ou(t,e,i,r){var n=Cu(Du(t,e,i)),a=Cu(Du(t,e,r)),o=Cu(Du(i,r,t)),s=Cu(Du(i,r,e));return n!==a&&o!==s||(0===n&&Pu(t,i,e)||(0===a&&Pu(t,r,e)||(0===o&&Pu(i,t,r)||!(0!==s||!Pu(i,e,r)))))}function Pu(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function Cu(t){return 0<t?1:t<0?-1:0}function Iu(t,e){return Du(t.prev,t,t.next)<0?0<=Du(t,e,t.next)&&0<=Du(t,t.prev,e):Du(t,e,t.prev)<0||Du(t,t.next,e)<0}function Lu(t,e){var i=new Bu(t.i,t.x,t.y),r=new Bu(e.i,e.x,e.y),n=t.next,a=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(a.next=r).prev=a,r}function Nu(t,e,i,r){i=new Bu(t,e,i);return r?(i.next=r.next,(i.prev=r).next.prev=i,r.next=i):(i.prev=i).next=i,i}function Fu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Bu(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Uu={area:function(t){for(var e=t.length,i=0,r=e-1,n=0;n<e;r=n++)i+=t[r].x*t[n].y-t[n].x*t[r].y;return.5*i},isClockWise:function(t){return Uu.area(t)<0},triangulateShape:function(t,e){var i=[],r=[],n=[];Gu(t),ku(i,t);var a=t.length;e.forEach(Gu);for(var o=0;o<e.length;o++)r.push(a),a+=e[o].length,ku(i,e[o]);for(var s=bu(i,r),u=0;u<s.length;u+=3)n.push(s.slice(u,u+3));return n}};function Gu(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function ku(t,e){for(var i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}i.ShapeUtils=Uu;var zu=function(){p(n,yn);var r=_(n);function n(t,e){var i;return B(this,n),(i=r.call(this)).type="ExtrudeGeometry",i.parameters={shapes:t,options:e},i.fromBufferGeometry(new ju(t,e)),i.mergeVertices(),i}return m(n,[{key:"toJSON",value:function(){var t=h(d(n.prototype),"toJSON",this).call(this);return Vu(this.parameters.shapes,this.parameters.options,t)}}]),n}();i.ExtrudeGeometry=zu;var ju=function(){p(a,Yr);var n=_(a);function a(t,Ot){var e;B(this,a),(e=n.call(this)).type="ExtrudeBufferGeometry",e.parameters={shapes:t,options:Ot},t=Array.isArray(t)?t:[t];for(var Pt=l(e),Ct=[],It=[],i=0,r=t.length;i<r;i++)!function(t){var r=[],e=void 0!==Ot.curveSegments?Ot.curveSegments:12,l=void 0!==Ot.steps?Ot.steps:1,i=void 0!==Ot.depth?Ot.depth:100,c=void 0===Ot.bevelEnabled||Ot.bevelEnabled,n=void 0!==Ot.bevelThickness?Ot.bevelThickness:6,a=void 0!==Ot.bevelSize?Ot.bevelSize:n-2,o=void 0!==Ot.bevelOffset?Ot.bevelOffset:0,p=void 0!==Ot.bevelSegments?Ot.bevelSegments:3,s=Ot.extrudePath,h=void 0!==Ot.UVGenerator?Ot.UVGenerator:Hu;void 0!==Ot.amount&&(i=Ot.amount);var u,d,f,m,v,g=!1;s&&(u=s.getSpacedPoints(l),c=!(g=!0),d=s.computeFrenetFrames(l,!1),f=new ti,m=new ti,v=new ti);c||(o=a=n=p=0);var e=t.extractPoints(e),_=e.shape,y=e.holes;if(!Uu.isClockWise(_)){_=_.reverse();for(var x=0,b=y.length;x<b;x++){var T=y[x];Uu.isClockWise(T)&&(y[x]=T.reverse())}}for(var E=Uu.triangulateShape(_,y),S=_,M=0,A=y.length;M<A;M++){var w=y[M];_=_.concat(w)}function D(t,e,i){return e.clone().multiplyScalar(i).add(t)}var R=_.length,O=E.length;function P(t,e,i){var r=t.x-e.x,n=t.y-e.y,a=i.x-t.x,o=i.y-t.y,s=r*r+n*n;if(Math.abs(r*o-n*a)>Number.EPSILON){var u=Math.sqrt(s),h=Math.sqrt(a*a+o*o),l=e.x-n/u,c=e.y+r/u,u=((i.x-o/h-l)*o-(i.y+a/h-c)*a)/(r*o-n*a),c=(h=l+r*u-t.x)*h+(l=c+n*u-t.y)*l;if(c<=2)return new Ve(h,l);u=Math.sqrt(c/2)}else{c=!1;r>Number.EPSILON?a>Number.EPSILON&&(c=!0):r<-Number.EPSILON?a<-Number.EPSILON&&(c=!0):Math.sign(n)===Math.sign(o)&&(c=!0),u=c?(h=-n,l=r,Math.sqrt(s)):(h=r,l=n,Math.sqrt(s/2))}return new Ve(h/u,l/u)}for(var C=[],I=0,L=S.length,N=L-1,F=I+1;I<L;I++,N++,F++)N===L&&(N=0),F===L&&(F=0),C[I]=P(S[I],S[N],S[F]);for(var B,U=[],G=C.concat(),k=0,z=y.length;k<z;k++){var j=y[k];B=[];for(var H=0,V=j.length,X=V-1,W=H+1;H<V;H++,X++,W++)X===V&&(X=0),W===V&&(W=0),B[H]=P(j[H],j[X],j[W]);U.push(B),G=G.concat(B)}for(var Y=0;Y<p;Y++){for(var q=Y/p,Z=n*Math.cos(q*Math.PI/2),J=a*Math.sin(q*Math.PI/2)+o,K=0,Q=S.length;K<Q;K++){var $=D(S[K],C[K],J);At($.x,$.y,-Z)}for(var tt=0,et=y.length;tt<et;tt++){var it=y[tt];B=U[tt];for(var rt=0,nt=it.length;rt<nt;rt++){var at=D(it[rt],B[rt],J);At(at.x,at.y,-Z)}}}for(var ot=a+o,st=0;st<R;st++){var ut=c?D(_[st],G[st],ot):_[st];g?(m.copy(d.normals[0]).multiplyScalar(ut.x),f.copy(d.binormals[0]).multiplyScalar(ut.y),v.copy(u[0]).add(m).add(f),At(v.x,v.y,v.z)):At(ut.x,ut.y,0)}for(var ht=1;ht<=l;ht++)for(var lt=0;lt<R;lt++){var ct=c?D(_[lt],G[lt],ot):_[lt];g?(m.copy(d.normals[ht]).multiplyScalar(ct.x),f.copy(d.binormals[ht]).multiplyScalar(ct.y),v.copy(u[ht]).add(m).add(f),At(v.x,v.y,v.z)):At(ct.x,ct.y,i/l*ht)}for(var pt=p-1;0<=pt;pt--){for(var dt=pt/p,ft=n*Math.cos(dt*Math.PI/2),mt=a*Math.sin(dt*Math.PI/2)+o,vt=0,gt=S.length;vt<gt;vt++){var _t=D(S[vt],C[vt],mt);At(_t.x,_t.y,i+ft)}for(var yt=0,xt=y.length;yt<xt;yt++){var bt=y[yt];B=U[yt];for(var Tt=0,Et=bt.length;Tt<Et;Tt++){var St=D(bt[Tt],B[Tt],mt);g?At(St.x,St.y+u[l-1].y,u[l-1].x+ft):At(St.x,St.y,i+ft)}}}function Mt(t,e){for(var i=t.length;0<=--i;){var r=i,n=i-1;n<0&&(n=t.length-1);for(var a=0,o=l+2*p;a<o;a++){var s=R*a,u=R*(a+1);!function(t,e,i,r){Dt(t),Dt(e),Dt(r),Dt(e),Dt(i),Dt(r);r=Ct.length/3,r=h.generateSideWallUV(Pt,Ct,r-6,r-3,r-2,r-1);Rt(r[0]),Rt(r[1]),Rt(r[3]),Rt(r[1]),Rt(r[2]),Rt(r[3])}(e+r+s,e+n+s,e+n+u,e+r+u)}}}function At(t,e,i){r.push(t),r.push(e),r.push(i)}function wt(t,e,i){Dt(t),Dt(e),Dt(i);i=Ct.length/3,i=h.generateTopUV(Pt,Ct,i-3,i-2,i-1);Rt(i[0]),Rt(i[1]),Rt(i[2])}function Dt(t){Ct.push(r[3*t+0]),Ct.push(r[3*t+1]),Ct.push(r[3*t+2])}function Rt(t){It.push(t.x),It.push(t.y)}(function(){var t=Ct.length/3;if(c){for(var e=0*R,i=0;i<O;i++){var r=E[i];wt(r[2]+e,r[1]+e,r[0]+e)}for(var e=R*(l+2*p),n=0;n<O;n++){var a=E[n];wt(a[0]+e,a[1]+e,a[2]+e)}}else{for(var o=0;o<O;o++){var s=E[o];wt(s[2],s[1],s[0])}for(var u=0;u<O;u++){var h=E[u];wt(h[0]+R*l,h[1]+R*l,h[2]+R*l)}}Pt.addGroup(t,Ct.length/3-t,0)})(),function(){var t=Ct.length/3,e=0;Mt(S,e),e+=S.length;for(var i=0,r=y.length;i<r;i++){var n=y[i];Mt(n,e),e+=n.length}Pt.addGroup(t,Ct.length/3-t,1)}()}(t[i]);return e.setAttribute("position",new Fr(Ct,3)),e.setAttribute("uv",new Fr(It,2)),e.computeVertexNormals(),e}return m(a,[{key:"toJSON",value:function(){var t=Yr.prototype.toJSON.call(this);return Vu(this.parameters.shapes,this.parameters.options,t)}}]),a}();i.ExtrudeBufferGeometry=ju;var Hu={generateTopUV:function(t,e,i,r,n){var a=e[3*i],o=e[3*i+1],s=e[3*r],i=e[3*r+1],r=e[3*n],n=e[3*n+1];return[new Ve(a,o),new Ve(s,i),new Ve(r,n)]},generateSideWallUV:function(t,e,i,r,n,a){var o=e[3*i],s=e[3*i+1],u=e[3*i+2],h=e[3*r],l=e[3*r+1],c=e[3*r+2],p=e[3*n],d=e[3*n+1],i=e[3*n+2],r=e[3*a],n=e[3*a+1],a=e[3*a+2];return Math.abs(s-l)<.01?[new Ve(o,1-u),new Ve(h,1-c),new Ve(p,1-i),new Ve(r,1-a)]:[new Ve(s,1-u),new Ve(l,1-c),new Ve(d,1-i),new Ve(n,1-a)]}};function Vu(t,e,i){if(i.shapes=[],Array.isArray(t))for(var r=0,n=t.length;r<n;r++){var a=t[r];i.shapes.push(a.uuid)}else i.shapes.push(t.uuid);return void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}var Xu=function(){p(n,yn);var r=_(n);function n(t,e){var i;return B(this,n),(i=r.call(this)).type="TextGeometry",i.parameters={text:t,parameters:e},i.fromBufferGeometry(new Wu(t,e)),i.mergeVertices(),i}return n}();i.TextGeometry=Xu;var Wu=function(){p(a,ju);var n=_(a);function a(t,e){var i;B(this,a);var r=(e=e||{}).font;if(!r||!r.isFont)return o(i,new yn);t=r.generateShapes(t,e.size);return e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),(i=n.call(this,t,e)).type="TextBufferGeometry",i}return a}();i.TextBufferGeometry=Wu;var Yu=function(){p(h,yn);var u=_(h);function h(t,e,i,r,n,a,o){var s;return B(this,h),(s=u.call(this)).type="SphereGeometry",s.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:o},s.fromBufferGeometry(new qu(t,e,i,r,n,a,o)),s.mergeVertices(),s}return h}();i.SphereGeometry=Yu;var qu=function(){p(O,Yr);var R=_(O);function O(t,e,i,r,n,a,o){var s;B(this,O),(s=R.call(this)).type="SphereBufferGeometry",s.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var u=Math.min(a+o,Math.PI),h=0,l=[],c=new ti,p=new ti,d=[],f=[],m=[],v=[],g=0;g<=i;g++){var _=[],y=g/i,x=0;0==g&&0==a?x=.5/e:g==i&&u==Math.PI&&(x=-.5/e);for(var b=0;b<=e;b++){var T=b/e;c.x=-t*Math.cos(r+T*n)*Math.sin(a+y*o),c.y=t*Math.cos(a+y*o),c.z=t*Math.sin(r+T*n)*Math.sin(a+y*o),f.push(c.x,c.y,c.z),p.copy(c).normalize(),m.push(p.x,p.y,p.z),v.push(T+x,1-y),_.push(h++)}l.push(_)}for(var E=0;E<i;E++)for(var S=0;S<e;S++){var M=l[E][S+1],A=l[E][S],w=l[E+1][S],D=l[E+1][S+1];(0!==E||0<a)&&d.push(M,A,D),(E!==i-1||u<Math.PI)&&d.push(A,w,D)}return s.setIndex(d),s.setAttribute("position",new Fr(f,3)),s.setAttribute("normal",new Fr(m,3)),s.setAttribute("uv",new Fr(v,2)),s}return O}();i.SphereBufferGeometry=qu;var Zu=function(){p(u,yn);var s=_(u);function u(t,e,i,r,n,a){var o;return B(this,u),(o=s.call(this)).type="RingGeometry",o.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a},o.fromBufferGeometry(new Ju(t,e,i,r,n,a)),o.mergeVertices(),o}return u}();i.RingGeometry=Zu;var Ju=function(){p(A,Yr);var M=_(A);function A(t,e,i,r,n,a){var o;B(this,A),(o=M.call(this)).type="RingBufferGeometry",o.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a},t=t||.5,e=e||1,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8;for(var s=[],u=[],h=[],l=[],c=t,p=(e-t)/(r=void 0!==r?Math.max(1,r):1),d=new ti,f=new Ve,m=0;m<=r;m++){for(var v=0;v<=i;v++){var g=n+v/i*a;d.x=c*Math.cos(g),d.y=c*Math.sin(g),u.push(d.x,d.y,d.z),h.push(0,0,1),f.x=(d.x/e+1)/2,f.y=(d.y/e+1)/2,l.push(f.x,f.y)}c+=p}for(var _=0;_<r;_++)for(var y=_*(i+1),x=0;x<i;x++){var b=x+y,T=b+i+1,E=b+i+2,S=b+1;s.push(b,T,S),s.push(T,E,S)}return o.setIndex(s),o.setAttribute("position",new Fr(u,3)),o.setAttribute("normal",new Fr(h,3)),o.setAttribute("uv",new Fr(l,2)),o}return A}();i.RingBufferGeometry=Ju;var Ku=function(){p(o,yn);var a=_(o);function o(t,e,i,r){var n;return B(this,o),(n=a.call(this)).type="LatheGeometry",n.parameters={points:t,segments:e,phiStart:i,phiLength:r},n.fromBufferGeometry(new Qu(t,e,i,r)),n.mergeVertices(),n}return o}();i.LatheGeometry=Ku;var Qu=function(){p(O,Yr);var R=_(O);function O(t,e,i,r){var n;B(this,O),(n=R.call(this)).type="LatheBufferGeometry",n.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e)||12,i=i||0,r=r||2*Math.PI,r=He.clamp(r,0,2*Math.PI);for(var a=[],o=[],s=[],u=1/e,h=new ti,l=new Ve,c=0;c<=e;c++)for(var p=i+c*u*r,d=Math.sin(p),f=Math.cos(p),m=0;m<=t.length-1;m++)h.x=t[m].x*d,h.y=t[m].y,h.z=t[m].x*f,o.push(h.x,h.y,h.z),l.x=c/e,l.y=m/(t.length-1),s.push(l.x,l.y);for(var v=0;v<e;v++)for(var g=0;g<t.length-1;g++){var _=g+v*t.length,y=_+t.length,x=_+t.length+1,b=_+1;a.push(_,y,b),a.push(y,x,b)}if(n.setIndex(a),n.setAttribute("position",new Fr(o,3)),n.setAttribute("uv",new Fr(s,2)),n.computeVertexNormals(),r===2*Math.PI)for(var T=n.attributes.normal.array,E=new ti,S=new ti,M=new ti,A=e*t.length*3,w=0,D=0;w<t.length;w++,D+=3)E.x=T[D+0],E.y=T[D+1],E.z=T[D+2],S.x=T[A+D+0],S.y=T[A+D+1],S.z=T[A+D+2],M.addVectors(E,S).normalize(),T[D+0]=T[A+D+0]=M.x,T[D+1]=T[A+D+1]=M.y,T[D+2]=T[A+D+2]=M.z;return n}return O}();i.LatheBufferGeometry=Qu;var $u=function(){p(n,yn);var r=_(n);function n(t,e){var i;return B(this,n),(i=r.call(this)).type="ShapeGeometry","object"===a(e)&&(e=e.curveSegments),i.parameters={shapes:t,curveSegments:e},i.fromBufferGeometry(new th(t,e)),i.mergeVertices(),i}return m(n,[{key:"toJSON",value:function(){var t=yn.prototype.toJSON.call(this);return eh(this.parameters.shapes,t)}}]),n}();i.ShapeGeometry=$u;var th=function(){p(o,Yr);var a=_(o);function o(t,y){var e;B(this,o),(e=a.call(this)).type="ShapeBufferGeometry",e.parameters={shapes:t,curveSegments:y},y=y||12;var x=[],b=[],T=[],E=[],i=0,S=0;if(!1===Array.isArray(t))n(t);else for(var r=0;r<t.length;r++)n(t[r]),e.addGroup(i,S,r),i+=S,S=0;function n(t){var e=b.length/3,t=t.extractPoints(y),i=t.shape,r=t.holes;!1===Uu.isClockWise(i)&&(i=i.reverse());for(var n=0,a=r.length;n<a;n++){var o=r[n];!0===Uu.isClockWise(o)&&(r[n]=o.reverse())}for(var s=Uu.triangulateShape(i,r),u=0,h=r.length;u<h;u++)var l=r[u],i=i.concat(l);for(var c=0,p=i.length;c<p;c++){var d=i[c];b.push(d.x,d.y,0),T.push(0,0,1),E.push(d.x,d.y)}for(var f=0,m=s.length;f<m;f++){var v=s[f],g=v[0]+e,_=v[1]+e,v=v[2]+e;x.push(g,_,v),S+=3}}return e.setIndex(x),e.setAttribute("position",new Fr(b,3)),e.setAttribute("normal",new Fr(T,3)),e.setAttribute("uv",new Fr(E,2)),e}return m(o,[{key:"toJSON",value:function(){var t=Yr.prototype.toJSON.call(this);return eh(this.parameters.shapes,t)}}]),o}();function eh(t,e){if(e.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var n=t[i];e.shapes.push(n.uuid)}else e.shapes.push(t.uuid);return e}i.ShapeBufferGeometry=th;var ih=function(){p(b,Yr);var x=_(b);function b(t,e){var i;B(this,b),(i=x.call(this)).type="EdgesGeometry",i.parameters={thresholdAngle:e},e=void 0!==e?e:1;var r,n,a,o,s=[],u=Math.cos(He.DEG2RAD*e),h=[0,0],l={},c=["a","b","c"];t.isBufferGeometry?(o=new yn).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var p=o.vertices,d=o.faces,f=0,m=d.length;f<m;f++)for(var v=d[f],g=0;g<3;g++)r=v[c[g]],n=v[c[(g+1)%3]],h[0]=Math.min(r,n),h[1]=Math.max(r,n),void 0===l[a=h[0]+","+h[1]]?l[a]={index1:h[0],index2:h[1],face1:f,face2:void 0}:l[a].face2=f;for(a in l){var _,y=l[a];(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=u)&&(_=p[y.index1],s.push(_.x,_.y,_.z),_=p[y.index2],s.push(_.x,_.y,_.z))}return i.setAttribute("position",new Fr(s,3)),i}return b}();i.EdgesGeometry=ih;var rh=function(){p(l,yn);var h=_(l);function l(t,e,i,r,n,a,o,s){var u;return B(this,l),(u=h.call(this)).type="CylinderGeometry",u.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s},u.fromBufferGeometry(new nh(t,e,i,r,n,a,o,s)),u.mergeVertices(),u}return l}();i.CylinderGeometry=rh;var nh=function(){p(n,Yr);var r=_(n);function n(_,y,x,b,T,t,E,S){var e;B(this,n),(e=r.call(this)).type="CylinderBufferGeometry",e.parameters={radiusTop:_,radiusBottom:y,height:x,radialSegments:b,heightSegments:T,openEnded:t,thetaStart:E,thetaLength:S};var M=l(e);_=void 0!==_?_:1,y=void 0!==y?y:1,x=x||1,b=Math.floor(b)||8,T=Math.floor(T)||1,t=void 0!==t&&t,E=void 0!==E?E:0,S=void 0!==S?S:2*Math.PI;var A=[],w=[],D=[],R=[],O=0,P=[],C=x/2,I=0;function i(t){for(var e=O,i=new Ve,r=new ti,n=0,a=!0===t?_:y,o=!0===t?1:-1,s=1;s<=b;s++)w.push(0,C*o,0),D.push(0,o,0),R.push(.5,.5),O++;for(var u=O,h=0;h<=b;h++){var l=h/b*S+E,c=Math.cos(l),l=Math.sin(l);r.x=a*l,r.y=C*o,r.z=a*c,w.push(r.x,r.y,r.z),D.push(0,o,0),i.x=.5*c+.5,i.y=.5*l*o+.5,R.push(i.x,i.y),O++}for(var p=0;p<b;p++){var d=e+p,f=u+p;!0===t?A.push(f,f+1,d):A.push(f+1,f,d),n+=3}M.addGroup(I,n,!0===t?1:2),I+=n}return function(){for(var t=new ti,e=new ti,i=0,r=(y-_)/x,n=0;n<=T;n++){for(var a=[],o=n/T,s=o*(y-_)+_,u=0;u<=b;u++){var h=u/b,l=h*S+E,c=Math.sin(l),l=Math.cos(l);e.x=s*c,e.y=-o*x+C,e.z=s*l,w.push(e.x,e.y,e.z),t.set(c,r,l).normalize(),D.push(t.x,t.y,t.z),R.push(h,1-o),a.push(O++)}P.push(a)}for(var p=0;p<b;p++)for(var d=0;d<T;d++){var f=P[d][p],m=P[d+1][p],v=P[d+1][p+1],g=P[d][p+1];A.push(f,m,g),A.push(m,v,g),i+=6}M.addGroup(I,i,0),I+=i}(),!1===t&&(0<_&&i(!0),0<y&&i(!1)),e.setIndex(A),e.setAttribute("position",new Fr(w,3)),e.setAttribute("normal",new Fr(D,3)),e.setAttribute("uv",new Fr(R,2)),e}return n}();i.CylinderBufferGeometry=nh;var ah=function(){p(h,rh);var u=_(h);function h(t,e,i,r,n,a,o){var s;return B(this,h),(s=u.call(this,0,t,e,i,r,n,a,o)).type="ConeGeometry",s.parameters={radius:t,height:e,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:o},s}return h}();i.ConeGeometry=ah;var oh=function(){p(h,nh);var u=_(h);function h(t,e,i,r,n,a,o){var s;return B(this,h),(s=u.call(this,0,t,e,i,r,n,a,o)).type="ConeBufferGeometry",s.parameters={radius:t,height:e,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:o},s}return h}();i.ConeBufferGeometry=oh;var sh=function(){p(o,yn);var a=_(o);function o(t,e,i,r){var n;return B(this,o),(n=a.call(this)).type="CircleGeometry",n.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},n.fromBufferGeometry(new uh(t,e,i,r)),n.mergeVertices(),n}return o}();i.CircleGeometry=sh;var uh=function(){p(v,Yr);var m=_(v);function v(t,e,i,r){var n;B(this,v),(n=m.call(this)).type="CircleBufferGeometry",n.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var a=[],o=[],s=[],u=[],h=new ti,l=new Ve;o.push(0,0,0),s.push(0,0,1),u.push(.5,.5);for(var c=0,p=3;c<=e;c++,p+=3){var d=i+c/e*r;h.x=t*Math.cos(d),h.y=t*Math.sin(d),o.push(h.x,h.y,h.z),s.push(0,0,1),l.x=(o[p]/t+1)/2,l.y=(o[p+1]/t+1)/2,u.push(l.x,l.y)}for(var f=1;f<=e;f++)a.push(f,f+1,0);return n.setIndex(a),n.setAttribute("position",new Fr(o,3)),n.setAttribute("normal",new Fr(s,3)),n.setAttribute("uv",new Fr(u,2)),n}return v}();i.CircleBufferGeometry=uh;var hh=Object.freeze({__proto__:null,WireframeGeometry:iu,ParametricGeometry:ru,ParametricBufferGeometry:nu,TetrahedronGeometry:su,TetrahedronBufferGeometry:uu,OctahedronGeometry:hu,OctahedronBufferGeometry:lu,IcosahedronGeometry:cu,IcosahedronBufferGeometry:pu,DodecahedronGeometry:du,DodecahedronBufferGeometry:fu,PolyhedronGeometry:au,PolyhedronBufferGeometry:ou,TubeGeometry:mu,TubeBufferGeometry:vu,TorusKnotGeometry:gu,TorusKnotBufferGeometry:_u,TorusGeometry:yu,TorusBufferGeometry:xu,TextGeometry:Xu,TextBufferGeometry:Wu,SphereGeometry:Yu,SphereBufferGeometry:qu,RingGeometry:Zu,RingBufferGeometry:Ju,PlaneGeometry:kn,PlaneBufferGeometry:zn,LatheGeometry:Ku,LatheBufferGeometry:Qu,ShapeGeometry:$u,ShapeBufferGeometry:th,ExtrudeGeometry:zu,ExtrudeBufferGeometry:ju,EdgesGeometry:ih,ConeGeometry:ah,ConeBufferGeometry:oh,CylinderGeometry:rh,CylinderBufferGeometry:nh,CircleGeometry:sh,CircleBufferGeometry:uh,BoxGeometry:xn,BoxBufferGeometry:bn});function lh(t){Sr.call(this),this.type="ShadowMaterial",this.color=new br(0),this.transparent=!0,this.setValues(t)}function ch(t){wn.call(this,t),this.type="RawShaderMaterial"}function ph(t){Sr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new br(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function dh(t){ph.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ve(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function fh(t){Sr.call(this),this.type="MeshPhongMaterial",this.color=new br(16777215),this.specular=new br(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=T,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function mh(t){Sr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new br(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function vh(t){Sr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function gh(t){Sr.call(this),this.type="MeshLambertMaterial",this.color=new br(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=T,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function _h(t){Sr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new br(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ce,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function yh(t){Ls.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}((lh.prototype=Object.create(Sr.prototype)).constructor=lh).prototype.isShadowMaterial=!0,lh.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this},((ch.prototype=Object.create(wn.prototype)).constructor=ch).prototype.isRawShaderMaterial=!0,((ph.prototype=Object.create(Sr.prototype)).constructor=ph).prototype.isMeshStandardMaterial=!0,ph.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},((dh.prototype=Object.create(ph.prototype)).constructor=dh).prototype.isMeshPhysicalMaterial=!0,dh.prototype.copy=function(t){return ph.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new br).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},((fh.prototype=Object.create(Sr.prototype)).constructor=fh).prototype.isMeshPhongMaterial=!0,fh.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((mh.prototype=Object.create(Sr.prototype)).constructor=mh).prototype.isMeshToonMaterial=!0,mh.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((vh.prototype=Object.create(Sr.prototype)).constructor=vh).prototype.isMeshNormalMaterial=!0,vh.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((gh.prototype=Object.create(Sr.prototype)).constructor=gh).prototype.isMeshLambertMaterial=!0,gh.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((_h.prototype=Object.create(Sr.prototype)).constructor=_h).prototype.isMeshMatcapMaterial=!0,_h.prototype.copy=function(t){return Sr.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},((yh.prototype=Object.create(Ls.prototype)).constructor=yh).prototype.isLineDashedMaterial=!0,yh.prototype.copy=function(t){return Ls.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var xh=Object.freeze({__proto__:null,ShadowMaterial:lh,SpriteMaterial:es,RawShaderMaterial:ch,ShaderMaterial:wn,PointsMaterial:Xs,MeshPhysicalMaterial:dh,MeshStandardMaterial:ph,MeshPhongMaterial:fh,MeshToonMaterial:mh,MeshNormalMaterial:vh,MeshLambertMaterial:gh,MeshDepthMaterial:Io,MeshDistanceMaterial:Lo,MeshBasicMaterial:Mr,MeshMatcapMaterial:_h,LineDashedMaterial:yh,LineBasicMaterial:Ls,Material:Sr}),bh={arraySlice:function(t,e,i){return bh.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(i){for(var t=i.length,e=new Array(t),r=0;r!==t;++r)e[r]=r;return e.sort(function(t,e){return i[t]-i[e]}),e},sortedArray:function(t,e,i){for(var r=t.length,n=new t.constructor(r),a=0,o=0;o!==r;++a)for(var s=i[a]*e,u=0;u!==e;++u)n[o++]=t[s+u];return n},flattenJSON:function(t,e,i,r){for(var n=1,a=t[0];void 0!==a&&void 0===a[r];)a=t[n++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))for(;void 0!==(o=a[r])&&(e.push(a.time),i.push.apply(i,o)),void 0!==(a=t[n++]););else if(void 0!==o.toArray)for(;void 0!==(o=a[r])&&(e.push(a.time),o.toArray(i,i.length)),void 0!==(a=t[n++]););else for(;void 0!==(o=a[r])&&(e.push(a.time),i.push(o)),void 0!==(a=t[n++]););}},subclip:function(t,e,i,r,n){n=n||30;var a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],h=u.getValueSize(),l=[],c=[],p=0;p<u.times.length;++p){var d=u.times[p]*n;if(!(d<i||r<=d)){l.push(u.times[p]);for(var f=0;f<h;++f)c.push(u.values[p*h+f])}}0!==l.length&&(u.times=bh.convertArray(l,u.times.constructor),u.values=bh.convertArray(c,u.values.constructor),o.push(u))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(v,t,g,e){void 0===g&&(g=v);for(var i=v.tracks.length,_=(t=void 0===t?0:t)/(e=void 0===e||e<=0?30:e),r=0;r<i;++r)(function(t){var e=g.tracks[t],i=e.ValueTypeName;if("bool"===i||"string"===i)return;var r=v.tracks.find(function(t){return t.name===e.name&&t.ValueTypeName===i});if(void 0===r)return;var n=0,a=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(n=a/3);var o=0,s=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=s/3);var u,h=e.times.length-1,l=void 0;l=_<=e.times[0]?(t=n,bh.arraySlice(e.values,t,a-n)):_>=e.times[h]?bh.arraySlice(e.values,u=h*a+n,u+a-n):(a=a-(u=n),(n=e.createInterpolant()).evaluate(_),bh.arraySlice(n.resultBuffer,u,a)),"quaternion"===i&&(new $e).fromArray(l).normalize().conjugate().toArray(l);for(var c=r.times.length,p=0;p<c;++p){var d=p*s+o;if("quaternion"===i)$e.multiplyQuaternionsFlat(r.values,d,l,0,r.values,d);else for(var f=s-2*o,m=0;m<f;++m)r.values[d+m]-=l[m]}})(r);return v.blendMode=2501,v}};function Th(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Eh(t,e,i,r){Th.call(this,t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Sh(t,e,i,r){Th.call(this,t,e,i,r)}function Mh(t,e,i,r){Th.call(this,t,e,i,r)}function Ah(t,e,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bh.convertArray(e,this.TimeBufferType),this.values=bh.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function wh(t,e,i){Ah.call(this,t,e,i)}function Dh(t,e,i,r){Ah.call(this,t,e,i,r)}function Rh(t,e,i,r){Ah.call(this,t,e,i,r)}function Oh(t,e,i,r){Th.call(this,t,e,i,r)}function Ph(t,e,i,r){Ah.call(this,t,e,i,r)}function Ch(t,e,i,r){Ah.call(this,t,e,i,r)}function Ih(t,e,i,r){Ah.call(this,t,e,i,r)}function Lh(t,e,i,r){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==r?r:De,this.uuid=He.generateUUID(),this.duration<0&&this.resetDuration()}function Nh(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e,i,r=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rh;case"vector":case"vector2":case"vector3":case"vector4":return Ih;case"color":return Dh;case"quaternion":return Ph;case"bool":case"boolean":return wh;case"string":return Ch}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);return void 0===t.times&&(bh.flattenJSON(t.keys,e=[],i=[],"value"),t.times=e,t.values=i),void 0!==r.parse?r.parse(t):new r(t.name,t.times,t.values,t.interpolation)}i.AnimationUtils=bh,Object.assign(Th.prototype,{evaluate:function(t){var e,i=this.parameterPositions,r=this._cachedIndex,n=i[r],a=i[r-1];t:{e:{i:{r:if(!(t<n)){for(var o=r+2;;){if(void 0===n){if(t<a)break r;return r=i.length,this._cachedIndex=r,this.afterEnd_(r-1,t,a)}if(r===o)break;if(a=n,t<(n=i[++r]))break e}e=i.length;break i}if(a<=t)break t;var s=i[1];t<s&&(r=2,a=s);for(var u=r-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(r===u)break;if(n=a,(a=i[--r-1])<=t)break e}e=r,r=0}for(;r<e;){var h=r+e>>>1;t<i[h]?e=h:r=1+h}if(n=i[r],void 0===(a=i[r-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return r=i.length,this._cachedIndex=r,this.afterEnd_(r-1,a,t)}this._cachedIndex=r,this.intervalChanged_(r,a,n)}return this.interpolate_(r,a,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=t*r,a=0;a!==r;++a)e[a]=i[n+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Th.prototype,{beforeStart_:Th.prototype.copySampleValue_,afterEnd_:Th.prototype.copySampleValue_}),Eh.prototype=Object.assign(Object.create(Th.prototype),{constructor:Eh,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var r=this.parameterPositions,n=t-2,a=t+1,o=r[n],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:n=t,o=2*e-i;break;case 2402:o=e+r[n=r.length-2]-r[n+1];break;default:n=t,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*i-e;break;case 2402:s=i+r[a=1]-r[0];break;default:a=t-1,s=e}var u=.5*(i-e),h=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(s-i),this._offsetPrev=n*h,this._offsetNext=a*h},interpolate_:function(t,e,i,r){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,h=this._offsetPrev,l=this._offsetNext,c=this._weightPrev,t=this._weightNext,i=(i-e)/(r-e),r=i*i,e=r*i,p=-c*e+2*c*r-c*i,d=(1+c)*e+(-1.5-2*c)*r+(-.5+c)*i+1,f=(-1-t)*e+(1.5+t)*r+.5*i,m=t*e-t*r,v=0;v!==o;++v)n[v]=p*a[h+v]+d*a[u+v]+f*a[s+v]+m*a[l+v];return n}}),Sh.prototype=Object.assign(Object.create(Th.prototype),{constructor:Sh,interpolate_:function(t,e,i,r){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,h=(i-e)/(r-e),l=1-h,c=0;c!==o;++c)n[c]=a[u+c]*l+a[s+c]*h;return n}}),Mh.prototype=Object.assign(Object.create(Th.prototype),{constructor:Mh,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Ah,{toJSON:function(t){var e,i=t.constructor;return void 0!==i.toJSON?e=i.toJSON(t):(e={name:t.name,times:bh.convertArray(t.times,Array),values:bh.convertArray(t.values,Array)},(i=t.getInterpolation())!==t.DefaultInterpolation&&(e.interpolation=i)),e.type=t.ValueTypeName,e}}),Object.assign(Ah.prototype,{constructor:Ah,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Mh(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Sh(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Eh(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)return this.createInterpolant=e,this;var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,r=e.length;i!==r;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,r=e.length;i!==r;++i)e[i]*=t;return this},trim:function(t,e){for(var i,r=this.times,n=r.length,a=0,o=n-1;a!==n&&r[a]<t;)++a;for(;-1!==o&&r[o]>e;)--o;return++o,0===a&&o===n||(o<=a&&(a=(o=Math.max(o,1))-1),i=this.getValueSize(),this.times=bh.arraySlice(r,a,o),this.values=bh.arraySlice(this.values,a*i,o*i)),this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);var i=this.times,r=this.values,n=i.length;0===n&&(t=!1);for(var a=null,o=0;o!==n;o++){var s=i[o];if("number"==typeof s&&isNaN(s)){t=!1;break}if(null!==a&&s<a){t=!1;break}a=s}if(void 0!==r&&bh.isTypedArray(r))for(var u=0,h=r.length;u!==h;++u){var l=r[u];if(isNaN(l)){t=!1;break}}return t},optimize:function(){for(var t=bh.arraySlice(this.times),e=bh.arraySlice(this.values),i=this.getValueSize(),r=2302===this.getInterpolation(),n=t.length-1,a=1,o=1;o<n;++o){var s=!1,u=t[o];if(u!==t[o+1]&&(1!==o||u!==u[0]))if(r)s=!0;else for(var h=o*i,l=h-i,c=h+i,p=0;p!==i;++p){var d=e[h+p];if(d!==e[l+p]||d!==e[c+p]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];for(var f=o*i,m=a*i,v=0;v!==i;++v)e[m+v]=e[f+v]}++a}}if(0<n){t[a]=t[n];for(var g=n*i,_=a*i,y=0;y!==i;++y)e[_+y]=e[g+y];++a}return a!==t.length?(this.times=bh.arraySlice(t,0,a),this.values=bh.arraySlice(e,0,a*i)):(this.times=t,this.values=e),this},clone:function(){var t=bh.arraySlice(this.times,0),e=bh.arraySlice(this.values,0),e=new this.constructor(this.name,t,e);return e.createInterpolant=this.createInterpolant,e}}),wh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:wh,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Dh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Dh,ValueTypeName:"color"}),Rh.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Rh,ValueTypeName:"number"}),Oh.prototype=Object.assign(Object.create(Th.prototype),{constructor:Oh,interpolate_:function(t,e,i,r){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(i-e)/(r-e),u=t*o,h=u+o;u!==h;u+=4)$e.slerpFlat(n,0,a,u-o,a,u,s);return n}}),Ph.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Ph,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Oh(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Ch.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Ch,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ih.prototype=Object.assign(Object.create(Ah.prototype),{constructor:Ih,ValueTypeName:"vector"}),Object.assign(Lh,{parse:function(t){for(var e=[],i=t.tracks,r=1/(t.fps||1),n=0,a=i.length;n!==a;++n)e.push(Nh(i[n]).scale(r));return new Lh(t.name,t.duration,e,t.blendMode)},toJSON:function(t){for(var e=[],i=t.tracks,t={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},r=0,n=i.length;r!==n;++r)e.push(Ah.toJSON(i[r]));return t},CreateFromMorphTargetSequence:function(t,e,i,r){for(var n=e.length,a=[],o=0;o<n;o++){var s=[];(h=[]).push((o+n-1)%n,o,(o+1)%n),s.push(0,1,0);var u=bh.getKeyframeOrder(h),h=bh.sortedArray(h,1,u),s=bh.sortedArray(s,1,u);r||0!==h[0]||(h.push(n),s.push(s[0])),a.push(new Rh(".morphTargetInfluences["+e[o].name+"]",h,s).scale(1/i))}return new Lh(t,-1,a)},findByName:function(t,e){var i=t;Array.isArray(t)||(i=t.geometry&&t.geometry.animations||t.animations);for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var r={},n=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s,u=t[a],h=u.name.match(n);h&&1<h.length&&((h=r[s=h[1]])||(r[s]=h=[]),h.push(u))}var l,c=[];for(l in r)c.push(Lh.CreateFromMorphTargetSequence(l,r[l],e,i));return c},parseAnimation:function(t,e){if(!t)return null;for(var i=function(t,e,i,r,n){var a;0!==i.length&&(bh.flattenJSON(i,a=[],i=[],r),0!==a.length&&n.push(new t(e,a,i)))},r=[],n=t.name||"default",a=t.fps||30,o=t.blendMode,s=t.length||-1,u=t.hierarchy||[],h=0;h<u.length;h++){var l=u[h].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c,p={},d=void 0,d=0;d<l.length;d++)if(l[d].morphTargets)for(var f=0;f<l[d].morphTargets.length;f++)p[l[d].morphTargets[f]]=-1;for(c in p){for(var m=[],v=[],g=0;g!==l[d].morphTargets.length;++g){var _=l[d];m.push(_.time),v.push(_.morphTarget===c?1:0)}r.push(new Rh(".morphTargetInfluence["+c+"]",m,v))}s=p.length*(a||1)}else{var y=".bones["+e[h].name+"]";i(Ih,y+".position",l,"pos",r),i(Ph,y+".quaternion",l,"rot",r),i(Ih,y+".scale",l,"scl",r)}}return 0===r.length?null:new Lh(n,s,r,o)}}),Object.assign(Lh.prototype,{resetDuration:function(){for(var t=0,e=0,i=this.tracks.length;e!==i;++e)var r=this.tracks[e],t=Math.max(t,r.times[r.times.length-1]);return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Lh(this.name,this.duration,t,this.blendMode)}});var Fh={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function Bh(t,e,i){var r=this,n=!1,a=0,o=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===n&&void 0!==r.onStart&&r.onStart(t,a,o),n=!0},this.itemEnd=function(t){a++,void 0!==r.onProgress&&r.onProgress(t,a,o),a===o&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){t=u.indexOf(t);return-1!==t&&u.splice(t,2),this},this.getHandler=function(t){for(var e=0,i=u.length;e<i;e+=2){var r=u[e],n=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return n}return null}}i.Cache=Fh;var Uh=new Bh;function Gh(t){this.manager=void 0!==t?t:Uh,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}i.DefaultLoadingManager=Uh,Object.assign(Gh.prototype,{load:function(){},loadAsync:function(i,r){var n=this;return new Promise(function(t,e){n.load(i,t,r,e)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var kh={};function zh(t){Gh.call(this,t)}function jh(t){Gh.call(this,t)}function Hh(t){Gh.call(this,t)}function Vh(t){Gh.call(this,t)}function Xh(t){Gh.call(this,t)}function Wh(t){Gh.call(this,t)}function Yh(t){Gh.call(this,t)}function qh(){this.type="Curve",this.arcLengthDivisions=200}function Zh(t,e,i,r,n,a,o,s){qh.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=i||1,this.yRadius=r||1,this.aStartAngle=n||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Jh(t,e,i,r,n,a){Zh.call(this,t,e,i,i,r,n,a),this.type="ArcCurve"}function Kh(){var n=0,a=0,o=0,s=0;function u(t,e,i,r){o=-3*(n=t)+3*e-2*(a=i)-r,s=2*t-2*e+i+r}return{initCatmullRom:function(t,e,i,r,n){u(e,i,n*(i-t),n*(r-e))},initNonuniformCatmullRom:function(t,e,i,r,n,a,o){n=(e-t)/n-(i-t)/(n+a)+(i-e)/a,o=(i-e)/a-(r-e)/(a+o)+(r-i)/o;u(e,i,n*=a,o*=a)},calc:function(t){var e=t*t;return n+a*t+o*e+s*(e*t)}}}zh.prototype=Object.assign(Object.create(Gh.prototype),{constructor:zh,load:function(h,t,e,i){void 0===h&&(h=""),void 0!==this.path&&(h=this.path+h),h=this.manager.resolveURL(h);var l=this,r=Fh.get(h);if(void 0!==r)return l.manager.itemStart(h),setTimeout(function(){t&&t(r),l.manager.itemEnd(h)},0),r;if(void 0===kh[h]){var n,a=h.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var o=a[1],s=!!a[2],u=a[3],u=decodeURIComponent(u);s&&(u=atob(u));try{var c=(this.responseType||"").toLowerCase();switch(c){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),d=0;d<u.length;d++)p[d]=u.charCodeAt(d);f="blob"===c?new Blob([p.buffer],{type:o}):p.buffer;break;case"document":var f=(new DOMParser).parseFromString(u,o);break;case"json":f=JSON.parse(u);break;default:f=u}setTimeout(function(){t&&t(f),l.manager.itemEnd(h)},0)}catch(t){setTimeout(function(){i&&i(t),l.manager.itemError(h),l.manager.itemEnd(h)},0)}}else{for(var m in kh[h]=[],kh[h].push({onLoad:t,onProgress:e,onError:i}),(n=new XMLHttpRequest).open("GET",h,!0),n.addEventListener("load",function(t){var e=this.response,i=kh[h];if(delete kh[h],200===this.status||0===this.status){this.status,Fh.add(h,e);for(var r=0,n=i.length;r<n;r++){var a=i[r];a.onLoad&&a.onLoad(e)}l.manager.itemEnd(h)}else{for(var o=0,s=i.length;o<s;o++){var u=i[o];u.onError&&u.onError(t)}l.manager.itemError(h),l.manager.itemEnd(h)}},!1),n.addEventListener("progress",function(t){for(var e=kh[h],i=0,r=e.length;i<r;i++){var n=e[i];n.onProgress&&n.onProgress(t)}},!1),n.addEventListener("error",function(t){var e=kh[h];delete kh[h];for(var i=0,r=e.length;i<r;i++){var n=e[i];n.onError&&n.onError(t)}l.manager.itemError(h),l.manager.itemEnd(h)},!1),n.addEventListener("abort",function(t){var e=kh[h];delete kh[h];for(var i=0,r=e.length;i<r;i++){var n=e[i];n.onError&&n.onError(t)}l.manager.itemError(h),l.manager.itemEnd(h)},!1),void 0!==this.responseType&&(n.responseType=this.responseType),void 0!==this.withCredentials&&(n.withCredentials=this.withCredentials),n.overrideMimeType&&n.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)n.setRequestHeader(m,this.requestHeader[m]);n.send(null)}return l.manager.itemStart(h),n}kh[h].push({onLoad:t,onProgress:e,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),jh.prototype=Object.assign(Object.create(Gh.prototype),{constructor:jh,load:function(e,i,t,r){var n=this,a=new zh(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.load(e,function(t){try{i(n.parse(JSON.parse(t)))}catch(t){r&&r(t),n.manager.itemError(e)}},t,r)},parse:function(t){for(var e=[],i=0;i<t.length;i++){var r=Lh.parse(t[i]);e.push(r)}return e}}),Hh.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Hh,load:function(t,a,i,r){var o=this,s=[],u=new $s;u.image=s;var n=new zh(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader);var h=0;if(Array.isArray(t))for(var e=0,l=t.length;e<l;++e)!function(e){n.load(t[e],function(t){t=o.parse(t,!0);s[e]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(h+=1)&&(1===t.mipmapCount&&(u.minFilter=Dt),u.format=t.format,u.needsUpdate=!0,a&&a(u))},i,r)}(e);else n.load(t,function(t){var e=o.parse(t,!0);if(e.isCubemap)for(var i=e.mipmaps.length/e.mipmapCount,r=0;r<i;r++){s[r]={mipmaps:[]};for(var n=0;n<e.mipmapCount;n++)s[r].mipmaps.push(e.mipmaps[r*e.mipmapCount+n]),s[r].format=e.format,s[r].width=e.width,s[r].height=e.height}else u.image.width=e.width,u.image.height=e.height,u.mipmaps=e.mipmaps;1===e.mipmapCount&&(u.minFilter=Dt),u.format=e.format,u.needsUpdate=!0,a&&a(u)},i,r);return u}}),Vh.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Vh,load:function(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var n=this,a=Fh.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),Fh.add(e,this),t&&t(this),n.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),r&&r(t),n.manager.itemError(e),n.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),n.manager.itemStart(e),o.src=e,o}}),Xh.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Xh,load:function(t,i,e,r){var n=new aa,a=new Vh(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;for(var s=0;s<t.length;++s)!function(e){a.load(t[e],function(t){n.images[e]=t,6===++o&&(n.needsUpdate=!0,i&&i(n))},void 0,r)}(s);return n}}),Wh.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Wh,load:function(t,e,i,r){var n=this,a=new Ln,o=new zh(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(t,function(t){t=n.parse(t);t&&(void 0!==t.image?a.image=t.image:void 0!==t.data&&(a.image.width=t.width,a.image.height=t.height,a.image.data=t.data),a.wrapS=void 0!==t.wrapS?t.wrapS:k,a.wrapT=void 0!==t.wrapT?t.wrapT:k,a.magFilter=void 0!==t.magFilter?t.magFilter:Dt,a.minFilter=void 0!==t.minFilter?t.minFilter:Dt,a.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(a.format=t.format),void 0!==t.type&&(a.type=t.type),void 0!==t.mipmaps&&(a.mipmaps=t.mipmaps,a.minFilter=Ot),1===t.mipmapCount&&(a.minFilter=Dt),a.needsUpdate=!0,e&&e(a,t))},i,r),a}}),Yh.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Yh,load:function(e,i,t,r){var n=new Ze,a=new Vh(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(t){n.image=t;t=0<e.search(/\.jpe?g($|\?)/i)||0===e.search(/^data\:image\/jpeg/);n.format=t?Bt:Ut,n.needsUpdate=!0,void 0!==i&&i(n)},t,r),n}}),Object.assign(qh.prototype,{getPoint:function(){return null},getPointAt:function(t,e){t=this.getUtoTmapping(t);return this.getPoint(t,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i=[],r=this.getPoint(0),n=0;i.push(0);for(var a=1;a<=t;a++)n+=(e=this.getPoint(a/t)).distanceTo(r),i.push(n),r=e;return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){for(var i,r=this.getLengths(),n=0,a=r.length,o=e||t*r[a-1],s=0,u=a-1;s<=u;)if((i=r[n=Math.floor(s+(u-s)/2)]-o)<0)s=n+1;else{if(!(0<i)){u=n;break}u=n-1}if(r[n=u]===o)return n/(a-1);t=r[n];return(n+(o-t)/(r[n+1]-t))/(a-1)},getTangent:function(t,e){var i=t-1e-4,t=t+1e-4;1<t&&(t=1);i=this.getPoint(i=i<0?0:i),t=this.getPoint(t),e=e||new(i.isVector2?Ve:ti);return e.copy(t).sub(i).normalize(),e},getTangentAt:function(t,e){t=this.getUtoTmapping(t);return this.getTangent(t,e)},computeFrenetFrames:function(t,e){for(var i=new ti,r=[],n=[],a=[],o=new ti,s=new Di,u=0;u<=t;u++)r[u]=this.getTangentAt(u/t,new ti),r[u].normalize();n[0]=new ti,a[0]=new ti;var h=Number.MAX_VALUE,l=Math.abs(r[0].x),c=Math.abs(r[0].y),p=Math.abs(r[0].z);l<=h&&(h=l,i.set(1,0,0)),c<=h&&(h=c,i.set(0,1,0)),p<=h&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),n[0].crossVectors(r[0],o),a[0].crossVectors(r[0],n[0]);for(var d,f=1;f<=t;f++)n[f]=n[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON&&(o.normalize(),d=Math.acos(He.clamp(r[f-1].dot(r[f]),-1,1)),n[f].applyMatrix4(s.makeRotationAxis(o,d))),a[f].crossVectors(r[f],n[f]);if(!0===e){var m=Math.acos(He.clamp(n[0].dot(n[t]),-1,1));m/=t,0<r[0].dot(o.crossVectors(n[0],n[t]))&&(m=-m);for(var v=1;v<=t;v++)n[v].applyMatrix4(s.makeRotationAxis(r[v],m*v)),a[v].crossVectors(r[v],n[v])}return{tangents:r,normals:n,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),((Zh.prototype=Object.create(qh.prototype)).constructor=Zh).prototype.isEllipseCurve=!0,Zh.prototype.getPoint=function(t,e){for(var i=e||new Ve,r=2*Math.PI,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;n<0;)n+=r;for(;r<n;)n-=r;n<Number.EPSILON&&(n=a?0:r),!0!==this.aClockwise||a||(n===r?n=-r:n-=r);var o=this.aStartAngle+t*n,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);return 0!==this.aRotation&&(e=Math.cos(this.aRotation),a=Math.sin(this.aRotation),s=(t=s-this.aX)*e-(o=u-this.aY)*a+this.aX,u=t*a+o*e+this.aY),i.set(s,u)},Zh.prototype.copy=function(t){return qh.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Zh.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Zh.prototype.fromJSON=function(t){return qh.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},((Jh.prototype=Object.create(Zh.prototype)).constructor=Jh).prototype.isArcCurve=!0;var Qh=new ti,$h=new Kh,tl=new Kh,el=new Kh;function il(t,e,i,r){qh.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=i||"centripetal",this.tension=void 0!==r?r:.5}function rl(t,e,i,r,n){var a=.5*(r-e),e=.5*(n-i),n=t*t;return(2*i-2*r+a+e)*(t*n)+(-3*i+3*r-2*a-e)*n+a*t+i}function nl(t,e,i,r){return(n=1-(n=t))*n*e+2*(1-t)*t*i+t*t*r;var n}function al(t,e,i,r,n){return(a=1-(a=t))*a*a*e+3*(e=1-t)*e*t*i+3*(1-t)*t*t*r+t*t*t*n;var a}function ol(t,e,i,r){qh.call(this),this.type="CubicBezierCurve",this.v0=t||new Ve,this.v1=e||new Ve,this.v2=i||new Ve,this.v3=r||new Ve}function sl(t,e,i,r){qh.call(this),this.type="CubicBezierCurve3",this.v0=t||new ti,this.v1=e||new ti,this.v2=i||new ti,this.v3=r||new ti}function ul(t,e){qh.call(this),this.type="LineCurve",this.v1=t||new Ve,this.v2=e||new Ve}function hl(t,e){qh.call(this),this.type="LineCurve3",this.v1=t||new ti,this.v2=e||new ti}function ll(t,e,i){qh.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Ve,this.v1=e||new Ve,this.v2=i||new Ve}function cl(t,e,i){qh.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new ti,this.v1=e||new ti,this.v2=i||new ti}function pl(t){qh.call(this),this.type="SplineCurve",this.points=t||[]}((il.prototype=Object.create(qh.prototype)).constructor=il).prototype.isCatmullRomCurve3=!0,il.prototype.getPoint=function(t,e){var i=e||new ti,r=this.points,n=r.length,a=(n-(this.closed?0:1))*t,o=Math.floor(a),s=a-o;this.closed?o+=0<o?0:(Math.floor(Math.abs(o)/n)+1)*n:0===s&&o===n-1&&(o=n-2,s=1);var u=this.closed||0<o?r[(o-1)%n]:(Qh.subVectors(r[0],r[1]).add(r[0]),Qh),e=r[o%n],t=r[(o+1)%n],a=this.closed||o+2<n?r[(o+2)%n]:(Qh.subVectors(r[n-1],r[n-2]).add(r[n-1]),Qh);return"centripetal"===this.curveType||"chordal"===this.curveType?(o="chordal"===this.curveType?.5:.25,r=Math.pow(u.distanceToSquared(e),o),(n=Math.pow(e.distanceToSquared(t),o))<1e-4&&(n=1),r<1e-4&&(r=n),(o=Math.pow(t.distanceToSquared(a),o))<1e-4&&(o=n),$h.initNonuniformCatmullRom(u.x,e.x,t.x,a.x,r,n,o),tl.initNonuniformCatmullRom(u.y,e.y,t.y,a.y,r,n,o),el.initNonuniformCatmullRom(u.z,e.z,t.z,a.z,r,n,o)):"catmullrom"===this.curveType&&($h.initCatmullRom(u.x,e.x,t.x,a.x,this.tension),tl.initCatmullRom(u.y,e.y,t.y,a.y,this.tension),el.initCatmullRom(u.z,e.z,t.z,a.z,this.tension)),i.set($h.calc(s),tl.calc(s),el.calc(s)),i},il.prototype.copy=function(t){qh.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},il.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},il.prototype.fromJSON=function(t){qh.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new ti).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},((ol.prototype=Object.create(qh.prototype)).constructor=ol).prototype.isCubicBezierCurve=!0,ol.prototype.getPoint=function(t,e){var i=e||new Ve,r=this.v0,n=this.v1,a=this.v2,e=this.v3;return i.set(al(t,r.x,n.x,a.x,e.x),al(t,r.y,n.y,a.y,e.y)),i},ol.prototype.copy=function(t){return qh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},ol.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},ol.prototype.fromJSON=function(t){return qh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((sl.prototype=Object.create(qh.prototype)).constructor=sl).prototype.isCubicBezierCurve3=!0,sl.prototype.getPoint=function(t,e){var i=e||new ti,r=this.v0,n=this.v1,a=this.v2,e=this.v3;return i.set(al(t,r.x,n.x,a.x,e.x),al(t,r.y,n.y,a.y,e.y),al(t,r.z,n.z,a.z,e.z)),i},sl.prototype.copy=function(t){return qh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},sl.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},sl.prototype.fromJSON=function(t){return qh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},((ul.prototype=Object.create(qh.prototype)).constructor=ul).prototype.isLineCurve=!0,ul.prototype.getPoint=function(t,e){e=e||new Ve;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},ul.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},ul.prototype.getTangent=function(t,e){e=e||new Ve;return e.copy(this.v2).sub(this.v1).normalize(),e},ul.prototype.copy=function(t){return qh.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ul.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ul.prototype.fromJSON=function(t){return qh.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((hl.prototype=Object.create(qh.prototype)).constructor=hl).prototype.isLineCurve3=!0,hl.prototype.getPoint=function(t,e){e=e||new ti;return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e},hl.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},hl.prototype.copy=function(t){return qh.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},hl.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},hl.prototype.fromJSON=function(t){return qh.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((ll.prototype=Object.create(qh.prototype)).constructor=ll).prototype.isQuadraticBezierCurve=!0,ll.prototype.getPoint=function(t,e){var i=e||new Ve,r=this.v0,n=this.v1,e=this.v2;return i.set(nl(t,r.x,n.x,e.x),nl(t,r.y,n.y,e.y)),i},ll.prototype.copy=function(t){return qh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ll.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ll.prototype.fromJSON=function(t){return qh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((cl.prototype=Object.create(qh.prototype)).constructor=cl).prototype.isQuadraticBezierCurve3=!0,cl.prototype.getPoint=function(t,e){var i=e||new ti,r=this.v0,n=this.v1,e=this.v2;return i.set(nl(t,r.x,n.x,e.x),nl(t,r.y,n.y,e.y),nl(t,r.z,n.z,e.z)),i},cl.prototype.copy=function(t){return qh.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},cl.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},cl.prototype.fromJSON=function(t){return qh.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},((pl.prototype=Object.create(qh.prototype)).constructor=pl).prototype.isSplineCurve=!0,pl.prototype.getPoint=function(t,e){var i=e||new Ve,r=this.points,n=(r.length-1)*t,a=Math.floor(n),o=n-a,e=r[0===a?a:a-1],t=r[a],n=r[a>r.length-2?r.length-1:a+1],a=r[a>r.length-3?r.length-1:a+2];return i.set(rl(o,e.x,t.x,n.x,a.x),rl(o,e.y,t.y,n.y,a.y)),i},pl.prototype.copy=function(t){qh.prototype.copy.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this},pl.prototype.toJSON=function(){var t=qh.prototype.toJSON.call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var r=this.points[e];t.points.push(r.toArray())}return t},pl.prototype.fromJSON=function(t){qh.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new Ve).fromArray(r))}return this};var dl=Object.freeze({__proto__:null,ArcCurve:Jh,CatmullRomCurve3:il,CubicBezierCurve:ol,CubicBezierCurve3:sl,EllipseCurve:Zh,LineCurve:ul,LineCurve3:hl,QuadraticBezierCurve:ll,QuadraticBezierCurve3:cl,SplineCurve:pl});function fl(){qh.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ml(t){fl.call(this),this.type="Path",this.currentPoint=new Ve,t&&this.setFromPoints(t)}function vl(t){ml.call(this,t),this.uuid=He.generateUUID(),this.type="Shape",this.holes=[]}function gl(t,e){$i.call(this),this.type="Light",this.color=new br(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function _l(t,e,i){gl.call(this,t,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy($i.DefaultUp),this.updateMatrix(),this.groundColor=new br(e)}function yl(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Di,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bn,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new Je(0,0,1,1)]}function xl(){yl.call(this,new Rn(50,1,.5,500))}function bl(t,e,i,r,n,a){gl.call(this,t,e),this.type="SpotLight",this.position.copy($i.DefaultUp),this.updateMatrix(),this.target=new $i,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==a?a:1,this.shadow=new xl}function Tl(){yl.call(this,new Rn(90,1,.5,500)),this._frameExtents=new Ve(4,2),this._viewportCount=6,this._viewports=[new Je(2,1,1,1),new Je(0,1,1,1),new Je(3,1,1,1),new Je(1,1,1,1),new Je(3,0,1,1),new Je(1,0,1,1)],this._cubeDirections=[new ti(1,0,0),new ti(-1,0,0),new ti(0,0,1),new ti(0,0,-1),new ti(0,1,0),new ti(0,-1,0)],this._cubeUps=[new ti(0,1,0),new ti(0,1,0),new ti(0,1,0),new ti(0,1,0),new ti(0,0,1),new ti(0,0,-1)]}function El(t,e,i,r){gl.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==r?r:1,this.shadow=new Tl}function Sl(t,e,i,r,n,a){Dn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==i?i:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Ml(){yl.call(this,new Sl(-5,5,5,-5,.5,500))}function Al(t,e){gl.call(this,t,e),this.type="DirectionalLight",this.position.copy($i.DefaultUp),this.updateMatrix(),this.target=new $i,this.shadow=new Ml}function wl(t,e){gl.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Dl(t,e,i,r){gl.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==r?r:10}fl.prototype=Object.assign(Object.create(qh.prototype),{constructor:fl,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new ul(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=e){var n=i[r]-e,a=this.curves[r],o=a.getLength();return a.getPointAt(0===o?0:1-n/o)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,r=this.curves.length;i<r;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],r=0,n=this.curves;r<n.length;r++)for(var a=n[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var h=s[u];e&&e.equals(h)||(i.push(h),e=h)}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(t){qh.prototype.copy.call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=qh.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){qh.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var r=t.curves[e];this.curves.push((new dl[r.type]).fromJSON(r))}return this}}),ml.prototype=Object.assign(Object.create(fl.prototype),{constructor:ml,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var i=new ul(this.currentPoint.clone(),new Ve(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,i,r){e=new ll(this.currentPoint.clone(),new Ve(t,e),new Ve(i,r));return this.curves.push(e),this.currentPoint.set(i,r),this},bezierCurveTo:function(t,e,i,r,n,a){r=new ol(this.currentPoint.clone(),new Ve(t,e),new Ve(i,r),new Ve(n,a));return this.curves.push(r),this.currentPoint.set(n,a),this},splineThru:function(t){var e=new pl([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,i,r,n,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,i,r,n,a),this},absarc:function(t,e,i,r,n,a){return this.absellipse(t,e,i,i,r,n,a),this},ellipse:function(t,e,i,r,n,a,o,s){var u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(t+u,e+h,i,r,n,a,o,s),this},absellipse:function(t,e,i,r,n,a,o,s){o=new Zh(t,e,i,r,n,a,o,s);0<this.curves.length&&((s=o.getPoint(0)).equals(this.currentPoint)||this.lineTo(s.x,s.y)),this.curves.push(o);o=o.getPoint(1);return this.currentPoint.copy(o),this},copy:function(t){return fl.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=fl.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return fl.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),vl.prototype=Object.assign(Object.create(ml.prototype),{constructor:vl,getPointsHoles:function(t){for(var e=[],i=0,r=this.holes.length;i<r;i++)e[i]=this.holes[i].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){ml.prototype.copy.call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=ml.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){ml.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push((new ml).fromJSON(r))}return this}}),gl.prototype=Object.assign(Object.create($i.prototype),{constructor:gl,isLight:!0,copy:function(t){return $i.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){t=$i.prototype.toJSON.call(this,t);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),_l.prototype=Object.assign(Object.create(gl.prototype),{constructor:_l,isHemisphereLight:!0,copy:function(t){return gl.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(yl.prototype,{_projScreenMatrix:new Di,_lightPositionWorld:new ti,_lookTarget:new ti,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,i=this.matrix,r=this._projScreenMatrix,n=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),n.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(n),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),xl.prototype=Object.assign(Object.create(yl.prototype),{constructor:xl,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,i=2*He.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,n=t.distance||e.far;i===e.fov&&r===e.aspect&&n===e.far||(e.fov=i,e.aspect=r,e.far=n,e.updateProjectionMatrix()),yl.prototype.updateMatrices.call(this,t)}}),bl.prototype=Object.assign(Object.create(gl.prototype),{constructor:bl,isSpotLight:!0,copy:function(t){return gl.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Tl.prototype=Object.assign(Object.create(yl.prototype),{constructor:Tl,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var i=this.camera,r=this.matrix,n=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;n.setFromMatrixPosition(t.matrixWorld),i.position.copy(n),a.copy(i.position),a.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(a),i.updateMatrixWorld(),r.makeTranslation(-n.x,-n.y,-n.z),o.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),El.prototype=Object.assign(Object.create(gl.prototype),{constructor:El,isPointLight:!0,copy:function(t){return gl.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Sl.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Sl,isOrthographicCamera:!0,copy:function(t,e){return Dn.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,r,n,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-t,a=i+t,i=r+e,t=r-e;null!==this.view&&this.view.enabled&&(r=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom,a=(n+=r*this.view.offsetX)+r*this.view.width,t=(i-=e*this.view.offsetY)-e*this.view.height),this.projectionMatrix.makeOrthographic(n,a,i,t,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){t=$i.prototype.toJSON.call(this,t);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Ml.prototype=Object.assign(Object.create(yl.prototype),{constructor:Ml,isDirectionalLightShadow:!0,updateMatrices:function(t){yl.prototype.updateMatrices.call(this,t)}}),Al.prototype=Object.assign(Object.create(gl.prototype),{constructor:Al,isDirectionalLight:!0,copy:function(t){return gl.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),wl.prototype=Object.assign(Object.create(gl.prototype),{constructor:wl,isAmbientLight:!0}),Dl.prototype=Object.assign(Object.create(gl.prototype),{constructor:Dl,isRectAreaLight:!0,copy:function(t){return gl.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){t=gl.prototype.toJSON.call(this,t);return t.object.width=this.width,t.object.height=this.height,t}});var Rl=function(){function e(){B(this,e),Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new ti)}return m(e,[{key:"set",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:"zero",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var i=t.x,r=t.y,n=t.z,t=this.coefficients;return e.copy(t[0]).multiplyScalar(.282095),e.addScaledVector(t[1],.488603*r),e.addScaledVector(t[2],.488603*n),e.addScaledVector(t[3],.488603*i),e.addScaledVector(t[4],i*r*1.092548),e.addScaledVector(t[5],r*n*1.092548),e.addScaledVector(t[6],.315392*(3*n*n-1)),e.addScaledVector(t[7],i*n*1.092548),e.addScaledVector(t[8],.546274*(i*i-r*r)),e}},{key:"getIrradianceAt",value:function(t,e){var i=t.x,r=t.y,n=t.z,t=this.coefficients;return e.copy(t[0]).multiplyScalar(.886227),e.addScaledVector(t[1],1.023328*r),e.addScaledVector(t[2],1.023328*n),e.addScaledVector(t[3],1.023328*i),e.addScaledVector(t[4],.858086*i*r),e.addScaledVector(t[5],.858086*r*n),e.addScaledVector(t[6],.743125*n*n-.247708),e.addScaledVector(t[7],.858086*i*n),e.addScaledVector(t[8],.429043*(i*i-r*r)),e}},{key:"add",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:"addScaledSH",value:function(t,e){for(var i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}},{key:"scale",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}},{key:"lerp",value:function(t,e){for(var i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}},{key:"equals",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t,e){void 0===e&&(e=0);for(var i=this.coefficients,r=0;r<9;r++)i[r].fromArray(t,e+3*r);return this}},{key:"toArray",value:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var i=this.coefficients,r=0;r<9;r++)i[r].toArray(t,e+3*r);return t}}],[{key:"getBasisAt",value:function(t,e){var i=t.x,r=t.y,t=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*t,e[3]=.488603*i,e[4]=1.092548*i*r,e[5]=1.092548*r*t,e[6]=.315392*(3*t*t-1),e[7]=1.092548*i*t,e[8]=.546274*(i*i-r*r)}}]),e}();function Ol(t,e){gl.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Rl}function Pl(t){Gh.call(this,t),this.textures={}}i.SphericalHarmonics3=Rl,Ol.prototype=Object.assign(Object.create(gl.prototype),{constructor:Ol,isLightProbe:!0,copy:function(t){return gl.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){t=gl.prototype.toJSON.call(this,t);return t.object.sh=this.sh.toArray(),t}}),Pl.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Pl,load:function(e,i,t,r){var n=this,a=new zh(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.load(e,function(t){try{i(n.parse(JSON.parse(t)))}catch(t){r&&r(t),n.manager.itemError(e)}},t,r)},parse:function(t){var e=this.textures;function i(t){return e[t],e[t]}var r,n=new xh[t.type];if(void 0!==t.uuid&&(n.uuid=t.uuid),void 0!==t.name&&(n.name=t.name),void 0!==t.color&&n.color.setHex(t.color),void 0!==t.roughness&&(n.roughness=t.roughness),void 0!==t.metalness&&(n.metalness=t.metalness),void 0!==t.sheen&&(n.sheen=(new br).setHex(t.sheen)),void 0!==t.emissive&&n.emissive.setHex(t.emissive),void 0!==t.specular&&n.specular.setHex(t.specular),void 0!==t.shininess&&(n.shininess=t.shininess),void 0!==t.clearcoat&&(n.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(n.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(n.fog=t.fog),void 0!==t.flatShading&&(n.flatShading=t.flatShading),void 0!==t.blending&&(n.blending=t.blending),void 0!==t.combine&&(n.combine=t.combine),void 0!==t.side&&(n.side=t.side),void 0!==t.opacity&&(n.opacity=t.opacity),void 0!==t.transparent&&(n.transparent=t.transparent),void 0!==t.alphaTest&&(n.alphaTest=t.alphaTest),void 0!==t.depthTest&&(n.depthTest=t.depthTest),void 0!==t.depthWrite&&(n.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(n.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(n.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(n.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(n.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(n.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(n.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(n.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(n.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(n.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(n.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(n.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(n.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(n.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(n.rotation=t.rotation),1!==t.linewidth&&(n.linewidth=t.linewidth),void 0!==t.dashSize&&(n.dashSize=t.dashSize),void 0!==t.gapSize&&(n.gapSize=t.gapSize),void 0!==t.scale&&(n.scale=t.scale),void 0!==t.polygonOffset&&(n.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(n.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(n.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(n.skinning=t.skinning),void 0!==t.morphTargets&&(n.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(n.morphNormals=t.morphNormals),void 0!==t.dithering&&(n.dithering=t.dithering),void 0!==t.vertexTangents&&(n.vertexTangents=t.vertexTangents),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.toneMapped&&(n.toneMapped=t.toneMapped),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?n.vertexColors=0<t.vertexColors:n.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var a in t.uniforms){var o=t.uniforms[a];switch(n.uniforms[a]={},o.type){case"t":n.uniforms[a].value=i(o.value);break;case"c":n.uniforms[a].value=(new br).setHex(o.value);break;case"v2":n.uniforms[a].value=(new Ve).fromArray(o.value);break;case"v3":n.uniforms[a].value=(new ti).fromArray(o.value);break;case"v4":n.uniforms[a].value=(new Je).fromArray(o.value);break;case"m3":n.uniforms[a].value=(new We).fromArray(o.value);break;case"m4":n.uniforms[a].value=(new Di).fromArray(o.value);break;default:n.uniforms[a].value=o.value}}if(void 0!==t.defines&&(n.defines=t.defines),void 0!==t.vertexShader&&(n.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(n.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var s in t.extensions)n.extensions[s]=t.extensions[s];return void 0!==t.shading&&(n.flatShading=1===t.shading),void 0!==t.size&&(n.size=t.size),void 0!==t.sizeAttenuation&&(n.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(n.map=i(t.map)),void 0!==t.matcap&&(n.matcap=i(t.matcap)),void 0!==t.alphaMap&&(n.alphaMap=i(t.alphaMap)),void 0!==t.bumpMap&&(n.bumpMap=i(t.bumpMap)),void 0!==t.bumpScale&&(n.bumpScale=t.bumpScale),void 0!==t.normalMap&&(n.normalMap=i(t.normalMap)),void 0!==t.normalMapType&&(n.normalMapType=t.normalMapType),void 0!==t.normalScale&&(r=t.normalScale,!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=(new Ve).fromArray(r)),void 0!==t.displacementMap&&(n.displacementMap=i(t.displacementMap)),void 0!==t.displacementScale&&(n.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(n.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(n.roughnessMap=i(t.roughnessMap)),void 0!==t.metalnessMap&&(n.metalnessMap=i(t.metalnessMap)),void 0!==t.emissiveMap&&(n.emissiveMap=i(t.emissiveMap)),void 0!==t.emissiveIntensity&&(n.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(n.specularMap=i(t.specularMap)),void 0!==t.envMap&&(n.envMap=i(t.envMap)),void 0!==t.envMapIntensity&&(n.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(n.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(n.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(n.lightMap=i(t.lightMap)),void 0!==t.lightMapIntensity&&(n.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(n.aoMap=i(t.aoMap)),void 0!==t.aoMapIntensity&&(n.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(n.gradientMap=i(t.gradientMap)),void 0!==t.clearcoatMap&&(n.clearcoatMap=i(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(n.clearcoatNormalMap=i(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Ve).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(n.transmission=t.transmission),void 0!==t.transmissionMap&&(n.transmissionMap=i(t.transmissionMap)),n},setTextures:function(t){return this.textures=t,this}});var Cl={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Il(){Yr.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Ll(t,e,i,r){"number"==typeof i&&(r=i,i=!1),Dr.call(this,t,e,i),this.meshPerAttribute=r||1}function Nl(t){Gh.call(this,t)}i.LoaderUtils=Cl,Il.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Il,isInstancedBufferGeometry:!0,copy:function(t){return Yr.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Yr.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Ll.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Ll,isInstancedBufferAttribute:!0,copy:function(t){return Dr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Dr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Nl.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Nl,load:function(e,i,t,r){var n=this,a=new zh(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.load(e,function(t){try{i(n.parse(JSON.parse(t)))}catch(t){r&&r(t),n.manager.itemError(e)}},t,r)},parse:function(t){var r={},n={};function e(t,e){if(void 0!==r[e])return r[e];var i=t.interleavedBuffers[e],t=function(t,e){if(void 0!==n[e])return n[e];t=t.arrayBuffers[e],t=new Uint32Array(t).buffer;return n[e]=t}(t,i.buffer),t=new Ko(new Fl[i.type](t),i.stride);return t.uuid=i.uuid,r[e]=t}var i=new(t.isInstancedBufferGeometry?Il:Yr),a=t.data.index;void 0!==a&&(E=new Fl[a.type](a.array),i.setIndex(new Dr(E,1)));var o,s=t.data.attributes;for(o in s){var u,h=s[o],l=void 0;l=h.isInterleavedBufferAttribute?new ts(e(t.data,h.data),h.itemSize,h.offset,h.normalized):(u=new Fl[h.type](h.array),new(h.isInstancedBufferAttribute?Ll:Dr)(u,h.itemSize,h.normalized)),void 0!==h.name&&(l.name=h.name),i.setAttribute(o,l)}var c=t.data.morphAttributes;if(c)for(var p in c){for(var d=c[p],f=[],m=0,v=d.length;m<v;m++){var g=d[m],_=void 0;_=g.isInterleavedBufferAttribute?new ts(e(t.data,g.data),g.itemSize,g.offset,g.normalized):new Dr(new Fl[g.type](g.array),g.itemSize,g.normalized),void 0!==g.name&&(_.name=g.name),f.push(_)}i.morphAttributes[p]=f}t.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var y=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==y)for(var x=0,b=y.length;x!==b;++x){var T=y[x];i.addGroup(T.start,T.count,T.materialIndex)}var E,a=t.data.boundingSphere;return void 0!==a&&(E=new ti,void 0!==a.center&&E.fromArray(a.center),i.boundingSphere=new yi(E,a.radius)),t.name&&(i.name=t.name),t.userData&&(i.userData=t.userData),i}});var Fl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Bl(t){Gh.call(this,t)}Bl.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Bl,load:function(t,i,e,r){var n=this,a=""===this.path?Cl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;a=new zh(n.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(t,function(t){var e=null;try{e=JSON.parse(t)}catch(t){return void(void 0!==r&&r(t))}t=e.metadata;void 0!==t&&void 0!==t.type&&"geometry"!==t.type.toLowerCase()&&n.parse(e,i)},e,r)},parse:function(t,e){var i=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,i),i=this.parseImages(t.images,function(){void 0!==e&&e(n)}),i=this.parseTextures(t.textures,i),i=this.parseMaterials(t.materials,i),n=this.parseObject(t.object,r,i);return t.animations&&(n.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(n),n},parseShape:function(t){var e={};if(void 0!==t)for(var i=0,r=t.length;i<r;i++){var n=(new vl).fromJSON(t[i]);e[n.uuid]=n}return e},parseGeometries:function(t,e){var i={};if(void 0!==t)for(var r=new Nl,n=0,a=t.length;n<a;n++){var o=void 0,s=t[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new hh[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new hh[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new hh[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new hh[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new hh[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new hh[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new hh[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new hh[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new hh[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new hh[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new hh[s.type]((new dl[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new hh[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new hh[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],h=0,l=s.shapes.length;h<l;h++){var c=e[s.shapes[h]];u.push(c)}o=new hh[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":u=[];for(var p=0,d=s.shapes.length;p<d;p++){var f=e[s.shapes[p]];u.push(f)}var m=s.options.extrudePath;void 0!==m&&(s.options.extrudePath=(new dl[m.type]).fromJSON(m)),o=new hh[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;case"Geometry":break;default:continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),i[s.uuid]=o}return i},parseMaterials:function(t,e){var i={},r={};if(void 0!==t){var n=new Pl;n.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var u=[],h=0;h<s.materials.length;h++){var l=s.materials[h];void 0===i[l.uuid]&&(i[l.uuid]=n.parse(l)),u.push(i[l.uuid])}r[s.uuid]=u}else void 0===i[s.uuid]&&(i[s.uuid]=n.parse(s)),r[s.uuid]=i[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i],n=Lh.parse(r);void 0!==r.uuid&&(n.uuid=r.uuid),e.push(n)}return e},parseImages:function(t,e){var i=this,r={};function n(t){return i.manager.itemStart(t),a.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemError(t),i.manager.itemEnd(t)})}if(void 0!==t&&0<t.length){var a,e=new Bh(e);(a=new Vh(e)).setCrossOrigin(this.crossOrigin);for(var o=0,s=t.length;o<s;o++){var u=t[o],h=u.url;if(Array.isArray(h)){r[u.uuid]=[];for(var l=0,c=h.length;l<c;l++){var p=h[l],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;r[u.uuid].push(n(p))}}else{var d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.resourcePath+u.url;r[u.uuid]=n(d)}}}return r},parseTextures:function(t,e){function i(t,e){return"number"==typeof t?t:e[t]}var r={};if(void 0!==t)for(var n=0,a=t.length;n<a;n++){var o=t[n];o.image,e[o.image];var s=void 0;(s=new(Array.isArray(e[o.image])?aa:Ze)(e[o.image])).needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=i(o.mapping,Gl)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=i(o.wrap[0],kl),s.wrapT=i(o.wrap[1],kl)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=i(o.minFilter,zl)),void 0!==o.magFilter&&(s.magFilter=i(o.magFilter,zl)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),r[o.uuid]=s}return r},parseObject:function(t,e,a){function i(t){return e[t],e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];a[n],e.push(a[n])}return e}return a[t],a[t]}}switch(t.type){case"Scene":n=new Jo,void 0!==t.background&&Number.isInteger(t.background)&&(n.background=new br(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?n.fog=new Zo(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(n.fog=new qo(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":n=new Rn(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(n.focus=t.focus),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.filmGauge&&(n.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(n.filmOffset=t.filmOffset),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"OrthographicCamera":n=new Sl(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(n.zoom=t.zoom),void 0!==t.view&&(n.view=Object.assign({},t.view));break;case"AmbientLight":n=new wl(t.color,t.intensity);break;case"DirectionalLight":n=new Al(t.color,t.intensity);break;case"PointLight":n=new El(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":n=new Dl(t.color,t.intensity,t.width,t.height);break;case"SpotLight":n=new bl(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":n=new _l(t.color,t.groundColor,t.intensity);break;case"LightProbe":n=(new Ol).fromJSON(t);break;case"SkinnedMesh":case"Mesh":n=new pn(o=i(t.geometry),s=r(t.material));break;case"InstancedMesh":var n,o=i(t.geometry),s=r(t.material),u=t.count,h=t.instanceMatrix;(n=new Is(o,s,u)).instanceMatrix=new Dr(new Float32Array(h.array),16);break;case"LOD":n=new Es;break;case"Line":n=new ks(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":n=new Vs(i(t.geometry),r(t.material));break;case"LineSegments":n=new Hs(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":n=new Js(i(t.geometry),r(t.material));break;case"Sprite":n=new fs(r(t.material));break;case"Group":n=new jo;break;default:n=new $i}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(n.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(n.matrixAutoUpdate=t.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.quaternion&&n.quaternion.fromArray(t.quaternion),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.castShadow&&(n.castShadow=t.castShadow),void 0!==t.receiveShadow&&(n.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(n.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(n.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(n.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&n.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(n.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.frustumCulled&&(n.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(n.renderOrder=t.renderOrder),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.layers&&(n.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,c=0;c<l.length;c++)n.add(this.parseObject(l[c],e,a));if("LOD"===t.type){void 0!==t.autoUpdate&&(n.autoUpdate=t.autoUpdate);for(var p=t.levels,d=0;d<p.length;d++){var f=p[d],m=n.getObjectByProperty("uuid",f.object);void 0!==m&&n.addLevel(m,f.distance)}}return n}});var Ul,Gl={UVMapping:300,CubeReflectionMapping:E,CubeRefractionMapping:S,EquirectangularReflectionMapping:u,EquirectangularRefractionMapping:c,CubeUVReflectionMapping:M,CubeUVRefractionMapping:A},kl={RepeatWrapping:G,ClampToEdgeWrapping:k,MirroredRepeatWrapping:z},zl={NearestFilter:St,NearestMipmapNearestFilter:At,NearestMipmapLinearFilter:wt,LinearFilter:Dt,LinearMipmapNearestFilter:Rt,LinearMipmapLinearFilter:Ot};function jl(t){Gh.call(this,t),this.options={premultiplyAlpha:"none"}}function Hl(){this.type="ShapePath",this.color=new br,this.subPaths=[],this.currentPath=null}function Vl(t){this.type="Font",this.data=t}function Xl(t){Gh.call(this,t)}jl.prototype=Object.assign(Object.create(Gh.prototype),{constructor:jl,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,i,t,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var n=this,a=Fh.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout(function(){i&&i(a),n.manager.itemEnd(e)},0),a;fetch(e).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,n.options)}).then(function(t){Fh.add(e,t),i&&i(t),n.manager.itemEnd(e)}).catch(function(t){r&&r(t),n.manager.itemError(e),n.manager.itemEnd(e)}),n.manager.itemStart(e)}}),Object.assign(Hl.prototype,{moveTo:function(t,e){return this.currentPath=new ml,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,i,r){return this.currentPath.quadraticCurveTo(t,e,i,r),this},bezierCurveTo:function(t,e,i,r,n,a){return this.currentPath.bezierCurveTo(t,e,i,r,n,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function i(t){for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i],a=new vl;a.curves=n.curves,e.push(a)}return e}var r,n,a,o=Uu.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===e)return i(s);var u=[];if(1===s.length)return n=s[0],(a=new vl).curves=n.curves,u.push(a),u;var h,l=!o(s[0].getPoints()),l=t?!l:l,c=[],p=[],d=[],f=0;p[f]=void 0,d[f]=[];for(var m=0,v=s.length;m<v;m++)r=o(h=(n=s[m]).getPoints()),(r=t?!r:r)?(!l&&p[f]&&f++,p[f]={s:new vl,p:h},p[f].s.curves=n.curves,l&&f++,d[f]=[]):d[f].push({h:n,p:h[0]});if(!p[0])return i(s);if(1<p.length){for(var g=!1,_=[],y=0,x=p.length;y<x;y++)c[y]=[];for(var b=0,T=p.length;b<T;b++)for(var E=d[b],S=0;S<E.length;S++){for(var M=E[S],A=!0,w=0;w<p.length;w++)!function(t,e){for(var i=e.length,r=!1,n=i-1,a=0;a<i;n=a++){var o=e[n],s=e[a],u=s.x-o.x,h=s.y-o.y;if(Math.abs(h)>Number.EPSILON){if(h<0&&(o=e[a],u=-u,s=e[n],h=-h),!(t.y<o.y||t.y>s.y))if(t.y===o.y){if(t.x===o.x)return 1}else{u=h*(t.x-o.x)-u*(t.y-o.y);if(0==u)return 1;u<0||(r=!r)}}else if(t.y===o.y&&(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x))return 1}return r}(M.p,p[w].p)||(b!==w&&_.push({froms:b,tos:w,hole:S}),A?(A=!1,c[w].push(M)):g=!0);A&&c[b].push(M)}0<_.length&&(g||(d=c))}for(var D=0,R=p.length;D<R;D++){a=p[D].s,u.push(a);for(var O,P=0,C=(O=d[D]).length;P<C;P++)a.holes.push(O[P].h)}return u}}),Object.assign(Vl.prototype,{isFont:!0,generateShapes:function(t,e){for(var i=[],r=function(t,e,i){for(var r=Array.from?Array.from(t):String(t).split(""),n=e/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,o=[],s=0,u=0,h=0;h<r.length;h++){var l=r[h];"\n"===l?(s=0,u-=a):(l=function(t,e,i,r,n){n=n.glyphs[t]||n.glyphs["?"];if(n){var a,o,s,u,h,l,c,p,d=new Hl;if(n.o)for(var f=n._cachedOutline||(n._cachedOutline=n.o.split(" ")),m=0,v=f.length;m<v;)switch(f[m++]){case"m":a=f[m++]*e+i,o=f[m++]*e+r,d.moveTo(a,o);break;case"l":a=f[m++]*e+i,o=f[m++]*e+r,d.lineTo(a,o);break;case"q":s=f[m++]*e+i,u=f[m++]*e+r,h=f[m++]*e+i,l=f[m++]*e+r,d.quadraticCurveTo(h,l,s,u);break;case"b":s=f[m++]*e+i,u=f[m++]*e+r,h=f[m++]*e+i,l=f[m++]*e+r,c=f[m++]*e+i,p=f[m++]*e+r,d.bezierCurveTo(h,l,c,p,s,u)}return{offsetX:n.ha*e,path:d}}}(l,n,s,u,i),s+=l.offsetX,o.push(l.path))}return o}(t,e=void 0===e?100:e,this.data),n=0,a=r.length;n<a;n++)Array.prototype.push.apply(i,r[n].toShapes());return i}}),Xl.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Xl,load:function(t,r,e,i){var n=this,a=new zh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(t,function(e){try{i=JSON.parse(e)}catch(t){i=JSON.parse(e.substring(65,e.length-2))}var i=n.parse(i);r&&r(i)},e,i)},parse:function(t){return new Vl(t)}});var Wl={getContext:function(){return Ul=void 0===Ul?new(window.AudioContext||window.webkitAudioContext):Ul},setContext:function(t){Ul=t}};function Yl(t){Gh.call(this,t)}function ql(t,e,i){Ol.call(this,void 0,i);var r=(new br).set(t),i=(new br).set(e),t=new ti(r.r,r.g,r.b),e=new ti(i.r,i.g,i.b),r=Math.sqrt(Math.PI),i=r*Math.sqrt(.75);this.sh.coefficients[0].copy(t).add(e).multiplyScalar(r),this.sh.coefficients[1].copy(t).sub(e).multiplyScalar(i)}function Zl(t,e){Ol.call(this,void 0,e);t=(new br).set(t);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}i.AudioContext=Wl,Yl.prototype=Object.assign(Object.create(Gh.prototype),{constructor:Yl,load:function(i,r,t,n){var a=this,e=new zh(a.manager);e.setResponseType("arraybuffer"),e.setPath(a.path),e.setRequestHeader(a.requestHeader),e.load(i,function(t){try{var e=t.slice(0);Wl.getContext().decodeAudioData(e,function(t){r(t)})}catch(t){n&&n(t),a.manager.itemError(i)}},t,n)}}),ql.prototype=Object.assign(Object.create(Ol.prototype),{constructor:ql,isHemisphereLightProbe:!0,copy:function(t){return Ol.prototype.copy.call(this,t),this},toJSON:function(t){return Ol.prototype.toJSON.call(this,t)}}),Zl.prototype=Object.assign(Object.create(Ol.prototype),{constructor:Zl,isAmbientLightProbe:!0,copy:function(t){return Ol.prototype.copy.call(this,t),this},toJSON:function(t){return Ol.prototype.toJSON.call(this,t)}});var Jl=new Di,Kl=new Di;function Ql(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Ql.prototype,{update:function(t){var e,i,r,n,a,o=this._cache;o.focus===t.focus&&o.fov===t.fov&&o.aspect===t.aspect*this.aspect&&o.near===t.near&&o.far===t.far&&o.zoom===t.zoom&&o.eyeSep===this.eyeSep||(o.focus=t.focus,o.fov=t.fov,o.aspect=t.aspect*this.aspect,o.near=t.near,o.far=t.far,o.zoom=t.zoom,o.eyeSep=this.eyeSep,e=t.projectionMatrix.clone(),i=(a=o.eyeSep/2)*o.near/o.focus,r=o.near*Math.tan(He.DEG2RAD*o.fov*.5)/o.zoom,Kl.elements[12]=-a,Jl.elements[12]=a,n=-r*o.aspect+i,a=r*o.aspect+i,e.elements[0]=2*o.near/(a-n),e.elements[8]=(a+n)/(a-n),this.cameraL.projectionMatrix.copy(e),n=-r*o.aspect-i,a=r*o.aspect-i,e.elements[0]=2*o.near/(a-n),e.elements[8]=(a+n)/(a-n),this.cameraR.projectionMatrix.copy(e)),this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(Kl),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Jl)}});var $l=function(){function e(t){B(this,e),this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return m(e,[{key:"start",value:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t,e=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(e=((t=("undefined"==typeof performance?Date:performance).now())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e),e)}}]),e}();i.Clock=$l;var tc=new ti,ec=new $e,ic=new ti,rc=new ti,Yu=function(){p(r,$i);var e=_(r);function r(){var t;return B(this,r),(t=e.call(this)).type="AudioListener",t.context=Wl.getContext(),t.gain=t.context.createGain(),t.gain.connect(t.context.destination),t.filter=null,t.timeDelta=0,t._clock=new $l,t}return m(r,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(t){h(d(r.prototype),"updateMatrixWorld",this).call(this,t);var e=this.context.listener,i=this.up;this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(tc,ec,ic),rc.set(0,0,-1).applyQuaternion(ec),e.positionX?(t=this.context.currentTime+this.timeDelta,e.positionX.linearRampToValueAtTime(tc.x,t),e.positionY.linearRampToValueAtTime(tc.y,t),e.positionZ.linearRampToValueAtTime(tc.z,t),e.forwardX.linearRampToValueAtTime(rc.x,t),e.forwardY.linearRampToValueAtTime(rc.y,t),e.forwardZ.linearRampToValueAtTime(rc.z,t),e.upX.linearRampToValueAtTime(i.x,t),e.upY.linearRampToValueAtTime(i.y,t),e.upZ.linearRampToValueAtTime(i.z,t)):(e.setPosition(tc.x,tc.y,tc.z),e.setOrientation(rc.x,rc.y,rc.z,i.x,i.y,i.z))}}]),r}();i.AudioListener=Yu;var nc=function(){p(r,$i);var i=_(r);function r(t){var e;return B(this,r),(e=i.call(this)).type="Audio",e.listener=t,e.context=t.context,e.gain=e.context.createGain(),e.gain.connect(t.getInput()),e.autoplay=!1,e.buffer=null,e.detune=0,e.loop=!1,e.loopStart=0,e.loopEnd=0,e.offset=0,e.duration=void 0,e.playbackRate=1,e.isPlaying=!1,e.hasPlaybackControl=!0,e.source=null,e.sourceType="empty",e._startedAt=0,e._progress=0,e._connected=!1,e.filters=[],e}return m(r,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying&&!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}},{key:"connect",value:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t=t||[],!0===this._connected?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this}},{key:"setDetune",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(t){return this.setFilters(t?[t]:[])}},{key:"setPlaybackRate",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1!==this.hasPlaybackControl&&this.loop}},{key:"setLoop",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),r}();i.Audio=nc;var ac=new ti,oc=new $e,sc=new ti,uc=new ti,Zu=function(){p(i,nc);var e=_(i);function i(t){return B(this,i),(t=e.call(this,t)).panner=t.context.createPanner(),t.panner.panningModel="HRTF",t.panner.connect(t.gain),t}return m(i,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(t){return this.panner.refDistance=t,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(t){return this.panner.rolloffFactor=t,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(t){return this.panner.distanceModel=t,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(t){return this.panner.maxDistance=t,this}},{key:"setDirectionalCone",value:function(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}},{key:"updateMatrixWorld",value:function(t){var e;h(d(i.prototype),"updateMatrixWorld",this).call(this,t),!0===this.hasPlaybackControl&&!1===this.isPlaying||(this.matrixWorld.decompose(ac,oc,sc),uc.set(0,0,1).applyQuaternion(oc),(e=this.panner).positionX?(t=this.context.currentTime+this.listener.timeDelta,e.positionX.linearRampToValueAtTime(ac.x,t),e.positionY.linearRampToValueAtTime(ac.y,t),e.positionZ.linearRampToValueAtTime(ac.z,t),e.orientationX.linearRampToValueAtTime(uc.x,t),e.orientationY.linearRampToValueAtTime(uc.y,t),e.orientationZ.linearRampToValueAtTime(uc.z,t)):(e.setPosition(ac.x,ac.y,ac.z),e.setOrientation(uc.x,uc.y,uc.z)))}}]),i}();i.PositionalAudio=Zu;kn=function(){function i(t,e){B(this,i),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return m(i,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var t=0,e=this.getFrequencyData(),i=0;i<e.length;i++)t+=e[i];return t/e.length}}]),i}();function hc(t,e,i){var r,n,a;switch(this.binding=t,this.valueSize=i,e){case"quaternion":r=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}i.AudioAnalyser=kn,Object.assign(hc.prototype,{accumulate:function(t,e){var i=this.buffer,r=this.valueSize,n=t*r+r,t=this.cumulativeWeight;if(0===t){for(var a=0;a!==r;++a)i[n+a]=i[a];t=e}else this._mixBufferRegion(i,n,0,e/(t+=e),r);this.cumulativeWeight=t},accumulateAdditive:function(t){var e=this.buffer,i=this.valueSize,r=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,i),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,i=this.buffer,r=t*e+e,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1&&(t=e*this._origIndex,this._mixBufferRegion(i,r,t,1-n,e)),0<a&&this._mixBufferRegionAdditive(i,r,this._addIndex*e,1,e);for(var s=e,u=e+e;s!==u;++s)if(i[s]!==i[s+e]){o.setValue(i,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,i=this.valueSize,r=i*this._origIndex;t.getValue(e,r);for(var n=i,a=r;n!==a;++n)e[n]=e[r+n%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,i=t;i<e;i++)this.buffer[i]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]},_select:function(t,e,i,r,n){if(.5<=r)for(var a=0;a!==n;++a)t[e+a]=t[i+a]},_slerp:function(t,e,i,r){$e.slerpFlat(t,e,t,e,t,i,r)},_slerpAdditive:function(t,e,i,r,n){n=this._workIndex*n;$e.multiplyQuaternionsFlat(t,n,t,e,t,i),$e.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,i,r,n){for(var a=1-r,o=0;o!==n;++o){var s=e+o;t[s]=t[s]*a+t[i+o]*r}},_lerpAdditive:function(t,e,i,r,n){for(var a=0;a!==n;++a){var o=e+a;t[o]=t[o]+t[i+a]*r}}});var Ku="\\[\\]\\.:\\/",lc=new RegExp("["+Ku+"]","g"),ah="[^"+Ku+"]",oh="[^"+Ku.replace("\\.","")+"]",sh=/((?:WC+[\/:])*)/.source.replace("WC",ah),xn=/(WCOD+)?/.source.replace("WCOD",oh),Yu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ah),Zu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ah),cc=new RegExp("^"+sh+xn+Yu+Zu+"$"),pc=["material","materials","bones"];function dc(t,e,i){i=i||fc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function fc(t,e,i){this.path=e,this.parsedPath=i||fc.parseTrackName(e),this.node=fc.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function mc(){this.uuid=He.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,i=arguments.length;e!==i;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}Object.assign(dc.prototype,{getValue:function(t,e){this.bind();var i=this._targetGroup.nCachedObjects_,i=this._bindings[i];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var i=this._bindings,r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}),Object.assign(fc,{Composite:dc,create:function(t,e,i){return new(t&&t.isAnimationObjectGroup?fc.Composite:fc)(t,e,i)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(lc,"")},parseTrackName:function(t){var e=cc.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r&&(e=i.nodeName.substring(r+1),-1!==pc.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=e)),null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i},findNode:function(t,n){if(!n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){var e=t.skeleton.getBoneByName(n);if(void 0!==e)return e}if(t.children){t=function t(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===n||r.uuid===n)return r;r=t(r.children);if(r)return r}return null}(t.children);if(t)return t}return null}}),Object.assign(fc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)t[e++]=i[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=t[e++]},function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,i=e.objectName,r=e.propertyName,n=e.propertyIndex;if(t||(t=fc.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var a=e.objectIndex;switch(i){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;for(var t=t.skeleton.bones,o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[i])return;t=t[i]}if(void 0!==a){if(void 0===t[a])return;t=t[a]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;void 0!==(this.targetObject=t).needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var h=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===r){if(!t.geometry)return;if(!t.geometry.isBufferGeometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[n]&&(n=t.morphTargetDictionary[n])}h=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(h=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][u]}else e.nodeName}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(fc.prototype,{_getValue_unbound:fc.prototype.getValue,_setValue_unbound:fc.prototype.setValue}),Object.assign(mc.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,i=this._paths,r=this._parsedPaths,n=this._bindings,a=n.length,o=t.length,s=this.nCachedObjects_,u=0,h=arguments.length;u!==h;++u){var l=arguments[u],c=l.uuid,p=e[c];if(void 0===p){p=o++,e[c]=p,t.push(l);for(var d=0,f=a;d!==f;++d)n[d].push(new fc(l,i[d],r[d]))}else if(p<s){t[p];var m=--s,v=t[m];t[e[v.uuid]=p]=v,t[e[c]=m]=l;for(var g=0,_=a;g!==_;++g){var y=n[g],x=y[m],b=y[p];y[p]=x,void 0===b&&(b=new fc(l,i[g],r[g])),y[m]=b}}else t[p]}this.nCachedObjects_=s},remove:function(){for(var t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length,n=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,h=e[u];if(void 0!==h&&n<=h){var l=n++,c=t[l];t[e[c.uuid]=h]=c,t[e[u]=l]=s;for(var p=0,d=r;p!==d;++p){var f=i[p],m=f[l],v=f[h];f[h]=m,f[l]=v}}}this.nCachedObjects_=n},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,i=this._bindings,r=i.length,n=this.nCachedObjects_,a=t.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o].uuid,h=e[u];if(void 0!==h)if(delete e[u],h<n){var l=--n,u=t[l],c=--a,p=t[c];t[e[u.uuid]=h]=u,t[e[p.uuid]=l]=p,t.pop();for(var d=0,f=r;d!==f;++d){var m=i[d],v=m[l],g=m[c];m[h]=v,m[l]=g,m.pop()}}else{var _=--a,p=t[_];t[e[p.uuid]=h]=p,t.pop();for(var y=0,x=r;y!==x;++y){var b=i[y];b[h]=b[_],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var i=this._bindingsIndicesByPath,r=i[t],n=this._bindings;if(void 0!==r)return n[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,h=this.nCachedObjects_,l=new Array(u),r=n.length;i[t]=r,a.push(t),o.push(e),n.push(l);for(var c=h,p=s.length;c!==p;++c){var d=s[c];l[c]=new fc(d,t,e)}return l},unsubscribe_:function(t){var e,i,r,n,a,o=this._bindingsIndicesByPath,s=o[t];void 0!==s&&(e=this._paths,i=this._parsedPaths,a=(r=this._bindings)[n=r.length-1],r[o[t[n]]=s]=a,r.pop(),i[s]=i[n],i.pop(),e[s]=e[n],e.pop())}});var vc=function(){function l(t,e,i,r){B(this,l),this._mixer=t,this._clip=e,this._localRoot=i||null,this.blendMode=r||e.blendMode;for(var n=e.tracks,a=n.length,o=new Array(a),s={endingStart:2400,endingEnd:2400},u=0;u!==a;++u){var h=n[u].createInterpolant(null);(o[u]=h).settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return m(l,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,i){var r,n;return t.fadeOut(e),this.fadeIn(e),i&&(i=(r=this._clip.duration)/(n=t._clip.duration),t.warp(1,n/r,e),this.warp(i,1,e)),this}},{key:"crossFadeTo",value:function(t,e,i){return t.crossFadeFrom(this,e,i)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,i){var r=this._mixer,n=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);r=o.parameterPositions,o=o.sampleValues;return r[0]=n,r[1]=n+i,o[0]=t/a,o[1]=e/a,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,e,i,r){if(this.enabled){var n=this._startTime;if(null!==n){n=(t-n)*i;if(n<0||0===i)return;this._startTime=null,e=i*n}e*=this._updateTimeScale(t);var a=this._updateTime(e),o=this._updateWeight(t);if(0<o){var s=this._interpolants,u=this._propertyBindings;if(2501===this.blendMode)for(var h=0,l=s.length;h!==l;++h)s[h].evaluate(a),u[h].accumulateAdditive(o);else for(var c=0,p=s.length;c!==p;++c)s[c].evaluate(a),u[c].accumulate(r,o)}}else this._updateWeight(t)}},{key:"_updateWeight",value:function(t){var e,i,r=0;return this.enabled&&(r=this.weight,null!==(e=this._weightInterpolant)&&(r*=i=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1)))),this._effectiveWeight=r}},{key:"_updateTimeScale",value:function(t){var e,i=0;return this.paused||(i=this.timeScale,null!==(e=this._timeScaleInterpolant)&&(i*=e.evaluate(t)[0],t>e.parameterPositions[1]&&(this.stopWarping(),0===i?this.paused=!0:this.timeScale=i))),this._effectiveTimeScale=i}},{key:"_updateTime",value:function(t){var e,i=this._clip.duration,r=this.loop,n=this.time+t,a=this._loopCount,o=2202===r;if(0===t)return-1!==a&&o&&1==(1&a)?i-n:n;if(2200===r){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i<=n)n=i;else{if(!(n<0)){this.time=n;break t}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else if(-1===a&&(0<=t?this._setEndings(!(a=0),0===this.repetitions,o):this._setEndings(0===this.repetitions,!0,o)),i<=n||n<0?(n-=i*(e=Math.floor(n/i)),a+=Math.abs(e),(r=this.repetitions-a)<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n=0<t?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<t?1:-1})):(1==r?this._setEndings(r=t<0,!r,o):this._setEndings(!1,!1,o),this._loopCount=a,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:e}))):this.time=n,o&&1==(1&a))return i-n;return n}},{key:"_setEndings",value:function(t,e,i){var r=this._interpolantSettings;i?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}},{key:"_scheduleFading",value:function(t,e,i){var r=this._mixer,n=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);r=a.parameterPositions,a=a.sampleValues;return r[0]=n,a[0]=e,r[1]=n+t,a[1]=i,this}}]),l}();function gc(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}gc.prototype=Object.assign(Object.create(Ge.prototype),{constructor:gc,_bindAction:function(t,e){var i=t._localRoot||this._root,r=t._clip.tracks,n=r.length,a=t._propertyBindings,o=t._interpolants,s=i.uuid,t=this._bindingsByRootAndName,u=t[s];void 0===u&&(t[s]=u={});for(var h=0;h!==n;++h){var l=r[h],c=l.name;if(void 0!==(p=u[c]))a[h]=p;else{if(void 0!==(p=a[h])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,c));continue}var p,d=e&&e._propertyBindings[h].binding.parsedPath;++(p=new hc(fc.create(i,c,d),l.ValueTypeName,l.getValueSize())).referenceCount,this._addInactiveBinding(p,s,c),a[h]=p}o[h].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){var e,i,r;null===t._cacheIndex&&(e=(t._localRoot||this._root).uuid,i=t._clip.uuid,r=this._actionsByClip[i],this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,i,e));for(var n=t._propertyBindings,a=0,o=n.length;a!==o;++a){var s=n[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,i=0,r=e.length;i!==r;++i){var n=e[i];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){t=t._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(t,e,i){var r=this._actions,n=this._actionsByClip,a=n[e];void 0===a?(a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,n[e]=a):(e=a.knownActions,t._byClipCacheIndex=e.length,e.push(t)),t._cacheIndex=r.length,r.push(t),a.actionByRoot[i]=t},_removeInactiveAction:function(t){var e=this._actions,i=e[e.length-1],r=t._cacheIndex;e[i._cacheIndex=r]=i,e.pop(),t._cacheIndex=null;var n=t._clip.uuid,a=this._actionsByClip,o=a[n],r=o.knownActions,i=r[r.length-1],e=t._byClipCacheIndex;r[i._byClipCacheIndex=e]=i,r.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===r.length&&delete a[n],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,i=0,r=e.length;i!==r;++i){var n=e[i];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(t){var e=this._actions,i=t._cacheIndex,r=this._nActiveActions++,n=e[r];e[t._cacheIndex=r]=t,e[n._cacheIndex=i]=n},_takeBackAction:function(t){var e=this._actions,i=t._cacheIndex,r=--this._nActiveActions,n=e[r];e[t._cacheIndex=r]=t,e[n._cacheIndex=i]=n},_addInactiveBinding:function(t,e,i){var r=this._bindingsByRootAndName,n=this._bindings,a=r[e];void 0===a&&(r[e]=a={}),(a[i]=t)._cacheIndex=n.length,n.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,i=t.binding,r=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,o=a[r],i=e[e.length-1],t=t._cacheIndex;e[i._cacheIndex=t]=i,e.pop(),delete o[n],0===Object.keys(o).length&&delete a[r]},_lendBinding:function(t){var e=this._bindings,i=t._cacheIndex,r=this._nActiveBindings++,n=e[r];e[t._cacheIndex=r]=t,e[n._cacheIndex=i]=n},_takeBackBinding:function(t){var e=this._bindings,i=t._cacheIndex,r=--this._nActiveBindings,n=e[r];e[t._cacheIndex=r]=t,e[n._cacheIndex=i]=n},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return void 0===i&&(t[(i=new Sh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e]=i),i},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,i=t.__cacheIndex,r=--this._nActiveControlInterpolants,n=e[r];e[t.__cacheIndex=r]=t,e[n.__cacheIndex=i]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,i){var r=e||this._root,n=r.uuid,a="string"==typeof t?Lh.findByName(r,t):t,o=null!==a?a.uuid:t,s=this._actionsByClip[o],r=null;if(void 0===i&&(i=null!==a?a.blendMode:De),void 0!==s){t=s.actionByRoot[n];if(void 0!==t&&t.blendMode===i)return t;r=s.knownActions[0],null===a&&(a=r._clip)}if(null===a)return null;i=new vc(this,a,e,i);return this._bindAction(i,r),this._addInactiveAction(i,o,n),i},existingAction:function(t,e){var i=e||this._root,e=i.uuid,i="string"==typeof t?Lh.findByName(i,t):t,t=i?i.uuid:t,t=this._actionsByClip[t];return void 0!==t&&t.actionByRoot[e]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions-1;0<=e;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,i=this._nActiveActions,r=this.time+=t,n=Math.sign(t),a=this._accuIndex^=1,o=0;o!==i;++o)e[o]._update(r,t,n,a);for(var s=this._bindings,u=this._nActiveBindings,h=0;h!==u;++h)s[h].apply(a);return this},setTime:function(t){for(var e=this.time=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,i=t.uuid,r=this._actionsByClip,t=r[i];if(void 0!==t){for(var n=t.knownActions,a=0,o=n.length;a!==o;++a){var s=n[a];this._deactivateAction(s);var u=s._cacheIndex,h=e[e.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,e[h._cacheIndex=u]=h,e.pop(),this._removeInactiveBindingsForAction(s)}delete r[i]}},uncacheRoot:function(t){var e,i=t.uuid,r=this._actionsByClip;for(e in r){var n=r[e].actionByRoot[i];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var a=this._bindingsByRootAndName[i];if(void 0!==a)for(var o in a){o=a[o];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(t,e){e=this.existingAction(t,e);null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}});Ku=function(){function e(t){B(this,e),this.value=t="string"==typeof t?arguments[1]:t}return m(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();function _c(t,e,i){Ko.call(this,t,e),this.meshPerAttribute=i||1}function yc(t,e,i,r,n){this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=r,this.count=n,this.version=0}function xc(t,e,i,r){this.ray=new wi(t,e),this.near=i||0,this.far=r||1/0,this.camera=null,this.layers=new Gi,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function bc(t,e){return t.distance-e.distance}function Tc(t,e,i,r){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===r)for(var n=t.children,a=0,o=n.length;a<o;a++)Tc(n[a],e,i,!0)}i.Uniform=Ku,_c.prototype=Object.assign(Object.create(Ko.prototype),{constructor:_c,isInstancedInterleavedBuffer:!0,copy:function(t){return Ko.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){t=Ko.prototype.clone.call(this,t);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(t){t=Ko.prototype.toJSON.call(this,t);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(yc.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(yc.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(xc.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)},intersectObject:function(t,e,i){i=i||[];return Tc(t,this,i,e),i.sort(bc),i},intersectObjects:function(t,e,i){var r=i||[];if(!1===Array.isArray(t))return r;for(var n=0,a=t.length;n<a;n++)Tc(t[n],this,r,e);return r.sort(bc),r}}),i.Spherical=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return B(this,r),this.radius=t,this.phi=e,this.theta=i,this}return m(r,[{key:"set",value:function(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"makeSafe",value:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(He.clamp(e/this.radius,-1,1))),this}}]),r}(),i.Cylindrical=function(){function r(t,e,i){return B(this,r),this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==i?i:0,this}return m(r,[{key:"set",value:function(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}}]),r}();var Ec=new Ve,oh=function(){function i(t,e){B(this,i),Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new Ve(1/0,1/0),this.max=void 0!==e?e:new Ve(-1/0,-1/0)}return m(i,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){e=Ec.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return void 0===t&&(t=new Ve),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return void 0===t&&(t=new Ve),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return(e=void 0===e?new Ve:e).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}},{key:"clampPoint",value:function(t,e){return(e=void 0===e?new Ve:e).copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return Ec.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),i}();i.Box2=oh;var Sc=new ti,Mc=new ti,ah=function(){function i(t,e){B(this,i),this.start=void 0!==t?t:new ti,this.end=void 0!==e?e:new ti}return m(i,[{key:"set",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.start.copy(t.start),this.end.copy(t.end),this}},{key:"getCenter",value:function(t){return(t=void 0===t?new ti:t).addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(t){return(t=void 0===t?new ti:t).subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(t,e){return void 0===e&&(e=new ti),this.delta(e).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function(t,e){Sc.subVectors(t,this.start),Mc.subVectors(this.end,this.start);t=Mc.dot(Mc),t=Mc.dot(Sc)/t;return t=e?He.clamp(t,0,1):t}},{key:"closestPointToPoint",value:function(t,e,i){e=this.closestPointToPointParameter(t,e);return void 0===i&&(i=new ti),this.delta(i).multiplyScalar(e).add(this.start)}},{key:"applyMatrix4",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}]),i}();function Ac(t){$i.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}i.Line3=ah,((Ac.prototype=Object.create($i.prototype)).constructor=Ac).prototype.isImmediateRenderObject=!0;var wc=new ti,sh=function(){p(h,$i);var u=_(h);function h(t,e){var i;B(this,h),(i=u.call(this)).light=t,i.light.updateMatrixWorld(),i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i.color=e;for(var t=new Yr,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,a=1;n<32;n++,a++){var o=n/32*Math.PI*2,s=a/32*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}t.setAttribute("position",new Fr(r,3));e=new Ls({fog:!1,toneMapped:!1});return i.cone=new Hs(t,e),i.add(i.cone),i.update(),i}return m(h,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var t=this.light.distance||1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),wc.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(wc),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),h}();i.SpotLightHelper=sh;var Dc=new ti,Rc=new Di,Oc=new Di,xn=function(){p(c,Hs);var l=_(c);function c(t){B(this,c);for(var e=function t(e){var i=[];e&&e.isBone&&i.push(e);for(var r=0;r<e.children.length;r++)i.push.apply(i,t(e.children[r]));return i}(t),i=new Yr,r=[],n=[],a=new br(0,0,1),o=new br(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(a.r,a.g,a.b),n.push(o.r,o.g,o.b))}i.setAttribute("position",new Fr(r,3)),i.setAttribute("color",new Fr(n,3));var h=new Ls({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(h=l.call(this,i,h)).type="SkeletonHelper",h.isSkeletonHelper=!0,h.root=t,h.bones=e,h.matrix=t.matrixWorld,h.matrixAutoUpdate=!1,h}return m(c,[{key:"updateMatrixWorld",value:function(t){var e=this.bones,i=this.geometry,r=i.getAttribute("position");Oc.getInverse(this.root.matrixWorld);for(var n=0,a=0;n<e.length;n++){var o=e[n];o.parent&&o.parent.isBone&&(Rc.multiplyMatrices(Oc,o.matrixWorld),Dc.setFromMatrixPosition(Rc),r.setXYZ(a,Dc.x,Dc.y,Dc.z),Rc.multiplyMatrices(Oc,o.parent.matrixWorld),Dc.setFromMatrixPosition(Rc),r.setXYZ(a+1,Dc.x,Dc.y,Dc.z),a+=2)}i.getAttribute("position").needsUpdate=!0,h(d(c.prototype),"updateMatrixWorld",this).call(this,t)}}]),c}();i.SkeletonHelper=xn;Yu=function(){p(a,pn);var n=_(a);function a(t,e,i){B(this,a);var r=new qu(e,4,2),e=new Mr({wireframe:!0,fog:!1,toneMapped:!1});return(e=n.call(this,r,e)).light=t,e.light.updateMatrixWorld(),e.color=i,e.type="PointLightHelper",e.matrix=e.light.matrixWorld,e.matrixAutoUpdate=!1,e.update(),e}return m(a,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),a}();i.PointLightHelper=Yu;var Pc=new ti,Cc=new br,Ic=new br,Zu=function(){p(a,$i);var n=_(a);function a(t,e,i){var r;B(this,a),(r=n.call(this)).light=t,r.light.updateMatrixWorld(),r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r.color=i;i=new lu(e);i.rotateY(.5*Math.PI),r.material=new Mr({wireframe:!0,fog:!1,toneMapped:!1}),void 0===r.color&&(r.material.vertexColors=!0);e=i.getAttribute("position"),e=new Float32Array(3*e.count);return i.setAttribute("color",new Dr(e,3)),r.add(new pn(i,r.material)),r.update(),r}return m(a,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Cc.copy(this.light.color),Ic.copy(this.light.groundColor);for(var i=0,r=e.count;i<r;i++){var n=i<r/2?Cc:Ic;e.setXYZ(i,n.r,n.g,n.b)}e.needsUpdate=!0}t.lookAt(Pc.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),a}();i.HemisphereLightHelper=Zu;sh=function(){p(m,Hs);var f=_(m);function m(t,e,i,r){B(this,m),t=t||10,e=e||10,i=new br(void 0!==i?i:4473924),r=new br(void 0!==r?r:8947848);for(var n=e/2,a=t/e,o=t/2,s=[],u=[],h=0,l=0,c=-o;h<=e;h++,c+=a){s.push(-o,0,c,o,0,c),s.push(c,0,-o,c,0,o);var p=h===n?i:r;p.toArray(u,l),l+=3,p.toArray(u,l),l+=3,p.toArray(u,l),l+=3,p.toArray(u,l),l+=3}var d=new Yr;d.setAttribute("position",new Fr(s,3)),d.setAttribute("color",new Fr(u,3));var t=new Ls({vertexColors:!0,toneMapped:!1});return(t=f.call(this,d,t)).type="GridHelper",t}return m}();i.GridHelper=sh;Yu=function(){p(b,Hs);var x=_(b);function b(t,e,i,r,n,a){B(this,b),t=t||10,e=e||16,i=i||8,r=r||64,n=new br(void 0!==n?n:4473924),a=new br(void 0!==a?a:8947848);for(var o=[],s=[],u=0;u<=e;u++){var h=u/e*(2*Math.PI),l=Math.sin(h)*t,h=Math.cos(h)*t;o.push(0,0,0),o.push(l,0,h);h=1&u?n:a;s.push(h.r,h.g,h.b),s.push(h.r,h.g,h.b)}for(var c=0;c<=i;c++)for(var p=1&c?n:a,d=t-t/i*c,f=0;f<r;f++){var m=f/r*(2*Math.PI),v=Math.sin(m)*d,g=Math.cos(m)*d;o.push(v,0,g),s.push(p.r,p.g,p.b),m=(f+1)/r*(2*Math.PI),v=Math.sin(m)*d,g=Math.cos(m)*d,o.push(v,0,g),s.push(p.r,p.g,p.b)}var _=new Yr;_.setAttribute("position",new Fr(o,3)),_.setAttribute("color",new Fr(s,3));var y=new Ls({vertexColors:!0,toneMapped:!1});return(y=x.call(this,_,y)).type="PolarGridHelper",y}return b}();i.PolarGridHelper=Yu;var Lc=new ti,Nc=new ti,Fc=new ti,Zu=function(){p(a,$i);var n=_(a);function a(t,e,i){var r;B(this,a),(r=n.call(this)).light=t,r.light.updateMatrixWorld(),r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r.color=i,void 0===e&&(e=1);i=new Yr;i.setAttribute("position",new Fr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));e=new Ls({fog:!1,toneMapped:!1});return r.lightPlane=new ks(i,e),r.add(r.lightPlane),(i=new Yr).setAttribute("position",new Fr([0,0,0,0,0,1],3)),r.targetLine=new ks(i,e),r.add(r.targetLine),r.update(),r}return m(a,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){Lc.setFromMatrixPosition(this.light.matrixWorld),Nc.setFromMatrixPosition(this.light.target.matrixWorld),Fc.subVectors(Nc,Lc),this.lightPlane.lookAt(Nc),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Nc),this.targetLine.scale.z=Fc.length()}}]),a}();i.DirectionalLightHelper=Zu;var Bc=new ti,Uc=new Dn,Yu=function(){p(f,Hs);var d=_(f);function f(t){B(this,f);var e=new Yr,i=new Ls({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],n=[],a={},o=new br(16755200),s=new br(16711680),u=new br(43775),h=new br(16777215),l=new br(3355443);function c(t,e,i){p(t,i),p(e,i)}function p(t,e){r.push(0,0,0),n.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(r.length/3-1)}return c("n1","n2",o),c("n2","n4",o),c("n4","n3",o),c("n3","n1",o),c("f1","f2",o),c("f2","f4",o),c("f4","f3",o),c("f3","f1",o),c("n1","f1",o),c("n2","f2",o),c("n3","f3",o),c("n4","f4",o),c("p","n1",s),c("p","n2",s),c("p","n3",s),c("p","n4",s),c("u1","u2",u),c("u2","u3",u),c("u3","u1",u),c("c","t",h),c("p","c",l),c("cn1","cn2",l),c("cn3","cn4",l),c("cf1","cf2",l),c("cf3","cf4",l),e.setAttribute("position",new Fr(r,3)),e.setAttribute("color",new Fr(n,3)),(i=d.call(this,e,i)).type="CameraHelper",i.camera=t,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=a,i.update(),i}return m(f,[{key:"update",value:function(){var t=this.geometry,e=this.pointMap;Uc.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Gc("c",e,t,Uc,0,0,-1),Gc("t",e,t,Uc,0,0,1),Gc("n1",e,t,Uc,-1,-1,-1),Gc("n2",e,t,Uc,1,-1,-1),Gc("n3",e,t,Uc,-1,1,-1),Gc("n4",e,t,Uc,1,1,-1),Gc("f1",e,t,Uc,-1,-1,1),Gc("f2",e,t,Uc,1,-1,1),Gc("f3",e,t,Uc,-1,1,1),Gc("f4",e,t,Uc,1,1,1),Gc("u1",e,t,Uc,.7,1.1,-1),Gc("u2",e,t,Uc,-.7,1.1,-1),Gc("u3",e,t,Uc,0,2,-1),Gc("cf1",e,t,Uc,-1,0,1),Gc("cf2",e,t,Uc,1,0,1),Gc("cf3",e,t,Uc,0,-1,1),Gc("cf4",e,t,Uc,0,1,1),Gc("cn1",e,t,Uc,-1,0,-1),Gc("cn2",e,t,Uc,1,0,-1),Gc("cn3",e,t,Uc,0,-1,-1),Gc("cn4",e,t,Uc,0,1,-1),t.getAttribute("position").needsUpdate=!0}}]),f}();function Gc(t,e,i,r,n,a,o){Bc.set(n,a,o).unproject(r);var s=e[t];if(void 0!==s)for(var u=i.getAttribute("position"),h=0,l=s.length;h<l;h++)u.setXYZ(s[h],Bc.x,Bc.y,Bc.z)}i.CameraHelper=Yu;var kc=new ri,zc=function(){p(o,Hs);var a=_(o);function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16776960;B(this,o);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),n=new Yr;return n.setIndex(new Dr(i,1)),n.setAttribute("position",new Dr(r,3)),(e=a.call(this,n,new Ls({color:e,toneMapped:!1}))).object=t,e.type="BoxHelper",e.matrixAutoUpdate=!1,e.update(),e}return m(o,[{key:"update",value:function(t){var e,i,r,n;void 0!==this.object&&kc.setFromObject(this.object),kc.isEmpty()||(e=kc.min,i=kc.max,(n=(r=this.geometry.attributes.position).array)[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=e.x,n[4]=i.y,n[5]=i.z,n[6]=e.x,n[7]=e.y,n[8]=i.z,n[9]=i.x,n[10]=e.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=e.z,n[15]=e.x,n[16]=i.y,n[17]=e.z,n[18]=e.x,n[19]=e.y,n[20]=e.z,n[21]=i.x,n[22]=e.y,n[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere())}},{key:"setFromObject",value:function(t){return this.object=t,this.update(),this}},{key:"copy",value:function(t){return Hs.prototype.copy.call(this,t),this.object=t.object,this}}]),o}();i.BoxHelper=zc;Zu=function(){p(a,Hs);var n=_(a);function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16776960;B(this,a);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Yr;return r.setIndex(new Dr(i,1)),r.setAttribute("position",new Fr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(e=n.call(this,r,new Ls({color:e,toneMapped:!1}))).box=t,e.type="Box3Helper",e.geometry.computeBoundingSphere(),e}return m(a,[{key:"updateMatrixWorld",value:function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),h(d(a.prototype),"updateMatrixWorld",this).call(this,t))}}]),a}();i.Box3Helper=Zu;Yu=function(){p(a,ks);var n=_(a);function a(t,e,i){B(this,a);var r=void 0!==i?i:16776960,i=new Yr;i.setAttribute("position",new Fr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),(i=n.call(this,i,new Ls({color:r,toneMapped:!1}))).type="PlaneHelper",i.plane=t,i.size=void 0===e?1:e;e=new Yr;return e.setAttribute("position",new Fr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),e.computeBoundingSphere(),i.add(new pn(e,new Mr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return m(a,[{key:"updateMatrixWorld",value:function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?W:v,this.lookAt(this.plane.normal),h(d(a.prototype),"updateMatrixWorld",this).call(this,t)}}]),a}();i.PlaneHelper=Yu;var jc,Hc,Vc=new ti,Zu=function(){p(u,$i);var s=_(u);function u(t,e,i,r,n,a){var o;return B(this,u),(o=s.call(this)).type="ArrowHelper",void 0===t&&(t=new ti(0,0,1)),void 0===e&&(e=new ti(0,0,0)),void 0===i&&(i=1),void 0===r&&(r=16776960),void 0===n&&(n=.2*i),void 0===a&&(a=.2*n),void 0===jc&&((jc=new Yr).setAttribute("position",new Fr([0,0,0,0,1,0],3)),(Hc=new nh(0,.5,1,5,1)).translate(0,-.5,0)),o.position.copy(e),o.line=new ks(jc,new Ls({color:r,toneMapped:!1})),o.line.matrixAutoUpdate=!1,o.add(o.line),o.cone=new pn(Hc,new Mr({color:r,toneMapped:!1})),o.cone.matrixAutoUpdate=!1,o.add(o.cone),o.setDirection(t),o.setLength(i,n,a),o}return m(u,[{key:"setDirection",value:function(t){.99999<t.y?this.quaternion.set(0,0,0,1):t.y<-.99999?this.quaternion.set(1,0,0,0):(Vc.set(t.z,0,-t.x).normalize(),t=Math.acos(t.y),this.quaternion.setFromAxisAngle(Vc,t))}},{key:"setLength",value:function(t,e,i){void 0===e&&(e=.2*t),void 0===i&&(i=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}},{key:"setColor",value:function(t){this.line.material.color.set(t),this.cone.material.color.set(t)}},{key:"copy",value:function(t){return h(d(u.prototype),"copy",this).call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}]),u}();i.ArrowHelper=Zu;var Xc=function(){p(r,Hs);var i=_(r);function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;B(this,r);var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],t=new Yr;t.setAttribute("position",new Fr(e,3)),t.setAttribute("color",new Fr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var e=new Ls({vertexColors:!0,toneMapped:!1});return(e=i.call(this,t,e)).type="AxesHelper",e}return r}();i.AxesHelper=Xc;var Wc=Math.pow(2,8),Yc=[.125,.215,.35,.446,.526,.582],qc=5+Yc.length,Zc=(j(Yu={},Re,0),j(Yu,3001,1),j(Yu,3002,2),j(Yu,3004,3),j(Yu,3005,4),j(Yu,3006,5),j(Yu,3007,6),Yu),Jc=new Sl,Zu=function(){for(var t=[],e=[],i=[],r=8,n=0;n<qc;n++){var a=Math.pow(2,r);e.push(a);var o=1/a;4<n?o=Yc[n-8+4-1]:0==n&&(o=0),i.push(o);for(var o=1/(a-1),a=-o/2,o=1+o/2,s=[a,a,o,a,o,o,a,a,o,o,a,o],u=new Float32Array(108),h=new Float32Array(72),l=new Float32Array(36),c=0;c<6;c++){var p=c%3*2/3-1,d=2<c?0:-1,d=[p,d,0,p+2/3,d,0,p+2/3,1+d,0,p,d,0,p+2/3,1+d,0,p,1+d,0];u.set(d,18*c),h.set(s,12*c);d=[c,c,c,c,c,c];l.set(d,6*c)}o=new Yr;o.setAttribute("position",new Dr(u,3)),o.setAttribute("uv",new Dr(h,2)),o.setAttribute("faceIndex",new Dr(l,1)),t.push(o),4<r&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:i}}(),Kc=Zu._lodPlanes,Qc=Zu._sizeLods,$c=Zu._sigmas,tp=null,Yu=(1+Math.sqrt(5))/2,Zu=1/Yu,ep=[new ti(1,1,1),new ti(-1,1,1),new ti(1,1,-1),new ti(-1,1,-1),new ti(0,Yu,Zu),new ti(0,Yu,-Zu),new ti(Zu,0,Yu),new ti(-Zu,0,Yu),new ti(Yu,Zu,0),new ti(-Yu,Zu,0)],Zu=function(){function r(t){var e,i;B(this,r),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=(e=20,i=new Float32Array(e),t=new ti(0,1,0),new ch({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:Zc[Re]},outputEncoding:{value:Zc[Re]}},vertexShader:op(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat(sp(),"\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:q,depthTest:!1,depthWrite:!1})),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return m(r,[{key:"fromScene",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.1,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:100;tp=this._renderer.getRenderTarget();var n=this._allocateTargets();return this._sceneToCubeUV(t,i,r,n),0<e&&this._blur(n,0,0,e),this._applyPMREM(n),this._cleanup(n),n}},{key:"fromEquirectangular",value:function(t){return this._fromTexture(t)}},{key:"fromCubemap",value:function(t){return this._fromTexture(t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=ap(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=np(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<Kc.length;t++)Kc[t].dispose()}},{key:"_cleanup",value:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(tp),t.scissorTest=!1,rp(t,0,0,t.width,t.height)}},{key:"_fromTexture",value:function(t){tp=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}},{key:"_allocateTargets",value:function(t){var e={magFilter:St,minFilter:St,generateMipmaps:!1,type:Pt,format:C,encoding:void 0===(i=t)||i.type!==Pt||i.encoding!==Re&&3001!==i.encoding&&3007!==i.encoding?3002:t.encoding,depthBuffer:!1},i=ip(e);return i.depthBuffer=!t,this._pingPongRenderTarget=ip(e),i}},{key:"_compileMaterial",value:function(t){t=new pn(Kc[0],t);this._renderer.compile(t,Jc)}},{key:"_sceneToCubeUV",value:function(t,e,i,r){var n=new Rn(90,1,e,i),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.outputEncoding,h=s.toneMapping,l=s.getClearColor(),c=s.getClearAlpha();s.toneMapping=Mt,s.outputEncoding=Re;e=t.background;e&&e.isColor&&(e.convertSRGBToLinear(),i=Math.max(e.r,e.g,e.b),i=Math.min(Math.max(Math.ceil(Math.log2(i)),-128),127),e=e.multiplyScalar(Math.pow(2,-i)),s.setClearColor(e,(i+128)/255),t.background=null);for(var p=0;p<6;p++){var d=p%3;0==d?(n.up.set(0,a[p],0),n.lookAt(o[p],0,0)):1==d?(n.up.set(0,0,a[p]),n.lookAt(0,o[p],0)):(n.up.set(0,a[p],0),n.lookAt(0,0,o[p])),rp(r,d*Wc,2<p?Wc:0,Wc,Wc),s.setRenderTarget(r),s.render(t,n)}s.toneMapping=h,s.outputEncoding=u,s.setClearColor(l,c)}},{key:"_textureToCubeUV",value:function(t,e){var i=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=ap()):null==this._equirectShader&&(this._equirectShader=np());var r=t.isCubeTexture?this._cubemapShader:this._equirectShader,n=new pn(Kc[0],r),r=r.uniforms;(r.envMap.value=t).isCubeTexture||r.texelSize.value.set(1/t.image.width,1/t.image.height),r.inputEncoding.value=Zc[t.encoding],r.outputEncoding.value=Zc[e.texture.encoding],rp(e,0,0,3*Wc,2*Wc),i.setRenderTarget(e),i.render(n,Jc)}},{key:"_applyPMREM",value:function(t){var e=this._renderer,i=e.autoClear;e.autoClear=!1;for(var r=1;r<qc;r++){var n=Math.sqrt($c[r]*$c[r]-$c[r-1]*$c[r-1]);this._blur(t,r-1,r,n,ep[(r-1)%ep.length])}e.autoClear=i}},{key:"_blur",value:function(t,e,i,r,n){var a=this._pingPongRenderTarget;this._halfBlur(t,a,e,i,r,"latitudinal",n),this._halfBlur(a,t,i,i,r,"longitudinal",n)}},{key:"_halfBlur",value:function(t,e,i,r,n,a,o){for(var s=this._renderer,u=this._blurMaterial,h=new pn(Kc[r],u),l=u.uniforms,u=Qc[i]-1,u=isFinite(n)?Math.PI/(2*u):2*Math.PI/39,c=n/u,p=isFinite(n)?1+Math.floor(3*c):20,d=[],f=0,m=0;m<20;++m){var v=m/c,v=Math.exp(-v*v/2);d.push(v),0==m?f+=v:m<p&&(f+=2*v)}for(var g=0;g<d.length;g++)d[g]=d[g]/f;l.envMap.value=t.texture,l.samples.value=p,l.weights.value=d,l.latitudinal.value="latitudinal"===a,o&&(l.poleAxis.value=o),l.dTheta.value=u,l.mipInt.value=8-i,l.inputEncoding.value=Zc[t.texture.encoding],l.outputEncoding.value=Zc[t.texture.encoding];t=Qc[r];rp(e,3*Math.max(0,Wc-2*t),(0===r?0:2*Wc)+2*t*(4<r?r-8+4:0),3*t,2*t),s.setRenderTarget(e),s.render(h,Jc)}}]),r}();function ip(t){t=new Ke(3*Wc,3*Wc,t);return t.texture.mapping=M,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function rp(t,e,i,r,n){t.viewport.set(e,i,r,n),t.scissor.set(e,i,r,n)}function np(){return new ch({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new Ve(1,1)},inputEncoding:{value:Zc[Re]},outputEncoding:{value:Zc[Re]}},vertexShader:op(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat(sp(),"\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:q,depthTest:!1,depthWrite:!1})}function ap(){return new ch({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Zc[Re]},outputEncoding:{value:Zc[Re]}},vertexShader:op(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat(sp(),"\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:q,depthTest:!1,depthWrite:!1})}function op(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function sp(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}i.PMREMGenerator=Zu;i.LineStrip=0;i.LinePieces=1;i.NoColors=0;i.FaceColors=1;function up(t){il.call(this,t),this.type="catmullrom",this.closed=!0}function hp(t){il.call(this,t),this.type="catmullrom"}function lp(t){il.call(this,t),this.type="catmullrom"}i.VertexColors=2,qh.create=function(t,e){return t.prototype=Object.create(qh.prototype),(t.prototype.constructor=t).prototype.getPoint=e,t},Object.assign(fl.prototype,{createPointsGeometry:function(t){t=this.getPoints(t);return this.createGeometry(t)},createSpacedPointsGeometry:function(t){t=this.getSpacedPoints(t);return this.createGeometry(t)},createGeometry:function(t){for(var e=new yn,i=0,r=t.length;i<r;i++){var n=t[i];e.vertices.push(new ti(n.x,n.y,n.z||0))}return e}}),Object.assign(ml.prototype,{fromPoints:function(t){return this.setFromPoints(t)}}),up.prototype=Object.create(il.prototype),hp.prototype=Object.create(il.prototype),lp.prototype=Object.create(il.prototype),Object.assign(lp.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),sh.prototype.setColors=function(){},xn.prototype.update=function(){},Object.assign(Gh.prototype,{extractUrlBase:function(t){return Cl.extractUrlBase(t)}}),Gh.Handlers={add:function(){},get:function(){}},Object.assign(Bl.prototype,{setTexturePath:function(t){return this.setResourcePath(t)}}),Object.assign(oh.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},size:function(t){return this.getSize(t)}}),Object.assign(ri.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),Object.assign(yi.prototype,{empty:function(){return this.isEmpty()}}),Bn.prototype.setFromMatrix=function(t){return this.setFromProjectionMatrix(t)},ah.prototype.center=function(t){return this.getCenter(t)},Object.assign(He,{random16:function(){return Math.random()},nearestPowerOfTwo:function(t){return He.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return He.ceilPowerOfTwo(t)}}),Object.assign(We.prototype,{flattenToArrayOffset:function(t,e){return this.toArray(t,e)},multiplyVector3:function(t){return t.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBufferAttribute:function(t){return t.applyMatrix3(this)},applyToVector3Array:function(){}}),Object.assign(Di.prototype,{extractPosition:function(t){return this.copyPosition(t)},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){return(new ti).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyToArray:function(){},multiplyVector3:function(t){return t.applyMatrix4(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBufferAttribute:function(t){return t.applyMatrix4(this)},applyToVector3Array:function(){},makeFrustum:function(t,e,i,r,n,a){return this.makePerspective(t,e,r,i,n,a)}}),rr.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},$e.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(wi.prototype,{isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionPlane:function(t){return this.intersectsPlane(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)}}),Object.assign(fr.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(t,e){return this.getBarycoord(t,e)},midpoint:function(t){return this.getMidpoint(t)},normal:function(t){return this.getNormal(t)},plane:function(t){return this.getPlane(t)}}),Object.assign(fr,{barycoordFromPoint:function(t,e,i,r,n){return fr.getBarycoord(t,e,i,r,n)},normal:function(t,e,i,r){return fr.getNormal(t,e,i,r)}}),Object.assign(vl.prototype,{extractAllPoints:function(t){return this.extractPoints(t)},extrude:function(t){return new zu(this,t)},makeGeometry:function(t){return new $u(this,t)}}),Object.assign(Ve.prototype,{fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(ti.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)},applyProjection:function(t){return this.applyMatrix4(t)},fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(Je.prototype,{fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(yn.prototype,{computeTangents:function(){},computeLineDistances:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.assign($i.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(){},translate:function(t,e){return this.translateOnAxis(e,t)},getWorldRotation:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties($i.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),Object.assign(pn.prototype,{setDrawMode:function(){}}),Object.defineProperties(pn.prototype,{drawMode:{get:function(){return 0},set:function(){}}}),Object.defineProperties(Es.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(ws.prototype,"useVertexTexture",{get:function(){},set:function(){}}),Ss.prototype.initBones=function(){},Object.defineProperty(qh.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(t){this.arcLengthDivisions=t}}),Rn.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(gl.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(Dr.prototype,{length:{get:function(){return this.array.length}},dynamic:{get:function(){return this.usage===Be},set:function(){this.setUsage(Be)}}}),Object.assign(Dr.prototype,{setDynamic:function(t){return this.setUsage(!0===t?Be:Fe),this},copyIndicesArray:function(){},setArray:function(){}}),Object.assign(Yr.prototype,{addIndex:function(t){this.setIndex(t)},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(this.setIndex(e),this):this.setAttribute(t,e):this.setAttribute(t,new Dr(e,arguments[2]))},addDrawCall:function(t,e,i){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){},removeAttribute:function(t){return this.deleteAttribute(t)},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties(Yr.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(Il.prototype,{maxInstancedCount:{get:function(){return this.instanceCount},set:function(t){this.instanceCount=t}}}),Object.defineProperties(xc.prototype,{linePrecision:{get:function(){return this.params.Line.threshold},set:function(t){this.params.Line.threshold=t}}}),Object.defineProperties(Ko.prototype,{dynamic:{get:function(){return this.usage===Be},set:function(t){this.setUsage(t)}}}),Object.assign(Ko.prototype,{setDynamic:function(t){return this.setUsage(!0===t?Be:Fe),this},setArray:function(){}}),Object.assign(ju.prototype,{getArrays:function(){},addShapeList:function(){},addShape:function(){}}),Object.assign(Jo.prototype,{dispose:function(){}}),Object.defineProperties(Ku.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(Sr.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new br}},shading:{get:function(){},set:function(t){this.flatShading=1===t}},stencilMask:{get:function(){return this.stencilFuncMask},set:function(t){this.stencilFuncMask=t}}}),Object.defineProperties(fh.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(dh.prototype,{transparency:{get:function(){return this.transmission},set:function(t){this.transmission=t}}}),Object.defineProperties(wn.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),Object.assign(Wo.prototype,{clearTarget:function(t,e,i,r){this.setRenderTarget(t),this.clear(e,i,r)},animate:function(t){this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){},allocTextureUnit:function(){},setTexture:function(){},setTexture2D:function(){},setTextureCube:function(){},getActiveMipMapLevel:function(){return this.getActiveMipmapLevel()}}),Object.defineProperties(Wo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}},vr:{get:function(){return this.xr}},gammaInput:{get:function(){return!1},set:function(){}},gammaOutput:{get:function(){return!1},set:function(t){this.outputEncoding=!0===t?3001:Re}},toneMappingWhitePoint:{get:function(){return 1},set:function(){}}}),Object.defineProperties(Bo.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(Ke.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),Object.defineProperties(nc.prototype,{load:{value:function(t){var e=this;return(new Yl).load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){}}}),kn.prototype.getData=function(){return this.getFrequencyData()},Cn.prototype.updateCubeMap=function(t,e){return this.update(t,e)};kn={merge:function(t,e,i){var r;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,i)},center:function(t){return t.center()}};i.GeometryUtils=kn,Ye.crossOrigin=void 0,Ye.loadTexture=function(t,e,i,r){var n=new Yh;n.setCrossOrigin(this.crossOrigin);r=n.load(t,i,void 0,r);return e&&(r.mapping=e),r},Ye.loadTextureCube=function(t,e,i,r){var n=new Xh;n.setCrossOrigin(this.crossOrigin);r=n.load(t,i,void 0,r);return e&&(r.mapping=e),r},Ye.loadCompressedTexture=function(){},Ye.loadCompressedTextureCube=function(){},i.SceneUtils={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"120"}}))},{}],48:[function(u,t,h){!function(i,s){!function(){"use strict";var r=u("process/browser.js").nextTick,t=Function.prototype.apply,n=Array.prototype.slice,a={},o=0;function e(t,e){this._id=t,this._clearFn=e}h.setTimeout=function(){return new e(t.call(setTimeout,window,arguments),clearTimeout)},h.setInterval=function(){return new e(t.call(setInterval,window,arguments),clearInterval)},h.clearTimeout=h.clearInterval=function(t){t.close()},e.prototype.unref=e.prototype.ref=function(){},e.prototype.close=function(){this._clearFn.call(window,this._id)},h.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},h.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},h._unrefActive=h.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},h.setImmediate="function"==typeof i?i:function(t){var e=o++,i=!(arguments.length<2)&&n.call(arguments,1);return a[e]=!0,r(function(){a[e]&&(i?t.apply(null,i):t.call(null),h.clearImmediate(e))}),e},h.clearImmediate="function"==typeof s?s:function(t){delete a[t]}}.call(this)}.call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":41,timers:48}],49:[function(t,e,i){"use strict";function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w=t("punycode"),D=t("./util");function b(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=n,i.resolve=function(t,e){return n(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?n(t,!1,!0).resolveObject(e):e},i.format=function(t){D.isString(t)&&(t=n(t));return t instanceof b?t.format():b.prototype.format.call(t)},i.Url=b;var R=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,O=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),P=["'"].concat(i),C=["%","/","?",";","#"].concat(P),I=["/","?","#"],L=/^[+a-z0-9A-Z_-]{0,63}$/,N=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,F={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},U={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},G=t("querystring");function n(t,e,i){if(t&&D.isObject(t)&&t instanceof b)return t;var r=new b;return r.parse(t,e,i),r}b.prototype.parse=function(t,e,i){if(!D.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+A(t));var r=t.indexOf("?"),n=-1!==r&&r<t.indexOf("#")?"?":"#",r=t.split(n);r[0]=r[0].replace(/\\/g,"/");var a=(a=t=r.join(n)).trim();if(!i&&1===t.split("#").length){var o=O.exec(a);if(o)return this.path=a,this.href=a,this.pathname=o[1],o[2]?(this.search=o[2],this.query=e?G.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var s,o=R.exec(a);if(o&&(M=(o=o[0]).toLowerCase(),this.protocol=M,a=a.substr(o.length)),(i||o||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(s="//"===a.substr(0,2))||o&&B[o]||(a=a.substr(2),this.slashes=!0)),!B[o]&&(s||o&&!U[o])){for(var u=-1,h=0;h<I.length;h++)-1!==(l=a.indexOf(I[h]))&&(-1===u||l<u)&&(u=l);-1!==(b=-1===u?a.lastIndexOf("@"):a.lastIndexOf("@",u))&&(T=a.slice(0,b),a=a.slice(b+1),this.auth=decodeURIComponent(T));for(var l,u=-1,h=0;h<C.length;h++)-1!==(l=a.indexOf(C[h]))&&(-1===u||l<u)&&(u=l);-1===u&&(u=a.length),this.host=a.slice(0,u),a=a.slice(u),this.parseHost(),this.hostname=this.hostname||"";var c="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!c)for(var p=this.hostname.split(/\./),h=0,d=p.length;h<d;h++){var f=p[h];if(f&&!f.match(L)){for(var m="",v=0,g=f.length;v<g;v++)127<f.charCodeAt(v)?m+="x":m+=f[v];if(!m.match(L)){var _=p.slice(0,h),y=p.slice(h+1),x=f.match(N);x&&(_.push(x[1]),y.unshift(x[2])),y.length&&(a="/"+y.join(".")+a),this.hostname=_.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),c||(this.hostname=w.toASCII(this.hostname));var b=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+b,this.href+=this.host,c&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!F[M])for(h=0,d=P.length;h<d;h++){var E,S=P[h];-1!==a.indexOf(S)&&((E=encodeURIComponent(S))===S&&(E=escape(S)),a=a.split(S).join(E))}c=a.indexOf("#");-1!==c&&(this.hash=a.substr(c),a=a.slice(0,c));var M,c=a.indexOf("?");return-1!==c?(this.search=a.substr(c),this.query=a.substr(c+1),e&&(this.query=G.parse(this.query)),a=a.slice(0,c)):e&&(this.search="",this.query={}),a&&(this.pathname=a),U[M]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(b=this.pathname||"",M=this.search||"",this.path=b+M),this.href=this.format(),this},b.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,a="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&D.isObject(this.query)&&Object.keys(this.query).length&&(a=G.stringify(this.query));a=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||U[e])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n=n||"",r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+n+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},b.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},b.prototype.resolveObject=function(t){D.isString(t)&&((d=new b).parse(t,!1,!0),t=d);for(var e=new b,i=Object.keys(this),r=0;r<i.length;r++){var n=i[r];e[n]=this[n]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),o=0;o<a.length;o++){var s=a[o];"protocol"!==s&&(e[s]=t[s])}return U[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!U[t.protocol]){for(var u=Object.keys(t),h=0;h<u.length;h++){var l=u[h];e[l]=t[l]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||B[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}return e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(f=e.pathname||"",m=e.search||"",e.path=f+m),e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var p=e.pathname&&"/"===e.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=d||p||e.host&&t.pathname,m=f,v=e.pathname&&e.pathname.split("/")||[],c=t.pathname&&t.pathname.split("/")||[],p=e.protocol&&!U[e.protocol];if(p&&(e.hostname="",e.port=null,e.host&&(""===v[0]?v[0]=e.host:v.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),f=f&&(""===c[0]||""===v[0])),d)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,v=c;else if(c.length)(v=v||[]).pop(),v=v.concat(c),e.search=t.search,e.query=t.query;else if(!D.isNullOrUndefined(t.search))return p&&(e.hostname=e.host=v.shift(),(x=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=x.shift(),e.host=e.hostname=x.shift())),e.search=t.search,e.query=t.query,D.isNull(e.pathname)&&D.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(!v.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var g=v.slice(-1)[0],d=(e.host||t.host||1<v.length)&&("."===g||".."===g)||""===g,_=0,y=v.length;0<=y;y--)"."===(g=v[y])?v.splice(y,1):".."===g?(v.splice(y,1),_++):_&&(v.splice(y,1),_--);if(!f&&!m)for(;_--;)v.unshift("..");!f||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),d&&"/"!==v.join("/").substr(-1)&&v.push("");var x,d=""===v[0]||v[0]&&"/"===v[0].charAt(0);return p&&(e.hostname=e.host=!d&&v.length?v.shift():"",(x=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=x.shift(),e.host=e.hostname=x.shift())),(f=f||e.host&&v.length)&&!d&&v.unshift(""),v.length?e.pathname=v.join("/"):(e.pathname=null,e.path=null),D.isNull(e.pathname)&&D.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},b.prototype.parseHost=function(){var t=this.host,e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":50,punycode:43,querystring:46}],50:[function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===r(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],"detect-gpu":[function(t,e,i){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,a;a=function(t){function P(t,o,s,u){return new(s=s||Promise)(function(i,e){function r(t){try{a(u.next(t))}catch(t){e(t)}}function n(t){try{a(u.throw(t))}catch(t){e(t)}}function a(t){var e;t.done?i(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,n)}a((u=u.apply(t,o||[])).next())})}function C(i,r){var n,a,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,a&&(o=2&e[0]?a.return:e[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,e[1])).done)return o;switch(a=0,(e=o?[2&e[0],o.value]:e)[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,a=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!((o=0<(o=s.trys).length&&o[o.length-1])||6!==e[0]&&2!==e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(i,s)}catch(t){e=[6,t],a=0}finally{n=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function I(t){return t.toLowerCase().replace(/^angle ?\((.+)\)*$/,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"")}var L=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","radeon r9 200","sgx 543","sgx543"],N="undefined"==typeof window,F=function(){if(!N){var t=window.navigator,e=t.userAgent,i=t.platform,r=t.maxTouchPoints,t=/(iphone|ipod|ipad)/i.test(e),r="iPad"===i||"MacIntel"===i&&0<r&&!window.MSStream;return{isIpad:r,isMobile:/android/i.test(e)||t||r,isSafari12:/Version\/12.+Safari/.test(e)}}}(),B=[],U=[];t.getGPUTier=function(t){var e=void 0===t?{}:t,t=e.mobileTiers,M=void 0===t?[0,15,30,60]:t,t=e.desktopTiers,A=void 0===t?[0,15,30,60]:t,t=e.override,w=void 0===t?{}:t,D=e.glContext,t=e.failIfMajorPerformanceCaveat,R=void 0!==t&&t,e=e.benchmarksURL,O=void 0===e?"https://unpkg.com/detect-gpu@3.1.27/dist/benchmarks":e;return P(void 0,void 0,void 0,function(){var y,x,b,T,E,s,S,u,h,l,c,p,d,f,m,v,g,_;return C(this,function(t){switch(t.label){case 0:if(y={},N)return[2,{tier:0,type:"SSR"}];if(u=w.isIpad,x=void 0===u?!(null==F||!F.isIpad):u,l=w.isMobile,b=void 0===l?!(null==F||!F.isMobile):l,c=w.screenSize,T=void 0===c?window.screen:c,p=w.loadBenchmarks,E=void 0===p?function(i){return P(void 0,void 0,void 0,function(){var e;return C(this,function(t){switch(t.label){case 0:return[4,fetch(O+"/"+i).then(function(t){return t.json()})];case 1:return(e=t.sent()).shift(),[2,e]}})})}:p,s=w.renderer,S=function(t){for(var e=0,i=b?["adreno","apple","mali-t","mali","nvidia","powervr"]:["intel","amd","radeon","nvidia","geforce"];e<i.length;e++){var r=i[e];if(t.includes(r))return r}},f=function(_){return P(void 0,void 0,void 0,function(){var i,r,n,a,o,s,u,h,l,c,p,d,f,m,v,g;return C(this,function(t){switch(t.label){case 0:if(!(i=S(_)))return[2];r=y[h=(b?"m":"d")+"-"+i+".json"]=y[h]||E(h),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r];case 2:return n=t.sent(),[3,4];case 3:return t.sent(),[2];case 4:if(e=(e=(e=_).replace(/\([^)]+\)/,"")).match(/\d+/)||e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g),a=null!==(e=null==e?void 0:e.join("").replace(/\W|amd/g,""))&&void 0!==e?e:"",v="apple"===i,(g=n.filter(function(t){return t[1]===a})).length||(g=n.filter(function(t){return t[0].includes(_)})),0===(o=g.length))return[2];for(h=(1<o?g.map(function(t){return[t,function(t,e){if(t===e)return 0;var i=t;t.length>e.length&&(t=e,e=i);for(var r=t.length,n=e.length;0<r&&t.charCodeAt(~-r)===e.charCodeAt(~-n);)r--,n--;for(var a,o=0;o<r&&t.charCodeAt(o)===e.charCodeAt(o);)o++;if(n-=o,0==(r-=o))return n;for(var s,u,h=0,l=0,c=0;l<r;)U[l]=t.charCodeAt(o+l),B[l]=++l;for(;c<n;)for(a=e.charCodeAt(o+c),s=c++,h=c,l=0;l<r;l++)u=a===U[l]?s:s+1,s=B[l],h=B[l]=h<s?h<u?h+1:u:s<u?s+1:u;return h}(_,t[0])]}).sort(function(t,e){return t[1]-e[1]})[0]:g)[0],o=h[0],g=h[3],s=Number.MAX_VALUE,h=window.devicePixelRatio,l=T.width*h*(T.height*h),v&&b&&(g=g.filter(function(t){var t=t[3];return-1<(null!==(t=null==t?void 0:t.indexOf(x?"ipad":"iphone"))&&void 0!==t?t:-1)})),c=0,p=g;c<p.length;c++)d=p[c],f=d[0],m=d[1],m=f*m,(m=Math.abs(l-m))<s&&(s=m,u=d);return u?(v=u[2],g=u[3],[2,[s,v,o,g]]):[2]}var e})})},u=function(t,e,i,r,n){return{device:n,fps:r,gpu:i,isMobile:b,tier:t,type:e}},l="",s)s=I(s),h=[s];else{if(!(c=D||function(t){var e={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:void 0===R?!1:R,powerPreference:"high-performance",stencil:!1};t&&delete e.powerPreference;t=window.document.createElement("canvas"),e=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);return null!=e?e:void 0}(null==F?void 0:F.isSafari12)))return[2,u(0,"WEBGL_UNSUPPORTED")];if(!(s=(p=c.getExtension("WEBGL_debug_renderer_info"))?c.getParameter(p.UNMASKED_RENDERER_WEBGL):s))return[2,u(1,"FALLBACK")];s=I(l=s),e=c,r=b,h="apple gpu"===(i=s)?(n=e,o=[i],r&&(a=n.createShader(35633),e=n.createShader(35632),r=n.createProgram(),e&&a&&r&&(n.shaderSource(a,"\n      precision highp float;\n      attribute vec3 aPosition;\n      varying float vvv;\n      void main() {\n        vvv = 0.31622776601683794;\n        gl_Position = vec4(aPosition, 1.0);\n      }\n    "),n.shaderSource(e,"\n      precision highp float;\n      varying float vvv;\n      void main() {\n        vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n        enc = fract(enc);\n        enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n        gl_FragColor = enc;\n      }\n    "),n.compileShader(a),n.compileShader(e),n.attachShader(r,a),n.attachShader(r,e),n.linkProgram(r),n.detachShader(r,a),n.detachShader(r,e),n.deleteShader(a),n.deleteShader(e),n.useProgram(r),a=n.createBuffer(),n.bindBuffer(34962,a),n.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044),e=n.getAttribLocation(r,"aPosition"),n.vertexAttribPointer(e,3,5126,!1,0,0),n.enableVertexAttribArray(e),n.clearColor(1,1,1,1),n.clear(16384),n.viewport(0,0,1,1),n.drawArrays(4,0,3),e=new Uint8Array(4),n.readPixels(0,0,1,1,6408,5121,e),n.deleteProgram(r),n.deleteBuffer(a),o={801621810:null!=F&&F.isIpad?["apple a12x gpu"]:["apple a11 gpu","apple a12 gpu","apple a13 gpu","apple a14 gpu"],8016218135:null!=F&&F.isIpad?["apple a9x gpu","apple a10 gpu","apple a10x gpu"]:["apple a9 gpu","apple a10 gpu"]}[e.join("")]||o)),o):[i]}return[4,Promise.all(h.map(f))];case 1:if(!(f=t.sent().filter(function(t){return!!t})).length)return[2,(m=L.find(function(t){return s.includes(t)}))?u(0,"BLOCKLISTED",m):u(1,"FALLBACK",s+" ("+l+")")];if(m=f.sort(function(t,e){t=t[0],t=void 0===t?Number.MAX_VALUE:t,e=e[0];return t-(void 0===e?Number.MAX_VALUE:e)})[0],d=m[1],f=m[2],m=m[3],-1===d)return[2,u(0,"BLOCKLISTED",f,d,m)];for(v=b?M:A,_=g=0;_<v.length;_++)d>=v[_]&&(g=_);return[2,u(g,"BENCHMARK",f,d,m)]}var e,i,r,n,a,o})})},Object.defineProperty(t,"__esModule",{value:!0})},"object"==((n=void 0)===i?"undefined":r(i))&&void 0!==e?a(i):"function"==typeof define&&define.amd?define(["exports"],a):a((n="undefined"!=typeof globalThis?globalThis:n||self).DetectGPU={})},{}],"gsap/CustomEase":[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.CustomEase=void 0;function r(){(x=a())&&(x.registerEase("_CE",o.create),n=1)}function _(t){return~~(1e3*t+(t<0?-.5:.5))/1e3}function y(t,e,i){i||0===i||(i=Math.max(+t[t.length-1],+t[1]));for(var r=-1*+t[0],n=-i,a=t.length,o=1/(+t[a-2]+r),s=(s=-e||(Math.abs(+t[a-1]-+t[1])<.01*(+t[a-2]-+t[0])?function(t){for(var e=t.length,i=h,r=1;r<e;r+=6)+t[r]<i&&(i=+t[r]);return i}(t)+n:+t[a-1]+n))?1/s:-o,u=0;u<a;u+=2)t[u]=(+t[u]+r)*o,t[u+1]=(+t[u+1]+n)*s}function E(t,e,i,r,n,a,o,s,u,h,l){var c=(t+i)/2,p=(e+r)/2,d=(n+o)/2,f=(a+s)/2,m=(c+(b=(i+n)/2))/2,v=(p+(T=(r+a)/2))/2,g=(b+d)/2,_=(T+f)/2,y=(m+g)/2,x=(v+_)/2,b=o-t,T=s-e,r=Math.abs((i-o)*T-(r-s)*b),a=Math.abs((n-o)*T-(a-s)*b);return h||(h=[{x:t,y:e},{x:o,y:s}],l=1),h.splice(l||h.length-1,0,{x:y,y:x}),u*(b*b+T*T)<(r+a)*(r+a)&&(a=h.length,E(t,e,c,p,m,v,y,x,u,h,l),E(y,x,g,_,d,f,o,s,u,h,l+1+(h.length-a))),h}var x,n,b=t("./utils/paths.js"),a=function(){return x||"undefined"!=typeof window&&(x=window.gsap)&&x.registerPlugin&&x},h=1e20,T=/[-+=\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/gi,S=/[cLlsSaAhHvVtTqQ]/g,o=function(){function g(t,e,i){n||r(),this.id=t,this.setData(e,i)}var t=g.prototype;return t.setData=function(t,e){e=e||{};var i,r,n,a,o,s,u,h,l,c=(t=t||"0,0,1,1").match(T),p=1,d=[],f=[],m=e.precision||1,v=m<=1;if(this.data=t,(S.test(t)||~t.indexOf("M")&&t.indexOf("C")<0)&&(c=(0,b.stringToRawPath)(t)[0]),4===(i=c.length))c.unshift(0,0),c.push(1,1),i=8;else if((i-2)%6)throw"Invalid CustomEase";for(0==+c[0]&&1==+c[i-2]||y(c,e.height,e.originY),this.segment=c,a=2;a<i;a+=6)r={x:+c[a-2],y:+c[a-1]},n={x:+c[a+4],y:+c[a+5]},d.push(r,n),E(r.x,r.y,+c[a],+c[a+1],+c[a+2],+c[a+3],n.x,n.y,1/(2e5*m),d,d.length-1);for(i=d.length,a=0;a<i;a++)u=d[a],h=d[a-1]||u,(u.x>h.x||h.y!==u.y&&h.x===u.x||u===h)&&u.x<=1?(h.cx=u.x-h.x,h.cy=u.y-h.y,h.n=u,h.nx=u.x,v&&1<a&&2<Math.abs(h.cy/h.cx-d[a-2].cy/d[a-2].cx)&&(v=0),h.cx<p&&(h.cx?p=h.cx:(h.cx=.001,a===i-1&&(h.x-=.001,p=Math.min(p,.001),v=0)))):(d.splice(a--,1),i--);if(o=1/(i=1/p+1|0),u=d[s=0],v){for(a=0;a<i;a++)r=(u=u.nx<(l=a*o)?d[++s]:u).y+(l-u.x)/u.cx*u.cy,f[a]={x:l,cx:o,y:r,cy:0,nx:9},a&&(f[a-1].cy=r-f[a-1].y);f[i-1].cy=d[d.length-1].y-r}else{for(a=0;a<i;a++)u.nx<a*o&&(u=d[++s]),f[a]=u;s<d.length-1&&(f[a-1]=d[d.length-2])}return this.ease=function(t){var e=f[t*i|0]||f[i-1];return(e=e.nx<t?e.n:e).y+(t-e.x)/e.cx*e.cy},(this.ease.custom=this).id&&x&&x.registerEase(this.id,this.ease),this},t.getSVGData=function(t){return g.getSVGData(this,t)},g.create=function(t,e,i){return new g(t,e,i).ease},g.register=function(t){x=t,r()},g.get=function(t){return x.parseEase(t)},g.getSVGData=function(t,e){var i,r,n,a,o,s,u,h,l,c,p=(e=e||{}).width||100,d=e.height||100,f=e.x||0,m=(e.y||0)+d,v=x.utils.toArray(e.path)[0];if(e.invert&&(d=-d,m=0),(t=(t="string"==typeof t?x.parseEase(t):t).custom?t.custom:t)instanceof g)i=(0,b.rawPathToString)((0,b.transformRawPath)([t.segment],p,0,0,-d,f,m));else{for(i=[f,m],a=1/(u=Math.max(5,200*(e.precision||1))),h=5/(u+=2),l=_(f+a*p),r=((c=_(m+t(a)*-d))-m)/(l-f),n=2;n<u;n++)o=_(f+n*a*p),s=_(m+t(n*a)*-d),(Math.abs((s-c)/(o-l)-r)>h||n===u-1)&&(i.push(l,c),r=(s-c)/(o-l)),l=o,c=s;i="M"+i.join(",")}return v&&v.setAttribute("d",i),i},g}();i.default=i.CustomEase=o,a()&&x.registerPlugin(o),o.version="3.8.0"},{"./utils/paths.js":39}],"gsap/dist/ScrollTrigger":[function(t,e,i){"use strict";function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,n;n=function(t){function Rt(t){return t}function Ot(t){return ne(t)[0]||(be(t)?void 0:null)}function f(t){return Math.round(1e5*t)/1e5||0}function r(){return"undefined"!=typeof window}function n(){return $t||r()&&($t=window.gsap)&&$t.registerPlugin&&$t}function Pt(e,t){var i=t.s,r=t.sc,n=A.indexOf(e),t=r===Ne.sc?1:2;return~n||(n=A.push(e)-1),A[n+t]||(A[n+t]=xe(e,i)||(ye(e)?r:function(t){return arguments.length?e[i]=t:e[i]}))}function Ct(t){return xe(t,"getBoundingClientRect")||(ye(t)?function(){return Xe.width=te.innerWidth,Xe.height=te.innerHeight,Xe}:function(){return Be(t)})}function It(t,e){e.s;var i,r=e.d2,n=e.d,e=e.a;return(i="scroll"+r)&&(e=xe(t,i))?e()-Ct(t)()[n]:ye(t)?(re[i]||ie[i])-(te["inner"+r]||ie["client"+r]||re["client"+r]):t[i]-t["offset"+r]}function a(t,e){for(var i=0;i<E.length;i+=3)e&&!~e.indexOf(E[i+1])||t(E[i],E[i+1],E[i+2])}function Lt(t){return"number"==typeof t}function Nt(t){return"object"===q(t)}function o(t){return Te(t)&&t()}function s(i,r){return function(){var t=o(i),e=o(r);return function(){o(t),o(e)}}}function Ft(t,e,i){return t&&t.progress(e?0:1)&&i&&t.pause()}function Bt(t,e){(e=e(t))&&e.totalTime&&(t.callbackAnimation=e)}function Ut(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function Gt(t,e){return e=e.d2,t["offset"+e]||t["client"+e]||0}function kt(t){var e,i=[],r=t.labels,n=t.duration();for(e in r)i.push(r[e]/n);return i}function zt(r){var n=$t.utils.snap(r),a=Array.isArray(r)&&r.slice(0).sort(function(t,e){return t-e});return a?function(t,e){var i;if(!e)return n(t);if(0<e){for(t-=1e-4,i=0;i<a.length;i++)if(a[i]>=t)return a[i];return a[i-1]}for(i=a.length,t+=1e-4;i--;)if(a[i]<=t)return a[i];return a[0]}:function(t,e){var i=n(t);return!e||Math.abs(i-t)<.001||i-t<0==e<0?i:n(e<0?t-r:t+r)}}function u(e,i,t,r){return t.split(",").forEach(function(t){return e(i,t,r)})}function jt(t,e,i){return t.removeEventListener(e,i)}function Ht(t,e){var i,r;return be(t)&&(r=~(i=t.indexOf("="))?+(t.charAt(i-1)+1)*parseFloat(t.substr(i+1)):0,~i&&(t.indexOf("%")>i&&(r*=e/100),t=t.substr(0,i-1)),t=r+(t in I?I[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)),t}function Vt(t,e,i,r,n,a,o,s){var u=n.startColor,h=n.endColor,l=n.fontSize,c=n.indent,p=n.fontWeight,d=ee.createElement("div"),f=ye(i)||"fixed"===xe(i,"pinType"),m=-1!==t.indexOf("scroller"),n=f?re:i,i=-1!==t.indexOf("start"),p="border-color:"+(h=i?u:h)+";font-size:"+l+";color:"+h+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return p+="position:"+((m||s)&&f?"fixed;":"absolute;"),!m&&!s&&f||(p+=(r===Ne?O:P)+":"+(a+parseFloat(c))+"px;"),o&&(p+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),d._isStart=i,d.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),d.style.cssText=p,d.innerText=e||0===e?t+"-"+e:t,n.children[0]?n.insertBefore(d,n.children[0]):n.appendChild(d),d._offset=d["offset"+r.op.d2],_(d,0,r,i),d}function _(t,e,i,r){var n={display:"block"},a=i[r?"os2":"p2"],o=i[r?"p2":"os2"];t._isFlipped=r,n[i.a+"Percent"]=r?-100:0,n[i.a]=r?"1px":0,n["border"+a+Ce]=1,n["border"+o+Ce]=0,n[i.p]=e+"px",$t.set(t,n)}function h(){return 20<ve()-ge&&e()}function Xt(){var t=ve();ge!==t?(e(),ge||B("scrollStart"),ge=t):g=g||v(e)}function Wt(){return!se&&!i&&!ee.fullscreenElement&&m.restart(!0)}function l(t){var e,i=$t.ticker.frame,r=[],n=0;if(S!==i||fe){for(k();n<F.length;n+=4)(e=te.matchMedia(F[n]).matches)!==F[n+3]&&((F[n+3]=e)?r.push(n):k(1,F[n])||Te(F[n+2])&&F[n+2]());for(G(),n=0;n<r.length;n++)e=r[n],de=F[e],F[e+2]=F[e+1](t);de=0,p&&c(0,1),S=i,B("matchMedia")}}function c(t,e){!ge||t?(M=!0,t=B("refreshInit"),le&&Y.sort(),e||k(),ze.forEach(function(t){return t.refresh()}),t.forEach(function(t){return t&&t.render&&t.render(-1)}),z(),m.pause(),M=!1,B("refresh")):Ue(Y,"scrollEnd",He)}function e(){if(!M){var t=ze.length,e=ve(),i=50<=e-w,r=t&&ze[0].scroll();if(Ve=r<j?-1:1,j=r,i&&(ge&&!ue&&200<e-ge&&(ge=0,B("scrollEnd")),oe=w,w=e),Ve<0){for(he=t;0<he--;)ze[he]&&ze[he].update(0,i);Ve=1}else for(he=0;he<t;he++)ze[he]&&ze[he].update(0,i);g=0}}function Yt(t,e,i,r){if(t.parentNode!==e){for(var n,a=H.length,o=e.style,s=t.style;a--;)o[n=H[a]]=i[n];o.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(o.display="inline-block"),s[P]=s[O]="auto",o.overflow="visible",o.boxSizing="border-box",o[Se]=Gt(t,Le)+Ie,o[Me]=Gt(t,Ne)+Ie,o[Oe]=s[Pe]=s.top=s.left="0",qt(r),s[Se]=s["max"+Ce]=i[Se],s[Me]=s.maxHeight=i[Me],s[Oe]=i[Oe],t.parentNode.insertBefore(e,t),e.appendChild(t)}}function qt(t){if(t){var e,i,r=t.t.style,n=t.length,a=0;for((t.t._gsap||$t.core.getCache(t.t)).uncache=1;a<n;a+=2)i=t[a+1],e=t[a],i?r[e]=i:r[e]&&r.removeProperty(e.replace(X,"-$1").toLowerCase())}}function Zt(t){for(var e=V.length,i=t.style,r=[],n=0;n<e;n++)r.push(V[n],i[V[n]]);return r.t=t,r}function Jt(t,e,i,r,n,a,o,s,u,h,l,c,p){Te(t)&&(t=t(s)),be(t)&&"max"===t.substr(0,3)&&(t=c+("="===t.charAt(4)?Ht("0"+t.substr(3),i):0));var d,f,m,v,g=p?p.time():0;return p&&p.seek(0),Lt(t)?o&&_(o,i,r,!0):(Te(e)&&(e=e(s)),m=t.split(" "),f=Ot(e)||re,(e=Be(f)||{})&&(e.left||e.top)||"none"!==Fe(f).display||(d=f.style.display,f.style.display="block",e=Be(f),d?f.style.display=d:f.style.removeProperty("display")),d=Ht(m[0],e[r.d]),m=Ht(m[1]||"0",i),t=e[r.p]-u[r.p]-h+d+n-m,o&&_(o,m,r,i-m<20||o._isStart&&20<m),i-=i-m),a&&(m=a._isStart,v="scroll"+r.d2,_(a,i=t+i,r,m&&20<i||!m&&(l?Math.max(re[v],ie[v]):a.parentNode[v])<=i+1),l&&(u=Be(o),l&&(a.style[r.op.p]=u[r.op.p]-r.op.m-a._offset+Ie))),p&&f&&(v=Be(f),p.seek(c),f=Be(f),p._caScrollDist=v[r.p]-f[r.p],t=t/p._caScrollDist*c),p&&p.seek(g),p?t:Math.round(t)}function Kt(t,e,i,r){if(t.parentNode!==e){var n,a,o=t.style;if(e===re){for(n in t._stOrig=o.cssText,a=Fe(t))+n||W.test(n)||!a[n]||"string"!=typeof o[n]||"0"===n||(o[n]=a[n]);o.top=i,o.left=r}else o.cssText=t._stOrig;$t.core.getCache(t).uncache=1,e.appendChild(t)}}function Qt(u,t){function h(t,e,i,r,n){var a=h.tween,o=e.onComplete,s={};return a&&a.kill(),l=Math.round(i),e[d]=t,(e.modifiers=s)[d]=function(t){return(t=f(p()))!==l&&t!==c&&2<Math.abs(t-l)?(a.kill(),h.tween=0):t=i+r*a.ratio+n*a.ratio*a.ratio,c=l,l=f(t)},e.onComplete=function(){h.tween=0,o&&o.call(a)},a=h.tween=$t.to(u,e)}var l,c,p=Pt(u,t),d="_scroll"+t.p2;return u[d]=p,u.addEventListener("wheel",function(){return h.tween&&h.tween.kill()&&(h.tween=0)},{passive:!0}),h}var $t,p,te,ee,ie,re,d,m,v,g,ne,ae,oe,y,se,ue,x,he,b,T,E,le,ce,i,pe,de,S,M,fe=1,me=[],A=[],ve=Date.now,w=ve(),ge=0,_e=1,ye=function(t){return!!~d.indexOf(t)},xe=function(t,e){return~me.indexOf(t)&&me[me.indexOf(t)+1][e]},be=function(t){return"string"==typeof t},Te=function(t){return"function"==typeof t},Ee=Math.abs,D="scrollLeft",R="scrollTop",O="right",P="bottom",Se="width",Me="height",Ae="Right",we="Left",De="Top",Re="Bottom",Oe="padding",Pe="margin",Ce="Width",C="Height",Ie="px",Le={s:D,p:"left",p2:we,os:O,os2:Ae,d:Se,d2:Ce,a:"x",sc:function(t){return arguments.length?te.scrollTo(t,Ne.sc()):te.pageXOffset||ee[D]||ie[D]||re[D]||0}},Ne={s:R,p:"top",p2:De,os:P,os2:Re,d:Me,d2:C,a:"y",op:Le,sc:function(t){return arguments.length?te.scrollTo(Le.sc(),t):te.pageYOffset||ee[R]||ie[R]||re[R]||0}},Fe=function(t){return te.getComputedStyle(t)},Be=function(t,e){e=e&&"matrix(1, 0, 0, 1, 0, 0)"!==Fe(t)[x]&&$t.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),t=t.getBoundingClientRect();return e&&e.progress(0).kill(),t},Ue=function(t,e,i){return t.addEventListener(e,i,{passive:!0})},Ge={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},ke={toggleActions:"play",anticipatePin:0},I={top:0,left:0,center:.5,bottom:1,right:1},ze=[],je={},L={},N=[],F=[],He=function t(){return jt(Y,"scrollEnd",t)||c(!0)},B=function(t){return L[t]&&L[t].map(function(t){return t()})||N},U=[],G=function(t){for(var e=0;e<U.length;e+=5)t&&U[e+4]!==t||(U[e].style.cssText=U[e+1],U[e].getBBox&&U[e].setAttribute("transform",U[e+2]||""),U[e+3].uncache=1)},k=function(t,e){var i;for(he=0;he<ze.length;he++)i=ze[he],e&&i.media!==e||(t?i.kill(1):i.revert());e&&G(e),e||B("revert")},z=function(){return A.forEach(function(t){return"function"==typeof t&&(t.rec=0)})},j=0,Ve=1,H=["left","top",P,O,Pe+Re,Pe+Ae,Pe+De,Pe+we,"display","flexShrink","float","zIndex","grid-column-start","grid-column-end","grid-row-start","grid-row-end","grid-area","justify-self","align-self","place-self"],V=H.concat([Se,Me,"boxSizing","max"+Ce,"max"+C,"position",Pe,Oe,Oe+De,Oe+Ae,Oe+Re,Oe+we]),X=/([A-Z])/g,Xe={left:0,top:0},W=/(?:webkit|moz|length|cssText|inset)/i;Le.op=Ne;var Y=(We.prototype.init=function(g,_){var p,d,r,f,y,m,x,b,T,E,v,t,c,S,M,A,e,w,D,R,O,P,C,i,I,L,N,F,B,U,n,G,k,z,j,H,a,V,X,W,Y,q,Z,J,K,Q,$,tt,et,it,rt,nt,at,ot,st,ut,ht,lt,ct,pt,dt,ft,o,mt,vt,gt,_t,yt,xt,s,u,h,l,bt,Tt,Et,St,Mt,At,wt,Dt;this.progress=this.start=0,this.vars&&this.kill(1),_e?(s=g=Ut(be(g)||Lt(g)||g.nodeType?{trigger:g}:g,ke),p=s.onUpdate,d=s.toggleClass,r=s.id,f=s.onToggle,y=s.onRefresh,m=s.scrub,x=s.trigger,b=s.pin,T=s.pinSpacing,E=s.invalidateOnRefresh,v=s.anticipatePin,t=s.onScrubComplete,c=s.onSnapComplete,S=s.once,M=s.snap,A=s.pinReparent,e=s.pinSpacer,w=s.containerAnimation,D=s.fastScrollEnd,R=s.preventOverlaps,O=g.horizontal||g.containerAnimation&&!1!==g.horizontal?Le:Ne,P=!m&&0!==m,C=Ot(g.scroller||te),i=$t.core.getCache(C),I=ye(C),L="fixed"===("pinType"in g?g.pinType:xe(C,"pinType")||I&&"fixed"),N=[g.onEnter,g.onLeave,g.onEnterBack,g.onLeaveBack],F=P&&g.toggleActions.split(" "),At=("markers"in g?g:ke).markers,B=!I&&parseFloat(Fe(C)["border"+O.p2+Ce])||0,U=this,n=g.onRefreshInit&&function(){return g.onRefreshInit(U)},u=C,h=I,l=O.d,bt=O.d2,Tt=O.a,G=(Tt=xe(u,"getBoundingClientRect"))?function(){return Tt()[l]}:function(){return(h?te["inner"+bt]:u["client"+bt])||0},s=C,k=!I||~me.indexOf(s)?Ct(s):function(){return Xe},z=0,j=Pt(C,O),U.media=de,v*=45,U.scroller=C,U.scroll=w?w.time.bind(w):j,X=j(),U.vars=g,_=_||g.animation,"refreshPriority"in g&&(le=1),i.tweenScroll=i.tweenScroll||{top:Qt(C,Ne),left:Qt(C,Le)},U.tweenTo=H=i.tweenScroll[O.p],_&&(_.vars.lazy=!1,_._initted||!1!==_.vars.immediateRender&&!1!==g.immediateRender&&_.render(0,!0,!0),U.animation=_.pause(),_.scrollTrigger=U,(o=Lt(m)&&m)&&(ft=$t.to(_,{ease:"power3",duration:o,onComplete:function(){return t&&t(U)}})),pt=0,r=r||_.vars.id),ze.push(U),M&&(Nt(M)&&!M.push||(M={snapTo:M}),"scrollBehavior"in re.style&&$t.set(I?[re,ie]:C,{scrollBehavior:"auto"}),V=Te(M.snapTo)?M.snapTo:"labels"===M.snapTo?(St=_,function(t){return $t.utils.snap(kt(St),t)}):"labelsDirectional"===M.snapTo?(Et=_,function(t,e){return zt(kt(Et))(t,e.direction)}):!1!==M.directional?function(t,e){return zt(M.snapTo)(t,e.direction)}:$t.utils.snap(M.snapTo),mt=M.duration||{min:.1,max:2},mt=Nt(mt)?ae(mt.min,mt.max):ae(mt,mt),vt=$t.delayedCall(M.delay||o/2||.1,function(){var t,e,i,r,n,a,o,s,u,h,l;Math.abs(U.getVelocity())<10&&!ue&&z!==j()?(e=((t=_&&!P?_.totalProgress():U.progress)-dt)/(ve()-oe)*1e3||0,i=$t.utils.clamp(-U.progress,1-U.progress,Ee(e/2)*e/.185),r=U.progress+(!1===M.inertia?0:i),n=ae(0,1,V(r,U)),a=j(),o=Math.round(Y+n*$),s=(l=M).onStart,u=l.onInterrupt,h=l.onComplete,l=H.tween,a<=q&&Y<=a&&o!==a&&(l&&!l._initted&&l.data<=Ee(o-a)||(!1===M.inertia&&(i=n-U.progress),H(o,{duration:mt(Ee(.185*Math.max(Ee(r-t),Ee(n-t))/e/.05||0)),ease:M.ease||"power3",data:Ee(o-a),onInterrupt:function(){return vt.restart(!0)&&u&&u(U)},onComplete:function(){z=j(),pt=dt=_&&!P?_.totalProgress():U.progress,c&&c(U),h&&h(U)}},a,i*$,o-a-i*$),s&&s(U,H.tween)))):U.isActive&&vt.restart(!0)}).pause()),r&&(je[r]=U),x=U.trigger=Ot(x||b),b=!0===b?x:Ot(b),be(d)&&(d={targets:x,className:d}),b&&(!1===T||T===Pe||(T=!(!T&&"flex"===Fe(b.parentNode).display)&&Oe),U.pin=b,!1!==g.force3D&&$t.set(b,{force3D:!0}),(a=$t.core.getCache(b)).spacer?tt=a.pinState:(e&&((e=Ot(e))&&!e.nodeType&&(e=e.current||e.nativeElement),a.spacerIsNative=!!e,e&&(a.spacerState=Zt(e))),a.spacer=rt=e||ee.createElement("div"),rt.classList.add("pin-spacer"),r&&rt.classList.add("pin-spacer-"+r),a.pinState=tt=Zt(b)),U.spacer=rt=a.spacer,Mt=Fe(b),ut=Mt[T+O.os2],nt=$t.getProperty(b),at=$t.quickSetter(b,O.a,Ie),Yt(b,rt,Mt),it=Zt(b)),At&&(Mt=Nt(At)?Ut(At,Ge):Ge,K=Vt("scroller-start",r,C,O,Mt,0),Q=Vt("scroller-end",r,C,O,Mt,0,K),At=K["offset"+O.op.d2],Z=Vt("start",r,C,O,Mt,At,0,w),J=Vt("end",r,C,O,Mt,At,0,w),w&&(xt=$t.quickSetter([Z,J],O.a,Ie)),L||me.length&&!0===xe(C,"fixedMarkers")||(At=Fe(Mt=I?re:C).position,Mt.style.position="absolute"===At||"fixed"===At?At:"relative",$t.set([K,Q],{force3D:!0}),lt=$t.quickSetter(K,O.a,Ie),ct=$t.quickSetter(Q,O.a,Ie))),w&&(wt=w.vars.onUpdate,Dt=w.vars.onUpdateParams,w.eventCallback("onUpdate",function(){U.update(0,0,1),wt&&wt.apply(Dt||[])})),U.previous=function(){return ze[ze.indexOf(U)-1]},U.next=function(){return ze[ze.indexOf(U)+1]},U.revert=function(t){var e=!1!==t||!U.enabled,t=se;e!==U.isReverted&&(e&&(U.scroll.rec||(U.scroll.rec=j()),_t=Math.max(j(),U.scroll.rec||0),gt=U.progress,yt=_&&_.progress()),Z&&[Z,J,K,Q].forEach(function(t){return t.style.display=e?"none":"block"}),e&&(se=1),U.update(e),se=t,b&&(e?function(t,e,i){qt(i);i=t._gsap;i.spacerIsNative?qt(i.spacerState):t.parentNode!==e||(i=e.parentNode)&&(i.insertBefore(t,e),i.removeChild(e))}(b,rt,tt):A&&U.isActive||Yt(b,rt,Fe(b),ht)),U.isReverted=e)},U.refresh=function(t,e){if(!se&&U.enabled||e)if(b&&t&&ge)Ue(We,"scrollEnd",He);else{se=1,ft&&ft.pause(),E&&_&&_.progress(0).invalidate(),U.isReverted||U.revert();for(var i,r,n,a,o,s,u=G(),h=k(),l=w?w.duration():It(C,O),c=0,p=0,d=g.end,e=g.endTrigger||x,f=g.start||(0!==g.start&&x?b?"0 0":"0 100%":0),m=g.pinnedContainer&&Ot(g.pinnedContainer),t=x&&Math.max(0,ze.indexOf(U))||0,v=t;v--;)(n=ze[v]).end||n.refresh(0,1)||(se=1),!(a=n.pin)||a!==x&&a!==b||n.isReverted||((s=s||[]).unshift(n),n.revert());for(Te(f)&&(f=f(U)),Y=Jt(f,x,u,O,j(),Z,K,U,h,B,L,l,w)||(b?-.001:0),Te(d)&&(d=d(U)),be(d)&&!d.indexOf("+=")&&(~d.indexOf(" ")?d=(be(f)?f.split(" ")[0]:"")+d:(c=Ht(d.substr(2),u),d=be(f)?f:Y+c,e=x)),q=Math.max(Y,Jt(d||(e?"100% 0":l),e,u,O,j()+c,J,Q,U,h,B,L,l,w))||-.001,$=q-Y||(Y-=.01)&&.001,c=0,v=t;v--;)(a=(n=ze[v]).pin)&&n.start-n._pinPush<Y&&!w&&(i=n.end-n.start,a!==x&&a!==m||Lt(f)||(c+=i),a===b&&(p+=i));if(Y+=c,q+=c,U._pinPush=p,Z&&c&&((i={})[O.a]="+="+c,m&&(i[O.p]="-="+j()),$t.set([Z,J],i)),b)i=Fe(b),h=O===Ne,t=j(),ot=parseFloat(nt(O.a))+p,!l&&1<q&&((I?re:C).style["overflow-"+O.a]="scroll"),Yt(b,rt,i),it=Zt(b),r=Be(b,!0),l=L&&Pt(C,h?Le:Ne)(),T&&((ht=[T+O.os2,$+p+Ie]).t=rt,(v=T===Oe?Gt(b,O)+$+p:0)&&ht.push(O.d,v+Ie),qt(ht),L&&j(_t)),L&&((o={top:r.top+(h?t-Y:l)+Ie,left:r.left+(h?l:t-Y)+Ie,boxSizing:"border-box",position:"fixed"})[Se]=o["max"+Ce]=Math.ceil(r.width)+Ie,o[Me]=o.maxHeight=Math.ceil(r.height)+Ie,o[Pe]=o[Pe+De]=o[Pe+Ae]=o[Pe+Re]=o[Pe+we]="0",o[Oe]=i[Oe],o[Oe+De]=i[Oe+De],o[Oe+Ae]=i[Oe+Ae],o[Oe+Re]=i[Oe+Re],o[Oe+we]=i[Oe+we],et=function(t,e,i){for(var r,n=[],a=t.length,o=i?8:0;o<a;o+=2)r=t[o],n.push(r,r in e?e[r]:t[o+1]);return n.t=t.t,n}(tt,o,A)),_?(o=_._initted,ce(1),_.render(_.duration(),!0,!0),st=nt(O.a)-ot+$+p,$!==st&&et.splice(et.length-2,2),_.render(0,!0,!0),o||_.invalidate(),ce(0)):st=$;else if(x&&j()&&!w)for(r=x.parentNode;r&&r!==re;)r._pinOffset&&(Y-=r._pinOffset,q-=r._pinOffset),r=r.parentNode;s&&s.forEach(function(t){return t.revert(!1)}),U.start=Y,U.end=q,X=W=j(),w||(X<_t&&j(_t),U.scroll.rec=0),U.revert(!1),se=0,_&&P&&_._initted&&_.progress()!==yt&&_.progress(yt,!0).render(_.time(),!0,!0),gt!==U.progress&&(_&&!P&&_.totalProgress(gt,!0),U.progress=gt,U.update(0,0,1)),b&&T&&(rt._pinOffset=Math.round(U.progress*st)),y&&y(U)}},U.getVelocity=function(){return(j()-W)/(ve()-oe)*1e3||0},U.endAnimation=function(){Ft(U.callbackAnimation),_&&(ft?ft.progress(1):_.paused()?P||Ft(_,U.direction<0,1):Ft(_,_.reversed()))},U.getTrailing=function(e){var t=ze.indexOf(U),t=0<U.direction?ze.slice(0,t).reverse():ze.slice(t+1);return be(e)?t.filter(function(t){return t.vars.preventOverlaps===e}):t},U.update=function(t,e,i){var r,n,a,o,s,u,h,l,c;w&&!i&&!t||(r=U.scroll(),c=(u=t?0:(r-Y)/$)<0?0:1<u?1:u||0,s=U.progress,e&&(W=X,X=w?j():r,M&&(dt=pt,pt=_&&!P?_.totalProgress():c)),(c=v&&!c&&b&&!se&&!fe&&ge&&Y<r+(r-W)/(ve()-oe)*v?1e-4:c)!==s&&U.enabled&&(i=(l=(h=U.isActive=!!c&&c<1)!=(!!s&&s<1))||!!c!=!!s,U.direction=s<c?1:-1,U.progress=c,i&&!se&&(n=c&&!s?0:1===c?1:1===s?2:3,P&&(a=!l&&"none"!==F[n+1]&&F[n+1]||F[n],o=_&&("complete"===a||"reset"===a||a in _))),R&&l&&(o||m||!_)&&(Te(R)?R(U):U.getTrailing(R).forEach(function(t){return t.endAnimation()})),P||(!ft||se||fe?_&&_.totalProgress(c,!!se):(ft.vars.totalProgress=c,ft.invalidate().restart())),b&&(t&&T&&(rt.style[T+O.os2]=ut),L?i&&(u=!t&&s<c&&r<q+1&&r+1>=It(C,O),A&&(t||!h&&!u?Kt(b,rt):(e=Be(b,!0),s=r-Y,Kt(b,re,e.top+(O===Ne?s:0)+Ie,e.left+(O===Ne?0:s)+Ie))),qt(h||u?et:it),st!==$&&c<1&&h||at(ot+(1!==c||u?0:st))):at(ot+st*c)),!M||H.tween||se||fe||vt.restart(!0),d&&(l||S&&c&&(c<1||!pe))&&ne(d.targets).forEach(function(t){return t.classList[h||S?"add":"remove"](d.className)}),!p||P||t||p(U),i&&!se?(P&&(o&&("complete"===a?_.pause().totalProgress(1):"reset"===a?_.restart(!0).pause():"restart"===a?_.restart(!0):_[a]()),p&&p(U)),!l&&pe||(f&&l&&Bt(U,f),N[n]&&Bt(U,N[n]),S&&(1===c?U.kill(!1,1):N[n]=0),l||N[n=1===c?1:3]&&Bt(U,N[n])),D&&!h&&Math.abs(U.getVelocity())>(Lt(D)?D:2500)&&(Ft(U.callbackAnimation),ft?ft.progress(1):Ft(_,!c,1))):P&&p&&!se&&p(U)),ct&&(c=w?r/w.duration()*(w._caScrollDist||0):r,lt(c+(K._isFlipped?1:0)),ct(c)),xt&&xt(-r/w.duration()*(w._caScrollDist||0)))},U.enable=function(t,e){U.enabled||(U.enabled=!0,Ue(C,"resize",Wt),Ue(C,"scroll",Xt),n&&Ue(We,"refreshInit",n),!1!==t&&(U.progress=gt=0,X=W=z=j()),!1!==e&&U.refresh())},U.getTween=function(t){return t&&H?H.tween:ft},U.disable=function(t,e){if(U.enabled&&(!1!==t&&U.revert(),U.enabled=U.isActive=!1,e||ft&&ft.pause(),_t=0,a&&(a.uncache=1),n&&jt(We,"refreshInit",n),vt&&(vt.pause(),H.tween&&H.tween.kill()&&(H.tween=0)),!I)){for(var i=ze.length;i--;)if(ze[i].scroller===C&&ze[i]!==U)return;jt(C,"resize",Wt),jt(C,"scroll",Xt)}},U.kill=function(t,e){U.disable(t,e),ft&&ft.kill(),r&&delete je[r];var i=ze.indexOf(U);ze.splice(i,1),i===he&&0<Ve&&he--,i=0,ze.forEach(function(t){return t.scroller===U.scroller&&(i=1)}),i||(U.scroll.rec=0),_&&(_.scrollTrigger=null,t&&_.render(-1),e||_.kill()),Z&&[Z,J,K,Q].forEach(function(t){return t.parentNode&&t.parentNode.removeChild(t)}),b&&(a&&(a.uncache=1),i=0,ze.forEach(function(t){return t.pin===b&&i++}),i||(a.spacer=0))},U.enable(!1,!1),_&&_.add&&!$?$t.delayedCall(.01,function(){return Y||q||U.refresh()})&&($=.01)&&(Y=q=0):U.refresh()):this.update=this.refresh=this.kill=Rt},We.register=function(t){var e,i;return p||($t=t||n(),r()&&window.document&&(te=window,ee=document,ie=ee.documentElement,re=ee.body),$t&&(ne=$t.utils.toArray,ae=$t.utils.clamp,ce=$t.core.suppressOverwrites||Rt,$t.core.globals("ScrollTrigger",We),re&&(v=te.requestAnimationFrame||function(t){return setTimeout(t,16)},Ue(te,"wheel",Xt),d=[te,ee,ie,re],Ue(ee,"scroll",Xt),i=(e=re.style).borderTopStyle,e.borderTopStyle="solid",t=Be(re),Ne.m=Math.round(t.top+Ne.sc())||0,Le.m=Math.round(t.left+Le.sc())||0,i?e.borderTopStyle=i:e.removeProperty("border-top-style"),y=setInterval(h,200),$t.delayedCall(.5,function(){return fe=0}),Ue(ee,"touchcancel",Rt),Ue(re,"touchstart",Rt),u(Ue,ee,"pointerdown,touchstart,mousedown",function(){return ue=1}),u(Ue,ee,"pointerup,touchend,mouseup",function(){return ue=0}),x=$t.utils.checkPrefix("transform"),V.push(x),p=ve(),m=$t.delayedCall(.2,c).pause(),E=[ee,"visibilitychange",function(){var t=te.innerWidth,e=te.innerHeight;ee.hidden?(b=t,T=e):b===t&&T===e||Wt()},ee,"DOMContentLoaded",c,te,"load",function(){return ge||c()},te,"resize",Wt],a(Ue)))),p},We.defaults=function(t){for(var e in t)ke[e]=t[e]},We.kill=function(){_e=0,ze.slice(0).forEach(function(t){return t.kill(1)})},We.config=function(t){"limitCallbacks"in t&&(pe=!!t.limitCallbacks);var e=t.syncInterval;e&&clearInterval(y)||(y=e)&&setInterval(h,e),"autoRefreshEvents"in t&&(a(jt),a(Ue,t.autoRefreshEvents||"none"),i=-1===(t.autoRefreshEvents+"").indexOf("resize"))},We.scrollerProxy=function(t,e){var i=Ot(t),r=A.indexOf(i),t=ye(i);~r&&A.splice(r,t?6:2),t?me.unshift(te,e,re,e,ie,e):me.unshift(i,e)},We.matchMedia=function(t){var e,i,r,n,a;for(i in t)r=F.indexOf(i),n=t[i],"all"===(de=i)?n():(e=te.matchMedia(i))&&(e.matches&&(a=n()),~r?(F[r+1]=s(F[r+1],n),F[r+2]=s(F[r+2],a)):(r=F.length,F.push(i,n,a),e.addListener?e.addListener(l):e.addEventListener("change",l)),F[r+3]=e.matches),de=0;return F},We.clearMatchMedia=function(t){t||(F.length=0),0<=(t=F.indexOf(t))&&F.splice(t,4)},We.isInViewport=function(t,e,i){t=(be(t)?Ot(t):t).getBoundingClientRect(),e=t[i?Se:Me]*e||0;return i?0<t.right-e&&t.left+e<te.innerWidth:0<t.bottom-e&&t.top+e<te.innerHeight},We.positionInViewport=function(t,e,i){var r=(t=be(t)?Ot(t):t).getBoundingClientRect(),t=r[i?Se:Me],e=null==e?t/2:e in I?I[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0;return i?(r.left+e)/te.innerWidth:(r.top+e)/te.innerHeight},We);function We(t,e){p||We.register($t),this.init(t,e)}Y.version="3.8.0",Y.saveStyles=function(t){return t?ne(t).forEach(function(t){var e;t&&t.style&&(0<=(e=U.indexOf(t))&&U.splice(e,5),U.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),$t.core.getCache(t),de))}):U},Y.revert=function(t,e){return k(!t,e)},Y.create=function(t,e){return new Y(t,e)},Y.refresh=function(t){return t?Wt():(p||Y.register())&&c(!0)},Y.update=e,Y.clearScrollMemory=z,Y.maxScroll=function(t,e){return It(t,e?Le:Ne)},Y.getScrollFunc=function(t,e){return Pt(Ot(t),e?Le:Ne)},Y.getById=function(t){return je[t]},Y.getAll=function(){return ze.slice(0)},Y.isScrolling=function(){return!!ge},Y.snapDirectional=zt,Y.addEventListener=function(t,e){t=L[t]||(L[t]=[]);~t.indexOf(e)||t.push(e)},Y.removeEventListener=function(t,e){t=L[t],e=t&&t.indexOf(e);0<=e&&t.splice(e,1)},Y.batch=function(t,e){var i,r=[],n={},a=e.interval||.016,o=e.batchMax||1e9;for(i in e)n[i]="on"===i.substr(0,2)&&Te(e[i])&&"onRefreshInit"!==i?function(t){var e=[],i=[],r=$t.delayedCall(a,function(){t(e,i),e=[],i=[]}).pause();return function(t){e.length||r.restart(!0),e.push(t.trigger),i.push(t),o<=e.length&&r.progress(1)}}(e[i]):e[i];return Te(o)&&(o=o(),Ue(Y,"refresh",function(){return o=e.batchMax()})),ne(t).forEach(function(t){var e={};for(i in n)e[i]=n[i];e.trigger=t,r.push(Y.create(e))}),r},Y.sort=function(t){return ze.sort(t||function(t,e){return-1e6*(t.vars.refreshPriority||0)+t.start-(e.start+-1e6*(e.vars.refreshPriority||0))})},n()&&$t.registerPlugin(Y),t.ScrollTrigger=Y,t.default=Y,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===i?"undefined":q(i))&&void 0!==e?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n((r=r||self).window=r.window||{})},{}],"gsap/dist/SplitText":[function(t,e,i){"use strict";function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,n;n=function(t){var x=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function z(t){return i.getComputedStyle(t)}function u(t,e){var i=~(t=void 0===t?"":t).indexOf("++"),r=1;return i&&(t=t.split("++").join("")),function(){return"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(i?r++:"")+"'>":">")}}function j(t,e){for(var i=e.length;-1<--i;)t.push(e[i])}function H(t,e,i){for(var r;t&&t!==e;){if(r=t._next||t.nextSibling)return r.textContent.charAt(0)===i;t=t.parentNode||t._parent}}function V(t){for(var e,i=c(t.childNodes),r=i.length,n=0;n<r;n++)(e=i[n])._isSplit?V(e):n&&e.previousSibling&&3===e.previousSibling.nodeType?(e.previousSibling.nodeValue+=(3===e.nodeType?e:e.firstChild).nodeValue,t.removeChild(e)):3!==e.nodeType&&(t.insertBefore(e.firstChild,e),t.removeChild(e))}function X(t,e){return parseFloat(e[t])||0}function h(t,e,i,r){var n,a,o,s,u,h,l,c=e.tag||(e.span?"span":"div"),p=~(e.type||e.split||"chars,words,lines").indexOf("chars"),d=Y(e),f=e.wordDelimiter||" ",m=" "!==f?"":d?"&#173; ":" ",v="</"+c+">",g=1,_=e.specialChars?"function"==typeof e.specialChars?e.specialChars:E:null,y=W.createElement("div");for((d=t.parentNode).insertBefore(y,t),y.textContent=t.nodeValue,d.removeChild(t),y=-1!==(n=function t(e){var i=e.nodeType,r="";if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=t(e)}else if(3===i||4===i)return e.nodeValue;return r}(t=y)).indexOf("<"),!1!==e.reduceWhiteSpace&&(n=n.replace(T," ").replace(b,"")),u=(n=y?n.split("<").join("{{LT}}"):n).length,a=(" "===n.charAt(0)?m:"")+i(),o=0;o<u;o++)if(h=n.charAt(o),_&&(l=_(n.substr(o),e.specialChars)))h=n.substr(o,l||1),a+=p&&" "!==h?r()+h+"</"+c+">":h,o+=l-1;else if(h===f&&n.charAt(o-1)!==f&&o){for(a+=g?v:"",g=0;n.charAt(o+1)===f;)a+=m,o++;o===u-1?a+=m:")"!==n.charAt(o+1)&&(a+=m+i(),g=1)}else"{"===h&&"{{LT}}"===n.substr(o,6)?(a+=p?r()+"{{LT}}</"+c+">":"{{LT}}",o+=5):55296<=h.charCodeAt(0)&&h.charCodeAt(0)<=56319||65024<=n.charCodeAt(o+1)&&n.charCodeAt(o+1)<=65039?(s=((n.substr(o,12).split(x)||[])[1]||"").length||2,a+=p&&" "!==h?r()+n.substr(o,s)+"</"+c+">":n.substr(o,s),o+=s-1):a+=p&&" "!==h?r()+h+"</"+c+">":h;t.outerHTML=a+(g?v:""),y&&q(d,"{{LT}}","<")}function l(t,e,i,r){var n,a,o=c(t.childNodes),s=o.length,u=Y(e);if(3!==t.nodeType||1<s){for(e.absolute=!1,n=0;n<s;n++)(a=o[n])._next=a._isFirst=a._parent=a._wordEnd=null,3===a.nodeType&&!/\S+/.test(a.nodeValue)||(u&&3!==a.nodeType&&"inline"===z(a).display&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,l(a,e,i,r));return e.absolute=u,void(t._isSplit=!0)}h(t,e,i,r)}var W,i,r,e,b=/(?:\r|\n|\t\t)/g,T=/(?:\s\s+)/g,n=Array.isArray,a=[].slice,c=function(t,e){var i;return n(t)?t:"string"===(i=s(t))&&!e&&t?a.call(W.querySelectorAll(t),0):t&&"object"===i&&"length"in t?a.call(t,0):t?[t]:[]},Y=function(t){return"absolute"===t.position||!0===t.absolute},E=function(t,e){for(var i,r=e.length;-1<--r;)if(i=e[r],t.substr(0,i.length)===i)return i.length},q=function t(e,i,r){var n=e.nodeType;if(1===n||9===n||11===n)for(e=e.firstChild;e;e=e.nextSibling)t(e,i,r);else 3!==n&&4!==n||(e.nodeValue=e.nodeValue.split(i).join(r))},e=((e=o.prototype).split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var e,i,r,n=this.elements.length,a=t.tag||(t.span?"span":"div"),o=u(t.wordsClass,a),s=u(t.charsClass,a);-1<--n;)r=this.elements[n],this._originals[n]=r.innerHTML,e=r.clientHeight,i=r.clientWidth,l(r,t,o,s),function(t,e,i,r,n,a,o){var s,u,h,l,c,p,d,f,m,v,g,_,y=z(t),x=X("paddingLeft",y),b=-999,T=X("borderBottomWidth",y)+X("borderTopWidth",y),E=X("borderLeftWidth",y)+X("borderRightWidth",y),S=X("paddingTop",y)+X("paddingBottom",y),M=X("paddingLeft",y)+X("paddingRight",y),A=X("fontSize",y)*(e.lineThreshold||.2),w=y.textAlign,D=[],R=[],O=[],P=e.wordDelimiter||" ",C=e.tag||(e.span?"span":"div"),I=e.type||e.split||"chars,words,lines",L=n&&~I.indexOf("lines")?[]:null,N=~I.indexOf("words"),F=~I.indexOf("chars"),B=Y(e),U=e.linesClass,G=~(U||"").indexOf("++"),k=[],e="flex"===y.display,y=t.style.display;for(G&&(U=U.split("++").join("")),e&&(t.style.display="block"),h=(u=t.getElementsByTagName("*")).length,c=[],s=0;s<h;s++)c[s]=u[s];if(L||B)for(s=0;s<h;s++)((p=(l=c[s]).parentNode===t)||B||F&&!N)&&(_=l.offsetTop,L&&p&&Math.abs(_-b)>A&&("BR"!==l.nodeName||0===s)&&(L.push(d=[]),b=_),B&&(l._x=l.offsetLeft,l._y=_,l._w=l.offsetWidth,l._h=l.offsetHeight),L&&((l._isSplit&&p||!F&&p||N&&p||!N&&l.parentNode.parentNode===t&&!l.parentNode._isSplit)&&(d.push(l),l._x-=x,H(l,t,P)&&(l._wordEnd=!0)),"BR"===l.nodeName&&(l.nextSibling&&"BR"===l.nextSibling.nodeName||0===s)&&L.push([])));for(s=0;s<h;s++)if(p=(l=c[s]).parentNode===t,"BR"!==l.nodeName)if(B&&(m=l.style,N||p||(l._x+=l.parentNode._x,l._y+=l.parentNode._y),m.left=l._x+"px",m.top=l._y+"px",m.position="absolute",m.display="block",m.width=l._w+1+"px",m.height=l._h+"px"),!N&&F)if(l._isSplit)for(l._next=u=l.nextSibling,l.parentNode.appendChild(l);u&&3===u.nodeType&&" "===u.textContent;)l._next=u.nextSibling,l.parentNode.appendChild(u),u=u.nextSibling;else l.parentNode._isSplit?(l._parent=l.parentNode,!l.previousSibling&&l.firstChild&&(l.firstChild._isFirst=!0),l.nextSibling&&" "===l.nextSibling.textContent&&!l.nextSibling.nextSibling&&k.push(l.nextSibling),l._next=l.nextSibling&&l.nextSibling._isFirst?null:l.nextSibling,l.parentNode.removeChild(l),c.splice(s--,1),h--):p||(_=!l.nextSibling&&H(l.parentNode,t,P),l.parentNode._parent&&l.parentNode._parent.appendChild(l),_&&l.parentNode.appendChild(W.createTextNode(" ")),"span"===C&&(l.style.display="inline"),D.push(l));else l.parentNode._isSplit&&!l._isSplit&&""!==l.innerHTML?R.push(l):F&&!l._isSplit&&("span"===C&&(l.style.display="inline"),D.push(l));else L||B?(l.parentNode&&l.parentNode.removeChild(l),c.splice(s--,1),h--):N||t.appendChild(l);for(s=k.length;-1<--s;)k[s].parentNode.removeChild(k[s]);if(L){for(B&&(v=W.createElement(C),t.appendChild(v),g=v.offsetWidth+"px",_=v.offsetParent===t?0:t.offsetLeft,t.removeChild(v)),m=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(f=" "===P&&(!B||!N&&!F),s=0;s<L.length;s++){for(d=L[s],(v=W.createElement(C)).style.cssText="display:block;text-align:"+w+";position:"+(B?"absolute;":"relative;"),U&&(v.className=U+(G?s+1:"")),O.push(v),h=d.length,u=0;u<h;u++)"BR"!==d[u].nodeName&&(l=d[u],v.appendChild(l),f&&l._wordEnd&&v.appendChild(W.createTextNode(" ")),B&&(0===u&&(v.style.top=l._y+"px",v.style.left=x+_+"px"),l.style.top="0px",_&&(l.style.left=l._x-_+"px")));0===h?v.innerHTML="&nbsp;":N||F||(V(v),q(v,String.fromCharCode(160)," ")),B&&(v.style.width=g,v.style.height=l._h+"px"),t.appendChild(v)}t.style.cssText=m}B&&(o>t.clientHeight&&(t.style.height=o-S+"px",t.clientHeight<o&&(t.style.height=o+T+"px")),a>t.clientWidth&&(t.style.width=a-M+"px",t.clientWidth<a&&(t.style.width=a+E+"px"))),e&&(y?t.style.display=y:t.style.removeProperty("display")),j(i,D),N&&j(r,R),j(n,O)}(r,t,this.chars,this.words,this.lines,i,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},e.revert=function(){var i=this._originals;if(!i)throw"revert() call wasn't scoped properly.";return this.elements.forEach(function(t,e){return t.innerHTML=i[e]}),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},o.create=function(t,e){return new o(t,e)},o);function o(t,e){r||(W=document,i=window,r=1),this.elements=c(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},this.split(e)}e.version="3.8.0",t.SplitText=e,t.default=e,Object.defineProperty(t,"__esModule",{value:!0})},"object"===((r=void 0)===i?"undefined":s(i))&&void 0!==e?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n((r=r||self).window=r.window||{})},{}],gsap:[function(t,e,i){"use strict";function Hr(t){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,n;n=function(t){function i(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return!1!==t}function e(){return"undefined"!=typeof window}function M(t){return Rt(t)||Dt(t)}function r(t){return(Ht=D(t,jt))&&yi}function A(t,e){return!e&&void 0}function a(t,e){return t&&(jt[t]=e)&&Ht&&(Ht[t]=e)||jt}function w(){return 0}function d(t,e){return(t=t.split(",")).forEach(e)||t}function n(t,e,i,r){Wt.length&&ne(),t.render(e,i,r),Wt.length&&ne()}function o(t){return t}function F(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function s(t,e){for(var i in e)i in t||"duration"===i||"ease"===i||(t[i]=e[i])}function D(t,e){for(var i in e)t[i]=e[i];return t}function u(t,e){for(var i in e)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=Ct(e[i])?u(t[i]||(t[i]={}),e[i]):e[i]);return t}function B(t,e){var i,r={};for(i in t)i in e||(r[i]=t[i]);return r}function R(t){var e=t.parent||J,i=t.keyframes?s:F;if(N(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t}function U(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function O(t){return!t||t._ts&&O(t.parent)}function h(t){return t._repeat?b(t._tTime,t=t.duration()+t._rDelay)*t:0}function b(t,e){return e=Math.floor(t/=e),t&&e===t?e-1:e}function l(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function c(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=l(t.rawTime(),e),(!e._dur||x(0,e.totalDuration(),i)-e._tTime>bt)&&e.render(i,!0)),se(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)0<=i.rawTime()&&i.totalTime(i._tTime),i=i._dp;t._zTime=-bt}}function P(t,e,i,r){return e.parent&&U(e),e._start=re((Ot(i)?i:i||t!==J?m(t,i,e):t._time)+e._delay),e._end=re(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,i,r,n){void 0===i&&(i="_first");var a,o=t[r=void 0===r?"_last":r];if(n)for(a=e[n];o&&o[n]>a;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),_(e)||(t._recent=e),r||c(t,e),t}function C(t,e){return(jt.ScrollTrigger||Vt("scrollTrigger",e))&&jt.ScrollTrigger.create(e,t)}function v(t,e,i,r){return Ze(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&et!==De.frame?(Wt.push(t),t._lazy=[e,r]):void 0:1}function g(t){return(t=t.parent)&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||g(t))}function _(t){return"isFromStart"===(t=t.data)||"isStart"===t}function f(t,e,i,r){var n=t._repeat,a=re(e)||0;return(e=t._tTime/t._tDur)&&!r&&(t._time*=a/t._dur),t._dur=a,t._tDur=n?n<0?1e10:re(a*(n+1)+t._rDelay*n):a,e&&!r?he(t,t._tTime=t._tDur*e):t.parent&&ue(t),i||se(t.parent,t),t}function p(t){return t instanceof Ve?se(t):f(t,t._dur)}function m(t,e,i){var r,n,a,o=t.labels,s=t._recent||le,u=t.duration()>=xt?s.endTime(!1):t._dur;return Dt(e)&&(isNaN(e)||e in o)?(n=e.charAt(0),a="%"===e.substr(-1),r=e.indexOf("="),"<"===n||">"===n?(0<=r&&(e=e.replace(/=/,"")),("<"===n?s._start:s.endTime(0<=s._repeat))+(parseFloat(e.substr(1))||0)*(a?(r<0?s:i).totalDuration()/100:1)):r<0?(e in o||(o[e]=u),o[e]):(n=parseFloat(e.charAt(r-1)+e.substr(r+1)),a&&i&&(n=n/100*(Lt(i)?i[0]:i).totalDuration()),1<r?m(t,e.substr(0,r-1),i)+n:u+n)):null==e?u:+e}function y(t,e,i){var r,n,a=Ot(e[1]),o=(a?2:1)+(t<2?0:1),s=e[o];if(a&&(s.duration=e[1]),s.parent=i,t){for(r=s,n=i;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=N(n.vars.inherit)&&n.parent;s.immediateRender=N(r.immediateRender),t<2?s.runBackwards=1:s.startAt=e[o-1]}return new $e(e[0],s,e[1+o])}function x(t,e,i){return i<t?t:e<i?e:i}function I(t){if(Rt(t))return t;var d=Ct(t)?t:{each:t},f=Fe(d.ease),m=d.from||0,v=parseFloat(d.base)||0,g={},t=0<m&&m<1,_=isNaN(m)||t,y=d.axis,x=m,b=m;return Dt(m)?x=b={center:.5,edges:.5,end:1}[m]||0:!t&&_&&(x=m[0],b=m[1]),function(t,e,i){var r,n,a,o,s,u,h,l,c=(i||d).length,p=g[c];if(!p){if(!(l="auto"===d.grid?0:(d.grid||[1,xt])[1])){for(u=-xt;u<(u=i[l++].getBoundingClientRect().left)&&l<c;);l--}for(p=g[c]=[],r=_?Math.min(l,c)*x-.5:m%l,n=_?c*b/l-.5:m/l|0,h=xt,s=u=0;s<c;s++)a=s%l-r,o=n-(s/l|0),p[s]=o=y?Math.abs("y"===y?o:a):Mt(a*a+o*o),u<o&&(u=o),o<h&&(h=o);"random"===m&&ve(p),p.max=u-h,p.min=h,p.v=c=(parseFloat(d.amount)||parseFloat(d.each)*(c<l?c-1:y?"y"===y?c/l:l:Math.max(l,c/l))||0)*("edges"===m?-1:1),p.b=c<0?v-c:v,p.u=pe(d.amount||d.each)||0,f=f&&c<0?Ne(f):f}return c=(p[t]-p.min)/p.max||0,re(p.b+(f?f(c):c)*p.v)+p.u}}function T(i){var r=Math.pow(10,((i+"").split(".")[1]||"").length);return function(t){var e=Math.round(parseFloat(t)/i)*i*r;return(e-e%1)/r+(Ot(t)?0:pe(t))}}function E(t,e,i,r){return ce(Lt(t)?!e:!0===i?!!(i=0):!r,function(){return Lt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*r)/r})}function L(e,i,t){return ce(t,function(t){return e[~~i(t)]})}function G(e,t,i,r,n){var a=t-e,o=r-i;return ce(n,function(t){return i+((t-e)/a*o||0)})}function k(t,e,i){var r,n,a,o=t.labels,s=xt;for(r in o)(n=o[r]-e)<0==!!i&&n&&s>(n=Math.abs(n))&&(a=r,s=n);return a}function z(t,e,i){var r=t.vars,n=r[e];return n&&(e=r[e+"Params"],t=r.callbackScope||t,i&&Wt.length&&ne(),e?n.apply(t,e):n.call(t))}function j(t){return U(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&z(t,"onInterrupt"),t}function H(t,e,i){return(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*Te+.5|0}function V(t,e,i){var r,n,a,o,s="",u=(t+s).match(Ae),h=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map(function(t){return(t=Se(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),i&&(a=Me(t),(r=i.c).join(s)!==a.c.join(s)))for(o=(n=t.replace(Ae,"1").split(Bt)).length-1;l<o;l++)s+=n[l]+(~r.indexOf(l)?u.shift()||h+"0,0,0,0)":(a.length?a:u.length?u:i).shift());if(!n)for(o=(n=t.split(Ae)).length-1;l<o;l++)s+=n[l]+u[l];return s+n[o]}function X(t){var e=t.join(" ");if(Ae.lastIndex=0,Ae.test(e))return e=we.test(e),t[1]=V(t[1],e),t[0]=V(t[0],e,Me(t[1])),!0}function W(t,e){for(var i,r=t._first;r;)r instanceof Ve?W(r,e):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===e||(r.timeline?W(r.timeline,e):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=e)),r=r._next}function Y(t,e,i,r){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,a={easeIn:e,easeOut:i,easeInOut:r};return d(t,function(t){for(var e in Oe[t]=jt[t]=a,Oe[n=t.toLowerCase()]=i,a)Oe[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Oe[t+"."+e]=a[e]}),1}function q(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}var Z,J,K,Q,$,tt,et,it,rt,nt,at,ot,st,ut,ht,lt,ct,pt,dt,ft,mt,vt,gt,_t={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},yt={duration:.5,overwrite:!1,delay:0},xt=1e8,bt=1/xt,Tt=2*Math.PI,Et=Tt/4,St=0,Mt=Math.sqrt,At=Math.cos,wt=Math.sin,Dt=function(t){return"string"==typeof t},Rt=function(t){return"function"==typeof t},Ot=function(t){return"number"==typeof t},Pt=function(t){return void 0===t},Ct=function(t){return"object"===Hr(t)},It="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Lt=Array.isArray,Nt=/(?:-?\.?\d|\.)+/gi,Ft=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Bt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ut=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Gt=/[+-]=-?[.\d]+/,kt=/[^,'"\[\]\s]+/gi,zt=/[\d.+\-=]+(?:e[-+]\d*)*/i,jt={},Ht={},Vt=function(t,e){},Xt={},Wt=[],Yt={},qt={},Zt={},Jt=30,Kt=[],Qt="",$t=function(t){var e,i,r=t[0];if(Ct(r)||Rt(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(i=Kt.length;i--&&!Kt[i].targetTest(r););e=Kt[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new ze(t[i],e)))||t.splice(i,1);return t},te=function(t){return t._gsap||$t(me(t))[0]._gsap},ee=function(t,e,i){return(i=t[e])&&Rt(i)?t[e]():Pt(i)&&t.getAttribute&&t.getAttribute(e)||i},ie=function(t){return Math.round(1e5*t)/1e5||0},re=function(t){return Math.round(1e7*t)/1e7||0},ne=function(){var t,e,i=Wt.length,r=Wt.slice(0);for(Yt={},t=Wt.length=0;t<i;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},ae=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(kt).length<2?e:Dt(t)?t.trim():t},oe=function(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var n=e._prev,a=e._next;n?n._next=a:t[i]===e&&(t[i]=a),a?a._prev=n:t[r]===e&&(t[r]=n),e._next=e._prev=e.parent=null},se=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},ue=function(t){return t._end=re(t._start+(t._tDur/Math.abs(t._ts||t._rts||bt)||0))},he=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=re(i._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),ue(t),i._dirty||se(i,t)),t},le={_start:0,endTime:w,totalDuration:w},ce=function(t,e){return t||0===t?e(t):e},pe=function(t){if("string"!=typeof t)return"";var e=zt.exec(t);return e?t.substr(e.index+e[0].length):""},de=[].slice,fe=function(t,e){return t&&Ct(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Ct(t[0]))&&!t.nodeType&&t!==K},me=function(t,e,i){return!Dt(t)||i||!Q&&Re()?Lt(t)?(r=i,void 0===n&&(n=[]),t.forEach(function(t){return Dt(t)&&!r||fe(t,1)?n.push.apply(n,me(t)):n.push(t)})||n):fe(t)?de.call(t,0):t?[t]:[]:de.call((e||$).querySelectorAll(t),0);var r,n},ve=function(t){return t.sort(function(){return.5-Math.random()})},ge=function(u,t){var h,l,e=Lt(u);return!e&&Ct(u)&&(h=e=u.radius||xt,u.values?(u=me(u.values),(l=!Ot(u[0]))&&(h*=h)):u=T(u.increment)),ce(t,e?Rt(u)?function(t){return l=u(t),Math.abs(l-t)<=h?l:t}:function(t){for(var e,i,r=parseFloat(l?t.x:t),n=parseFloat(l?t.y:0),a=xt,o=0,s=u.length;s--;)(e=l?(e=u[s].x-r)*e+(i=u[s].y-n)*i:Math.abs(u[s]-r))<a&&(a=e,o=s);return o=!h||a<=h?u[o]:t,l||o===t||Ot(t)?o:o+pe(t)}:T(u))},_e=function t(e,i,r){var n=i-e;return Lt(e)?L(e,t(0,e.length),i):ce(r,function(t){return(n+(t-e)%n)%n+e})},ye=function t(e,i,r){var n=i-e,a=2*n;return Lt(e)?L(e,t(0,e.length-1),i):ce(r,function(t){return e+(n<(t=(a+(t-e)%a)%a||0)?a-t:t)})},xe=function(t){for(var e,i,r,n,a=0,o="";~(e=t.indexOf("random(",a));)r=t.indexOf(")",e),n="["===t.charAt(e+7),i=t.substr(e+7,r-e-7).match(n?kt:Nt),o+=t.substr(a,e-a)+E(n?i:+i[0],n?0:+i[1],+i[2]||1e-5),a=r+1;return o+t.substr(a,t.length-a)},be=function t(e,i,r,n){var a=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!a){var o,s,u,h,l,c=Dt(e),p={};if(!0===r&&(n=1)&&(r=null),c)e={p:e},i={p:i};else if(Lt(e)&&!Lt(i)){for(u=[],h=e.length,l=h-2,s=1;s<h;s++)u.push(t(e[s-1],e[s]));h--,a=function(t){t*=h;var e=Math.min(l,~~t);return u[e](t-e)},r=i}else n||(e=D(Lt(e)?[]:{},e));if(!u){for(o in i)Xe.call(p,e,o,"get",i[o]);a=function(t){return ei(t,p),c?e.p:e}}}return ce(r,a)},Te=255,Ee={aqua:[0,Te,Te],lime:[0,Te,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Te],navy:[0,0,128],white:[Te,Te,Te],olive:[128,128,0],yellow:[Te,Te,0],orange:[Te,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Te,0,0],pink:[Te,192,203],cyan:[0,Te,Te],transparent:[Te,Te,Te,0]},Se=function(t,e,i){var r,n,a,o,s,u,h,l=t?Ot(t)?[t>>16,t>>8&Te,t&Te]:0:Ee.black;if(!l){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ee[t])l=Ee[t];else if("#"===t.charAt(0)){if(9===(t=t.length<6?"#"+(r=t.charAt(1))+r+(n=t.charAt(2))+n+(a=t.charAt(3))+a+(5===t.length?t.charAt(4)+t.charAt(4):""):t).length)return[(l=parseInt(t.substr(1,6),16))>>16,l>>8&Te,l&Te,parseInt(t.substr(7),16)/255];l=[(t=parseInt(t.substr(1),16))>>16,t>>8&Te,t&Te]}else if("hsl"===t.substr(0,3))if(l=h=t.match(Nt),e){if(~t.indexOf("="))return l=t.match(Ft),i&&l.length<4&&(l[3]=1),l}else o=+l[0]%360/360,s=+l[1]/100,r=2*(u=+l[2]/100)-(n=u<=.5?u*(s+1):u+s-u*s),3<l.length&&(l[3]*=1),l[0]=H(o+1/3,r,n),l[1]=H(o,r,n),l[2]=H(o-1/3,r,n);else l=t.match(Nt)||Ee.transparent;l=l.map(Number)}return e&&!h&&(r=l[0]/Te,n=l[1]/Te,a=l[2]/Te,u=((t=Math.max(r,n,a))+(e=Math.min(r,n,a)))/2,t===e?o=s=0:(h=t-e,s=.5<u?h/(2-t-e):h/(t+e),o=t===r?(n-a)/h+(n<a?6:0):t===n?(a-r)/h+2:(r-n)/h+4,o*=60),l[0]=~~(o+.5),l[1]=~~(100*s+.5),l[2]=~~(100*u+.5)),i&&l.length<4&&(l[3]=1),l},Me=function(t){var e=[],i=[],r=-1;return t.split(Ae).forEach(function(t){t=t.match(Bt)||[];e.push.apply(e,t),i.push(r+=t.length+1)}),e.c=i,e},Ae=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Ee)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),we=/hsl[a]?\(/,De=(ut=Date.now,ht=500,lt=33,ct=ut(),pt=ct,ft=dt=1e3/240,vt={time:0,frame:0,tick:function(){Ge(!0)},deltaRatio:function(t){return ot/(1e3/(t||60))},wake:function(){tt&&(!Q&&e()&&(K=Q=window,$=K.document||{},jt.gsap=yi,(K.gsapVersions||(K.gsapVersions=[])).push(yi.version),r(Ht||K.GreenSockGlobals||!K.gsap&&K||{}),at=K.requestAnimationFrame),rt&&vt.sleep(),nt=at||function(t){return setTimeout(t,ft-1e3*vt.time+1|0)},it=1,Ge(2))},sleep:function(){(at?K.cancelAnimationFrame:clearTimeout)(rt),it=0,nt=w},lagSmoothing:function(t,e){ht=t||1/bt,lt=Math.min(e,ht,0)},fps:function(t){dt=1e3/(t||240),ft=1e3*vt.time+dt},add:function(t){mt.indexOf(t)<0&&mt.push(t),Re()},remove:function(t){~(t=mt.indexOf(t))&&mt.splice(t,1)&&t<=st&&st--},_listeners:mt=[]}),Re=function(){return!it&&De.wake()},Oe={},Pe=/^[\d.\-M][\d.\-,\s]/,Ce=/["']/g,Ie=function(t){for(var e,i,r,n={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,u=a.length;s<u;s++)i=a[s],e=s!==u-1?i.lastIndexOf(","):i.length,r=i.substr(0,e),n[o]=isNaN(r)?r.replace(Ce,"").trim():+r,o=i.substr(e+1).trim();return n},Le=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)},Ne=function(e){return function(t){return 1-e(1-t)}},Fe=function(t,e){return t&&(Rt(t)?t:Oe[t]||(r=((i=t)+"").split("("),(t=Oe[r[0]])&&1<r.length&&t.config?t.config.apply(null,~i.indexOf("{")?[Ie(r[1])]:Le(i).split(",").map(ae)):Oe._CE&&Pe.test(i)?Oe._CE("",i):t))||e;var i,r},Be=function i(r,t,e){function n(t){return 1===t?1:a*Math.pow(2,-10*t)*wt((t-o)*s)+1}var a=1<=t?t:1,o=(s=(e||(r?.3:.45))/(t<1?t:1))/Tt*(Math.asin(1/a)||0),t="out"===r?n:"in"===r?function(t){return 1-n(1-t)}:q(n),s=Tt/s;return t.config=function(t,e){return i(r,t,e)},t},Ue=function e(i,r){void 0===r&&(r=1.70158);function n(t){return t?--t*t*((r+1)*t+r)+1:0}var t="out"===i?n:"in"===i?function(t){return 1-n(1-t)}:q(n);return t.config=function(t){return e(i,t)},t};function Ge(t){var e,i,r,n=ut()-pt,a=!0===t;if(ht<n&&(ct+=n-lt),(0<(n=(i=(pt+=n)-ct)-ft)||a)&&(r=++vt.frame,ot=i-1e3*vt.time,vt.time=i/=1e3,ft+=n+(dt<=n?4:dt-n),e=1),a||(rt=nt(Ge)),e)for(st=0;st<mt.length;st++)mt[st](i,ot,r,t)}function ke(t){return t<1/2.75?gt*t*t:t<1/2.75*2?gt*Math.pow(t-1.5/2.75,2)+.75:t<1/2.75*2.5?gt*(t-=2.25/2.75)*t+.9375:gt*Math.pow(t-2.625/2.75,2)+.984375}d("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var i=e<5?e+1:e;Y(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},function(t){return 1-Math.pow(1-t,i)},function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2})}),Oe.Linear.easeNone=Oe.none=Oe.Linear.easeIn,Y("Elastic",Be("in"),Be("out"),Be()),gt=7.5625,Y("Bounce",function(t){return 1-ke(1-t)},ke),Y("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),Y("Circ",function(t){return-(Mt(1-t*t)-1)}),Y("Sine",function(t){return 1===t?1:1-At(t*Et)}),Y("Back",Ue("in"),Ue("out"),Ue()),Oe.SteppedEase=Oe.steps=jt.SteppedEase={config:function(t,e){var i=1/(t=void 0===t?1:t),r=t+(e?0:1),n=e?1:0,a=1-bt;return function(t){return((r*x(0,a,t)|0)+n)*i}}},yt.ease=Oe["quad.out"],d("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Qt+=t+","+t+"Params,"});var ze=function(t,e){this.id=St++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:ee,this.set=e?e.getSetter:li},je=((ur=He.prototype).delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},ur.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},ur.totalDuration=function(t){return arguments.length?(this._dirty=0,f(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},ur.totalTime=function(t,e){if(Re(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(he(this,t),!i._dp||i.parent||c(i,this);i&&i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&P(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===bt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),n(this,t,e)),this},ur.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+h(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},ur.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},ur.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+h(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},ur.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?b(this._tTime,i)+1:1},ur.timeScale=function(t){if(!arguments.length)return this._rts===-bt?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?l(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-bt?0:this._rts,function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent}(this.totalTime(x(-this._delay,this._tDur,e),!0)),ue(this),this},ur.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Re(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==bt&&(this._tTime-=bt)))),this):this._ps},ur.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||P(e,this,t-this._delay),this}return this._start},ur.endTime=function(t){return this._start+(N(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},ur.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?l(e.rawTime(t),this):this._tTime:this._tTime},ur.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},ur.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,p(this)):-2===this._repeat?1/0:this._repeat},ur.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,p(this),e?this.time(e):this}return this._rDelay},ur.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},ur.seek=function(t,e){return this.totalTime(m(this,t),N(e))},ur.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,N(e))},ur.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},ur.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},ur.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},ur.resume=function(){return this.paused(!1)},ur.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-bt:0)),this):this._rts<0},ur.invalidate=function(){return this._initted=this._act=0,this._zTime=-bt,this},ur.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-bt))},ur.eventCallback=function(t,e,i){var r=this.vars;return 1<arguments.length?(e?(r[t]=e,i&&(r[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},ur.then=function(r){var n=this;return new Promise(function(e){function t(){var t=n.then;n.then=null,Rt(i)&&(i=i(n))&&(i.then||i===n)&&(n.then=t),e(i),n.then=t}var i=Rt(r)?r:o;n._initted&&1===n.totalProgress()&&0<=n._ts||!n._tTime&&n._ts<0?t():n._prom=t})},ur.kill=function(){j(this)},He);function He(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,f(this,+t.duration,1,1),this.data=t.data,it||De.wake()}F(je.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-bt,_prom:0,_ps:!1,_rts:1});var Ve=function(r){function t(t,e){var i;return(i=r.call(this,t=void 0===t?{}:t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=N(t.sortChildren),J&&P(t.parent||J,S(i),e),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&C(S(i),t.scrollTrigger),i}i(t,r);var e=t.prototype;return e.to=function(t,e,i){return y(0,arguments,this),this},e.from=function(t,e,i){return y(1,arguments,this),this},e.fromTo=function(t,e,i,r){return y(2,arguments,this),this},e.set=function(t,e,i){return e.duration=0,e.parent=this,R(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new $e(t,e,m(this,i),1),this},e.call=function(t,e,i){return P(this,$e.delayedCall(0,t,e),i)},e.staggerTo=function(t,e,i,r,n,a,o){return i.duration=e,i.stagger=i.stagger||r,i.onComplete=a,i.onCompleteParams=o,i.parent=this,new $e(t,i,m(this,n)),this},e.staggerFrom=function(t,e,i,r,n,a,o){return i.runBackwards=1,R(i).immediateRender=N(i.immediateRender),this.staggerTo(t,e,i,r,n,a,o)},e.staggerFromTo=function(t,e,i,r,n,a,o,s){return r.startAt=i,R(r).immediateRender=N(r.immediateRender),this.staggerTo(t,e,r,n,a,o,s)},e.render=function(t,e,i){var r,n,a,o,s,u,h,l,c,p,d=this._time,f=this._dirty?this.totalDuration():this._tDur,m=this._dur,v=t<=0?0:re(t),g=this._zTime<0!=t<0&&(this._initted||!m);if((v=this!==J&&f<v&&0<=t?f:v)!==this._tTime||i||g){if(d!==this._time&&m&&(v+=this._time-d,t+=this._time-d),r=v,l=this._start,s=!(h=this._ts),g&&(m||(d=this._zTime),!t&&e||(this._zTime=t)),this._repeat){if(_=this._yoyo,o=m+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,i);if(r=re(v%o),v===f?(a=this._repeat,r=m):((a=~~(v/o))&&a===v/o&&(r=m,a--),m<r&&(r=m)),c=b(this._tTime,o),_&&1&a&&(r=m-r,p=1),a!==(c=!d&&this._tTime&&c!==a?a:c)&&!this._lock){var g=_&&1&c,_=g===(_&&1&a),d=(g=a<c?!g:g)?0:m;if(this._lock=1,this.render(d||(p?0:re(a*o)),e,!m)._lock=0,this._tTime=v,!e&&this.parent&&z(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),d&&d!==this._time||s!=!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(m=this._dur,f=this._tDur,_&&(this._lock=2,this.render(d=g?m:-1e-4,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!s)return this;W(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(t,e,i){var r;if(e<i)for(r=t._first;r&&r._start<=i;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,re(d),re(r)))&&(v-=r-(r=u._start)),this._tTime=v,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,d=0),!d&&r&&!e&&(z(this,"onStart"),this._tTime!==v))return this;if(d<=r&&0<=t)for(y=this._first;y;){if(n=y._next,(y._act||r>=y._start)&&y._ts&&u!==y){if(y.parent!==this)return this.render(t,e,i);if(y.render(0<y._ts?(r-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(r-y._start)*y._ts,e,i),r!==this._time||!this._ts&&!s){u=0,n&&(v+=this._zTime=-bt);break}}y=n}else for(var y=this._last,x=t<0?t:r;y;){if(n=y._prev,(y._act||x<=y._end)&&y._ts&&u!==y){if(y.parent!==this)return this.render(t,e,i);if(y.render(0<y._ts?(x-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(x-y._start)*y._ts,e,i),r!==this._time||!this._ts&&!s){u=0,n&&(v+=this._zTime=x?-bt:bt);break}}y=n}if(u&&!e&&(this.pause(),u.render(d<=r?0:-bt)._zTime=d<=r?1:-1,this._ts))return this._start=l,ue(this),this.render(t,e,i);this._onUpdate&&!e&&z(this,"onUpdate",!0),(v===f&&f>=this.totalDuration()||!v&&d)&&(l!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||(!t&&m||!(v===f&&0<this._ts||!v&&this._ts<0)||U(this,1),e||t<0&&!d||!v&&!d&&f||(z(this,v===f&&0<=t?"onComplete":"onReverseComplete",!0),!this._prom||v<f&&0<this.timeScale()||this._prom())))}return this},e.add=function(t,e){var i=this;if(Ot(e)||(e=m(this,e,t)),!(t instanceof je)){if(Lt(t))return t.forEach(function(t){return i.add(t,e)}),this;if(Dt(t))return this.addLabel(t,e);if(!Rt(t))return this;t=$e.delayedCall(0,t)}return this!==t?P(this,t,e):this},e.getChildren=function(t,e,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=-xt);for(var n=[],a=this._first;a;)a._start>=r&&(a instanceof $e?e&&n.push(a):(i&&n.push(a),t&&n.push.apply(n,a.getChildren(!0,e,i)))),a=a._next;return n},e.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},e.remove=function(t){return Dt(t)?this.removeLabel(t):Rt(t)?this.killTweensOf(t):(oe(this,t),t===this._recent&&(this._recent=this._last),se(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=re(De.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),r.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(t,e){return this.labels[t]=m(this,e),this},e.removeLabel=function(t){return delete this.labels[t],this},e.addPause=function(t,e,i){i=$e.delayedCall(0,e||w,i);return i.data="isPause",this._hasPause=1,P(this,i,m(this,t))},e.removePause=function(t){var e=this._first;for(t=m(this,t);e;)e._start===t&&"isPause"===e.data&&U(e),e=e._next},e.killTweensOf=function(t,e,i){for(var r=this.getTweensOf(t,i),n=r.length;n--;)Ye!==r[n]&&r[n].kill(t,e);return this},e.getTweensOf=function(t,e){for(var i,r=[],n=me(t),a=this._first,o=Ot(e);a;)a instanceof $e?function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i}(a._targets,n)&&(o?(!Ye||a._initted&&a._ts)&&a.globalTime(0)<=e&&a.globalTime(a.totalDuration())>e:!e||a.isActive())&&r.push(a):(i=a.getTweensOf(n,e)).length&&r.push.apply(r,i),a=a._next;return r},e.tweenTo=function(t,e){e=e||{};var i,r=this,n=m(r,t),t=e,a=t.startAt,o=t.onStart,s=t.onStartParams,t=t.immediateRender,u=$e.to(r,F({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(a&&"time"in a?a.time:r._time))/r.timeScale())||bt,onStart:function(){var t;r.pause(),i||(t=e.duration||Math.abs((n-(a&&"time"in a?a.time:r._time))/r.timeScale()),u._dur!==t&&f(u,t,0,1).render(u._time,!0,!0),i=1),o&&o.apply(u,s||[])}},e));return t?u.render(0):u},e.tweenFromTo=function(t,e,i){return this.tweenTo(e,F({startAt:{time:m(this,t)}},i))},e.recent=function(){return this._recent},e.nextLabel=function(t){return void 0===t&&(t=this._time),k(this,m(this,t))},e.previousLabel=function(t){return void 0===t&&(t=this._time),k(this,m(this,t),1)},e.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+bt)},e.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var r,n=this._first,a=this.labels;n;)n._start>=i&&(n._start+=t,n._end+=t),n=n._next;if(e)for(r in a)a[r]>=i&&(a[r]+=t);return se(this)},e.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return r.prototype.invalidate.call(this)},e.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),se(this)},e.totalDuration=function(t){var e,i,r,n=0,a=this,o=a._last,s=xt;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(r=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),s<(i=o._start)&&a._sort&&o._ts&&!a._lock?(a._lock=1,P(a,o,i-o._delay,1)._lock=0):s=i,i<0&&o._ts&&(n-=i,(!r&&!a._dp||r&&r.smoothChildTiming)&&(a._start+=i/a._ts,a._time-=i,a._tTime-=i),a.shiftChildren(-i,!1,-1/0),s=0),o._end>n&&o._ts&&(n=o._end),o=e;f(a,a===J&&a._time>n?a._time:n,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(t){if(J._ts&&(n(J,l(t,J)),et=De.frame),De.frame>=Jt){Jt+=_t.autoSleep||120;var e=J._first;if((!e||!e._ts)&&_t.autoSleep&&De._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||De.sleep()}}},t}(je);F(Ve.prototype,{_lock:0,_hasPause:0,_forcing:0});function Xe(t,e,i,r,n,a,o,s,u){Rt(r)&&(r=r(n||0,t,a));var h,n=t[e],a="get"!==i?i:Rt(n)?u?t[e.indexOf("set")||!Rt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():n,i=Rt(n)?u?ui:si:oi;if(Dt(r)&&"="===(r=~r.indexOf("random(")?xe(r):r).charAt(1)&&(!(h=parseFloat(a)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(pe(a)||0))&&0!==h||(r=h)),a!==r)return isNaN(a*r)||""===r?(n||e in t||Vt(e,r),qe.call(this,t,e,a,r,i,s||_t.stringFilter,u)):(h=new di(this._pt,t,e,+a||0,r-(a||0),"boolean"==typeof n?pi:ci,0,i),u&&(h.fp=u),o&&h.modifier(o,this,t),this._pt=h)}function We(t,e,i,r,n,a){var o,s,u,h;if(qt[t]&&!1!==(o=new qt[t]).init(n,o.rawVars?e[t]:function(t,e,i,r,n){if(Rt(t)&&(t=Je(t,n,e,i,r)),!Ct(t)||t.style&&t.nodeType||Lt(t)||It(t))return Dt(t)?Je(t,n,e,i,r):t;var a,o={};for(a in t)o[a]=Je(t[a],n,e,i,r);return o}(e[t],r,n,a,i),i,r,a)&&(i._pt=s=new di(i._pt,n,t,0,1,o.render,o,0,o.priority),i!==vi))for(u=i._ptLookup[i._targets.indexOf(n)],h=o._props.length;h--;)u[o._props[h]]=s;return o}var Ye,qe=function(t,e,i,r,n,a,o){var s,u,h,l,c,p=new di(this._pt,t,e,0,1,ti,null,n),d=0,f=0;for(p.b=i,p.e=r,i+="",(n=~(r+="").indexOf("random("))&&(r=xe(r)),a&&(a(a=[i,r],t,e),i=a[0],r=a[1]),s=i.match(Ut)||[];c=Ut.exec(r);)h=c[0],l=r.substring(d,c.index),u?u=(u+1)%5:"rgba("===l.substr(-5)&&(u=1),h!==s[f++]&&(c=parseFloat(s[f-1])||0,p._pt={_next:p._pt,p:l||1===f?l:",",s:c,c:"="===h.charAt(1)?parseFloat(h.substr(2))*("-"===h.charAt(0)?-1:1):parseFloat(h)-c,m:u&&u<4?Math.round:0},d=Ut.lastIndex);return p.c=d<r.length?r.substring(d,r.length):"",p.fp=o,(Gt.test(r)||n)&&(p.e=0),this._pt=p},Ze=function t(e,i){var r,n,a,o,s,u,h,l,c,p,d,f,m,v=e.vars,g=v.ease,_=v.startAt,y=v.immediateRender,x=v.lazy,b=v.onUpdate,T=v.onUpdateParams,E=v.callbackScope,S=v.runBackwards,M=v.yoyoEase,A=v.keyframes,w=v.autoRevert,D=e._dur,R=e._startAt,O=e._targets,P=e.parent,C=P&&"nested"===P.data?P.parent._targets:O,I="auto"===e._overwrite&&!Z,L=e.timeline;if(e._ease=Fe(g=!(!L||A&&g)?"none":g,yt.ease),e._yEase=M?Ne(Fe(!0===M?g:M,yt.ease)):0,M&&e._yoyo&&!e._repeat&&(M=e._yEase,e._yEase=e._ease,e._ease=M),e._from=!L&&!!v.runBackwards,!L){if(f=(l=O[0]?te(O[0]).harness:0)&&v[l.prop],r=B(v,Xt),R&&R.render(-1,!0).kill(),_)if(U(e._startAt=$e.set(O,F({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:N(x),startAt:null,delay:0,onUpdate:b,onUpdateParams:T,callbackScope:E,stagger:0},_))),i<0&&!y&&!w&&e._startAt.render(-1,!0),y){if(0<i&&!w&&(e._startAt=0),D&&i<=0)return void(i&&(e._zTime=i))}else!1===w&&(e._startAt=0);else if(S&&D)if(R)w||(e._startAt=0);else if(a=F({overwrite:!1,data:"isFromStart",lazy:(y=i?!1:y)&&N(x),immediateRender:y,stagger:0,parent:P},r),f&&(a[l.prop]=f),U(e._startAt=$e.set(O,a)),i<0&&e._startAt.render(-1,!0),y){if(!i)return}else t(e._startAt,bt);for(e._pt=0,x=D&&N(x)||x&&!D,n=0;n<O.length;n++){if(h=(s=O[n])._gsap||$t(O)[n]._gsap,e._ptLookup[n]=p={},Yt[h.id]&&Wt.length&&ne(),d=C===O?n:C.indexOf(s),l&&!1!==(c=new l).init(s,f||r,e,d,C)&&(e._pt=o=new di(e._pt,s,c.name,0,1,c.render,c,0,c.priority),c._props.forEach(function(t){p[t]=o}),c.priority&&(u=1)),!l||f)for(a in r)qt[a]&&(c=We(a,r,e,d,s,C))?c.priority&&(u=1):p[a]=o=Xe.call(e,s,a,"get",r[a],d,C,0,v.stringFilter);e._op&&e._op[n]&&e.kill(s,e._op[n]),I&&e._pt&&(Ye=e,J.killTweensOf(s,p,e.globalTime(i)),m=!e.parent,Ye=0),e._pt&&x&&(Yt[h.id]=1)}u&&ai(e),e._onInit&&e._onInit(e)}e._onUpdate=b,e._initted=(!e._op||e._pt)&&!m},Je=function(t,e,i,r,n){return Rt(t)?t.call(e,i,r,n):Dt(t)&&~t.indexOf("random(")?xe(t):t},Ke=Qt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Qe=(Ke+",id,stagger,delay,duration,paused,scrollTrigger").split(","),$e=function(E){function n(t,e,i,r){"number"==typeof e&&(i.duration=e,e=i,i=null);var n,a,o,s,u,h,l,c,p,d=(n=E.call(this,r?e:R(e))||this).vars,f=d.duration,m=d.delay,v=d.immediateRender,g=d.stagger,_=d.overwrite,y=d.keyframes,x=d.defaults,r=d.scrollTrigger,b=d.yoyoEase,d=e.parent||J,T=(Lt(t)||It(t)?Ot(t[0]):"length"in e)?[t]:me(t);if(n._targets=T.length?$t(T):A(0,!_t.nullTargetWarn)||[],n._ptLookup=[],n._overwrite=_,y||g||M(f)||M(m)){if(e=n.vars,(a=n.timeline=new Ve({data:"nested",defaults:x||{}})).kill(),a.parent=a._dp=S(n),a._start=0,y)R(F(a.vars.defaults,{ease:"none"})),g?T.forEach(function(i,r){return y.forEach(function(t,e){return a.to(i,t,e?">":r*g)})}):y.forEach(function(t){return a.to(T,t,">")});else{if(u=T.length,c=g?I(g):w,Ct(g))for(h in g)~Ke.indexOf(h)&&((p=p||{})[h]=g[h]);for(o=0;o<u;o++){for(h in s={},e)Qe.indexOf(h)<0&&(s[h]=e[h]);s.stagger=0,b&&(s.yoyoEase=b),p&&D(s,p),l=T[o],s.duration=+Je(f,S(n),o,l,T),s.delay=(+Je(m,S(n),o,l,T)||0)-n._delay,!g&&1===u&&s.delay&&(n._delay=m=s.delay,n._start+=m,s.delay=0),a.to(l,s,c(o,l,T))}a.duration()?f=m=0:n.timeline=0}f||n.duration(f=a.duration())}else n.timeline=0;return!0!==_||Z||(Ye=S(n),J.killTweensOf(T),Ye=0),P(d,S(n),i),e.reversed&&n.reverse(),e.paused&&n.paused(!0),(v||!f&&!y&&n._start===re(d._time)&&N(v)&&O(S(n))&&"nested"!==d.data)&&(n._tTime=-bt,n.render(Math.max(0,-m))),r&&C(S(n),r),n}i(n,E);var t=n.prototype;return t.render=function(t,e,i){var r,n,a,o,s,u,h,l,c,p=this._time,d=this._tDur,f=this._dur,m=d-bt<t&&0<=t?d:t<bt?0:t;if(f){if(m!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(r=m,l=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,i);if(r=re(m%o),m===d?(a=this._repeat,r=f):((a=~~(m/o))&&a===m/o&&(r=f,a--),f<r&&(r=f)),(u=this._yoyo&&1&a)&&(c=this._yEase,r=f-r),s=b(this._tTime,o),r===p&&!i&&this._initted)return this;a!==s&&(l&&this._yEase&&W(l,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=i=1,this.render(re(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(v(this,t<0?t:r,i,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,i)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(c||this._ease)(r/f),this._from&&(this.ratio=h=1-h),r&&!p&&!e&&(z(this,"onStart"),this._tTime!==m))return this;for(n=this._pt;n;)n.r(h,n.d),n=n._next;l&&l.render(t<0?t:!r&&u?-bt:l._dur*h,e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),z(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&z(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),!t&&f||!(m===this._tDur&&0<this._ts||!m&&this._ts<0)||U(this,1),e||t<0&&!p||!m&&!p||(z(this,m===d?"onComplete":"onReverseComplete",!0),!this._prom||m<d&&0<this.timeScale()||this._prom()))}}else!function(t,e,i,r){var n,a,o,s=t.ratio,u=e<0||!e&&(!t._start&&g(t)&&(t._initted||!_(t))||(t._ts<0||t._dp._ts<0)&&!_(t))?0:1,h=t._rDelay,l=0;if(h&&t._repeat&&(l=x(0,t._tDur,e),a=b(l,h),o=b(t._tTime,h),t._yoyo&&1&a&&(u=1-u),a!==o&&(s=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),u!==s||r||t._zTime===bt||!e&&t._zTime){if(t._initted||!v(t,e,r,i)){for(o=t._zTime,t._zTime=e||(i?bt:0),i=i||e&&!o,t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=l,n=t._pt;n;)n.r(u,n.d),n=n._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&z(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&z(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&U(t,1),i||(z(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),E.prototype.invalidate.call(this)},t.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?j(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ye&&!0!==Ye.vars.overwrite)._first||j(this),this.parent&&i!==this.timeline.totalDuration()&&f(this,this._dur*this.timeline._tDur/i,0,1),this}var r,n,a,o,s,u,h,l=this._targets,c=t?me(t):l,p=this._ptLookup,t=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0}(l,c))return"all"===e&&(this._pt=0),j(this);for(r=this._op=this._op||[],"all"!==e&&(Dt(e)&&(s={},d(e,function(t){return s[t]=1}),e=s),e=function(t,e){var i,r,n,a,t=t[0]?te(t[0]).harness:0,o=t&&t.aliases;if(!o)return e;for(r in i=D({},e),o)if(r in i)for(n=(a=o[r].split(",")).length;n--;)i[a[n]]=i[r];return i}(l,e)),h=l.length;h--;)if(~c.indexOf(l[h]))for(s in n=p[h],"all"===e?(r[h]=e,o=n,a={}):(a=r[h]=r[h]||{},o=e),o)(u=n&&n[s])&&("kill"in u.d&&!0!==u.d.kill(s)||oe(this,u,"_pt"),delete n[s]),"all"!==a&&(a[s]=1);return this._initted&&!this._pt&&t&&j(this),this},n.to=function(t,e){return new n(t,e,arguments[2])},n.from=function(t,e){return y(1,arguments)},n.delayedCall=function(t,e,i,r){return new n(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},n.fromTo=function(t,e,i){return y(2,arguments)},n.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new n(t,e)},n.killTweensOf=function(t,e,i){return J.killTweensOf(t,e,i)},n}(je);F($e.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),d("staggerTo,staggerFrom,staggerFromTo",function(i){$e[i]=function(){var t=new Ve,e=de.call(arguments,0);return e.splice("staggerFromTo"===i?5:4,0,0),t[i].apply(t,e)}});function ti(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)}function ei(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next}function ii(t,e,i,r){for(var n,a=this._pt;a;)n=a._next,a.p===r&&a.modifier(t,e,i),a=n}function ri(t){for(var e,i,r=this._pt;r;)i=r._next,r.p===t&&!r.op||r.op===t?oe(this,r,"_pt"):r.dep||(e=1),r=i;return!e}function ni(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)}function ai(t){for(var e,i,r,n,a=t._pt;a;){for(e=a._next,i=r;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:n)?a._prev._next=a:r=a,(a._next=i)?i._prev=a:n=a,a=e}t._pt=r}var oi=function(t,e,i){return t[e]=i},si=function(t,e,i){return t[e](i)},ui=function(t,e,i,r){return t[e](r.fp,i)},hi=function(t,e,i){return t.setAttribute(e,i)},li=function(t,e){return Rt(t[e])?si:Pt(t[e])&&t.setAttribute?hi:oi},ci=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},pi=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},di=(fi.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=ni,this.m=t,this.mt=i,this.tween=e},fi);function fi(t,e,i,r,n,a,o,s,u){this.t=e,this.s=r,this.c=n,this.p=i,this.r=a||ci,this.d=o||this,this.set=s||oi,this.pr=u||0,(this._next=t)&&(t._prev=this)}d(Qt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return Xt[t]=1}),jt.TweenMax=jt.TweenLite=$e,jt.TimelineLite=jt.TimelineMax=Ve,J=new Ve({sortChildren:!1,defaults:yt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),_t.stringFilter=X;var mi={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(t){var e=(t=!t.name&&t.default||t).name,i=Rt(t),r=e&&!i&&t.init?function(){this._props=[]}:t,n={init:w,render:ei,add:Xe,kill:ri,modifier:ii,rawVars:0},i={targetTest:0,get:0,getSetter:li,aliases:{},register:0};if(Re(),t!==r){if(qt[e])return;F(r,F(B(t,n),i)),D(r.prototype,D(n,B(t,i))),qt[r.prop=e]=r,t.targetTest&&(Kt.push(r),Xt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}a(e,r),t.register&&t.register(yi,r,di)})},timeline:function(t){return new Ve(t)},getTweensOf:function(t,e){return J.getTweensOf(t,e)},getProperty:function(r,t,e,i){Dt(r)&&(r=me(r)[0]);var n=te(r||{}).get,a=e?o:ae;return"native"===e&&(e=""),r&&(t?a((qt[t]&&qt[t].get||n)(r,t,e,i)):function(t,e,i){return a((qt[t]&&qt[t].get||n)(r,t,e,i))})},quickSetter:function(i,e,r){if(1<(i=me(i)).length){var n=i.map(function(t){return yi.quickSetter(t,e,r)}),a=n.length;return function(t){for(var e=a;e--;)n[e](t)}}i=i[0]||{};var o=qt[e],s=te(i),u=s.harness&&(s.harness.aliases||{})[e]||e,h=o?function(t){var e=new o;vi._pt=0,e.init(i,r?t+r:t,vi,0,[i]),e.render(1,e),vi._pt&&ei(1,vi)}:s.set(i,u);return o?h:function(t){return h(i,u,r?t+r:t,s,1)}},isTweening:function(t){return 0<J.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Fe(t.ease,yt.ease)),u(yt,t||{})},config:function(t){return u(_t,t||{})},registerEffect:function(t){var r=t.name,n=t.effect,e=t.plugins,a=t.defaults,t=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!qt[t]&&!jt[t]&&A()}),Zt[r]=function(t,e,i){return n(me(t),F(e||{},a),i)},t&&(Ve.prototype[r]=function(t,e,i){return this.add(Zt[r](t,Ct(e)?e:(i=e)&&{},this),i)})},registerEase:function(t,e){Oe[t]=Fe(e)},parseEase:function(t,e){return arguments.length?Fe(t,e):Oe},getById:function(t){return J.getById(t)},exportRoot:function(t,e){var i,r,n=new Ve(t=void 0===t?{}:t);for(n.smoothChildTiming=N(t.smoothChildTiming),J.remove(n),n._dp=0,n._time=n._tTime=J._time,i=J._first;i;)r=i._next,!e&&!i._dur&&i instanceof $e&&i.vars.onComplete===i._targets[0]||P(n,i,i._start-i._delay),i=r;return P(J,n,0),n},utils:{wrap:_e,wrapYoyo:ye,distribute:I,random:E,snap:ge,normalize:function(t,e,i){return G(t,e,0,1,i)},getUnit:pe,clamp:function(e,i,t){return ce(t,function(t){return x(e,i,t)})},splitColor:Se,toArray:me,selector:function(i){return i=me(i)[0]||{},function(t){var e=i.current||i.nativeElement||i;return me(t,e.querySelectorAll?e:e===i?(A(),$.createElement("div")):i)}},mapRange:G,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(e,i){return function(t){return e(parseFloat(t))+(i||pe(t))}},interpolate:be,shuffle:ve},install:r,effects:Zt,ticker:De,updateRoot:Ve.updateRoot,plugins:qt,globalTimeline:J,core:{PropTween:di,globals:a,Tween:$e,Timeline:Ve,Animation:je,getCache:te,_removeLinkedListItem:oe,suppressOverwrites:function(t){return Z=t}}};d("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return mi[t]=$e[t]}),De.add(Ve.updateRoot);var vi=mi.to({},{duration:0}),gi=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},_i=function(t,n){return{name:t,rawVars:1,init:function(t,r,e){e._onInit=function(t){var e,i;if(Dt(r)&&(e={},d(r,function(t){return e[t]=1}),r=e),n){for(i in e={},r)e[i]=n(r[i]);r=e}!function(t,e){var i,r,n,a=t._targets;for(i in e)for(r=a.length;r--;)(n=(n=t._ptLookup[r][i])&&n.d)&&(n=n._pt?gi(n,i):n)&&n.modifier&&n.modifier(e[i],t,a[r],i)}(t,r)}}}},yi=mi.registerPlugin({name:"attr",init:function(t,e,i,r,n){var a,o;for(a in e)(o=this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],r,n,0,0,a))&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},_i("roundProps",T),_i("modifiers"),_i("snap",ge))||mi;$e.version=Ve.version=yi.version="3.8.0",tt=1,e()&&Re();function xi(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function bi(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Ti(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function Ei(t,e){t=e.s+e.c*t,e.set(e.t,e.p,~~(t+(t<0?-.5:.5))+e.u,e)}function Si(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function Mi(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function Ai(t,e,i){return t.style[e]=i}function wi(t,e,i){return t.style.setProperty(e,i)}function Di(t,e,i){return t._gsap[e]=i}function Ri(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i}function Oi(t,e,i,r,n){(t=t._gsap).scaleX=t.scaleY=i,t.renderTransform(n,t)}function Pi(t,e,i,r,n){(t=t._gsap)[e]=i,t.renderTransform(n,t)}function Ci(){hr()&&window.document&&(ji=window,Hi=ji.document,Vi=Hi.documentElement,Wi=xr("div")||{style:{}},xr("div"),_r=Er(_r),yr=_r+"Origin",Wi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",qi=!!Er("perspective"),Xi=1)}function Ii(t){var e,i=xr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,a=this.style.cssText;if(Vi.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=Ii}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return r&&(n?r.insertBefore(this,n):r.appendChild(this)),Vi.removeChild(i),this.style.cssText=a,e}function Li(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])}function Ni(t,e,i,r){var n;return Xi||Ci(),e in gr&&"transform"!==e&&~(e=gr[e]).indexOf(",")&&(e=e.split(",")[0]),lr[e]&&"transform"!==e?(n=Fr(t,r),n="transformOrigin"!==e?n[e]:n.svg?n.origin:Br(br(t,yr))+" "+n.zOrigin+"px"):(n=t.style[e])&&"auto"!==n&&!r&&!~(n+"").indexOf("calc(")||(n=Pr[e]&&Pr[e](t,e,i)||br(t,e)||ee(t,e)||("opacity"===e?1:0)),i&&!~(n+"").trim().indexOf(" ")?Rr(t,e,n,i)+i:n}function Fi(t,e,i,r){var n;i&&"none"!==i||((a=(n=Er(e,t,1))&&br(t,n,1))&&a!==i?(e=n,i=a):"borderColor"===e&&(i=br(t,"borderTopColor")));var a,o,s,u,h,l,c,p,d,f,m=new di(this._pt,t.style,e,0,1,ti),v=0,g=0;if(m.b=i,m.e=r,i+="","auto"===(r+="")&&(t.style[e]=r,r=br(t,e)||r,t.style[e]=i),X(a=[i,r]),r=a[1],o=(i=a[0]).match(Bt)||[],(r.match(Bt)||[]).length){for(;l=Bt.exec(r);)p=l[0],c=r.substring(v,l.index),u?u=(u+1)%5:"rgba("!==c.substr(-5)&&"hsla("!==c.substr(-5)||(u=1),p!==(h=o[g++]||"")&&(s=parseFloat(h)||0,d=h.substr((s+"").length),(f="="===p.charAt(1)?+(p.charAt(0)+"1"):0)&&(p=p.substr(2)),l=parseFloat(p),p=p.substr((l+"").length),v=Bt.lastIndex-p.length,p||(p=p||_t.units[e]||d,v===r.length&&(r+=p,m.e+=p)),d!==p&&(s=Rr(t,e,h,p)||0),m._pt={_next:m._pt,p:c||1===g?c:",",s:s,c:f?f*l:l-s,m:u&&u<4||"zIndex"===e?Math.round:0});m.c=v<r.length?r.substring(v,r.length):""}else m.r="display"===e&&"none"===r?Mi:Si;return Gt.test(r)&&(m.e=0),this._pt=m}function Bi(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,r,n,a=e.t,o=a.style,s=e.u,e=a._gsap;if("all"===s||!0===s)o.cssText="",r=1;else for(n=(s=s.split(",")).length;-1<--n;)i=s[n],lr[i]&&(r=1,i="transformOrigin"===i?yr:_r),Ar(a,i);r&&(Ar(a,_r),e&&(e.svg&&a.removeAttribute("transform"),Fr(a,1),e.uncache=1))}}function Ui(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function Gi(t,e,i,r,n,a){var o,s,u=t._gsap,h=n||Nr(t,!0),l=u.xOrigin||0,c=u.yOrigin||0,p=u.xOffset||0,d=u.yOffset||0,f=h[0],m=h[1],v=h[2],g=h[3],_=h[4],y=h[5],x=e.split(" "),b=parseFloat(x[0])||0,n=parseFloat(x[1])||0;i?h!==Cr&&(o=f*g-m*v)&&(s=b*(-m/o)+n*(f/o)-(f*y-m*_)/o,b=b*(g/o)+n*(-v/o)+(v*y-g*_)/o,n=s):(b=(s=Sr(t)).x+(~x[0].indexOf("%")?b/100*s.width:b),n=s.y+(~(x[1]||x[0]).indexOf("%")?n/100*s.height:n)),r||!1!==r&&u.smooth?(u.xOffset=p+((_=b-l)*f+(y=n-c)*v)-_,u.yOffset=d+(_*m+y*g)-y):u.xOffset=u.yOffset=0,u.xOrigin=b,u.yOrigin=n,u.smooth=!!r,u.origin=e,u.originIsAbsolute=!!i,t.style[yr]="0px 0px",a&&(wr(a,u,"xOrigin",l,b),wr(a,u,"yOrigin",c,n),wr(a,u,"xOffset",p,u.xOffset),wr(a,u,"yOffset",d,u.yOffset)),t.setAttribute("data-svg-origin",b+" "+n)}function ki(t,e,i){var r=pe(e);return ie(parseFloat(e)+parseFloat(Rr(t,"x",i+"px",r)))+r}function zi(t,e){for(var i in e)t[i]=e[i];return t}var ji,Hi,Vi,Xi,Wi,Yi,qi,Zi=Oe.Power0,Ji=Oe.Power1,Ki=Oe.Power2,Qi=Oe.Power3,$i=Oe.Power4,tr=Oe.Linear,er=Oe.Quad,ir=Oe.Cubic,rr=Oe.Quart,nr=Oe.Quint,ar=Oe.Strong,or=Oe.Elastic,sr=Oe.Back,Be=Oe.SteppedEase,Ue=Oe.Bounce,ur=Oe.Sine,_e=Oe.Expo,ye=Oe.Circ,hr=function(){return"undefined"!=typeof window},lr={},cr=180/Math.PI,pr=Math.PI/180,dr=Math.atan2,fr=/([A-Z])/g,mr=/(?:left|right|width|margin|padding|x)/i,vr=/[\s,\(]\S/,gr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_r="transform",yr=_r+"Origin",xr=function(t,e){e=Hi.createElementNS?Hi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Hi.createElement(t);return e.style?e:Hi.createElement(t)},br=function t(e,i,r){var n=getComputedStyle(e);return n[i]||n.getPropertyValue(i.replace(fr,"-$1").toLowerCase())||n.getPropertyValue(i)||!r&&t(e,Er(i)||i,1)||""},Tr="O,Moz,ms,Ms,Webkit".split(","),Er=function(t,e,i){var r=(e||Wi).style,n=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(Tr[n]+t in r););return n<0?null:(3===n?"ms":0<=n?Tr[n]:"")+t},Sr=function(e){var i;try{i=e.getBBox()}catch(t){i=Ii.call(e,!0)}return!(i=!(i&&(i.width||i.height)||e.getBBox===Ii)?Ii.call(e,!0):i)||i.width||i.x||i.y?i:{x:+Li(e,["x","cx","x1"])||0,y:+Li(e,["y","cy","y1"])||0,width:0,height:0}},Mr=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Sr(t))},Ar=function(t,e){e&&(t=t.style,e in lr&&e!==yr&&(e=_r),t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(fr,"-$1").toLowerCase())):t.removeAttribute(e))},wr=function(t,e,i,r,n,a){a=new di(t._pt,e,i,0,1,a?Mi:Si);return(t._pt=a).b=r,a.e=n,t._props.push(i),a},Dr={deg:1,rad:1,turn:1},Rr=function t(e,i,r,n){var a,o=parseFloat(r)||0,s=(r+"").trim().substr((o+"").length)||"px",u=Wi.style,h=mr.test(i),l="svg"===e.tagName.toLowerCase(),c=(l?"client":"offset")+(h?"Width":"Height"),p="px"===n,d="%"===n;return n===s||!o||Dr[n]||Dr[s]?o:("px"===s||p||(o=t(e,i,r,"px")),r=e.getCTM&&Mr(e),!d&&"%"!==s||!lr[i]&&!~i.indexOf("adius")?(u[h?"width":"height"]=100+(p?s:n),n=~i.indexOf("adius")||"em"===n&&e.appendChild&&!l?e:e.parentNode,(l=(n=!(n=r?(e.ownerSVGElement||{}).parentNode:n)||n===Hi||!n.appendChild?Hi.body:n)._gsap)&&d&&l.width&&h&&l.time===De.time?ie(o/l.width*100):(!d&&"%"!==s||(u.position=br(e,"position")),n===e&&(u.position="static"),n.appendChild(Wi),a=Wi[c],n.removeChild(Wi),u.position="absolute",h&&d&&((l=te(n)).time=De.time,l.width=n[c]),ie(p?a*o/100:a&&o?100/a*o:0))):(a=r?e.getBBox()[h?"width":"height"]:e[c],ie(d?o/a*100:o/100*a)))},Or={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Pr={clearProps:function(t,e,i,r,n){if("isFromStart"!==n.data){e=t._pt=new di(t._pt,e,i,0,0,Bi);return e.u=r,e.pr=-10,e.tween=n,t._props.push(i),1}}},Cr=[1,0,0,1,0,0],Ir={},Lr=function(t){t=br(t,_r);return Ui(t)?Cr:t.substr(7).match(Ft).map(ie)},Nr=function(t,e){var i,r,n,a=t._gsap||te(t),o=t.style,s=Lr(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?Cr:s:(s!==Cr||t.offsetParent||t===Vi||a.svg||(r=o.display,o.display="block",(a=t.parentNode)&&t.offsetParent||(n=1,i=t.nextSibling,Vi.appendChild(t)),s=Lr(t),r?o.display=r:Ar(t,"display"),n&&(i?a.insertBefore(t,i):a?a.appendChild(t):Vi.removeChild(t))),e&&6<s.length?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Fr=function(t,e){var i=t._gsap||new ze(t);if("x"in i&&!e&&!i.uncache)return i;var r,n,a,o,s,u,h,l,c,p,d,f,m,v,g,_,y,x,b,T,E,S,M,A,w,D=t.style,R=i.scaleX<0,O=br(t,yr)||"0",P=r=n=o=s=u=h=l=0,C=a=1;return i.svg=!(!t.getCTM||!Mr(t)),c=Nr(t,i.svg),i.svg&&(x=(!i.uncache||"0px 0px"===O)&&!e&&t.getAttribute("data-svg-origin"),Gi(t,x||O,!!x||i.originIsAbsolute,!1!==i.smooth,c)),S=i.xOrigin||0,A=i.yOrigin||0,c!==Cr&&(f=c[0],m=c[1],v=c[2],g=c[3],P=_=c[4],r=y=c[5],6===c.length?(C=Math.sqrt(f*f+m*m),a=Math.sqrt(g*g+v*v),o=f||m?dr(m,f)*cr:0,(h=v||g?dr(v,g)*cr+o:0)&&(a*=Math.abs(Math.cos(h*pr))),i.svg&&(P-=S-(S*f+A*v),r-=A-(S*m+A*g))):(w=c[6],M=c[7],E=c[8],e=c[9],S=c[10],A=c[11],P=c[12],r=c[13],n=c[14],s=(c=dr(w,S))*cr,c&&(x=_*(p=Math.cos(-c))+E*(d=Math.sin(-c)),b=y*p+e*d,T=w*p+S*d,E=_*-d+E*p,e=y*-d+e*p,S=w*-d+S*p,A=M*-d+A*p,_=x,y=b,w=T),u=(c=dr(-v,S))*cr,c&&(p=Math.cos(-c),A=g*(d=Math.sin(-c))+A*p,f=x=f*p-E*d,m=b=m*p-e*d,v=T=v*p-S*d),o=(c=dr(m,f))*cr,c&&(x=f*(p=Math.cos(c))+m*(d=Math.sin(c)),b=_*p+y*d,m=m*p-f*d,y=y*p-_*d,f=x,_=b),s&&359.9<Math.abs(s)+Math.abs(o)&&(s=o=0,u=180-u),C=ie(Math.sqrt(f*f+m*m+v*v)),a=ie(Math.sqrt(y*y+w*w)),c=dr(_,y),h=2e-4<Math.abs(c)?c*cr:0,l=A?1/(A<0?-A:A):0),i.svg&&(x=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Ui(br(t,_r)),x&&t.setAttribute("transform",x))),90<Math.abs(h)&&Math.abs(h)<270&&(R?(C*=-1,h+=o<=0?180:-180,o+=o<=0?180:-180):(a*=-1,h+=h<=0?180:-180)),i.x=P-((i.xPercent=P&&(i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-P)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+"px",i.y=r-((i.yPercent=r&&(i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+"px",i.z=n+"px",i.scaleX=ie(C),i.scaleY=ie(a),i.rotation=ie(o)+"deg",i.rotationX=ie(s)+"deg",i.rotationY=ie(u)+"deg",i.skewX=h+"deg",i.skewY="0deg",i.transformPerspective=l+"px",(i.zOrigin=parseFloat(O.split(" ")[2])||0)&&(D[yr]=Br(O)),i.xOffset=i.yOffset=0,i.force3D=_t.force3D,i.renderTransform=i.svg?zr:qi?kr:Ur,i.uncache=0,i},Br=function(t){return(t=t.split(" "))[0]+" "+t[1]},Ur=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,kr(t,e)},Gr="0deg",kr=function(t,e){var i=e||this,r=i.xPercent,n=i.yPercent,a=i.x,o=i.y,s=i.z,u=i.rotation,h=i.rotationY,l=i.rotationX,c=i.skewX,p=i.skewY,d=i.scaleX,f=i.scaleY,m=i.transformPerspective,v=i.force3D,g=i.target,_=i.zOrigin,y="",x="auto"===v&&t&&1!==t||!0===v;!_||l===Gr&&h===Gr||(e=parseFloat(h)*pr,i=Math.sin(e),t=Math.cos(e),e=parseFloat(l)*pr,v=Math.cos(e),a=ki(g,a,i*v*-_),o=ki(g,o,-Math.sin(e)*-_),s=ki(g,s,t*v*-_+_)),"0px"!==m&&(y+="perspective("+m+") "),(r||n)&&(y+="translate("+r+"%, "+n+"%) "),!x&&"0px"===a&&"0px"===o&&"0px"===s||(y+="0px"!==s||x?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+") "),u!==Gr&&(y+="rotate("+u+") "),h!==Gr&&(y+="rotateY("+h+") "),l!==Gr&&(y+="rotateX("+l+") "),c===Gr&&p===Gr||(y+="skew("+c+", "+p+") "),1===d&&1===f||(y+="scale("+d+", "+f+") "),g.style[_r]=y||"translate(0, 0)"},zr=function(t,e){var i,r,n,a,o,s=e||this,u=s.xPercent,h=s.yPercent,l=s.x,c=s.y,p=s.rotation,d=s.skewX,f=s.skewY,m=s.scaleX,v=s.scaleY,g=s.target,_=s.xOrigin,y=s.yOrigin,x=s.xOffset,b=s.yOffset,T=s.forceCSS,e=parseFloat(l),s=parseFloat(c),p=parseFloat(p),d=parseFloat(d);(f=parseFloat(f))&&(d+=f=parseFloat(f),p+=f),p||d?(p*=pr,d*=pr,i=Math.cos(p)*m,r=Math.sin(p)*m,n=Math.sin(p-d)*-v,a=Math.cos(p-d)*v,d&&(f*=pr,o=Math.tan(d-f),n*=o=Math.sqrt(1+o*o),a*=o,f&&(o=Math.tan(f),i*=o=Math.sqrt(1+o*o),r*=o)),i=ie(i),r=ie(r),n=ie(n),a=ie(a)):(i=m,a=v,r=n=0),(e&&!~(l+"").indexOf("px")||s&&!~(c+"").indexOf("px"))&&(e=Rr(g,"x",l,"px"),s=Rr(g,"y",c,"px")),(_||y||x||b)&&(e=ie(e+_-(_*i+y*n)+x),s=ie(s+y-(_*r+y*a)+b)),(u||h)&&(o=g.getBBox(),e=ie(e+u/100*o.width),s=ie(s+h/100*o.height)),g.setAttribute("transform",o="matrix("+i+","+r+","+n+","+a+","+e+","+s+")"),T&&(g.style[_r]=o)};d("padding,margin,Width,Radius",function(e,i){var t="Top",r="Right",n="Bottom",a="Left",s=(i<3?[t,r,n,a]:[t+a,t+r,n+r,n+a]).map(function(t){return i<2?e+t:"border"+t+e});Pr[1<i?"border"+e:e]=function(e,t,i,r,n){var a,o;if(arguments.length<4)return a=s.map(function(t){return Ni(e,t,i)}),5===(o=a.join(" ")).split(a[0]).length?a[0]:o;a=(r+"").split(" "),o={},s.forEach(function(t,e){return o[t]=a[e]=a[e]||a[(e-1)/2|0]}),e.init(t,o,n)}});var jr,be={name:"css",register:Ci,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,n){var a,o,s,u,h,l,c,p,d,f,m,v,g,_,y,x,b,T,E,S,M,A=this._props,w=t.style,D=i.vars.startAt;for(h in Xi||Ci(),e)if("autoRound"!==h&&(o=e[h],!qt[h]||!We(h,e,i,r,t,n)))if(b=Hr(o),x=Pr[h],"string"===(b="function"===b?Hr(o=o.call(i,r,t,n)):b)&&~o.indexOf("random(")&&(o=xe(o)),x)x(this,t,h,o,i)&&(g=1);else if("--"===h.substr(0,2))a=(getComputedStyle(t).getPropertyValue(h)+"").trim(),o+="",Ae.lastIndex=0,Ae.test(a)||(l=pe(a),c=pe(o)),c?l!==c&&(a=Rr(t,h,a,c)+c):l&&(o+=l),this.add(w,"setProperty",a,o,r,n,0,0,h),A.push(h);else if("undefined"!==b){if(D&&h in D?(a="function"==typeof D[h]?D[h].call(i,r,t,n):D[h],h in _t.units&&!pe(a)&&(a+=_t.units[h]),"="===((a=Dt(a)&&~a.indexOf("random(")?xe(a):a)+"").charAt(1)&&(a=Ni(t,h))):a=Ni(t,h),u=parseFloat(a),(p="string"===b&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),s=parseFloat(o),h in gr&&("autoAlpha"===h&&(1===u&&"hidden"===Ni(t,"visibility")&&s&&(u=0),wr(this,w,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==h&&"transform"!==h&&~(h=gr[h]).indexOf(",")&&(h=h.split(",")[0])),d=h in lr)if(f||((m=t._gsap).renderTransform&&!e.parseTransform||Fr(t,e.parseTransform),v=!1!==e.smoothOrigin&&m.smooth,(f=this._pt=new di(this._pt,w,_r,0,1,m.renderTransform,m,0,-1)).dep=1),"scale"===h)this._pt=new di(this._pt,m,"scaleY",m.scaleY,(p?p*s:s-m.scaleY)||0),A.push("scaleY",h),h+="X";else{if("transformOrigin"===h){M=S=E=void 0,E=(T=o).split(" "),S=E[0],M=E[1]||"50%","top"!==S&&"bottom"!==S&&"left"!==M&&"right"!==M||(T=S,S=M,M=T),E[0]=Or[S]||S,E[1]=Or[M]||M,o=E.join(" "),m.svg?Gi(t,o,0,v,0,this):((c=parseFloat(o.split(" ")[2])||0)!==m.zOrigin&&wr(this,m,"zOrigin",m.zOrigin,c),wr(this,w,h,Br(a),Br(o)));continue}if("svgOrigin"===h){Gi(t,o,1,v,0,this);continue}if(h in Ir){_=this,y=m,x=h,b=u,T=p,M=S=void 0,S=Dt(E=o),M=parseFloat(E)*(S&&~E.indexOf("rad")?cr:1),M=b+(T=T?M*T:M-b)+"deg",S&&("short"===(E=E.split("_")[1])&&(T%=360)!==T%180&&(T+=T<0?360:-360),"cw"===E&&T<0?T=(T+36e9)%360-360*~~(T/360):"ccw"===E&&0<T&&(T=(T-36e9)%360-360*~~(T/360))),_._pt=T=new di(_._pt,y,x,b,T,bi),T.e=M,T.u="deg",_._props.push(x);continue}if("smoothOrigin"===h){wr(this,m,"smooth",m.smooth,o);continue}if("force3D"===h){m[h]=o;continue}if("transform"===h){!function(t,e,i){var r,n,a,o,s,u,h=zi({},i._gsap),l=i.style;for(n in h.svg?(a=i.getAttribute("transform"),i.setAttribute("transform",""),l[_r]=e,r=Fr(i,1),Ar(i,_r),i.setAttribute("transform",a)):(a=getComputedStyle(i)[_r],l[_r]=e,r=Fr(i,1),l[_r]=a),lr)(a=h[n])!==(s=r[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(o=pe(a)!==(u=pe(s))?Rr(i,n,a,u):parseFloat(a),s=parseFloat(s),t._pt=new di(t._pt,r,n,o,s-o,xi),t._pt.u=u||0,t._props.push(n));zi(r,h)}(this,o,t);continue}}else h in w||(h=Er(h)||h);if(d||(s||0===s)&&(u||0===u)&&!vr.test(o)&&h in w)s=s||0,(l=(a+"").substr((u+"").length))!==(c=pe(o)||(h in _t.units?_t.units[h]:l))&&(u=Rr(t,h,a,c)),this._pt=new di(this._pt,d?m:w,h,u,p?p*s:s-u,d||"px"!==c&&"zIndex"!==h||!1===e.autoRound?xi:Ei),this._pt.u=c||0,l!==c&&"%"!==c&&(this._pt.b=a,this._pt.r=Ti);else if(h in w)Fi.call(this,t,h,a,o);else{if(!(h in t)){Vt(h,o);continue}this.add(t,h,a||t[h],o,r,n)}A.push(h)}g&&ai(this)},get:Ni,aliases:gr,getSetter:function(t,e,i){var r=gr[e];return(e=r&&r.indexOf(",")<0?r:e)in lr&&e!==yr&&(t._gsap.x||Ni(t,"x"))?i&&Yi===i?"scale"===e?Ri:Di:(Yi=i||{})&&("scale"===e?Oi:Pi):t.style&&!Pt(t.style[e])?Ai:~e.indexOf("-")?wi:li(t,e)},core:{_removeProperty:Ar,_getMatrix:Nr}};yi.utils.checkPrefix=Er,jr=d((_i="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(ge="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){lr[t]=1}),d(ge,function(t){_t.units[t]="deg",Ir[t]=1}),gr[jr[13]]=_i+","+ge,d("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){t=t.split(":");gr[t[1]]=jr[t[0]]}),d("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){_t.units[t]="px"}),yi.registerPlugin(be);_i=yi.registerPlugin(be)||yi,ge=_i.core.Tween;t.Back=sr,t.Bounce=Ue,t.CSSPlugin=be,t.Circ=ye,t.Cubic=ir,t.Elastic=or,t.Expo=_e,t.Linear=tr,t.Power0=Zi,t.Power1=Ji,t.Power2=Ki,t.Power3=Qi,t.Power4=$i,t.Quad=er,t.Quart=rr,t.Quint=nr,t.Sine=ur,t.SteppedEase=Be,t.Strong=ar,t.TimelineLite=Ve,t.TimelineMax=Ve,t.TweenLite=$e,t.TweenMax=ge,t.default=_i,t.gsap=_i,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default},"object"===((r=void 0)===i?"undefined":Hr(i))&&void 0!==e?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n((r=r||self).window=r.window||{})},{}],is_js:[function(t,e,i){!function(E){!function(){"use strict";function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var t;t=function(){var n={VERSION:"0.8.0",not:{},all:{},any:{}},r=Object.prototype.toString,e=Array.prototype.slice,a=Object.prototype.hasOwnProperty;function o(t){return function(){return!t.apply(null,e.call(arguments))}}var s={"<":function(t,e){return t<e},"<=":function(t,e){return t<=e},">":function(t,e){return e<t},">=":function(t,e){return e<=t}};function i(t,e){var i=e+"",e=+(i.match(/\d+/)||NaN),i=i.match(/^[<>]=?|/)[0];return s[i]?s[i](t,e):t==e||e!=e}function u(t){t=e.call(t);return t=1===t.length&&n.array(t[0])?t[0]:t}n.arguments=function(t){return"[object Arguments]"===r.call(t)||null!=t&&"object"===T(t)&&"callee"in t},n.array=Array.isArray||function(t){return"[object Array]"===r.call(t)},n.boolean=function(t){return!0===t||!1===t||"[object Boolean]"===r.call(t)},n.char=function(t){return n.string(t)&&1===t.length},n.date=function(t){return"[object Date]"===r.call(t)},n.domNode=function(t){return n.object(t)&&0<t.nodeType},n.error=function(t){return"[object Error]"===r.call(t)},n.function=function(t){return"[object Function]"===r.call(t)||"function"==typeof t},n.json=function(t){return"[object Object]"===r.call(t)},n.nan=function(t){return t!=t},n.null=function(t){return null===t},n.number=function(t){return n.not.nan(t)&&"[object Number]"===r.call(t)},n.object=function(t){return Object(t)===t},n.regexp=function(t){return"[object RegExp]"===r.call(t)},n.sameType=function(t,e){var i=r.call(t);return i===r.call(e)&&("[object Number]"!==i||(!n.any.nan(t,e)||n.all.nan(t,e)))},n.sameType.api=["not"],n.string=function(t){return"[object String]"===r.call(t)},n.undefined=function(t){return void 0===t},n.windowObject=function(t){return null!=t&&"object"===T(t)&&"setInterval"in t},n.empty=function(t){if(n.object(t)){var e=Object.getOwnPropertyNames(t).length;return 0===e||1===e&&n.array(t)||2===e&&n.arguments(t)?!0:!1}return""===t},n.existy=function(t){return null!=t},n.falsy=function(t){return!t},n.truthy=o(n.falsy),n.above=function(t,e){return n.all.number(t,e)&&e<t},n.above.api=["not"],n.decimal=function(t){return n.number(t)&&t%1!=0},n.equal=function(t,e){return n.all.number(t,e)?t===e&&1/t==1/e:n.all.string(t,e)||n.all.regexp(t,e)?""+t==""+e:!!n.all.boolean(t,e)&&t===e},n.equal.api=["not"],n.even=function(t){return n.number(t)&&t%2==0},n.finite=isFinite||function(t){return n.not.infinite(t)&&n.not.nan(t)},n.infinite=function(t){return t===1/0||t===-1/0},n.integer=function(t){return n.number(t)&&t%1==0},n.negative=function(t){return n.number(t)&&t<0},n.odd=function(t){return n.number(t)&&t%2==1},n.positive=function(t){return n.number(t)&&0<t},n.under=function(t,e){return n.all.number(t,e)&&t<e},n.under.api=["not"],n.within=function(t,e,i){return n.all.number(t,e,i)&&e<t&&t<i},n.within.api=["not"];var t,h={affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,alphaNumeric:/^[A-Za-z0-9]+$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,dateString:/^(1[0-2]|0?[1-9])([\/-])(3[01]|[12][0-9]|0?[1-9])(?:\2)(?:[0-9]{2})?[0-9]{2}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,hexadecimal:/^(?:0x)?[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-?(?!00)[0-9]{2}-?(?!0000)[0-9]{4}$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/};for(t in h)h.hasOwnProperty(t)&&function(e,i){n[e]=function(t){return i[e].test(t)}}(t,h);n.ip=function(t){return n.ipv4(t)||n.ipv6(t)},n.capitalized=function(t){if(n.not.string(t))return!1;for(var e=t.split(" "),i=0;i<e.length;i++){var r=e[i];if(r.length){r=r.charAt(0);if(r!==r.toUpperCase())return!1}}return!0},n.endWith=function(t,e){if(n.not.string(t))return!1;var i=t.length-(e+="").length;return 0<=i&&t.indexOf(e,i)===i},n.endWith.api=["not"],n.include=function(t,e){return-1<t.indexOf(e)},n.include.api=["not"],n.lowerCase=function(t){return n.string(t)&&t===t.toLowerCase()},n.palindrome=function(t){if(n.not.string(t))return!1;for(var e=(t=t.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()).length-1,i=0,r=Math.floor(e/2);i<=r;i++)if(t.charAt(i)!==t.charAt(e-i))return!1;return!0},n.space=function(t){if(n.not.char(t))return!1;t=t.charCodeAt(0);return 8<t&&t<14||32===t},n.startWith=function(t,e){return n.string(t)&&0===t.indexOf(e)},n.startWith.api=["not"],n.upperCase=function(t){return n.string(t)&&t===t.toUpperCase()};var l=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],c=["january","february","march","april","may","june","july","august","september","october","november","december"];n.day=function(t,e){return n.date(t)&&e.toLowerCase()===l[t.getDay()]},n.day.api=["not"],n.dayLightSavingTime=function(t){var e=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1),i=Math.max(e.getTimezoneOffset(),i.getTimezoneOffset());return t.getTimezoneOffset()<i},n.future=function(t){var e=new Date;return n.date(t)&&t.getTime()>e.getTime()},n.inDateRange=function(t,e,i){if(n.not.date(t)||n.not.date(e)||n.not.date(i))return!1;t=t.getTime();return t>e.getTime()&&t<i.getTime()},n.inDateRange.api=["not"],n.inLastMonth=function(t){return n.inDateRange(t,new Date((new Date).setMonth((new Date).getMonth()-1)),new Date)},n.inLastWeek=function(t){return n.inDateRange(t,new Date((new Date).setDate((new Date).getDate()-7)),new Date)},n.inLastYear=function(t){return n.inDateRange(t,new Date((new Date).setFullYear((new Date).getFullYear()-1)),new Date)},n.inNextMonth=function(t){return n.inDateRange(t,new Date,new Date((new Date).setMonth((new Date).getMonth()+1)))},n.inNextWeek=function(t){return n.inDateRange(t,new Date,new Date((new Date).setDate((new Date).getDate()+7)))},n.inNextYear=function(t){return n.inDateRange(t,new Date,new Date((new Date).setFullYear((new Date).getFullYear()+1)))},n.leapYear=function(t){return n.number(t)&&(t%4==0&&t%100!=0||t%400==0)},n.month=function(t,e){return n.date(t)&&e.toLowerCase()===c[t.getMonth()]},n.month.api=["not"],n.past=function(t){var e=new Date;return n.date(t)&&t.getTime()<e.getTime()},n.quarterOfYear=function(t,e){return n.date(t)&&n.number(e)&&e===Math.floor((t.getMonth()+3)/3)},n.quarterOfYear.api=["not"],n.today=function(t){var e=(new Date).toDateString();return n.date(t)&&t.toDateString()===e},n.tomorrow=function(t){var e=new Date,e=new Date(e.setDate(e.getDate()+1)).toDateString();return n.date(t)&&t.toDateString()===e},n.weekend=function(t){return n.date(t)&&(6===t.getDay()||0===t.getDay())},n.weekday=o(n.weekend),n.year=function(t,e){return n.date(t)&&n.number(e)&&e===t.getFullYear()},n.year.api=["not"],n.yesterday=function(t){var e=new Date,e=new Date(e.setDate(e.getDate()-1)).toDateString();return n.date(t)&&t.toDateString()===e};var p=n.windowObject("object"==(void 0===E?"undefined":T(E))&&E)&&E,d=n.windowObject("object"==("undefined"==typeof self?"undefined":T(self))&&self)&&self,f=n.windowObject("object"==T(this)&&this)&&this,m=p||d||f||Function("return this")(),v=d&&d.document,g=m.is,_=d&&d.navigator,y=(_&&_.appVersion||"").toLowerCase(),x=(_&&_.userAgent||"").toLowerCase(),b=(_&&_.vendor||"").toLowerCase();return n.android=function(){return/android/.test(x)},n.android.api=["not"],n.androidPhone=function(){return/android/.test(x)&&/mobile/.test(x)},n.androidPhone.api=["not"],n.androidTablet=function(){return/android/.test(x)&&!/mobile/.test(x)},n.androidTablet.api=["not"],n.blackberry=function(){return/blackberry/.test(x)||/bb10/.test(x)},n.blackberry.api=["not"],n.chrome=function(t){var e=/google inc/.test(b)?x.match(/(?:chrome|crios)\/(\d+)/):null;return null!==e&&i(e[1],t)},n.chrome.api=["not"],n.desktop=function(){return n.not.mobile()&&n.not.tablet()},n.desktop.api=["not"],n.edge=function(t){var e=x.match(/edge\/(\d+)/);return null!==e&&i(e[1],t)},n.edge.api=["not"],n.firefox=function(t){var e=x.match(/(?:firefox|fxios)\/(\d+)/);return null!==e&&i(e[1],t)},n.firefox.api=["not"],n.ie=function(t){var e=x.match(/(?:msie |trident.+?; rv:)(\d+)/);return null!==e&&i(e[1],t)},n.ie.api=["not"],n.ios=function(){return n.iphone()||n.ipad()||n.ipod()},n.ios.api=["not"],n.ipad=function(t){var e=x.match(/ipad.+?os (\d+)/);return null!==e&&i(e[1],t)},n.ipad.api=["not"],n.iphone=function(t){var e=x.match(/iphone(?:.+?os (\d+))?/);return null!==e&&i(e[1]||1,t)},n.iphone.api=["not"],n.ipod=function(t){var e=x.match(/ipod.+?os (\d+)/);return null!==e&&i(e[1],t)},n.ipod.api=["not"],n.linux=function(){return/linux/.test(y)},n.linux.api=["not"],n.mac=function(){return/mac/.test(y)},n.mac.api=["not"],n.mobile=function(){return n.iphone()||n.ipod()||n.androidPhone()||n.blackberry()||n.windowsPhone()},n.mobile.api=["not"],n.offline=o(n.online),n.offline.api=["not"],n.online=function(){return!_||!0===_.onLine},n.online.api=["not"],n.opera=function(t){var e=x.match(/(?:^opera.+?version|opr)\/(\d+)/);return null!==e&&i(e[1],t)},n.opera.api=["not"],n.phantom=function(t){var e=x.match(/phantomjs\/(\d+)/);return null!==e&&i(e[1],t)},n.phantom.api=["not"],n.safari=function(t){var e=x.match(/version\/(\d+).+?safari/);return null!==e&&i(e[1],t)},n.safari.api=["not"],n.tablet=function(){return n.ipad()||n.androidTablet()||n.windowsTablet()},n.tablet.api=["not"],n.touchDevice=function(){return!!v&&("ontouchstart"in d||"DocumentTouch"in d&&v instanceof DocumentTouch)},n.touchDevice.api=["not"],n.windows=function(){return/win/.test(y)},n.windows.api=["not"],n.windowsPhone=function(){return n.windows()&&/phone/.test(x)},n.windowsPhone.api=["not"],n.windowsTablet=function(){return n.windows()&&n.not.windowsPhone()&&/touch/.test(x)},n.windowsTablet.api=["not"],n.propertyCount=function(t,e){if(n.not.object(t)||n.not.number(e))return!1;var i,r=0;for(i in t)if(a.call(t,i)&&++r>e)return!1;return r===e},n.propertyCount.api=["not"],n.propertyDefined=function(t,e){return n.object(t)&&n.string(e)&&e in t},n.propertyDefined.api=["not"],n.inArray=function(t,e){if(n.not.array(e))return!1;for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},n.inArray.api=["not"],n.sorted=function(t,e){if(n.not.array(t))return!1;for(var i=s[e]||s[">="],r=1;r<t.length;r++)if(!i(t[r],t[r-1]))return!1;return!0},function(){var t,e=n;for(t in e)if(a.call(e,t)&&n.function(e[t]))for(var i=e[t].api||["not","all","any"],r=0;r<i.length;r++)"not"===i[r]&&(n.not[t]=o(n[t])),"all"===i[r]&&(n.all[t]=function(r){return function(){for(var t=u(arguments),e=t.length,i=0;i<e;i++)if(!r.call(null,t[i]))return!1;return!0}}(n[t])),"any"===i[r]&&(n.any[t]=function(r){return function(){for(var t=u(arguments),e=t.length,i=0;i<e;i++)if(r.call(null,t[i]))return!0;return!1}}(n[t]))}(),n.setNamespace=function(){return m.is=g,this},n.setRegexp=function(t,e){for(var i in h)a.call(h,i)&&e===i&&(h[i]=t)},n},"function"==typeof define&&define.amd?define(function(){return(void 0).is=t()}):"object"===(void 0===i?"undefined":T(i))?e.exports=t():(void 0).is=t()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"pixi.js":[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("@pixi/polyfill");var r=t("@pixi/utils"),n=t("@pixi/accessibility"),a=t("@pixi/interaction"),o=t("@pixi/core"),s=t("@pixi/extract"),u=t("@pixi/loaders"),h=t("@pixi/compressed-textures"),l=t("@pixi/particle-container"),c=t("@pixi/prepare"),p=t("@pixi/spritesheet"),d=t("@pixi/sprite-tiling"),f=t("@pixi/text-bitmap"),m=t("@pixi/ticker"),v=t("@pixi/filter-alpha"),g=t("@pixi/filter-blur"),_=t("@pixi/filter-color-matrix"),y=t("@pixi/filter-displacement"),x=t("@pixi/filter-fxaa"),b=t("@pixi/filter-noise");t("@pixi/mixin-cache-as-bitmap"),t("@pixi/mixin-get-child-by-name"),t("@pixi/mixin-get-global-position");var T=t("@pixi/app"),E=t("@pixi/constants"),S=t("@pixi/display"),M=t("@pixi/graphics"),A=t("@pixi/math"),w=t("@pixi/mesh"),D=t("@pixi/mesh-extras"),R=t("@pixi/runner"),O=t("@pixi/sprite"),P=t("@pixi/sprite-animated"),C=t("@pixi/text"),I=t("@pixi/settings");function L(i){if(i&&i.__esModule)return i;var r=Object.create(null);return i&&Object.keys(i).forEach(function(t){var e;"default"!==t&&(e=Object.getOwnPropertyDescriptor(i,t),Object.defineProperty(r,t,e.get?e:{enumerable:!0,get:function(){return i[t]}}))}),r.default=i,r}r=L(r);o.extensions.add(n.AccessibilityManager,s.Extract,a.InteractionManager,l.ParticleRenderer,c.Prepare,o.BatchRenderer,d.TilingSpriteRenderer,f.BitmapFontLoader,h.CompressedTextureLoader,h.DDSLoader,h.KTXLoader,p.SpritesheetLoader,m.TickerPlugin,u.AppLoaderPlugin);b={AlphaFilter:v.AlphaFilter,BlurFilter:g.BlurFilter,BlurFilterPass:g.BlurFilterPass,ColorMatrixFilter:_.ColorMatrixFilter,DisplacementFilter:y.DisplacementFilter,FXAAFilter:x.FXAAFilter,NoiseFilter:b.NoiseFilter};i.utils=r,i.filters=b,Object.keys(n).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return n[t]}})}),Object.keys(a).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(o).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(s).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(u).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return u[t]}})}),Object.keys(h).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return h[t]}})}),Object.keys(l).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return l[t]}})}),Object.keys(c).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return c[t]}})}),Object.keys(p).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return p[t]}})}),Object.keys(d).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return d[t]}})}),Object.keys(f).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return f[t]}})}),Object.keys(m).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return m[t]}})}),Object.keys(T).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return T[t]}})}),Object.keys(E).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return E[t]}})}),Object.keys(S).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return S[t]}})}),Object.keys(M).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return M[t]}})}),Object.keys(A).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return A[t]}})}),Object.keys(w).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return w[t]}})}),Object.keys(D).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return D[t]}})}),Object.keys(R).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return R[t]}})}),Object.keys(O).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return O[t]}})}),Object.keys(P).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return P[t]}})}),Object.keys(C).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return C[t]}})}),Object.keys(I).forEach(function(t){"default"===t||i.hasOwnProperty(t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return I[t]}})})},{"@pixi/accessibility":1,"@pixi/app":2,"@pixi/compressed-textures":3,"@pixi/constants":4,"@pixi/core":5,"@pixi/display":6,"@pixi/extract":8,"@pixi/filter-alpha":9,"@pixi/filter-blur":10,"@pixi/filter-color-matrix":11,"@pixi/filter-displacement":12,"@pixi/filter-fxaa":13,"@pixi/filter-noise":14,"@pixi/graphics":15,"@pixi/interaction":16,"@pixi/loaders":17,"@pixi/math":18,"@pixi/mesh":20,"@pixi/mesh-extras":19,"@pixi/mixin-cache-as-bitmap":21,"@pixi/mixin-get-child-by-name":22,"@pixi/mixin-get-global-position":23,"@pixi/particle-container":24,"@pixi/polyfill":25,"@pixi/prepare":26,"@pixi/runner":27,"@pixi/settings":28,"@pixi/sprite":31,"@pixi/sprite-animated":29,"@pixi/sprite-tiling":30,"@pixi/spritesheet":32,"@pixi/text":34,"@pixi/text-bitmap":33,"@pixi/ticker":35,"@pixi/utils":36}],"three/examples/jsm/controls/OrbitControls":[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OrbitControls=i.MapControls=void 0;function r(t,e){var r,n,a,o,s,u;document,this.object=t,this.domElement=e,this.enabled=!0,this.target=new rt.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:rt.MOUSE.ROTATE,MIDDLE:rt.MOUSE.DOLLY,RIGHT:rt.MOUSE.PAN},this.touches={ONE:rt.TOUCH.ROTATE,TWO:rt.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},this.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(l),h.update(),d=p.NONE},this.update=(r=new rt.Vector3,n=(new rt.Quaternion).setFromUnitVectors(t.up,new rt.Vector3(0,1,0)),a=n.clone().inverse(),o=new rt.Vector3,s=new rt.Quaternion,u=2*Math.PI,function(){var t=h.object.position;r.copy(t).sub(h.target),r.applyQuaternion(n),m.setFromVector3(r),h.autoRotate&&d===p.NONE&&O(2*Math.PI/60/60*h.autoRotateSpeed),h.enableDamping?(m.theta+=v.theta*h.dampingFactor,m.phi+=v.phi*h.dampingFactor):(m.theta+=v.theta,m.phi+=v.phi);var e=h.minAzimuthAngle,i=h.maxAzimuthAngle;return isFinite(e)&&isFinite(i)&&(e<-Math.PI?e+=u:e>Math.PI&&(e-=u),i<-Math.PI?i+=u:i>Math.PI&&(i-=u),m.theta=e<i?Math.max(e,Math.min(i,m.theta)):m.theta>(e+i)/2?Math.max(e,m.theta):Math.min(i,m.theta)),m.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(h.minDistance,Math.min(h.maxDistance,m.radius)),!0===h.enableDamping?h.target.addScaledVector(_,h.dampingFactor):h.target.add(_),r.setFromSpherical(m),r.applyQuaternion(a),t.copy(h.target).add(r),h.object.lookAt(h.target),!0===h.enableDamping?(v.theta*=1-h.dampingFactor,v.phi*=1-h.dampingFactor,_.multiplyScalar(1-h.dampingFactor)):(v.set(0,0,0),_.set(0,0,0)),g=1,!!(y||o.distanceToSquared(h.object.position)>f||8*(1-s.dot(h.object.quaternion))>f)&&(h.dispatchEvent(l),o.copy(h.object.position),s.copy(h.object.quaternion),!(y=!1))}),this.dispose=function(){h.domElement.removeEventListener("contextmenu",it,!1),h.domElement.removeEventListener("pointerdown",q,!1),h.domElement.removeEventListener("wheel",K,!1),h.domElement.removeEventListener("touchstart",$,!1),h.domElement.removeEventListener("touchend",et,!1),h.domElement.removeEventListener("touchmove",tt,!1),h.domElement.ownerDocument.removeEventListener("pointermove",Z,!1),h.domElement.ownerDocument.removeEventListener("pointerup",J,!1),h.domElement.removeEventListener("keydown",Q,!1)};var h=this,l={type:"change"},i={type:"start"},c={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=p.NONE,f=1e-6,m=new rt.Spherical,v=new rt.Spherical,g=1,_=new rt.Vector3,y=!1,x=new rt.Vector2,b=new rt.Vector2,T=new rt.Vector2,E=new rt.Vector2,S=new rt.Vector2,M=new rt.Vector2,A=new rt.Vector2,w=new rt.Vector2,D=new rt.Vector2;function R(){return Math.pow(.95,h.zoomSpeed)}function O(t){v.theta-=t}function P(t){v.phi-=t}var C,I,L,N=(C=new rt.Vector3,function(t,e){C.setFromMatrixColumn(e,0),C.multiplyScalar(-t),_.add(C)}),F=(I=new rt.Vector3,function(t,e){!0===h.screenSpacePanning?I.setFromMatrixColumn(e,1):(I.setFromMatrixColumn(e,0),I.crossVectors(h.object.up,I)),I.multiplyScalar(t),_.add(I)}),B=(L=new rt.Vector3,function(t,e){var i,r=h.domElement;h.object.isPerspectiveCamera?(i=h.object.position,L.copy(i).sub(h.target),i=L.length(),i*=Math.tan(h.object.fov/2*Math.PI/180),N(2*t*i/r.clientHeight,h.object.matrix),F(2*e*i/r.clientHeight,h.object.matrix)):h.object.isOrthographicCamera?(N(t*(h.object.right-h.object.left)/h.object.zoom/r.clientWidth,h.object.matrix),F(e*(h.object.top-h.object.bottom)/h.object.zoom/r.clientHeight,h.object.matrix)):h.enablePan=!1});function U(t){h.object.isPerspectiveCamera?g/=t:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*t)),h.object.updateProjectionMatrix(),y=!0):h.enableZoom=!1}function G(t){h.object.isPerspectiveCamera?g*=t:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/t)),h.object.updateProjectionMatrix(),y=!0):h.enableZoom=!1}function k(t){x.set(t.clientX,t.clientY)}function z(t){E.set(t.clientX,t.clientY)}function j(t){var e;1==t.touches.length?x.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),t=.5*(t.touches[0].pageY+t.touches[1].pageY),x.set(e,t))}function H(t){var e;1==t.touches.length?E.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),t=.5*(t.touches[0].pageY+t.touches[1].pageY),E.set(e,t))}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,t=t.touches[0].pageY-t.touches[1].pageY,t=Math.sqrt(e*e+t*t);A.set(0,t)}function X(t){var e;1==t.touches.length?b.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),i=.5*(t.touches[0].pageY+t.touches[1].pageY),b.set(e,i)),T.subVectors(b,x).multiplyScalar(h.rotateSpeed);var i=h.domElement;O(2*Math.PI*T.x/i.clientHeight),P(2*Math.PI*T.y/i.clientHeight),x.copy(b)}function W(t){var e;1==t.touches.length?S.set(t.touches[0].pageX,t.touches[0].pageY):(e=.5*(t.touches[0].pageX+t.touches[1].pageX),t=.5*(t.touches[0].pageY+t.touches[1].pageY),S.set(e,t)),M.subVectors(S,E).multiplyScalar(h.panSpeed),B(M.x,M.y),E.copy(S)}function Y(t){var e=t.touches[0].pageX-t.touches[1].pageX,t=t.touches[0].pageY-t.touches[1].pageY,t=Math.sqrt(e*e+t*t);w.set(0,t),D.set(0,Math.pow(w.y/A.y,h.zoomSpeed)),U(D.y),A.copy(w)}function q(t){!1!==h.enabled&&"mouse"===t.pointerType&&function(t){var e;switch(t.preventDefault(),(h.domElement.focus?h.domElement:window).focus(),t.button){case 0:e=h.mouseButtons.LEFT;break;case 1:e=h.mouseButtons.MIDDLE;break;case 2:e=h.mouseButtons.RIGHT;break;default:e=-1}switch(e){case rt.MOUSE.DOLLY:if(!1===h.enableZoom)return;!function(t){A.set(t.clientX,t.clientY)}(t),d=p.DOLLY;break;case rt.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===h.enablePan)return;z(t),d=p.PAN}else{if(!1===h.enableRotate)return;k(t),d=p.ROTATE}break;case rt.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===h.enableRotate)return;k(t),d=p.ROTATE}else{if(!1===h.enablePan)return;z(t),d=p.PAN}break;default:d=p.NONE}d!==p.NONE&&(h.domElement.ownerDocument.addEventListener("pointermove",Z,!1),h.domElement.ownerDocument.addEventListener("pointerup",J,!1),h.dispatchEvent(i))}(t)}function Z(t){!1!==h.enabled&&"mouse"===t.pointerType&&function(t){if(!1!==h.enabled)switch(t.preventDefault(),d){case p.ROTATE:if(!1===h.enableRotate)return;!function(t){b.set(t.clientX,t.clientY),T.subVectors(b,x).multiplyScalar(h.rotateSpeed),t=h.domElement,O(2*Math.PI*T.x/t.clientHeight),P(2*Math.PI*T.y/t.clientHeight),x.copy(b),h.update()}(t);break;case p.DOLLY:if(!1===h.enableZoom)return;!function(t){w.set(t.clientX,t.clientY),D.subVectors(w,A),0<D.y?U(R()):D.y<0&&G(R()),A.copy(w),h.update()}(t);break;case p.PAN:if(!1===h.enablePan)return;!function(t){S.set(t.clientX,t.clientY),M.subVectors(S,E).multiplyScalar(h.panSpeed),B(M.x,M.y),E.copy(S),h.update()}(t)}}(t)}function J(t){!1!==h.enabled&&"mouse"===t.pointerType&&!1!==h.enabled&&(h.domElement.ownerDocument.removeEventListener("pointermove",Z,!1),h.domElement.ownerDocument.removeEventListener("pointerup",J,!1),h.dispatchEvent(c),d=p.NONE)}function K(t){!1===h.enabled||!1===h.enableZoom||d!==p.NONE&&d!==p.ROTATE||(t.preventDefault(),t.stopPropagation(),h.dispatchEvent(i),(t=t).deltaY<0?G(R()):0<t.deltaY&&U(R()),h.update(),h.dispatchEvent(c))}function Q(t){!1!==h.enabled&&!1!==h.enableKeys&&!1!==h.enablePan&&function(t){var e=!1;switch(t.keyCode){case h.keys.UP:B(0,h.keyPanSpeed),e=!0;break;case h.keys.BOTTOM:B(0,-h.keyPanSpeed),e=!0;break;case h.keys.LEFT:B(h.keyPanSpeed,0),e=!0;break;case h.keys.RIGHT:B(-h.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),h.update())}(t)}function $(t){if(!1!==h.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(h.touches.ONE){case rt.TOUCH.ROTATE:if(!1===h.enableRotate)return;j(t),d=p.TOUCH_ROTATE;break;case rt.TOUCH.PAN:if(!1===h.enablePan)return;H(t),d=p.TOUCH_PAN;break;default:d=p.NONE}break;case 2:switch(h.touches.TWO){case rt.TOUCH.DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;e=t,h.enableZoom&&V(e),h.enablePan&&H(e),d=p.TOUCH_DOLLY_PAN;break;case rt.TOUCH.DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;e=t,h.enableZoom&&V(e),h.enableRotate&&j(e),d=p.TOUCH_DOLLY_ROTATE;break;default:d=p.NONE}break;default:d=p.NONE}var e;d!==p.NONE&&h.dispatchEvent(i)}}function tt(t){var e;if(!1!==h.enabled)switch(t.preventDefault(),t.stopPropagation(),d){case p.TOUCH_ROTATE:if(!1===h.enableRotate)return;X(t),h.update();break;case p.TOUCH_PAN:if(!1===h.enablePan)return;W(t),h.update();break;case p.TOUCH_DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;e=t,h.enableZoom&&Y(e),h.enablePan&&W(e),h.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;e=t,h.enableZoom&&Y(e),h.enableRotate&&X(e),h.update();break;default:d=p.NONE}}function et(t){!1!==h.enabled&&(h.dispatchEvent(c),d=p.NONE)}function it(t){!1!==h.enabled&&t.preventDefault()}h.domElement.addEventListener("contextmenu",it,!1),h.domElement.addEventListener("pointerdown",q,!1),h.domElement.addEventListener("wheel",K,!1),h.domElement.addEventListener("touchstart",$,!1),h.domElement.addEventListener("touchend",et,!1),h.domElement.addEventListener("touchmove",tt,!1),h.domElement.addEventListener("keydown",Q,!1),-1===h.domElement.tabIndex&&(h.domElement.tabIndex=0),this.update()}var rt=t("../../../build/three.module.js");((i.OrbitControls=r).prototype=Object.create(rt.EventDispatcher.prototype)).constructor=r;t=function(t,e){r.call(this,t,e),this.screenSpacePanning=!1,this.mouseButtons.LEFT=rt.MOUSE.PAN,this.mouseButtons.RIGHT=rt.MOUSE.ROTATE,this.touches.ONE=rt.TOUCH.PAN,this.touches.TWO=rt.TOUCH.DOLLY_ROTATE};((i.MapControls=t).prototype=Object.create(rt.EventDispatcher.prototype)).constructor=t},{"../../../build/three.module.js":47}],"three/examples/jsm/loaders/DRACOLoader":[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DRACOLoader=void 0;var o=t("../../../build/three.module.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){o.Loader.call(this,t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}(i.DRACOLoader=h).prototype=Object.assign(Object.create(o.Loader.prototype),{constructor:h,setDecoderPath:function(t){return this.decoderPath=t,this},setDecoderConfig:function(t){return this.decoderConfig=t,this},setWorkerLimit:function(t){return this.workerLimit=t,this},setVerbosity:function(){},setDrawMode:function(){},setSkipDequantization:function(){},load:function(t,i,e,r){var n=this,a=new o.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),"use-credentials"===this.crossOrigin&&a.setWithCredentials(!0),a.load(t,function(t){var e={attributeIDs:n.defaultAttributeIDs,attributeTypes:n.defaultAttributeTypes,useUniqueIDs:!1};n.decodeGeometry(t,e).then(i).catch(r)},e,r)},decodeDracoFile:function(t,e,i,r){i={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(t,i).then(e)},decodeGeometry:function(i,r){var t,e=this;for(t in r.attributeTypes){var n=r.attributeTypes[t];void 0!==n.BYTES_PER_ELEMENT&&(r.attributeTypes[t]=n.name)}var a,o=JSON.stringify(r);if(h.taskCache.has(i)){var s=h.taskCache.get(i);if(s.key===o)return s.promise;if(0===i.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,s=i.byteLength,s=this._getWorker(u,s).then(function(t){return a=t,new Promise(function(t,e){a._callbacks[u]={resolve:t,reject:e},a.postMessage({type:"decode",id:u,taskConfig:r,buffer:i},[i])})}).then(function(t){return e._createGeometry(t.geometry)});return s.catch(function(){return!0}).then(function(){a&&u&&e._releaseTask(a,u)}),h.taskCache.set(i,{key:o,promise:s}),s},_createGeometry:function(t){var e=new o.BufferGeometry;t.index&&e.setIndex(new o.BufferAttribute(t.index.array,1));for(var i=0;i<t.attributes.length;i++){var r=t.attributes[i],n=r.name,a=r.array,r=r.itemSize;e.setAttribute(n,new o.BufferAttribute(a,r))}return e},_loadLibrary:function(i,t){var r=new o.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),new Promise(function(t,e){r.load(i,t,void 0,e)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){var i=this;if(this.decoderPending)return this.decoderPending;var r="object"!==("undefined"==typeof WebAssembly?"undefined":n(WebAssembly))||"js"===this.decoderConfig.type,t=[];return r?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(function(t){var e=t[0];r||(i.decoderConfig.wasmBinary=t[1]);t=h.DRACOWorker.toString(),t=["/* draco decoder */",e,"","/* worker */",t.substring(t.indexOf("{")+1,t.lastIndexOf("}"))].join("\n");i.workerSourceURL=URL.createObjectURL(new Blob([t]))}),this.decoderPending},_getWorker:function(t,e){var r=this;return this._initDecoder().then(function(){var i;return r.workerPool.length<r.workerLimit?((i=new Worker(r.workerSourceURL))._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:r.decoderConfig}),i.onmessage=function(t){var e=t.data;switch(e.type){case"decode":i._callbacks[e.id].resolve(e);break;case"error":i._callbacks[e.id].reject(e)}},r.workerPool.push(i)):r.workerPool.sort(function(t,e){return t._taskLoad>e._taskLoad?-1:1}),(i=r.workerPool[r.workerPool.length-1])._taskCosts[t]=e,i._taskLoad+=e,i})},_releaseTask:function(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]},debug:function(){},dispose:function(){for(var t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}),h.DRACOWorker=function(){var i,e;onmessage=function(t){var a=t.data;switch(a.type){case"init":i=a.decoderConfig,e=new Promise(function(e){i.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(i)});break;case"decode":var o=a.buffer,s=a.taskConfig;e.then(function(t){var e=t.draco,i=new e.Decoder,t=new e.DecoderBuffer;t.Init(new Int8Array(o),o.byteLength);try{var r=function(t,e,i,r){var n,a,o=r.attributeIDs,s=r.attributeTypes,u=e.GetEncodedGeometryType(i);if(u===t.TRIANGULAR_MESH)n=new t.Mesh,a=e.DecodeBufferToMesh(i,n);else{if(u!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");n=new t.PointCloud,a=e.DecodeBufferToPointCloud(i,n)}if(!a.ok()||0===n.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var h,l,c,p={index:null,attributes:[]};for(h in o){var d=self[s[h]];if(r.useUniqueIDs)c=o[h],l=e.GetAttributeByUniqueId(n,c);else{if(-1===(c=e.GetAttributeId(n,t[o[h]])))continue;l=e.GetAttribute(n,c)}p.attributes.push(function(t,e,i,r,n,a){var o,s,u=a.num_components(),h=i.num_points()*u;switch(n){case Float32Array:o=new t.DracoFloat32Array,e.GetAttributeFloatForAllPoints(i,a,o),s=new Float32Array(h);break;case Int8Array:o=new t.DracoInt8Array,e.GetAttributeInt8ForAllPoints(i,a,o),s=new Int8Array(h);break;case Int16Array:o=new t.DracoInt16Array,e.GetAttributeInt16ForAllPoints(i,a,o),s=new Int16Array(h);break;case Int32Array:o=new t.DracoInt32Array,e.GetAttributeInt32ForAllPoints(i,a,o),s=new Int32Array(h);break;case Uint8Array:o=new t.DracoUInt8Array,e.GetAttributeUInt8ForAllPoints(i,a,o),s=new Uint8Array(h);break;case Uint16Array:o=new t.DracoUInt16Array,e.GetAttributeUInt16ForAllPoints(i,a,o),s=new Uint16Array(h);break;case Uint32Array:o=new t.DracoUInt32Array,e.GetAttributeUInt32ForAllPoints(i,a,o),s=new Uint32Array(h);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var l=0;l<h;l++)s[l]=o.GetValue(l);return t.destroy(o),{name:r,array:s,itemSize:u}}(t,e,n,h,d,l))}if(u===t.TRIANGULAR_MESH){for(var f=n.num_faces(),m=new Uint32Array(3*f),v=new t.DracoInt32Array,g=0;g<f;++g){e.GetFaceFromMesh(n,g,v);for(var _=0;_<3;++_)m[3*g+_]=v.GetValue(_)}p.index={array:m,itemSize:1},t.destroy(v)}return t.destroy(n),p}(e,i,t,s),n=r.attributes.map(function(t){return t.array.buffer});r.index&&n.push(r.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:r},n)}catch(t){self.postMessage({type:"error",id:a.id,error:t.message})}finally{e.destroy(t),e.destroy(i)}})}}},h.taskCache=new WeakMap,h.setDecoderPath=function(){},h.setDecoderConfig=function(){},h.releaseDecoderModule=function(){},h.getDecoderModule=function(){}},{"../../../build/three.module.js":47}]},{},[]);